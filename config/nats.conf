# Titan NATS Configuration
# Security Hardening: ACLs enabled

port: 4222
http_port: 8222

jetstream {
    store_dir: "/data/jetstream"
    max_mem: 1G
    max_file: 20G
}

# Authorization for Default Account (if needed) or System
authorization {
    # System User (Platform Admin)
    users = [
        { user: "sys", password: "sys_password", permissions: { publish: ">", subscribe: ">" } }
    ]
}

# Service Accounts
accounts {
    TITAN {
        jetstream: enabled
        users = [
            # Brain: Master Orchestrator (Full Access)
            { user: "brain", password: "brain_password", permissions: { publish: ">", subscribe: ">" } },
            
            # Execution: Can Publish Fills, Subscribe to Commands
            { 
                user: "execution", 
                password: "execution_password", 
                permissions: { 
                    publish: ["TITAN.EVT.FILL", "TITAN.EVT.EXEC.>"], 
                    subscribe: ["TITAN.CMD.EXECUTE.>"] 
                } 
            },
            
            # Scavenger (Phase 1): Can Publish Signals, Cannot Execute
            { 
                user: "scavenger", 
                password: "scavenger_password", 
                permissions: { 
                    publish: ["TITAN.EVT.SCAVENGER.SIGNAL"], 
                    subscribe: [] 
                } 
            }
        ]
    }
}
