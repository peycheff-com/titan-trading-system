# ============================================================================
# TITAN TRADING SYSTEM - PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================

# ============================================================================
# SYSTEM-WIDE SETTINGS
# ============================================================================
NODE_ENV=production
LOG_LEVEL=info
TZ=UTC
PRODUCTION_MODE=true

# ============================================================================
# SECURITY & AUTHENTICATION
# ============================================================================
TITAN_MASTER_PASSWORD=__CHANGE_ME__
HMAC_SECRET=__CHANGE_ME__
WEBHOOK_SECRET=__CHANGE_ME__

# ============================================================================
# EXCHANGE API CREDENTIALS
# ============================================================================
BINANCE_API_KEY=__CHANGE_ME__
BINANCE_API_SECRET=__CHANGE_ME__

BYBIT_API_KEY=__CHANGE_ME__
BYBIT_API_SECRET=__CHANGE_ME__
BYBIT_TESTNET=false
BYBIT_CATEGORY=linear
BYBIT_RATE_LIMIT_RPS=10
BYBIT_MAX_RETRIES=3
BYBIT_ACCOUNT_CACHE_TTL=5000

# Legacy broker credentials (for compatibility)
BROKER_API_KEY=__CHANGE_ME__
BROKER_API_SECRET=__CHANGE_ME__

# ============================================================================
# TRADING & RISK PARAMETERS
# ============================================================================
INITIAL_EQUITY=20
USE_MOCK_BROKER=false

# Risk parameters
MAX_RISK_PCT=0.03
PHASE_1_RISK_PCT=0.03
PHASE_2_RISK_PCT=.024

# Fee configuration
MAKER_FEE_PCT=0.0002
TAKER_FEE_PCT=0.0006

# Position sizing limits
MAX_POSITION_SIZE_PCT=0.1
MAX_TOTAL_LEVERAGE=20

# ============================================================================
# CIRCUIT BREAKER & SAFETY SYSTEMS
# ============================================================================
MAX_DAILY_DRAWDOWN_PCT=0.07
MAX_WEEKLY_DRAWDOWN_PCT=.105
BREAKER_MAX_DAILY_DRAWDOWN=0.07

# Minimum equity thresholds
BREAKER_MIN_EQUITY=16.0
CAPITAL_RESERVE_LIMIT=200

# Consecutive loss protection
MAX_CONSECUTIVE_LOSSES=2
BREAKER_CONSECUTIVE_LOSS_LIMIT=2
BREAKER_CONSECUTIVE_LOSS_WINDOW=3600000
CIRCUIT_BREAKER_COOLDOWN_HOURS=4

# Safety thresholds
ZSCORE_SAFETY_THRESHOLD=-2.0
DRAWDOWN_VELOCITY_THRESHOLD=0.02
EMERGENCY_STOP_LOSS_PCT=0.1

# Trading frequency limits
MIN_TRADE_INTERVAL_MS=30000
MAX_TRADES_PER_HOUR=10
MAX_TRADES_PER_DAY=50

# Heartbeat & monitoring
HEARTBEAT_TIMEOUT_MS=300000

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Primary Truth Ledger (Postgres)
DATABASE_TYPE=postgres
DATABASE_URL=postgres://postgres:password@localhost:5432/titan_brain_production

# Legacy/Individual Config (Optional, DATABASE_URL takes precedence if supported)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=titan_brain_production
DB_USER=postgres
DB_PASSWORD=password
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_URL=redis://localhost:6379
REDIS_REQUIRED=true
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000
IDEMPOTENCY_TTL=300

# ============================================================================
# SERVER PORTS & NETWORKING
# ============================================================================
TITAN_BRAIN_PORT=3100
TITAN_EXECUTION_PORT=3002
TITAN_CONSOLE_PORT=3001
TITAN_SCAVENGER_PORT=8081

SERVER_HOST=0.0.0.0
SERVER_PORT=3100
PORT=3002
HOST=0.0.0.0

CORS_ORIGINS=http://localhost:3001,https://your-domain.com
RATE_LIMIT_PER_SEC=12

# ============================================================================
# NOTIFICATIONS
# ============================================================================
TELEGRAM_BOT_TOKEN=__CHANGE_ME__
TELEGRAM_CHAT_ID=__CHANGE_ME__

# ============================================================================
# INTEGRATION URLS
# ============================================================================
EXECUTION_ENGINE_URL=http://localhost:3002
CONSOLE_URL=http://localhost:3002
NEXT_PUBLIC_EXECUTION_URL=http://localhost:3002
NEXT_PUBLIC_BRAIN_URL=http://localhost:3100

# ============================================================================
# PRODUCTION SAFETY FLAGS
# ============================================================================
FUNDING_GREED_THRESHOLD=100
FUNDING_HIGH_GREED_THRESHOLD=50
FUNDING_FEAR_THRESHOLD=-50

# ============================================================================
# BRAIN SERVICE CONFIGURATION
# ============================================================================
BRAIN_SIGNAL_TIMEOUT=100
BRAIN_METRIC_UPDATE_INTERVAL=60000
BRAIN_DASHBOARD_CACHE_TTL=5000
BRAIN_MAX_QUEUE_SIZE=100

# Capital flow settings
CAPITAL_SWEEP_THRESHOLD=1.2
CAPITAL_SWEEP_SCHEDULE="0 0 * * *"
CAPITAL_MAX_RETRIES=3
CAPITAL_RETRY_BASE_DELAY=1000

# ============================================================================
# EXECUTION SERVICE CONFIGURATION
# ============================================================================
WS_ORDERBOOK_URL=wss://stream.bybit.com/v5/public/linear
WS_CACHE_MAX_AGE_MS=100

# Validation thresholds
MIN_STRUCTURE_THRESHOLD=60
MAX_SPREAD_PCT=0.001
MAX_SLIPPAGE_PCT=0.002

# Replay guard settings
MAX_TIMESTAMP_DRIFT_MS=5000
SIGNAL_CACHE_TTL_MS=300000
