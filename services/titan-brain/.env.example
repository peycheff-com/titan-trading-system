# ============================================================================
# Titan Brain Environment Configuration
# ============================================================================
# Copy this file to .env and configure your settings
# Environment variables override config file settings

# ============================================================================
# General Settings
# ============================================================================

# Node environment (development, production, test)
NODE_ENV=development

# Path to JSON configuration file (optional)
# CONFIG_FILE=./config.json

# Initial equity (starting capital in USD)
INITIAL_EQUITY=200

# Logging level (debug, info, warn, error)
LOG_LEVEL=info

# ============================================================================
# Brain Core Settings
# ============================================================================

# Maximum signal processing latency in milliseconds (default: 100)
# BRAIN_SIGNAL_TIMEOUT=100

# Metric update interval in milliseconds (default: 60000 = 1 minute)
# BRAIN_METRIC_UPDATE_INTERVAL=60000

# Dashboard cache TTL in milliseconds (default: 5000 = 5 seconds)
# BRAIN_DASHBOARD_CACHE_TTL=5000

# Maximum signal queue size (default: 100)
# BRAIN_MAX_QUEUE_SIZE=100

# ============================================================================
# Allocation Engine Settings
# ============================================================================

# Equity transition points for phase allocation
# ALLOCATION_START_P2=1500    # Phase 2 starts at $1,500
# ALLOCATION_FULL_P2=5000     # Phase 2 full allocation at $5,000
# ALLOCATION_START_P3=25000   # Phase 3 starts at $25,000

# Leverage caps per equity tier
# LEVERAGE_CAP_MICRO=20       # < $1,500: 20x max
# LEVERAGE_CAP_SMALL=10       # $1,500 - $5,000: 10x max
# LEVERAGE_CAP_MEDIUM=5       # $5,000 - $25,000: 5x max
# LEVERAGE_CAP_LARGE=3        # $25,000 - $50,000: 3x max
# LEVERAGE_CAP_INSTITUTIONAL=2 # > $50,000: 2x max

# ============================================================================
# Performance Tracker Settings
# ============================================================================

# Rolling window for Sharpe ratio calculation (days)
# PERFORMANCE_WINDOW_DAYS=7

# Minimum trades required before applying modifiers
# PERFORMANCE_MIN_TRADE_COUNT=10

# Malus multiplier for underperforming phases (0-1)
# PERFORMANCE_MALUS_MULTIPLIER=0.5

# Bonus multiplier for outperforming phases (1-5)
# PERFORMANCE_BONUS_MULTIPLIER=1.2

# Sharpe ratio threshold for malus penalty
# PERFORMANCE_MALUS_THRESHOLD=0

# Sharpe ratio threshold for bonus multiplier
# PERFORMANCE_BONUS_THRESHOLD=2.0

# ============================================================================
# Risk Guardian Settings
# ============================================================================

# Maximum correlation threshold for position veto (0-1)
# RISK_MAX_CORRELATION=0.8

# Position size reduction for high correlation (0-1)
# RISK_CORRELATION_PENALTY=0.5

# Portfolio beta update interval in milliseconds
# RISK_BETA_UPDATE_INTERVAL=300000

# Correlation matrix update interval in milliseconds
# RISK_CORRELATION_UPDATE_INTERVAL=300000

# ============================================================================
# Capital Flow Settings
# ============================================================================

# Sweep threshold (1.2 = 20% excess triggers sweep)
# CAPITAL_SWEEP_THRESHOLD=1.2

# Minimum reserve limit in USD (never swept)
# CAPITAL_RESERVE_LIMIT=200

# Sweep schedule (cron expression, default: daily at midnight UTC)
# CAPITAL_SWEEP_SCHEDULE=0 0 * * *

# Maximum retry attempts for failed sweeps
# CAPITAL_MAX_RETRIES=3

# Base delay for retry backoff in milliseconds
# CAPITAL_RETRY_BASE_DELAY=1000

# ============================================================================
# Circuit Breaker Settings
# ============================================================================

# Maximum daily drawdown before circuit breaker triggers (0-1)
# BREAKER_MAX_DAILY_DRAWDOWN=0.15

# Minimum equity before circuit breaker triggers (USD)
# BREAKER_MIN_EQUITY=150

# Consecutive losses before soft pause
# BREAKER_CONSECUTIVE_LOSS_LIMIT=3

# Time window for consecutive loss detection (milliseconds)
# BREAKER_CONSECUTIVE_LOSS_WINDOW=3600000

# Cooldown period after soft pause (minutes)
# BREAKER_COOLDOWN_MINUTES=30

# ============================================================================
# Database Configuration
# Primary: TITAN_DB_* variables (Self-hosted)
TITAN_DB_HOST=localhost
TITAN_DB_PORT=5432
TITAN_DB_USER=postgres
TITAN_DB_PASSWORD=postgres
TITAN_DB_NAME=titan_brain

# Fallback: Generic DB variables or Shared Config
DB_HOST=localhost
DB_PORT=5432
# ...
 (PostgreSQL)
# ============================================================================

# TITAN_DB_* variables take precedence if set (used in production docker-compose)
TITAN_DB_HOST=
TITAN_DB_PORT=
TITAN_DB_NAME=
TITAN_DB_USER=
TITAN_DB_PASSWORD=

# Fallback standard DB variables
DB_HOST=localhost
DB_PORT=5432
DB_NAME=titan_brain
DB_USER=postgres
DB_PASSWORD=postgres

# Connection pool settings
# DB_MAX_CONNECTIONS=20
# DB_IDLE_TIMEOUT=30000

# ============================================================================
# Redis Configuration (Optional - for signal queue)
# ============================================================================

# Redis connection URL (runs without if not available)
REDIS_URL=redis://localhost:6379

# Redis retry settings
# REDIS_MAX_RETRIES=3
# REDIS_RETRY_DELAY=1000

# ============================================================================
# Server Configuration
# ============================================================================

SERVER_HOST=0.0.0.0
SERVER_PORT=3100

# CORS allowed origins (comma-separated)
# CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ============================================================================
# Webhook Security (Optional)
# ============================================================================

# HMAC secret for webhook signature verification
# WEBHOOK_SECRET=your_webhook_secret_here

# ============================================================================
# Telegram Notifications (Optional)
# ============================================================================

# TELEGRAM_BOT_TOKEN=your_bot_token
# TELEGRAM_CHAT_ID=your_chat_id

# ============================================================================
# Email Notifications (Optional)
# ============================================================================

# EMAIL_SMTP_HOST=smtp.example.com
# EMAIL_SMTP_PORT=587
# EMAIL_FROM=titan@example.com
# EMAIL_TO=alerts@example.com,admin@example.com

# ============================================================================
# Exchange API Keys (for capital flow operations)
# ============================================================================

# BYBIT_API_KEY=your_api_key
# BYBIT_API_SECRET=your_api_secret

# ============================================================================
# Integration Services
# ============================================================================

# Execution Engine URL (for signal forwarding)
# EXECUTION_ENGINE_URL=http://localhost:3000

# Phase 1 (Scavenger) webhook URL for notifications
# PHASE1_WEBHOOK_URL=http://localhost:3001

# Phase 2 (Hunter) webhook URL for notifications
# PHASE2_WEBHOOK_URL=http://localhost:3002

# Phase 3 (Sentinel) webhook URL for notifications
# PHASE3_WEBHOOK_URL=http://localhost:3003
