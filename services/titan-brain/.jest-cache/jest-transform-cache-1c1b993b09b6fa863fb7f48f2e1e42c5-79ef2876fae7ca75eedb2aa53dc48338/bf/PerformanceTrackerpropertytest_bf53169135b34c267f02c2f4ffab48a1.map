{"file":"/Users/ivan/Code/trading/titan/services/titan-brain/tests/property/PerformanceTracker.property.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-brain/tests/property/PerformanceTracker.property.test.ts"],"sourcesContent":["/**\n * Property-Based Tests for PerformanceTracker\n * \n * Tests universal properties that should hold across all inputs\n */\n\nimport * as fc from 'fast-check';\nimport { PerformanceTracker } from '../../src/engine/PerformanceTracker';\nimport { PerformanceTrackerConfig } from '../../src/types/index';\n\n// Test configuration\nconst testConfig: PerformanceTrackerConfig = {\n  windowDays: 7,\n  minTradeCount: 10,\n  malusThreshold: 0,\n  bonusThreshold: 2.0,\n  malusMultiplier: 0.5,\n  bonusMultiplier: 1.2\n};\n\ndescribe('PerformanceTracker Property Tests', () => {\n  let tracker: PerformanceTracker;\n\n  beforeEach(() => {\n    tracker = new PerformanceTracker(testConfig);\n  });\n\n  describe('Property 3: Performance Modifier Bounds', () => {\n    /**\n     * **Validates: Requirements 2.3, 2.4**\n     * \n     * For any Sharpe ratio value, the performance modifier should always be within bounds:\n     * - Minimum: malusMultiplier (0.5)\n     * - Maximum: bonusMultiplier (1.2)\n     * - Never outside the range [0.5, 1.2]\n     */\n    it('should always return modifier within bounds [0.5, 1.2]', () => {\n      fc.assert(\n        fc.property(\n          fc.float({ min: Math.fround(-10), max: Math.fround(10), noNaN: true }),\n          (sharpeRatio) => {\n            const modifier = tracker.calculateModifier(sharpeRatio);\n            \n            // Property: Modifier must be within bounds\n            expect(modifier).toBeGreaterThanOrEqual(testConfig.malusMultiplier);\n            expect(modifier).toBeLessThanOrEqual(testConfig.bonusMultiplier);\n            \n            // Property: Modifier must be one of three values\n            const validModifiers = [\n              testConfig.malusMultiplier,  // 0.5\n              1.0,                         // Normal\n              testConfig.bonusMultiplier   // 1.2\n            ];\n            expect(validModifiers).toContain(modifier);\n          }\n        ),\n        { numRuns: 1000 }\n      );\n    });\n\n    /**\n     * **Validates: Requirements 2.3**\n     * \n     * For any Sharpe ratio below the malus threshold (0), \n     * the modifier should always be the malus multiplier (0.5)\n     */\n    it('should apply malus multiplier for all negative Sharpe ratios', () => {\n      fc.assert(\n        fc.property(\n          fc.float({ min: Math.fround(-100), max: Math.fround(-0.001), noNaN: true }),\n          (negativeSharpe) => {\n            const modifier = tracker.calculateModifier(negativeSharpe);\n            \n            // Property: All negative Sharpe ratios get malus penalty\n            expect(modifier).toBe(testConfig.malusMultiplier);\n          }\n        ),\n        { numRuns: 500 }\n      );\n    });\n\n    /**\n     * **Validates: Requirements 2.4**\n     * \n     * For any Sharpe ratio above the bonus threshold (2.0),\n     * the modifier should always be the bonus multiplier (1.2)\n     */\n    it('should apply bonus multiplier for all high Sharpe ratios', () => {\n      fc.assert(\n        fc.property(\n          fc.float({ min: Math.fround(2.001), max: Math.fround(100), noNaN: true }),\n          (highSharpe) => {\n            const modifier = tracker.calculateModifier(highSharpe);\n            \n            // Property: All high Sharpe ratios get bonus multiplier\n            expect(modifier).toBe(testConfig.bonusMultiplier);\n          }\n        ),\n        { numRuns: 500 }\n      );\n    });\n\n    /**\n     * **Validates: Requirements 2.3, 2.4**\n     * \n     * For any Sharpe ratio in the normal range [0, 2.0],\n     * the modifier should always be 1.0 (no modification)\n     */\n    it('should return 1.0 for normal Sharpe ratios', () => {\n      fc.assert(\n        fc.property(\n          fc.float({ min: Math.fround(0), max: Math.fround(2.0), noNaN: true }),\n          (normalSharpe) => {\n            const modifier = tracker.calculateModifier(normalSharpe);\n            \n            // Property: Normal Sharpe ratios get no modification\n            expect(modifier).toBe(1.0);\n          }\n        ),\n        { numRuns: 500 }\n      );\n    });\n\n    /**\n     * **Validates: Requirements 2.3, 2.4**\n     * \n     * The modifier function should be monotonic in the sense that:\n     * - All values below threshold get same (minimum) modifier\n     * - All values above threshold get same (maximum) modifier\n     * - All values in between get same (normal) modifier\n     */\n    it('should be piecewise constant with correct thresholds', () => {\n      fc.assert(\n        fc.property(\n          fc.tuple(\n            fc.float({ min: Math.fround(-10), max: Math.fround(10), noNaN: true }),\n            fc.float({ min: Math.fround(-10), max: Math.fround(10), noNaN: true })\n          ),\n          ([sharpe1, sharpe2]) => {\n            const modifier1 = tracker.calculateModifier(sharpe1);\n            const modifier2 = tracker.calculateModifier(sharpe2);\n            \n            // Property: Same category should give same modifier\n            const category1 = sharpe1 < 0 ? 'malus' : sharpe1 > 2.0 ? 'bonus' : 'normal';\n            const category2 = sharpe2 < 0 ? 'malus' : sharpe2 > 2.0 ? 'bonus' : 'normal';\n            \n            if (category1 === category2) {\n              expect(modifier1).toBe(modifier2);\n            }\n          }\n        ),\n        { numRuns: 1000 }\n      );\n    });\n\n    /**\n     * **Validates: Requirements 2.3, 2.4**\n     * \n     * Test boundary conditions at exactly the threshold values\n     */\n    it('should handle boundary conditions correctly', () => {\n      // Exactly at malus threshold (0)\n      expect(tracker.calculateModifier(0)).toBe(1.0);\n      expect(tracker.calculateModifier(-0.0)).toBe(1.0);\n      \n      // Just below malus threshold\n      expect(tracker.calculateModifier(-0.000001)).toBe(testConfig.malusMultiplier);\n      \n      // Exactly at bonus threshold (2.0)\n      expect(tracker.calculateModifier(2.0)).toBe(1.0);\n      \n      // Just above bonus threshold\n      expect(tracker.calculateModifier(2.000001)).toBe(testConfig.bonusMultiplier);\n    });\n\n    /**\n     * **Validates: Requirements 2.3, 2.4**\n     * \n     * Test extreme values to ensure no overflow or underflow\n     */\n    it('should handle extreme Sharpe ratio values', () => {\n      const extremeValues = [\n        -Infinity, -1000, -100, -10,\n        10, 100, 1000, Infinity\n      ];\n      \n      extremeValues.forEach(sharpe => {\n        if (isFinite(sharpe)) {\n          const modifier = tracker.calculateModifier(sharpe);\n          \n          // Should still be within bounds\n          expect(modifier).toBeGreaterThanOrEqual(testConfig.malusMultiplier);\n          expect(modifier).toBeLessThanOrEqual(testConfig.bonusMultiplier);\n          expect(isFinite(modifier)).toBe(true);\n        }\n      });\n    });\n  });\n\n  describe('Sharpe Ratio Calculation Properties', () => {\n    /**\n     * Property: Sharpe ratio should be 0 for insufficient data\n     */\n    it('should return 0 for insufficient PnL data', () => {\n      fc.assert(\n        fc.property(\n          fc.array(fc.float({ min: Math.fround(-1000), max: Math.fround(1000), noNaN: true }), { maxLength: 1 }),\n          (pnlValues) => {\n            const sharpe = tracker.calculateSharpeRatio(pnlValues);\n            expect(sharpe).toBe(0);\n          }\n        ),\n        { numRuns: 100 }\n      );\n    });\n\n    /**\n     * Property: Sharpe ratio should be finite for valid data\n     */\n    it('should return finite Sharpe ratio for valid PnL data', () => {\n      fc.assert(\n        fc.property(\n          fc.array(\n            fc.float({ min: Math.fround(-1000), max: Math.fround(1000), noNaN: true }),\n            { minLength: 2, maxLength: 100 }\n          ),\n          (pnlValues) => {\n            // Ensure we have some variation to avoid zero std dev\n            if (pnlValues.length >= 2) {\n              pnlValues[0] = 100;  // Force some variation\n              pnlValues[1] = -50;\n            }\n            \n            const sharpe = tracker.calculateSharpeRatio(pnlValues);\n            expect(isFinite(sharpe)).toBe(true);\n          }\n        ),\n        { numRuns: 500 }\n      );\n    });\n\n    /**\n     * Property: Sharpe ratio should handle zero standard deviation\n     */\n    it('should handle zero standard deviation correctly', () => {\n      // All positive returns\n      const allPositive = [100, 100, 100, 100];\n      const sharpePositive = tracker.calculateSharpeRatio(allPositive);\n      expect(sharpePositive).toBe(3.0);\n      \n      // All negative returns\n      const allNegative = [-100, -100, -100, -100];\n      const sharpeNegative = tracker.calculateSharpeRatio(allNegative);\n      expect(sharpeNegative).toBe(-3.0);\n      \n      // All zero returns\n      const allZero = [0, 0, 0, 0];\n      const sharpeZero = tracker.calculateSharpeRatio(allZero);\n      expect(sharpeZero).toBe(0);\n    });\n  });\n\n  describe('Configuration Validation Properties', () => {\n    /**\n     * Property: Configuration values should be used correctly\n     */\n    it('should use configuration values correctly', () => {\n      const customConfig: PerformanceTrackerConfig = {\n        windowDays: 14,\n        minTradeCount: 20,\n        malusThreshold: -0.5,\n        bonusThreshold: 1.5,\n        malusMultiplier: 0.3,\n        bonusMultiplier: 1.5\n      };\n      \n      const customTracker = new PerformanceTracker(customConfig);\n      \n      // Test custom thresholds\n      expect(customTracker.calculateModifier(-0.6)).toBe(0.3);  // Below custom malus threshold\n      expect(customTracker.calculateModifier(-0.4)).toBe(1.0);  // Above custom malus threshold\n      expect(customTracker.calculateModifier(1.4)).toBe(1.0);   // Below custom bonus threshold\n      expect(customTracker.calculateModifier(1.6)).toBe(1.5);   // Above custom bonus threshold\n    });\n  });\n});"],"version":3}