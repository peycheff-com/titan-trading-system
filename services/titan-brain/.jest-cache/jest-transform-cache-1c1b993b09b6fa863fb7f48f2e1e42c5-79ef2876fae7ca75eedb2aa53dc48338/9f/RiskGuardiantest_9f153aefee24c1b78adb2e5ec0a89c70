ecf1b97e8b42f880ec5041a358ac17bc
"use strict";
/**
 * Unit Tests for RiskGuardian
 *
 * Tests leverage calculation, correlation calculation, Phase 3 hedge auto-approval,
 * and high correlation size reduction.
 * Requirements: 3.1, 3.2, 3.3, 3.5, 3.6, 3.7
 */
Object.defineProperty(exports, "__esModule", { value: true });
const RiskGuardian_js_1 = require("../../src/engine/RiskGuardian.js");
const AllocationEngine_js_1 = require("../../src/engine/AllocationEngine.js");
const defaults_js_1 = require("../../src/config/defaults.js");
describe('RiskGuardian', () => {
    let riskGuardian;
    let allocationEngine;
    const defaultRiskConfig = {
        maxCorrelation: 0.8,
        correlationPenalty: 0.5,
        betaUpdateInterval: 300000,
        correlationUpdateInterval: 300000,
    };
    beforeEach(() => {
        allocationEngine = new AllocationEngine_js_1.AllocationEngine(defaults_js_1.defaultConfig.allocationEngine);
        riskGuardian = new RiskGuardian_js_1.RiskGuardian(defaultRiskConfig, allocationEngine);
        riskGuardian.setEquity(10000); // Default equity for tests
    });
    describe('constructor', () => {
        it('should initialize with provided configuration', () => {
            const config = riskGuardian.getConfig();
            expect(config.maxCorrelation).toBe(0.8);
            expect(config.correlationPenalty).toBe(0.5);
            expect(config.betaUpdateInterval).toBe(300000);
        });
    });
    describe('setEquity / getEquity', () => {
        it('should set and get equity correctly', () => {
            riskGuardian.setEquity(5000);
            expect(riskGuardian.getEquity()).toBe(5000);
        });
        it('should handle negative equity as 0', () => {
            riskGuardian.setEquity(-1000);
            expect(riskGuardian.getEquity()).toBe(0);
        });
    });
    describe('calculatePortfolioDelta', () => {
        it('should return 0 for empty positions', () => {
            const delta = riskGuardian.calculatePortfolioDelta([]);
            expect(delta).toBe(0);
        });
        it('should return positive delta for long positions', () => {
            const positions = [
                { symbol: 'BTCUSDT', side: 'LONG', size: 1000, entryPrice: 50000, unrealizedPnL: 0, leverage: 10, phaseId: 'phase1' },
                { symbol: 'ETHUSDT', side: 'LONG', size: 500, entryPrice: 3000, unrealizedPnL: 0, leverage: 10, phaseId: 'phase1' },
            ];
            const delta = riskGuardian.calculatePortfolioDelta(positions);
            expect(delta).toBe(1500);
        });
        it('should return negative delta for short positions', () => {
            const positions = [
                { symbol: 'BTCUSDT', side: 'SHORT', size: 1000, entryPrice: 50000, unrealizedPnL: 0, leverage: 10, phaseId: 'phase1' },
            ];
            const delta = riskGuardian.calculatePortfolioDelta(positions);
            expect(delta).toBe(-1000);
        });
        it('should calculate net delta for mixed positions', () => {
            const positions = [
                { symbol: 'BTCUSDT', side: 'LONG', size: 1000, entryPrice: 50000, unrealizedPnL: 0, leverage: 10, phaseId: 'phase1' },
                { symbol: 'ETHUSDT', side: 'SHORT', size: 600, entryPrice: 3000, unrealizedPnL: 0, leverage: 10, phaseId: 'phase2' },
            ];
            const delta = riskGuardian.calculatePortfolioDelta(positions);
            expect(delta).toBe(400); // 1000 - 600
        });
    });
    describe('calculateCombinedLeverage', () => {
        it('should return 0 for empty positions', () => {
            const leverage = riskGuardian.calculateCombinedLeverage([]);
            expect(leverage).toBe(0);
        });
        it('should return 0 when equity is 0', () => {
            riskGuardian.setEquity(0);
            const positions = [
                { symbol: 'BTCUSDT', side: 'LONG', size: 1000, entryPrice: 50000, unrealizedPnL: 0, leverage: 10, phaseId: 'phase1' },
            ];
            const leverage = riskGuardian.calculateCombinedLeverage(positions);
            expect(leverage).toBe(0);
        });
        it('should calculate leverage correctly', () => {
            riskGuardian.setEquity(10000);
            const positions = [
                { symbol: 'BTCUSDT', side: 'LONG', size: 20000, entryPrice: 50000, unrealizedPnL: 0, leverage: 10, phaseId: 'phase1' },
                { symbol: 'ETHUSDT', side: 'SHORT', size: 10000, entryPrice: 3000, unrealizedPnL: 0, leverage: 5, phaseId: 'phase2' },
            ];
            const leverage = riskGuardian.calculateCombinedLeverage(positions);
            expect(leverage).toBe(3); // (20000 + 10000) / 10000
        });
    });
    describe('calculateCorrelation', () => {
        beforeEach(() => {
            // Add price history for correlation calculation
            const btcPrices = [50000, 50100, 50200, 50150, 50300, 50250, 50400, 50350, 50500, 50450];
            const ethPrices = [3000, 3010, 3020, 3015, 3030, 3025, 3040, 3035, 3050, 3045];
            btcPrices.forEach((price, i) => {
                riskGuardian.updatePriceHistory('BTCUSDT', price, Date.now() - (10 - i) * 60000);
            });
            ethPrices.forEach((price, i) => {
                riskGuardian.updatePriceHistory('ETHUSDT', price, Date.now() - (10 - i) * 60000);
            });
        });
        it('should return 0.5 for assets with no price history', () => {
            const correlation = riskGuardian.calculateCorrelation('UNKNOWN1', 'UNKNOWN2');
            expect(correlation).toBe(0.5);
        });
        it('should calculate positive correlation for correlated assets', () => {
            const correlation = riskGuardian.calculateCorrelation('BTCUSDT', 'ETHUSDT');
            expect(correlation).toBeGreaterThan(0);
        });
        it('should cache correlation results', () => {
            const correlation1 = riskGuardian.calculateCorrelation('BTCUSDT', 'ETHUSDT');
            const correlation2 = riskGuardian.calculateCorrelation('BTCUSDT', 'ETHUSDT');
            expect(correlation1).toBe(correlation2);
        });
        it('should return same correlation regardless of asset order', () => {
            const correlation1 = riskGuardian.calculateCorrelation('BTCUSDT', 'ETHUSDT');
            riskGuardian.clearCorrelationCache();
            const correlation2 = riskGuardian.calculateCorrelation('ETHUSDT', 'BTCUSDT');
            expect(correlation1).toBeCloseTo(correlation2, 10);
        });
    });
    describe('getPortfolioBeta', () => {
        it('should return 0 for empty positions', () => {
            const beta = riskGuardian.getPortfolioBeta([]);
            expect(beta).toBe(0);
        });
        it('should calculate weighted beta for positions', () => {
            // Add BTC price history
            for (let i = 0; i < 10; i++) {
                riskGuardian.updatePriceHistory('BTCUSDT', 50000 + i * 100, Date.now() - (10 - i) * 60000);
                riskGuardian.updatePriceHistory('ETHUSDT', 3000 + i * 10, Date.now() - (10 - i) * 60000);
            }
            const positions = [
                { symbol: 'ETHUSDT', side: 'LONG', size: 1000, entryPrice: 3000, unrealizedPnL: 0, leverage: 10, phaseId: 'phase1' },
            ];
            const beta = riskGuardian.getPortfolioBeta(positions);
            expect(typeof beta).toBe('number');
        });
        it('should cache portfolio beta', () => {
            const positions = [
                { symbol: 'BTCUSDT', side: 'LONG', size: 1000, entryPrice: 50000, unrealizedPnL: 0, leverage: 10, phaseId: 'phase1' },
            ];
            const beta1 = riskGuardian.getPortfolioBeta(positions);
            const beta2 = riskGuardian.getPortfolioBeta(positions);
            expect(beta1).toBe(beta2);
        });
    });
    describe('checkSignal', () => {
        describe('leverage cap enforcement', () => {
            it('should approve signal within leverage limits', () => {
                riskGuardian.setEquity(10000); // MEDIUM tier, 5x max leverage
                const signal = {
                    signalId: 'test-1',
                    phaseId: 'phase1',
                    symbol: 'BTCUSDT',
                    side: 'BUY',
                    requestedSize: 20000, // 2x leverage
                    timestamp: Date.now(),
                };
                const decision = riskGuardian.checkSignal(signal, []);
                expect(decision.approved).toBe(true);
                expect(decision.adjustedSize).toBe(20000);
            });
            it('should veto signal exceeding leverage cap', () => {
                riskGuardian.setEquity(10000); // MEDIUM tier, 5x max leverage
                const signal = {
                    signalId: 'test-2',
                    phaseId: 'phase1',
                    symbol: 'BTCUSDT',
                    side: 'BUY',
                    requestedSize: 60000, // 6x leverage
                    timestamp: Date.now(),
                };
                const decision = riskGuardian.checkSignal(signal, []);
                expect(decision.approved).toBe(false);
                expect(decision.reason).toContain('Leverage cap exceeded');
            });
            it('should consider existing positions in leverage calculation', () => {
                riskGuardian.setEquity(10000); // MEDIUM tier, 5x max leverage
                const existingPositions = [
                    { symbol: 'ETHUSDT', side: 'LONG', size: 30000, entryPrice: 3000, unrealizedPnL: 0, leverage: 10, phaseId: 'phase1' },
                ];
                const signal = {
                    signalId: 'test-3',
                    phaseId: 'phase1',
                    symbol: 'BTCUSDT',
                    side: 'BUY',
                    requestedSize: 25000, // Would bring total to 5.5x
                    timestamp: Date.now(),
                };
                const decision = riskGuardian.checkSignal(signal, existingPositions);
                expect(decision.approved).toBe(false);
                expect(decision.reason).toContain('Leverage cap exceeded');
            });
        });
        describe('Phase 3 hedge auto-approval', () => {
            it('should auto-approve Phase 3 hedge that reduces delta', () => {
                riskGuardian.setEquity(50000); // INSTITUTIONAL tier, 2x max leverage
                const existingPositions = [
                    { symbol: 'BTCUSDT', side: 'LONG', size: 100000, entryPrice: 50000, unrealizedPnL: 0, leverage: 2, phaseId: 'phase1' },
                ];
                // Phase 3 short to reduce delta
                const signal = {
                    signalId: 'test-4',
                    phaseId: 'phase3',
                    symbol: 'BTCUSDT',
                    side: 'SELL',
                    requestedSize: 50000, // Reduces delta from 100k to 50k
                    timestamp: Date.now(),
                };
                const decision = riskGuardian.checkSignal(signal, existingPositions);
                expect(decision.approved).toBe(true);
                expect(decision.reason).toContain('Phase 3 hedge approved');
            });
            it('should not auto-approve Phase 3 signal that increases delta', () => {
                riskGuardian.setEquity(50000);
                const existingPositions = [
                    { symbol: 'BTCUSDT', side: 'LONG', size: 50000, entryPrice: 50000, unrealizedPnL: 0, leverage: 1, phaseId: 'phase1' },
                ];
                // Phase 3 long would increase delta
                const signal = {
                    signalId: 'test-5',
                    phaseId: 'phase3',
                    symbol: 'BTCUSDT',
                    side: 'BUY',
                    requestedSize: 50000,
                    timestamp: Date.now(),
                };
                const decision = riskGuardian.checkSignal(signal, existingPositions);
                // Should go through normal validation, not auto-approve
                expect(decision.reason).not.toContain('Phase 3 hedge approved');
            });
            it('should not auto-approve non-Phase 3 signals', () => {
                riskGuardian.setEquity(50000);
                const existingPositions = [
                    { symbol: 'BTCUSDT', side: 'LONG', size: 50000, entryPrice: 50000, unrealizedPnL: 0, leverage: 1, phaseId: 'phase1' },
                ];
                const signal = {
                    signalId: 'test-6',
                    phaseId: 'phase1', // Not Phase 3
                    symbol: 'BTCUSDT',
                    side: 'SELL',
                    requestedSize: 25000,
                    timestamp: Date.now(),
                };
                const decision = riskGuardian.checkSignal(signal, existingPositions);
                expect(decision.reason).not.toContain('Phase 3 hedge approved');
            });
        });
        describe('high correlation size reduction', () => {
            beforeEach(() => {
                // Set up highly correlated price history
                for (let i = 0; i < 20; i++) {
                    const btcPrice = 50000 + i * 100;
                    const ethPrice = 3000 + i * 6; // Highly correlated movement
                    riskGuardian.updatePriceHistory('BTCUSDT', btcPrice, Date.now() - (20 - i) * 60000);
                    riskGuardian.updatePriceHistory('ETHUSDT', ethPrice, Date.now() - (20 - i) * 60000);
                }
            });
            it('should reduce size for high correlation same direction', () => {
                riskGuardian.setEquity(10000);
                const existingPositions = [
                    { symbol: 'BTCUSDT', side: 'LONG', size: 10000, entryPrice: 50000, unrealizedPnL: 0, leverage: 1, phaseId: 'phase1' },
                ];
                // Same symbol, same direction = correlation 1.0
                const signal = {
                    signalId: 'test-7',
                    phaseId: 'phase1',
                    symbol: 'BTCUSDT',
                    side: 'BUY',
                    requestedSize: 10000,
                    timestamp: Date.now(),
                };
                const decision = riskGuardian.checkSignal(signal, existingPositions);
                expect(decision.approved).toBe(true);
                expect(decision.adjustedSize).toBe(5000); // 50% reduction
                expect(decision.reason).toContain('High correlation');
            });
            it('should not reduce size for opposite direction', () => {
                riskGuardian.setEquity(10000);
                const existingPositions = [
                    { symbol: 'BTCUSDT', side: 'LONG', size: 10000, entryPrice: 50000, unrealizedPnL: 0, leverage: 1, phaseId: 'phase1' },
                ];
                // Same symbol, opposite direction
                const signal = {
                    signalId: 'test-8',
                    phaseId: 'phase1',
                    symbol: 'BTCUSDT',
                    side: 'SELL',
                    requestedSize: 5000,
                    timestamp: Date.now(),
                };
                const decision = riskGuardian.checkSignal(signal, existingPositions);
                expect(decision.approved).toBe(true);
                // Should not have size reduction for opposite direction
                expect(decision.adjustedSize).toBe(5000);
            });
        });
        describe('risk metrics in decision', () => {
            it('should include all risk metrics in decision', () => {
                riskGuardian.setEquity(10000);
                const positions = [
                    { symbol: 'BTCUSDT', side: 'LONG', size: 10000, entryPrice: 50000, unrealizedPnL: 100, leverage: 1, phaseId: 'phase1' },
                ];
                const signal = {
                    signalId: 'test-9',
                    phaseId: 'phase1',
                    symbol: 'ETHUSDT',
                    side: 'BUY',
                    requestedSize: 5000,
                    timestamp: Date.now(),
                };
                const decision = riskGuardian.checkSignal(signal, positions);
                expect(decision.riskMetrics).toBeDefined();
                expect(typeof decision.riskMetrics.currentLeverage).toBe('number');
                expect(typeof decision.riskMetrics.projectedLeverage).toBe('number');
                expect(typeof decision.riskMetrics.correlation).toBe('number');
                expect(typeof decision.riskMetrics.portfolioDelta).toBe('number');
                expect(typeof decision.riskMetrics.portfolioBeta).toBe('number');
            });
        });
    });
    describe('getRiskMetrics', () => {
        it('should return current risk metrics snapshot', () => {
            riskGuardian.setEquity(10000);
            const positions = [
                { symbol: 'BTCUSDT', side: 'LONG', size: 20000, entryPrice: 50000, unrealizedPnL: 0, leverage: 2, phaseId: 'phase1' },
                { symbol: 'ETHUSDT', side: 'SHORT', size: 10000, entryPrice: 3000, unrealizedPnL: 0, leverage: 1, phaseId: 'phase2' },
            ];
            const metrics = riskGuardian.getRiskMetrics(positions);
            expect(metrics.currentLeverage).toBe(3); // (20000 + 10000) / 10000
            expect(metrics.portfolioDelta).toBe(10000); // 20000 - 10000
            expect(typeof metrics.portfolioBeta).toBe('number');
            expect(typeof metrics.correlation).toBe('number');
        });
    });
    describe('updatePriceHistory', () => {
        it('should add price entries', () => {
            riskGuardian.updatePriceHistory('BTCUSDT', 50000);
            riskGuardian.updatePriceHistory('BTCUSDT', 50100);
            // Verify by checking correlation calculation works
            riskGuardian.updatePriceHistory('ETHUSDT', 3000);
            riskGuardian.updatePriceHistory('ETHUSDT', 3010);
            const correlation = riskGuardian.calculateCorrelation('BTCUSDT', 'ETHUSDT');
            expect(typeof correlation).toBe('number');
        });
        it('should use provided timestamp', () => {
            const timestamp = Date.now() - 60000;
            riskGuardian.updatePriceHistory('BTCUSDT', 50000, timestamp);
            // No error means success
        });
    });
    describe('clearCorrelationCache', () => {
        it('should clear cached correlations', () => {
            // Add price history
            for (let i = 0; i < 10; i++) {
                riskGuardian.updatePriceHistory('BTCUSDT', 50000 + i * 100, Date.now() - (10 - i) * 60000);
                riskGuardian.updatePriceHistory('ETHUSDT', 3000 + i * 10, Date.now() - (10 - i) * 60000);
            }
            // Calculate and cache
            const correlation1 = riskGuardian.calculateCorrelation('BTCUSDT', 'ETHUSDT');
            // Clear cache
            riskGuardian.clearCorrelationCache();
            // Should recalculate
            const correlation2 = riskGuardian.calculateCorrelation('BTCUSDT', 'ETHUSDT');
            // Values should be the same (same data)
            expect(correlation1).toBeCloseTo(correlation2, 10);
        });
    });
    describe('edge cases', () => {
        it('should handle signal for same symbol reducing position', () => {
            riskGuardian.setEquity(10000);
            const existingPositions = [
                { symbol: 'BTCUSDT', side: 'LONG', size: 20000, entryPrice: 50000, unrealizedPnL: 0, leverage: 2, phaseId: 'phase1' },
            ];
            // Sell signal to reduce long position
            const signal = {
                signalId: 'test-10',
                phaseId: 'phase1',
                symbol: 'BTCUSDT',
                side: 'SELL',
                requestedSize: 10000,
                timestamp: Date.now(),
            };
            const decision = riskGuardian.checkSignal(signal, existingPositions);
            expect(decision.approved).toBe(true);
            // Projected leverage should be lower
            expect(decision.riskMetrics.projectedLeverage).toBeLessThan(decision.riskMetrics.currentLeverage);
        });
        it('should handle zero equity gracefully', () => {
            riskGuardian.setEquity(0);
            const signal = {
                signalId: 'test-11',
                phaseId: 'phase1',
                symbol: 'BTCUSDT',
                side: 'BUY',
                requestedSize: 1000,
                timestamp: Date.now(),
            };
            const decision = riskGuardian.checkSignal(signal, []);
            expect(decision.riskMetrics.currentLeverage).toBe(0);
            expect(decision.riskMetrics.projectedLeverage).toBe(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLWJyYWluL3Rlc3RzL3VuaXQvUmlza0d1YXJkaWFuLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7R0FNRzs7QUFFSCxzRUFBZ0U7QUFDaEUsOEVBQXdFO0FBRXhFLDhEQUE2RDtBQUU3RCxRQUFRLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRTtJQUM1QixJQUFJLFlBQTBCLENBQUM7SUFDL0IsSUFBSSxnQkFBa0MsQ0FBQztJQUV2QyxNQUFNLGlCQUFpQixHQUF1QjtRQUM1QyxjQUFjLEVBQUUsR0FBRztRQUNuQixrQkFBa0IsRUFBRSxHQUFHO1FBQ3ZCLGtCQUFrQixFQUFFLE1BQU07UUFDMUIseUJBQXlCLEVBQUUsTUFBTTtLQUNsQyxDQUFDO0lBRUYsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLGdCQUFnQixHQUFHLElBQUksc0NBQWdCLENBQUMsMkJBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3hFLFlBQVksR0FBRyxJQUFJLDhCQUFZLENBQUMsaUJBQWlCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQUNyRSxZQUFZLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsMkJBQTJCO0lBQzVELENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7UUFDM0IsRUFBRSxDQUFDLCtDQUErQyxFQUFFLEdBQUcsRUFBRTtZQUN2RCxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDeEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM1QyxNQUFNLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0s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aUJBQWlCLENBQUMsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNwRyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUUxQixNQUFNLE1BQU0sR0FBaUI7Z0JBQzNCLFFBQVEsRUFBRSxTQUFTO2dCQUNuQixPQUFPLEVBQUUsUUFBUTtnQkFDakIsTUFBTSxFQUFFLFNBQVM7Z0JBQ2pCLElBQUksRUFBRSxLQUFLO2dCQUNYLGFBQWEsRUFBRSxJQUFJO2dCQUNuQixTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTthQUN0QixDQUFDO1lBRUYsTUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JELE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvaXZhbi9Db2RlL3RyYWRpbmcvdGl0YW4vc2VydmljZXMvdGl0YW4tYnJhaW4vdGVzdHMvdW5pdC9SaXNrR3VhcmRpYW4udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaXQgVGVzdHMgZm9yIFJpc2tHdWFyZGlhblxuICogXG4gKiBUZXN0cyBsZXZlcmFnZSBjYWxjdWxhdGlvbiwgY29ycmVsYXRpb24gY2FsY3VsYXRpb24sIFBoYXNlIDMgaGVkZ2UgYXV0by1hcHByb3ZhbCxcbiAqIGFuZCBoaWdoIGNvcnJlbGF0aW9uIHNpemUgcmVkdWN0aW9uLlxuICogUmVxdWlyZW1lbnRzOiAzLjEsIDMuMiwgMy4zLCAzLjUsIDMuNiwgMy43XG4gKi9cblxuaW1wb3J0IHsgUmlza0d1YXJkaWFuIH0gZnJvbSAnLi4vLi4vc3JjL2VuZ2luZS9SaXNrR3VhcmRpYW4uanMnO1xuaW1wb3J0IHsgQWxsb2NhdGlvbkVuZ2luZSB9IGZyb20gJy4uLy4uL3NyYy9lbmdpbmUvQWxsb2NhdGlvbkVuZ2luZS5qcyc7XG5pbXBvcnQgeyBJbnRlbnRTaWduYWwsIFBvc2l0aW9uLCBSaXNrR3VhcmRpYW5Db25maWcgfSBmcm9tICcuLi8uLi9zcmMvdHlwZXMvaW5kZXguanMnO1xuaW1wb3J0IHsgZGVmYXVsdENvbmZpZyB9IGZyb20gJy4uLy4uL3NyYy9jb25maWcvZGVmYXVsdHMuanMnO1xuXG5kZXNjcmliZSgnUmlza0d1YXJkaWFuJywgKCkgPT4ge1xuICBsZXQgcmlza0d1YXJkaWFuOiBSaXNrR3VhcmRpYW47XG4gIGxldCBhbGxvY2F0aW9uRW5naW5lOiBBbGxvY2F0aW9uRW5naW5lO1xuXG4gIGNvbnN0IGRlZmF1bHRSaXNrQ29uZmlnOiBSaXNrR3VhcmRpYW5Db25maWcgPSB7XG4gICAgbWF4Q29ycmVsYXRpb246IDAuOCxcbiAgICBjb3JyZWxhdGlvblBlbmFsdHk6IDAuNSxcbiAgICBiZXRhVXBkYXRlSW50ZXJ2YWw6IDMwMDAwMCxcbiAgICBjb3JyZWxhdGlvblVwZGF0ZUludGVydmFsOiAzMDAwMDAsXG4gIH07XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgYWxsb2NhdGlvbkVuZ2luZSA9IG5ldyBBbGxvY2F0aW9uRW5naW5lKGRlZmF1bHRDb25maWcuYWxsb2NhdGlvbkVuZ2luZSk7XG4gICAgcmlza0d1YXJkaWFuID0gbmV3IFJpc2tHdWFyZGlhbihkZWZhdWx0Umlza0NvbmZpZywgYWxsb2NhdGlvbkVuZ2luZSk7XG4gICAgcmlza0d1YXJkaWFuLnNldEVxdWl0eSgxMDAwMCk7IC8vIERlZmF1bHQgZXF1aXR5IGZvciB0ZXN0c1xuICB9KTtcblxuICBkZXNjcmliZSgnY29uc3RydWN0b3InLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggcHJvdmlkZWQgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHJpc2tHdWFyZGlhbi5nZXRDb25maWcoKTtcbiAgICAgIGV4cGVjdChjb25maWcubWF4Q29ycmVsYXRpb24pLnRvQmUoMC44KTtcbiAgICAgIGV4cGVjdChjb25maWcuY29ycmVsYXRpb25QZW5hbHR5KS50b0JlKDAuNSk7XG4gICAgICBleHBlY3QoY29uZmlnLmJldGFVcGRhdGVJbnRlcnZhbCkudG9CZSgzMDAwMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2V0RXF1aXR5IC8gZ2V0RXF1aXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2V0IGFuZCBnZXQgZXF1aXR5IGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoNTAwMCk7XG4gICAgICBleHBlY3Qocmlza0d1YXJkaWFuLmdldEVxdWl0eSgpKS50b0JlKDUwMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmVnYXRpdmUgZXF1aXR5IGFzIDAnLCAoKSA9PiB7XG4gICAgICByaXNrR3VhcmRpYW4uc2V0RXF1aXR5KC0xMDAwKTtcbiAgICAgIGV4cGVjdChyaXNrR3VhcmRpYW4uZ2V0RXF1aXR5KCkpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjYWxjdWxhdGVQb3J0Zm9saW9EZWx0YScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiAwIGZvciBlbXB0eSBwb3NpdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBkZWx0YSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVQb3J0Zm9saW9EZWx0YShbXSk7XG4gICAgICBleHBlY3QoZGVsdGEpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBwb3NpdGl2ZSBkZWx0YSBmb3IgbG9uZyBwb3NpdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwb3NpdGlvbnM6IFBvc2l0aW9uW10gPSBbXG4gICAgICAgIHsgc3ltYm9sOiAnQlRDVVNEVCcsIHNpZGU6ICdMT05HJywgc2l6ZTogMTAwMCwgZW50cnlQcmljZTogNTAwMDAsIHVucmVhbGl6ZWRQbkw6IDAsIGxldmVyYWdlOiAxMCwgcGhhc2VJZDogJ3BoYXNlMScgfSxcbiAgICAgICAgeyBzeW1ib2w6ICdFVEhVU0RUJywgc2lkZTogJ0xPTkcnLCBzaXplOiA1MDAsIGVudHJ5UHJpY2U6IDMwMDAsIHVucmVhbGl6ZWRQbkw6IDAsIGxldmVyYWdlOiAxMCwgcGhhc2VJZDogJ3BoYXNlMScgfSxcbiAgICAgIF07XG4gICAgICBjb25zdCBkZWx0YSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVQb3J0Zm9saW9EZWx0YShwb3NpdGlvbnMpO1xuICAgICAgZXhwZWN0KGRlbHRhKS50b0JlKDE1MDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbmVnYXRpdmUgZGVsdGEgZm9yIHNob3J0IHBvc2l0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uczogUG9zaXRpb25bXSA9IFtcbiAgICAgICAgeyBzeW1ib2w6ICdCVENVU0RUJywgc2lkZTogJ1NIT1JUJywgc2l6ZTogMTAwMCwgZW50cnlQcmljZTogNTAwMDAsIHVucmVhbGl6ZWRQbkw6IDAsIGxldmVyYWdlOiAxMCwgcGhhc2VJZDogJ3BoYXNlMScgfSxcbiAgICAgIF07XG4gICAgICBjb25zdCBkZWx0YSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVQb3J0Zm9saW9EZWx0YShwb3NpdGlvbnMpO1xuICAgICAgZXhwZWN0KGRlbHRhKS50b0JlKC0xMDAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIG5ldCBkZWx0YSBmb3IgbWl4ZWQgcG9zaXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgcG9zaXRpb25zOiBQb3NpdGlvbltdID0gW1xuICAgICAgICB7IHN5bWJvbDogJ0JUQ1VTRFQnLCBzaWRlOiAnTE9ORycsIHNpemU6IDEwMDAsIGVudHJ5UHJpY2U6IDUwMDAwLCB1bnJlYWxpemVkUG5MOiAwLCBsZXZlcmFnZTogMTAsIHBoYXNlSWQ6ICdwaGFzZTEnIH0sXG4gICAgICAgIHsgc3ltYm9sOiAnRVRIVVNEVCcsIHNpZGU6ICdTSE9SVCcsIHNpemU6IDYwMCwgZW50cnlQcmljZTogMzAwMCwgdW5yZWFsaXplZFBuTDogMCwgbGV2ZXJhZ2U6IDEwLCBwaGFzZUlkOiAncGhhc2UyJyB9LFxuICAgICAgXTtcbiAgICAgIGNvbnN0IGRlbHRhID0gcmlza0d1YXJkaWFuLmNhbGN1bGF0ZVBvcnRmb2xpb0RlbHRhKHBvc2l0aW9ucyk7XG4gICAgICBleHBlY3QoZGVsdGEpLnRvQmUoNDAwKTsgLy8gMTAwMCAtIDYwMFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY2FsY3VsYXRlQ29tYmluZWRMZXZlcmFnZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiAwIGZvciBlbXB0eSBwb3NpdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsZXZlcmFnZSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVDb21iaW5lZExldmVyYWdlKFtdKTtcbiAgICAgIGV4cGVjdChsZXZlcmFnZSkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDAgd2hlbiBlcXVpdHkgaXMgMCcsICgpID0+IHtcbiAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoMCk7XG4gICAgICBjb25zdCBwb3NpdGlvbnM6IFBvc2l0aW9uW10gPSBbXG4gICAgICAgIHsgc3ltYm9sOiAnQlRDVVNEVCcsIHNpZGU6ICdMT05HJywgc2l6ZTogMTAwMCwgZW50cnlQcmljZTogNTAwMDAsIHVucmVhbGl6ZWRQbkw6IDAsIGxldmVyYWdlOiAxMCwgcGhhc2VJZDogJ3BoYXNlMScgfSxcbiAgICAgIF07XG4gICAgICBjb25zdCBsZXZlcmFnZSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVDb21iaW5lZExldmVyYWdlKHBvc2l0aW9ucyk7XG4gICAgICBleHBlY3QobGV2ZXJhZ2UpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBsZXZlcmFnZSBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICByaXNrR3VhcmRpYW4uc2V0RXF1aXR5KDEwMDAwKTtcbiAgICAgIGNvbnN0IHBvc2l0aW9uczogUG9zaXRpb25bXSA9IFtcbiAgICAgICAgeyBzeW1ib2w6ICdCVENVU0RUJywgc2lkZTogJ0xPTkcnLCBzaXplOiAyMDAwMCwgZW50cnlQcmljZTogNTAwMDAsIHVucmVhbGl6ZWRQbkw6IDAsIGxldmVyYWdlOiAxMCwgcGhhc2VJZDogJ3BoYXNlMScgfSxcbiAgICAgICAgeyBzeW1ib2w6ICdFVEhVU0RUJywgc2lkZTogJ1NIT1JUJywgc2l6ZTogMTAwMDAsIGVudHJ5UHJpY2U6IDMwMDAsIHVucmVhbGl6ZWRQbkw6IDAsIGxldmVyYWdlOiA1LCBwaGFzZUlkOiAncGhhc2UyJyB9LFxuICAgICAgXTtcbiAgICAgIGNvbnN0IGxldmVyYWdlID0gcmlza0d1YXJkaWFuLmNhbGN1bGF0ZUNvbWJpbmVkTGV2ZXJhZ2UocG9zaXRpb25zKTtcbiAgICAgIGV4cGVjdChsZXZlcmFnZSkudG9CZSgzKTsgLy8gKDIwMDAwICsgMTAwMDApIC8gMTAwMDBcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NhbGN1bGF0ZUNvcnJlbGF0aW9uJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgLy8gQWRkIHByaWNlIGhpc3RvcnkgZm9yIGNvcnJlbGF0aW9uIGNhbGN1bGF0aW9uXG4gICAgICBjb25zdCBidGNQcmljZXMgPSBbNTAwMDAsIDUwMTAwLCA1MDIwMCwgNTAxNTAsIDUwMzAwLCA1MDI1MCwgNTA0MDAsIDUwMzUwLCA1MDUwMCwgNTA0NTBdO1xuICAgICAgY29uc3QgZXRoUHJpY2VzID0gWzMwMDAsIDMwMTAsIDMwMjAsIDMwMTUsIDMwMzAsIDMwMjUsIDMwNDAsIDMwMzUsIDMwNTAsIDMwNDVdO1xuICAgICAgXG4gICAgICBidGNQcmljZXMuZm9yRWFjaCgocHJpY2UsIGkpID0+IHtcbiAgICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnQlRDVVNEVCcsIHByaWNlLCBEYXRlLm5vdygpIC0gKDEwIC0gaSkgKiA2MDAwMCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgZXRoUHJpY2VzLmZvckVhY2goKHByaWNlLCBpKSA9PiB7XG4gICAgICAgIHJpc2tHdWFyZGlhbi51cGRhdGVQcmljZUhpc3RvcnkoJ0VUSFVTRFQnLCBwcmljZSwgRGF0ZS5ub3coKSAtICgxMCAtIGkpICogNjAwMDApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiAwLjUgZm9yIGFzc2V0cyB3aXRoIG5vIHByaWNlIGhpc3RvcnknLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb3JyZWxhdGlvbiA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVDb3JyZWxhdGlvbignVU5LTk9XTjEnLCAnVU5LTk9XTjInKTtcbiAgICAgIGV4cGVjdChjb3JyZWxhdGlvbikudG9CZSgwLjUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgcG9zaXRpdmUgY29ycmVsYXRpb24gZm9yIGNvcnJlbGF0ZWQgYXNzZXRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29ycmVsYXRpb24gPSByaXNrR3VhcmRpYW4uY2FsY3VsYXRlQ29ycmVsYXRpb24oJ0JUQ1VTRFQnLCAnRVRIVVNEVCcpO1xuICAgICAgZXhwZWN0KGNvcnJlbGF0aW9uKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhY2hlIGNvcnJlbGF0aW9uIHJlc3VsdHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb3JyZWxhdGlvbjEgPSByaXNrR3VhcmRpYW4uY2FsY3VsYXRlQ29ycmVsYXRpb24oJ0JUQ1VTRFQnLCAnRVRIVVNEVCcpO1xuICAgICAgY29uc3QgY29ycmVsYXRpb24yID0gcmlza0d1YXJkaWFuLmNhbGN1bGF0ZUNvcnJlbGF0aW9uKCdCVENVU0RUJywgJ0VUSFVTRFQnKTtcbiAgICAgIGV4cGVjdChjb3JyZWxhdGlvbjEpLnRvQmUoY29ycmVsYXRpb24yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHNhbWUgY29ycmVsYXRpb24gcmVnYXJkbGVzcyBvZiBhc3NldCBvcmRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvcnJlbGF0aW9uMSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVDb3JyZWxhdGlvbignQlRDVVNEVCcsICdFVEhVU0RUJyk7XG4gICAgICByaXNrR3VhcmRpYW4uY2xlYXJDb3JyZWxhdGlvbkNhY2hlKCk7XG4gICAgICBjb25zdCBjb3JyZWxhdGlvbjIgPSByaXNrR3VhcmRpYW4uY2FsY3VsYXRlQ29ycmVsYXRpb24oJ0VUSFVTRFQnLCAnQlRDVVNEVCcpO1xuICAgICAgZXhwZWN0KGNvcnJlbGF0aW9uMSkudG9CZUNsb3NlVG8oY29ycmVsYXRpb24yLCAxMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRQb3J0Zm9saW9CZXRhJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDAgZm9yIGVtcHR5IHBvc2l0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGJldGEgPSByaXNrR3VhcmRpYW4uZ2V0UG9ydGZvbGlvQmV0YShbXSk7XG4gICAgICBleHBlY3QoYmV0YSkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHdlaWdodGVkIGJldGEgZm9yIHBvc2l0aW9ucycsICgpID0+IHtcbiAgICAgIC8vIEFkZCBCVEMgcHJpY2UgaGlzdG9yeVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgIHJpc2tHdWFyZGlhbi51cGRhdGVQcmljZUhpc3RvcnkoJ0JUQ1VTRFQnLCA1MDAwMCArIGkgKiAxMDAsIERhdGUubm93KCkgLSAoMTAgLSBpKSAqIDYwMDAwKTtcbiAgICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnRVRIVVNEVCcsIDMwMDAgKyBpICogMTAsIERhdGUubm93KCkgLSAoMTAgLSBpKSAqIDYwMDAwKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcG9zaXRpb25zOiBQb3NpdGlvbltdID0gW1xuICAgICAgICB7IHN5bWJvbDogJ0VUSFVTRFQnLCBzaWRlOiAnTE9ORycsIHNpemU6IDEwMDAsIGVudHJ5UHJpY2U6IDMwMDAsIHVucmVhbGl6ZWRQbkw6IDAsIGxldmVyYWdlOiAxMCwgcGhhc2VJZDogJ3BoYXNlMScgfSxcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGNvbnN0IGJldGEgPSByaXNrR3VhcmRpYW4uZ2V0UG9ydGZvbGlvQmV0YShwb3NpdGlvbnMpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBiZXRhKS50b0JlKCdudW1iZXInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FjaGUgcG9ydGZvbGlvIGJldGEnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwb3NpdGlvbnM6IFBvc2l0aW9uW10gPSBbXG4gICAgICAgIHsgc3ltYm9sOiAnQlRDVVNEVCcsIHNpZGU6ICdMT05HJywgc2l6ZTogMTAwMCwgZW50cnlQcmljZTogNTAwMDAsIHVucmVhbGl6ZWRQbkw6IDAsIGxldmVyYWdlOiAxMCwgcGhhc2VJZDogJ3BoYXNlMScgfSxcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGNvbnN0IGJldGExID0gcmlza0d1YXJkaWFuLmdldFBvcnRmb2xpb0JldGEocG9zaXRpb25zKTtcbiAgICAgIGNvbnN0IGJldGEyID0gcmlza0d1YXJkaWFuLmdldFBvcnRmb2xpb0JldGEocG9zaXRpb25zKTtcbiAgICAgIGV4cGVjdChiZXRhMSkudG9CZShiZXRhMik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjaGVja1NpZ25hbCcsICgpID0+IHtcbiAgICBkZXNjcmliZSgnbGV2ZXJhZ2UgY2FwIGVuZm9yY2VtZW50JywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCBhcHByb3ZlIHNpZ25hbCB3aXRoaW4gbGV2ZXJhZ2UgbGltaXRzJywgKCkgPT4ge1xuICAgICAgICByaXNrR3VhcmRpYW4uc2V0RXF1aXR5KDEwMDAwKTsgLy8gTUVESVVNIHRpZXIsIDV4IG1heCBsZXZlcmFnZVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgICAgc2lnbmFsSWQ6ICd0ZXN0LTEnLFxuICAgICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnLFxuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHNpZGU6ICdCVVknLFxuICAgICAgICAgIHJlcXVlc3RlZFNpemU6IDIwMDAwLCAvLyAyeCBsZXZlcmFnZVxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBkZWNpc2lvbiA9IHJpc2tHdWFyZGlhbi5jaGVja1NpZ25hbChzaWduYWwsIFtdKTtcbiAgICAgICAgZXhwZWN0KGRlY2lzaW9uLmFwcHJvdmVkKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoZGVjaXNpb24uYWRqdXN0ZWRTaXplKS50b0JlKDIwMDAwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHZldG8gc2lnbmFsIGV4Y2VlZGluZyBsZXZlcmFnZSBjYXAnLCAoKSA9PiB7XG4gICAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoMTAwMDApOyAvLyBNRURJVU0gdGllciwgNXggbWF4IGxldmVyYWdlXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzaWduYWw6IEludGVudFNpZ25hbCA9IHtcbiAgICAgICAgICBzaWduYWxJZDogJ3Rlc3QtMicsXG4gICAgICAgICAgcGhhc2VJZDogJ3BoYXNlMScsXG4gICAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgICAgc2lkZTogJ0JVWScsXG4gICAgICAgICAgcmVxdWVzdGVkU2l6ZTogNjAwMDAsIC8vIDZ4IGxldmVyYWdlXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRlY2lzaW9uID0gcmlza0d1YXJkaWFuLmNoZWNrU2lnbmFsKHNpZ25hbCwgW10pO1xuICAgICAgICBleHBlY3QoZGVjaXNpb24uYXBwcm92ZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoZGVjaXNpb24ucmVhc29uKS50b0NvbnRhaW4oJ0xldmVyYWdlIGNhcCBleGNlZWRlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgY29uc2lkZXIgZXhpc3RpbmcgcG9zaXRpb25zIGluIGxldmVyYWdlIGNhbGN1bGF0aW9uJywgKCkgPT4ge1xuICAgICAgICByaXNrR3VhcmRpYW4uc2V0RXF1aXR5KDEwMDAwKTsgLy8gTUVESVVNIHRpZXIsIDV4IG1heCBsZXZlcmFnZVxuICAgICAgICBcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQb3NpdGlvbnM6IFBvc2l0aW9uW10gPSBbXG4gICAgICAgICAgeyBzeW1ib2w6ICdFVEhVU0RUJywgc2lkZTogJ0xPTkcnLCBzaXplOiAzMDAwMCwgZW50cnlQcmljZTogMzAwMCwgdW5yZWFsaXplZFBuTDogMCwgbGV2ZXJhZ2U6IDEwLCBwaGFzZUlkOiAncGhhc2UxJyB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IHNpZ25hbDogSW50ZW50U2lnbmFsID0ge1xuICAgICAgICAgIHNpZ25hbElkOiAndGVzdC0zJyxcbiAgICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyxcbiAgICAgICAgICBzeW1ib2w6ICdCVENVU0RUJyxcbiAgICAgICAgICBzaWRlOiAnQlVZJyxcbiAgICAgICAgICByZXF1ZXN0ZWRTaXplOiAyNTAwMCwgLy8gV291bGQgYnJpbmcgdG90YWwgdG8gNS41eFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBkZWNpc2lvbiA9IHJpc2tHdWFyZGlhbi5jaGVja1NpZ25hbChzaWduYWwsIGV4aXN0aW5nUG9zaXRpb25zKTtcbiAgICAgICAgZXhwZWN0KGRlY2lzaW9uLmFwcHJvdmVkKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGRlY2lzaW9uLnJlYXNvbikudG9Db250YWluKCdMZXZlcmFnZSBjYXAgZXhjZWVkZWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1BoYXNlIDMgaGVkZ2UgYXV0by1hcHByb3ZhbCcsICgpID0+IHtcbiAgICAgIGl0KCdzaG91bGQgYXV0by1hcHByb3ZlIFBoYXNlIDMgaGVkZ2UgdGhhdCByZWR1Y2VzIGRlbHRhJywgKCkgPT4ge1xuICAgICAgICByaXNrR3VhcmRpYW4uc2V0RXF1aXR5KDUwMDAwKTsgLy8gSU5TVElUVVRJT05BTCB0aWVyLCAyeCBtYXggbGV2ZXJhZ2VcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUG9zaXRpb25zOiBQb3NpdGlvbltdID0gW1xuICAgICAgICAgIHsgc3ltYm9sOiAnQlRDVVNEVCcsIHNpZGU6ICdMT05HJywgc2l6ZTogMTAwMDAwLCBlbnRyeVByaWNlOiA1MDAwMCwgdW5yZWFsaXplZFBuTDogMCwgbGV2ZXJhZ2U6IDIsIHBoYXNlSWQ6ICdwaGFzZTEnIH0sXG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gUGhhc2UgMyBzaG9ydCB0byByZWR1Y2UgZGVsdGFcbiAgICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgICAgc2lnbmFsSWQ6ICd0ZXN0LTQnLFxuICAgICAgICAgIHBoYXNlSWQ6ICdwaGFzZTMnLFxuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHNpZGU6ICdTRUxMJyxcbiAgICAgICAgICByZXF1ZXN0ZWRTaXplOiA1MDAwMCwgLy8gUmVkdWNlcyBkZWx0YSBmcm9tIDEwMGsgdG8gNTBrXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRlY2lzaW9uID0gcmlza0d1YXJkaWFuLmNoZWNrU2lnbmFsKHNpZ25hbCwgZXhpc3RpbmdQb3NpdGlvbnMpO1xuICAgICAgICBleHBlY3QoZGVjaXNpb24uYXBwcm92ZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChkZWNpc2lvbi5yZWFzb24pLnRvQ29udGFpbignUGhhc2UgMyBoZWRnZSBhcHByb3ZlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IGF1dG8tYXBwcm92ZSBQaGFzZSAzIHNpZ25hbCB0aGF0IGluY3JlYXNlcyBkZWx0YScsICgpID0+IHtcbiAgICAgICAgcmlza0d1YXJkaWFuLnNldEVxdWl0eSg1MDAwMCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBleGlzdGluZ1Bvc2l0aW9uczogUG9zaXRpb25bXSA9IFtcbiAgICAgICAgICB7IHN5bWJvbDogJ0JUQ1VTRFQnLCBzaWRlOiAnTE9ORycsIHNpemU6IDUwMDAwLCBlbnRyeVByaWNlOiA1MDAwMCwgdW5yZWFsaXplZFBuTDogMCwgbGV2ZXJhZ2U6IDEsIHBoYXNlSWQ6ICdwaGFzZTEnIH0sXG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gUGhhc2UgMyBsb25nIHdvdWxkIGluY3JlYXNlIGRlbHRhXG4gICAgICAgIGNvbnN0IHNpZ25hbDogSW50ZW50U2lnbmFsID0ge1xuICAgICAgICAgIHNpZ25hbElkOiAndGVzdC01JyxcbiAgICAgICAgICBwaGFzZUlkOiAncGhhc2UzJyxcbiAgICAgICAgICBzeW1ib2w6ICdCVENVU0RUJyxcbiAgICAgICAgICBzaWRlOiAnQlVZJyxcbiAgICAgICAgICByZXF1ZXN0ZWRTaXplOiA1MDAwMCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZGVjaXNpb24gPSByaXNrR3VhcmRpYW4uY2hlY2tTaWduYWwoc2lnbmFsLCBleGlzdGluZ1Bvc2l0aW9ucyk7XG4gICAgICAgIC8vIFNob3VsZCBnbyB0aHJvdWdoIG5vcm1hbCB2YWxpZGF0aW9uLCBub3QgYXV0by1hcHByb3ZlXG4gICAgICAgIGV4cGVjdChkZWNpc2lvbi5yZWFzb24pLm5vdC50b0NvbnRhaW4oJ1BoYXNlIDMgaGVkZ2UgYXBwcm92ZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCBhdXRvLWFwcHJvdmUgbm9uLVBoYXNlIDMgc2lnbmFscycsICgpID0+IHtcbiAgICAgICAgcmlza0d1YXJkaWFuLnNldEVxdWl0eSg1MDAwMCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBleGlzdGluZ1Bvc2l0aW9uczogUG9zaXRpb25bXSA9IFtcbiAgICAgICAgICB7IHN5bWJvbDogJ0JUQ1VTRFQnLCBzaWRlOiAnTE9ORycsIHNpemU6IDUwMDAwLCBlbnRyeVByaWNlOiA1MDAwMCwgdW5yZWFsaXplZFBuTDogMCwgbGV2ZXJhZ2U6IDEsIHBoYXNlSWQ6ICdwaGFzZTEnIH0sXG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgICAgc2lnbmFsSWQ6ICd0ZXN0LTYnLFxuICAgICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnLCAvLyBOb3QgUGhhc2UgM1xuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHNpZGU6ICdTRUxMJyxcbiAgICAgICAgICByZXF1ZXN0ZWRTaXplOiAyNTAwMCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZGVjaXNpb24gPSByaXNrR3VhcmRpYW4uY2hlY2tTaWduYWwoc2lnbmFsLCBleGlzdGluZ1Bvc2l0aW9ucyk7XG4gICAgICAgIGV4cGVjdChkZWNpc2lvbi5yZWFzb24pLm5vdC50b0NvbnRhaW4oJ1BoYXNlIDMgaGVkZ2UgYXBwcm92ZWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2hpZ2ggY29ycmVsYXRpb24gc2l6ZSByZWR1Y3Rpb24nLCAoKSA9PiB7XG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgLy8gU2V0IHVwIGhpZ2hseSBjb3JyZWxhdGVkIHByaWNlIGhpc3RvcnlcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgYnRjUHJpY2UgPSA1MDAwMCArIGkgKiAxMDA7XG4gICAgICAgICAgY29uc3QgZXRoUHJpY2UgPSAzMDAwICsgaSAqIDY7IC8vIEhpZ2hseSBjb3JyZWxhdGVkIG1vdmVtZW50XG4gICAgICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnQlRDVVNEVCcsIGJ0Y1ByaWNlLCBEYXRlLm5vdygpIC0gKDIwIC0gaSkgKiA2MDAwMCk7XG4gICAgICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnRVRIVVNEVCcsIGV0aFByaWNlLCBEYXRlLm5vdygpIC0gKDIwIC0gaSkgKiA2MDAwMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJlZHVjZSBzaXplIGZvciBoaWdoIGNvcnJlbGF0aW9uIHNhbWUgZGlyZWN0aW9uJywgKCkgPT4ge1xuICAgICAgICByaXNrR3VhcmRpYW4uc2V0RXF1aXR5KDEwMDAwKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUG9zaXRpb25zOiBQb3NpdGlvbltdID0gW1xuICAgICAgICAgIHsgc3ltYm9sOiAnQlRDVVNEVCcsIHNpZGU6ICdMT05HJywgc2l6ZTogMTAwMDAsIGVudHJ5UHJpY2U6IDUwMDAwLCB1bnJlYWxpemVkUG5MOiAwLCBsZXZlcmFnZTogMSwgcGhhc2VJZDogJ3BoYXNlMScgfSxcbiAgICAgICAgXTtcblxuICAgICAgICAvLyBTYW1lIHN5bWJvbCwgc2FtZSBkaXJlY3Rpb24gPSBjb3JyZWxhdGlvbiAxLjBcbiAgICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgICAgc2lnbmFsSWQ6ICd0ZXN0LTcnLFxuICAgICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnLFxuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHNpZGU6ICdCVVknLFxuICAgICAgICAgIHJlcXVlc3RlZFNpemU6IDEwMDAwLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBkZWNpc2lvbiA9IHJpc2tHdWFyZGlhbi5jaGVja1NpZ25hbChzaWduYWwsIGV4aXN0aW5nUG9zaXRpb25zKTtcbiAgICAgICAgZXhwZWN0KGRlY2lzaW9uLmFwcHJvdmVkKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoZGVjaXNpb24uYWRqdXN0ZWRTaXplKS50b0JlKDUwMDApOyAvLyA1MCUgcmVkdWN0aW9uXG4gICAgICAgIGV4cGVjdChkZWNpc2lvbi5yZWFzb24pLnRvQ29udGFpbignSGlnaCBjb3JyZWxhdGlvbicpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHJlZHVjZSBzaXplIGZvciBvcHBvc2l0ZSBkaXJlY3Rpb24nLCAoKSA9PiB7XG4gICAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoMTAwMDApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQb3NpdGlvbnM6IFBvc2l0aW9uW10gPSBbXG4gICAgICAgICAgeyBzeW1ib2w6ICdCVENVU0RUJywgc2lkZTogJ0xPTkcnLCBzaXplOiAxMDAwMCwgZW50cnlQcmljZTogNTAwMDAsIHVucmVhbGl6ZWRQbkw6IDAsIGxldmVyYWdlOiAxLCBwaGFzZUlkOiAncGhhc2UxJyB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIFNhbWUgc3ltYm9sLCBvcHBvc2l0ZSBkaXJlY3Rpb25cbiAgICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgICAgc2lnbmFsSWQ6ICd0ZXN0LTgnLFxuICAgICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnLFxuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHNpZGU6ICdTRUxMJyxcbiAgICAgICAgICByZXF1ZXN0ZWRTaXplOiA1MDAwLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBkZWNpc2lvbiA9IHJpc2tHdWFyZGlhbi5jaGVja1NpZ25hbChzaWduYWwsIGV4aXN0aW5nUG9zaXRpb25zKTtcbiAgICAgICAgZXhwZWN0KGRlY2lzaW9uLmFwcHJvdmVkKS50b0JlKHRydWUpO1xuICAgICAgICAvLyBTaG91bGQgbm90IGhhdmUgc2l6ZSByZWR1Y3Rpb24gZm9yIG9wcG9zaXRlIGRpcmVjdGlvblxuICAgICAgICBleHBlY3QoZGVjaXNpb24uYWRqdXN0ZWRTaXplKS50b0JlKDUwMDApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncmlzayBtZXRyaWNzIGluIGRlY2lzaW9uJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCBpbmNsdWRlIGFsbCByaXNrIG1ldHJpY3MgaW4gZGVjaXNpb24nLCAoKSA9PiB7XG4gICAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoMTAwMDApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcG9zaXRpb25zOiBQb3NpdGlvbltdID0gW1xuICAgICAgICAgIHsgc3ltYm9sOiAnQlRDVVNEVCcsIHNpZGU6ICdMT05HJywgc2l6ZTogMTAwMDAsIGVudHJ5UHJpY2U6IDUwMDAwLCB1bnJlYWxpemVkUG5MOiAxMDAsIGxldmVyYWdlOiAxLCBwaGFzZUlkOiAncGhhc2UxJyB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IHNpZ25hbDogSW50ZW50U2lnbmFsID0ge1xuICAgICAgICAgIHNpZ25hbElkOiAndGVzdC05JyxcbiAgICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyxcbiAgICAgICAgICBzeW1ib2w6ICdFVEhVU0RUJyxcbiAgICAgICAgICBzaWRlOiAnQlVZJyxcbiAgICAgICAgICByZXF1ZXN0ZWRTaXplOiA1MDAwLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBkZWNpc2lvbiA9IHJpc2tHdWFyZGlhbi5jaGVja1NpZ25hbChzaWduYWwsIHBvc2l0aW9ucyk7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QoZGVjaXNpb24ucmlza01ldHJpY3MpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgZGVjaXNpb24ucmlza01ldHJpY3MuY3VycmVudExldmVyYWdlKS50b0JlKCdudW1iZXInKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBkZWNpc2lvbi5yaXNrTWV0cmljcy5wcm9qZWN0ZWRMZXZlcmFnZSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgZGVjaXNpb24ucmlza01ldHJpY3MuY29ycmVsYXRpb24pLnRvQmUoJ251bWJlcicpO1xuICAgICAgICBleHBlY3QodHlwZW9mIGRlY2lzaW9uLnJpc2tNZXRyaWNzLnBvcnRmb2xpb0RlbHRhKS50b0JlKCdudW1iZXInKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBkZWNpc2lvbi5yaXNrTWV0cmljcy5wb3J0Zm9saW9CZXRhKS50b0JlKCdudW1iZXInKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0Umlza01ldHJpY3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY3VycmVudCByaXNrIG1ldHJpY3Mgc25hcHNob3QnLCAoKSA9PiB7XG4gICAgICByaXNrR3VhcmRpYW4uc2V0RXF1aXR5KDEwMDAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgcG9zaXRpb25zOiBQb3NpdGlvbltdID0gW1xuICAgICAgICB7IHN5bWJvbDogJ0JUQ1VTRFQnLCBzaWRlOiAnTE9ORycsIHNpemU6IDIwMDAwLCBlbnRyeVByaWNlOiA1MDAwMCwgdW5yZWFsaXplZFBuTDogMCwgbGV2ZXJhZ2U6IDIsIHBoYXNlSWQ6ICdwaGFzZTEnIH0sXG4gICAgICAgIHsgc3ltYm9sOiAnRVRIVVNEVCcsIHNpZGU6ICdTSE9SVCcsIHNpemU6IDEwMDAwLCBlbnRyeVByaWNlOiAzMDAwLCB1bnJlYWxpemVkUG5MOiAwLCBsZXZlcmFnZTogMSwgcGhhc2VJZDogJ3BoYXNlMicgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IG1ldHJpY3MgPSByaXNrR3VhcmRpYW4uZ2V0Umlza01ldHJpY3MocG9zaXRpb25zKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1ldHJpY3MuY3VycmVudExldmVyYWdlKS50b0JlKDMpOyAvLyAoMjAwMDAgKyAxMDAwMCkgLyAxMDAwMFxuICAgICAgZXhwZWN0KG1ldHJpY3MucG9ydGZvbGlvRGVsdGEpLnRvQmUoMTAwMDApOyAvLyAyMDAwMCAtIDEwMDAwXG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MucG9ydGZvbGlvQmV0YSkudG9CZSgnbnVtYmVyJyk7XG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MuY29ycmVsYXRpb24pLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndXBkYXRlUHJpY2VIaXN0b3J5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWRkIHByaWNlIGVudHJpZXMnLCAoKSA9PiB7XG4gICAgICByaXNrR3VhcmRpYW4udXBkYXRlUHJpY2VIaXN0b3J5KCdCVENVU0RUJywgNTAwMDApO1xuICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnQlRDVVNEVCcsIDUwMTAwKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGJ5IGNoZWNraW5nIGNvcnJlbGF0aW9uIGNhbGN1bGF0aW9uIHdvcmtzXG4gICAgICByaXNrR3VhcmRpYW4udXBkYXRlUHJpY2VIaXN0b3J5KCdFVEhVU0RUJywgMzAwMCk7XG4gICAgICByaXNrR3VhcmRpYW4udXBkYXRlUHJpY2VIaXN0b3J5KCdFVEhVU0RUJywgMzAxMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvcnJlbGF0aW9uID0gcmlza0d1YXJkaWFuLmNhbGN1bGF0ZUNvcnJlbGF0aW9uKCdCVENVU0RUJywgJ0VUSFVTRFQnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgY29ycmVsYXRpb24pLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgcHJvdmlkZWQgdGltZXN0YW1wJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKSAtIDYwMDAwO1xuICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnQlRDVVNEVCcsIDUwMDAwLCB0aW1lc3RhbXApO1xuICAgICAgLy8gTm8gZXJyb3IgbWVhbnMgc3VjY2Vzc1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY2xlYXJDb3JyZWxhdGlvbkNhY2hlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2xlYXIgY2FjaGVkIGNvcnJlbGF0aW9ucycsICgpID0+IHtcbiAgICAgIC8vIEFkZCBwcmljZSBoaXN0b3J5XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnQlRDVVNEVCcsIDUwMDAwICsgaSAqIDEwMCwgRGF0ZS5ub3coKSAtICgxMCAtIGkpICogNjAwMDApO1xuICAgICAgICByaXNrR3VhcmRpYW4udXBkYXRlUHJpY2VIaXN0b3J5KCdFVEhVU0RUJywgMzAwMCArIGkgKiAxMCwgRGF0ZS5ub3coKSAtICgxMCAtIGkpICogNjAwMDApO1xuICAgICAgfVxuXG4gICAgICAvLyBDYWxjdWxhdGUgYW5kIGNhY2hlXG4gICAgICBjb25zdCBjb3JyZWxhdGlvbjEgPSByaXNrR3VhcmRpYW4uY2FsY3VsYXRlQ29ycmVsYXRpb24oJ0JUQ1VTRFQnLCAnRVRIVVNEVCcpO1xuICAgICAgXG4gICAgICAvLyBDbGVhciBjYWNoZVxuICAgICAgcmlza0d1YXJkaWFuLmNsZWFyQ29ycmVsYXRpb25DYWNoZSgpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgcmVjYWxjdWxhdGVcbiAgICAgIGNvbnN0IGNvcnJlbGF0aW9uMiA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVDb3JyZWxhdGlvbignQlRDVVNEVCcsICdFVEhVU0RUJyk7XG4gICAgICBcbiAgICAgIC8vIFZhbHVlcyBzaG91bGQgYmUgdGhlIHNhbWUgKHNhbWUgZGF0YSlcbiAgICAgIGV4cGVjdChjb3JyZWxhdGlvbjEpLnRvQmVDbG9zZVRvKGNvcnJlbGF0aW9uMiwgMTApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZWRnZSBjYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzaWduYWwgZm9yIHNhbWUgc3ltYm9sIHJlZHVjaW5nIHBvc2l0aW9uJywgKCkgPT4ge1xuICAgICAgcmlza0d1YXJkaWFuLnNldEVxdWl0eSgxMDAwMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGV4aXN0aW5nUG9zaXRpb25zOiBQb3NpdGlvbltdID0gW1xuICAgICAgICB7IHN5bWJvbDogJ0JUQ1VTRFQnLCBzaWRlOiAnTE9ORycsIHNpemU6IDIwMDAwLCBlbnRyeVByaWNlOiA1MDAwMCwgdW5yZWFsaXplZFBuTDogMCwgbGV2ZXJhZ2U6IDIsIHBoYXNlSWQ6ICdwaGFzZTEnIH0sXG4gICAgICBdO1xuXG4gICAgICAvLyBTZWxsIHNpZ25hbCB0byByZWR1Y2UgbG9uZyBwb3NpdGlvblxuICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgIHNpZ25hbElkOiAndGVzdC0xMCcsXG4gICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnLFxuICAgICAgICBzeW1ib2w6ICdCVENVU0RUJyxcbiAgICAgICAgc2lkZTogJ1NFTEwnLFxuICAgICAgICByZXF1ZXN0ZWRTaXplOiAxMDAwMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgZGVjaXNpb24gPSByaXNrR3VhcmRpYW4uY2hlY2tTaWduYWwoc2lnbmFsLCBleGlzdGluZ1Bvc2l0aW9ucyk7XG4gICAgICBleHBlY3QoZGVjaXNpb24uYXBwcm92ZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAvLyBQcm9qZWN0ZWQgbGV2ZXJhZ2Ugc2hvdWxkIGJlIGxvd2VyXG4gICAgICBleHBlY3QoZGVjaXNpb24ucmlza01ldHJpY3MucHJvamVjdGVkTGV2ZXJhZ2UpLnRvQmVMZXNzVGhhbihkZWNpc2lvbi5yaXNrTWV0cmljcy5jdXJyZW50TGV2ZXJhZ2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgemVybyBlcXVpdHkgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNpZ25hbDogSW50ZW50U2lnbmFsID0ge1xuICAgICAgICBzaWduYWxJZDogJ3Rlc3QtMTEnLFxuICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyxcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHNpZGU6ICdCVVknLFxuICAgICAgICByZXF1ZXN0ZWRTaXplOiAxMDAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBkZWNpc2lvbiA9IHJpc2tHdWFyZGlhbi5jaGVja1NpZ25hbChzaWduYWwsIFtdKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcy5jdXJyZW50TGV2ZXJhZ2UpLnRvQmUoMCk7XG4gICAgICBleHBlY3QoZGVjaXNpb24ucmlza01ldHJpY3MucHJvamVjdGVkTGV2ZXJhZ2UpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=