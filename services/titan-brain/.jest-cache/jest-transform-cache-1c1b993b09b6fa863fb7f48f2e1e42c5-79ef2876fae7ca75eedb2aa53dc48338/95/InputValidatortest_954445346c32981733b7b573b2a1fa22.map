{"file":"/Users/ivan/Code/trading/titan/services/titan-brain/tests/unit/InputValidator.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-brain/tests/unit/InputValidator.test.ts"],"sourcesContent":["/**\n * InputValidator Tests\n * \n * Tests for input validation and sanitization functionality\n */\n\nimport { InputValidator } from '../../src/security/InputValidator.js';\n\ndescribe('InputValidator', () => {\n  describe('String Validation', () => {\n    it('should validate required strings', () => {\n      const result = InputValidator.validateString('test', 'field', { required: true });\n      expect(result.isValid).toBe(true);\n      expect(result.sanitizedValue).toBe('test');\n    });\n\n    it('should reject empty required strings', () => {\n      const result = InputValidator.validateString('', 'field', { required: true });\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('field is required');\n    });\n\n    it('should validate string length', () => {\n      const result = InputValidator.validateString('ab', 'field', { minLength: 3, maxLength: 10 });\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('field must be at least 3 characters long');\n    });\n\n    it('should validate against pattern', () => {\n      const result = InputValidator.validateString('invalid!', 'field', { pattern: /^[a-zA-Z0-9]+$/ });\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('field format is invalid');\n    });\n\n    it('should validate allowed values', () => {\n      const result = InputValidator.validateString('invalid', 'field', { allowedValues: ['valid1', 'valid2'] });\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('field must be one of: valid1, valid2');\n    });\n\n    it('should sanitize strings when requested', () => {\n      const result = InputValidator.validateString('  test\\x00string  ', 'field', { sanitize: true });\n      expect(result.isValid).toBe(true);\n      expect(result.sanitizedValue).toBe('teststring');\n    });\n  });\n\n  describe('Number Validation', () => {\n    it('should validate numbers', () => {\n      const result = InputValidator.validateNumber(42, 'field', { required: true });\n      expect(result.isValid).toBe(true);\n      expect(result.sanitizedValue).toBe(42);\n    });\n\n    it('should convert string numbers', () => {\n      const result = InputValidator.validateNumber('42.5', 'field', { required: true });\n      expect(result.isValid).toBe(true);\n      expect(result.sanitizedValue).toBe(42.5);\n    });\n\n    it('should reject invalid number strings', () => {\n      const result = InputValidator.validateNumber('not-a-number', 'field', { required: true });\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('field must be a valid number');\n    });\n\n    it('should validate number ranges', () => {\n      const result = InputValidator.validateNumber(150, 'field', { min: 0, max: 100 });\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('field must be at most 100');\n    });\n\n    it('should reject infinity and NaN', () => {\n      const result1 = InputValidator.validateNumber(Infinity, 'field', { required: true });\n      expect(result1.isValid).toBe(false);\n      expect(result1.errors).toContain('field must be a finite number');\n\n      const result2 = InputValidator.validateNumber(NaN, 'field', { required: true });\n      expect(result2.isValid).toBe(false);\n      expect(result2.errors).toContain('field must be a finite number');\n    });\n  });\n\n  describe('Boolean Validation', () => {\n    it('should validate boolean values', () => {\n      const result = InputValidator.validateBoolean(true, 'field', { required: true });\n      expect(result.isValid).toBe(true);\n      expect(result.sanitizedValue).toBe(true);\n    });\n\n    it('should convert string booleans', () => {\n      const result1 = InputValidator.validateBoolean('true', 'field', { required: true });\n      expect(result1.isValid).toBe(true);\n      expect(result1.sanitizedValue).toBe(true);\n\n      const result2 = InputValidator.validateBoolean('false', 'field', { required: true });\n      expect(result2.isValid).toBe(true);\n      expect(result2.sanitizedValue).toBe(false);\n    });\n\n    it('should convert number booleans', () => {\n      const result1 = InputValidator.validateBoolean(1, 'field', { required: true });\n      expect(result1.isValid).toBe(true);\n      expect(result1.sanitizedValue).toBe(true);\n\n      const result2 = InputValidator.validateBoolean(0, 'field', { required: true });\n      expect(result2.isValid).toBe(true);\n      expect(result2.sanitizedValue).toBe(false);\n    });\n  });\n\n  describe('Trading-Specific Validations', () => {\n    it('should validate signal IDs', () => {\n      const result1 = InputValidator.validateSignalId('valid-signal_123');\n      expect(result1.isValid).toBe(true);\n\n      const result2 = InputValidator.validateSignalId('invalid signal!');\n      expect(result2.isValid).toBe(false);\n      expect(result2.errors).toContain('signalId format is invalid');\n    });\n\n    it('should validate phase IDs', () => {\n      const result1 = InputValidator.validatePhaseId('phase1');\n      expect(result1.isValid).toBe(true);\n\n      const result2 = InputValidator.validatePhaseId('invalid-phase');\n      expect(result2.isValid).toBe(false);\n      expect(result2.errors).toContain('phaseId must be one of: phase1, phase2, phase3');\n    });\n\n    it('should validate trading symbols', () => {\n      const result1 = InputValidator.validateSymbol('BTCUSDT');\n      expect(result1.isValid).toBe(true);\n\n      const result2 = InputValidator.validateSymbol('btc-usdt');\n      expect(result2.isValid).toBe(false);\n      expect(result2.errors).toContain('symbol format is invalid');\n    });\n\n    it('should validate trade sides', () => {\n      const result1 = InputValidator.validateSide('BUY');\n      expect(result1.isValid).toBe(true);\n\n      const result2 = InputValidator.validateSide('LONG');\n      expect(result2.isValid).toBe(false);\n      expect(result2.errors).toContain('side must be one of: BUY, SELL');\n    });\n\n    it('should validate position sizes', () => {\n      const result1 = InputValidator.validatePositionSize(0.1);\n      expect(result1.isValid).toBe(true);\n\n      const result2 = InputValidator.validatePositionSize(-1);\n      expect(result2.isValid).toBe(false);\n      expect(result2.errors).toContain('requestedSize must be at least 0.000001');\n\n      const result3 = InputValidator.validatePositionSize(2000000);\n      expect(result3.isValid).toBe(false);\n      expect(result3.errors).toContain('requestedSize must be at most 1000000');\n    });\n\n    it('should validate leverage', () => {\n      const result1 = InputValidator.validateLeverage(20);\n      expect(result1.isValid).toBe(true);\n\n      const result2 = InputValidator.validateLeverage(150);\n      expect(result2.isValid).toBe(false);\n      expect(result2.errors).toContain('leverage must be at most 100');\n    });\n  });\n\n  describe('Allocation Weights Validation', () => {\n    it('should validate correct allocation weights', () => {\n      const allocation = { w1: 0.5, w2: 0.3, w3: 0.2 };\n      const result = InputValidator.validateAllocationWeights(allocation);\n      expect(result.isValid).toBe(true);\n      expect(result.sanitizedValue).toEqual(allocation);\n    });\n\n    it('should reject allocation weights that do not sum to 1.0', () => {\n      const allocation = { w1: 0.5, w2: 0.3, w3: 0.3 }; // Sum = 1.1\n      const result = InputValidator.validateAllocationWeights(allocation);\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('allocation weights must sum to 1.0, got 1.100');\n    });\n\n    it('should reject negative allocation weights', () => {\n      const allocation = { w1: -0.1, w2: 0.6, w3: 0.5 };\n      const result = InputValidator.validateAllocationWeights(allocation);\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('w1 must be at least 0');\n    });\n\n    it('should reject allocation weights greater than 1.0', () => {\n      const allocation = { w1: 1.5, w2: 0, w3: 0 };\n      const result = InputValidator.validateAllocationWeights(allocation);\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('w1 must be at most 1');\n    });\n  });\n\n  describe('Signal Request Validation', () => {\n    it('should validate complete signal request', () => {\n      const signalRequest = {\n        signalId: 'test-signal-123',\n        phaseId: 'phase1',\n        symbol: 'BTCUSDT',\n        side: 'BUY',\n        requestedSize: 0.1,\n        leverage: 20,\n        timestamp: Date.now()\n      };\n\n      const result = InputValidator.validateSignalRequest(signalRequest);\n      expect(result.isValid).toBe(true);\n      expect(result.sanitizedValue).toMatchObject({\n        signalId: 'test-signal-123',\n        phaseId: 'phase1',\n        symbol: 'BTCUSDT',\n        side: 'BUY',\n        requestedSize: 0.1,\n        leverage: 20\n      });\n    });\n\n    it('should reject invalid signal request', () => {\n      const signalRequest = {\n        signalId: '',\n        phaseId: 'invalid-phase',\n        symbol: 'btc',\n        side: 'LONG',\n        requestedSize: -1\n      };\n\n      const result = InputValidator.validateSignalRequest(signalRequest);\n      expect(result.isValid).toBe(false);\n      expect(result.errors.length).toBeGreaterThan(0);\n    });\n\n    it('should handle missing optional fields', () => {\n      const signalRequest = {\n        signalId: 'test-signal-123',\n        phaseId: 'phase1',\n        symbol: 'BTCUSDT',\n        side: 'BUY',\n        requestedSize: 0.1\n        // leverage and timestamp are optional\n      };\n\n      const result = InputValidator.validateSignalRequest(signalRequest);\n      expect(result.isValid).toBe(true);\n    });\n  });\n\n  describe('Permissions Validation', () => {\n    it('should validate correct permissions', () => {\n      const permissions = ['override:create', 'breaker:reset'];\n      const result = InputValidator.validatePermissions(permissions);\n      expect(result.isValid).toBe(true);\n      expect(result.sanitizedValue).toEqual(permissions);\n    });\n\n    it('should reject invalid permissions', () => {\n      const permissions = ['invalid:permission', 'override:create'];\n      const result = InputValidator.validatePermissions(permissions);\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('permission must be one of: override:create, override:deactivate, breaker:reset, operator:create, config:update');\n    });\n\n    it('should reject empty permissions array', () => {\n      const result = InputValidator.validatePermissions([]);\n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('permissions must have at least 1 items');\n    });\n  });\n});"],"version":3}