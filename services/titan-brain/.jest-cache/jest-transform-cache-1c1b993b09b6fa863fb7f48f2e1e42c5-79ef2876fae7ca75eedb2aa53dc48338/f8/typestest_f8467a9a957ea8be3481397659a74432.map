{"file":"/Users/ivan/Code/trading/titan/services/titan-brain/tests/unit/types.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-brain/tests/unit/types.test.ts"],"sourcesContent":["/**\n * Type Tests\n * Verifies type definitions are correct and usable\n */\n\nimport {\n  EquityTier,\n  AllocationVector,\n  PhaseId,\n  IntentSignal,\n  Position,\n  BreakerType,\n  BreakerStatus,\n  TreasuryStatus,\n  BrainDecision,\n} from '../../src/types/index.js';\n\ndescribe('Types', () => {\n  describe('EquityTier', () => {\n    it('should have all expected tiers', () => {\n      expect(EquityTier.MICRO).toBe('MICRO');\n      expect(EquityTier.SMALL).toBe('SMALL');\n      expect(EquityTier.MEDIUM).toBe('MEDIUM');\n      expect(EquityTier.LARGE).toBe('LARGE');\n      expect(EquityTier.INSTITUTIONAL).toBe('INSTITUTIONAL');\n    });\n  });\n\n  describe('AllocationVector', () => {\n    it('should create valid allocation vector', () => {\n      const vector: AllocationVector = {\n        w1: 0.5,\n        w2: 0.3,\n        w3: 0.2,\n        timestamp: Date.now(),\n      };\n\n      expect(vector.w1 + vector.w2 + vector.w3).toBeCloseTo(1.0);\n    });\n  });\n\n  describe('PhaseId', () => {\n    it('should accept valid phase IDs', () => {\n      const phases: PhaseId[] = ['phase1', 'phase2', 'phase3'];\n      expect(phases).toHaveLength(3);\n    });\n  });\n\n  describe('IntentSignal', () => {\n    it('should create valid intent signal', () => {\n      const signal: IntentSignal = {\n        signalId: 'sig_123',\n        phaseId: 'phase1',\n        symbol: 'BTCUSDT',\n        side: 'BUY',\n        requestedSize: 1000,\n        timestamp: Date.now(),\n      };\n\n      expect(signal.signalId).toBe('sig_123');\n      expect(signal.phaseId).toBe('phase1');\n      expect(signal.side).toBe('BUY');\n    });\n  });\n\n  describe('Position', () => {\n    it('should create valid position', () => {\n      const position: Position = {\n        symbol: 'BTCUSDT',\n        side: 'LONG',\n        size: 5000,\n        entryPrice: 50000,\n        unrealizedPnL: 100,\n        leverage: 10,\n        phaseId: 'phase1',\n      };\n\n      expect(position.symbol).toBe('BTCUSDT');\n      expect(position.side).toBe('LONG');\n      expect(position.leverage).toBe(10);\n    });\n  });\n\n  describe('BreakerType', () => {\n    it('should have HARD and SOFT types', () => {\n      expect(BreakerType.HARD).toBe('HARD');\n      expect(BreakerType.SOFT).toBe('SOFT');\n    });\n  });\n\n  describe('BreakerStatus', () => {\n    it('should create valid breaker status', () => {\n      const status: BreakerStatus = {\n        active: false,\n        dailyDrawdown: 0.05,\n        consecutiveLosses: 1,\n        equityLevel: 1000,\n      };\n\n      expect(status.active).toBe(false);\n      expect(status.dailyDrawdown).toBe(0.05);\n    });\n\n    it('should create active breaker status', () => {\n      const status: BreakerStatus = {\n        active: true,\n        type: BreakerType.HARD,\n        reason: 'Daily drawdown exceeded',\n        triggeredAt: Date.now(),\n        dailyDrawdown: 0.16,\n        consecutiveLosses: 0,\n        equityLevel: 170,\n      };\n\n      expect(status.active).toBe(true);\n      expect(status.type).toBe(BreakerType.HARD);\n    });\n  });\n\n  describe('TreasuryStatus', () => {\n    it('should create valid treasury status', () => {\n      const status: TreasuryStatus = {\n        futuresWallet: 1000,\n        spotWallet: 500,\n        totalSwept: 500,\n        highWatermark: 1200,\n        lockedProfit: 500,\n        riskCapital: 1000,\n      };\n\n      expect(status.futuresWallet).toBe(1000);\n      expect(status.spotWallet).toBe(500);\n      expect(status.totalSwept).toBe(500);\n    });\n  });\n\n  describe('BrainDecision', () => {\n    it('should create valid brain decision', () => {\n      const decision: BrainDecision = {\n        signalId: 'sig_123',\n        approved: true,\n        authorizedSize: 800,\n        reason: 'Signal approved with size reduction',\n        allocation: {\n          w1: 0.8,\n          w2: 0.2,\n          w3: 0,\n          timestamp: Date.now(),\n        },\n        performance: {\n          phaseId: 'phase1',\n          sharpeRatio: 1.5,\n          totalPnL: 500,\n          tradeCount: 20,\n          winRate: 0.6,\n          avgWin: 50,\n          avgLoss: 30,\n          modifier: 1.0,\n        },\n        risk: {\n          approved: true,\n          reason: 'Within risk limits',\n          adjustedSize: 800,\n          riskMetrics: {\n            currentLeverage: 5,\n            projectedLeverage: 8,\n            correlation: 0.3,\n            portfolioDelta: 1000,\n            portfolioBeta: 0.8,\n          },\n        },\n        timestamp: Date.now(),\n      };\n\n      expect(decision.approved).toBe(true);\n      expect(decision.authorizedSize).toBe(800);\n    });\n  });\n});\n"],"version":3}