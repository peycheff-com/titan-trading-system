{"file":"/Users/ivan/Code/trading/titan/services/titan-brain/src/config/ConfigValidator.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-brain/src/config/ConfigValidator.ts"],"sourcesContent":["/**\n * ConfigValidator - Environment variable validation for Railway deployment\n * \n * Validates all required and optional environment variables with proper\n * error messages and type checking for Railway deployment.\n * \n * Requirements: 1.3.1, 1.3.2, 1.3.3, 1.3.4, 1.3.5\n */\n\nimport { Logger } from '../logging/Logger.js';\n\n/**\n * Configuration validation rule\n */\nexport interface ValidationRule {\n  name: string;\n  required: boolean;\n  type: 'string' | 'number' | 'boolean' | 'url' | 'port' | 'enum';\n  defaultValue?: string | number | boolean;\n  enumValues?: string[];\n  minValue?: number;\n  maxValue?: number;\n  pattern?: RegExp;\n  description: string;\n}\n\n/**\n * Validation result for a single variable\n */\nexport interface VariableValidationResult {\n  name: string;\n  value: string | number | boolean | undefined;\n  valid: boolean;\n  error?: string;\n  warning?: string;\n  usingDefault: boolean;\n}\n\n/**\n * Overall validation result\n */\nexport interface ConfigValidationResult {\n  valid: boolean;\n  errors: string[];\n  warnings: string[];\n  variables: VariableValidationResult[];\n  summary: {\n    total: number;\n    valid: number;\n    invalid: number;\n    warnings: number;\n    usingDefaults: number;\n  };\n}\n\n/**\n * Configuration validator for environment variables\n */\nexport class ConfigValidator {\n  private rules: Map<string, ValidationRule> = new Map();\n  private logger: Logger;\n\n  constructor(logger?: Logger) {\n    this.logger = logger ?? Logger.getInstance('config-validator');\n    this.initializeDefaultRules();\n  }\n\n  /**\n   * Initialize default validation rules for Titan Brain\n   */\n  private initializeDefaultRules(): void {\n    const defaultRules: ValidationRule[] = [\n      // Core application settings\n      {\n        name: 'NODE_ENV',\n        required: true,\n        type: 'enum',\n        enumValues: ['development', 'production', 'test'],\n        defaultValue: 'production',\n        description: 'Node.js environment mode'\n      },\n      {\n        name: 'PORT',\n        required: true,\n        type: 'port',\n        defaultValue: 3000,\n        description: 'HTTP server port'\n      },\n      {\n        name: 'HOST',\n        required: false,\n        type: 'string',\n        defaultValue: '0.0.0.0',\n        description: 'HTTP server host'\n      },\n\n      // Database configuration\n      {\n        name: 'DATABASE_URL',\n        required: true,\n        type: 'url',\n        description: 'PostgreSQL database connection URL'\n      },\n      {\n        name: 'DATABASE_POOL_MIN',\n        required: false,\n        type: 'number',\n        defaultValue: 2,\n        minValue: 1,\n        maxValue: 50,\n        description: 'Minimum database connection pool size'\n      },\n      {\n        name: 'DATABASE_POOL_MAX',\n        required: false,\n        type: 'number',\n        defaultValue: 10,\n        minValue: 1,\n        maxValue: 100,\n        description: 'Maximum database connection pool size'\n      },\n\n      // Redis configuration (optional)\n      {\n        name: 'REDIS_URL',\n        required: false,\n        type: 'url',\n        description: 'Redis connection URL (optional, falls back to in-memory cache)'\n      },\n\n      // Security configuration\n      {\n        name: 'HMAC_SECRET',\n        required: false,\n        type: 'string',\n        description: 'HMAC secret for webhook signature verification'\n      },\n      {\n        name: 'HMAC_ALGORITHM',\n        required: false,\n        type: 'enum',\n        enumValues: ['sha256', 'sha512'],\n        defaultValue: 'sha256',\n        description: 'HMAC algorithm for signature verification'\n      },\n\n      // Logging configuration\n      {\n        name: 'LOG_LEVEL',\n        required: false,\n        type: 'enum',\n        enumValues: ['fatal', 'error', 'warn', 'info', 'debug', 'trace'],\n        defaultValue: 'info',\n        description: 'Logging level'\n      },\n\n      // Rate limiting configuration\n      {\n        name: 'RATE_LIMIT_WINDOW_MS',\n        required: false,\n        type: 'number',\n        defaultValue: 60000,\n        minValue: 1000,\n        maxValue: 3600000,\n        description: 'Rate limiting window in milliseconds'\n      },\n      {\n        name: 'RATE_LIMIT_MAX_REQUESTS',\n        required: false,\n        type: 'number',\n        defaultValue: 100,\n        minValue: 1,\n        maxValue: 10000,\n        description: 'Maximum requests per rate limiting window'\n      },\n\n      // Health check configuration\n      {\n        name: 'HEALTH_CHECK_INTERVAL',\n        required: false,\n        type: 'number',\n        defaultValue: 30000,\n        minValue: 5000,\n        maxValue: 300000,\n        description: 'Health check interval in milliseconds'\n      },\n\n      // Service discovery configuration\n      {\n        name: 'PHASE1_SERVICE_URL',\n        required: false,\n        type: 'url',\n        description: 'Phase 1 (Scavenger) service URL'\n      },\n      {\n        name: 'PHASE2_SERVICE_URL',\n        required: false,\n        type: 'url',\n        description: 'Phase 2 (Hunter) service URL'\n      },\n      {\n        name: 'PHASE3_SERVICE_URL',\n        required: false,\n        type: 'url',\n        description: 'Phase 3 (Sentinel) service URL'\n      },\n\n      // Railway-specific configuration\n      {\n        name: 'RAILWAY_ENVIRONMENT',\n        required: false,\n        type: 'string',\n        description: 'Railway environment name'\n      },\n      {\n        name: 'RAILWAY_SERVICE_NAME',\n        required: false,\n        type: 'string',\n        description: 'Railway service name'\n      },\n\n      // CORS configuration\n      {\n        name: 'CORS_ORIGINS',\n        required: false,\n        type: 'string',\n        defaultValue: '*',\n        description: 'CORS allowed origins (comma-separated)'\n      },\n\n      // Startup configuration\n      {\n        name: 'STARTUP_TIMEOUT',\n        required: false,\n        type: 'number',\n        defaultValue: 60000,\n        minValue: 10000,\n        maxValue: 300000,\n        description: 'Maximum startup time in milliseconds'\n      },\n      {\n        name: 'SHUTDOWN_TIMEOUT',\n        required: false,\n        type: 'number',\n        defaultValue: 10000,\n        minValue: 1000,\n        maxValue: 60000,\n        description: 'Graceful shutdown timeout in milliseconds'\n      }\n    ];\n\n    for (const rule of defaultRules) {\n      this.rules.set(rule.name, rule);\n    }\n  }\n\n  /**\n   * Add a custom validation rule\n   */\n  addRule(rule: ValidationRule): void {\n    this.rules.set(rule.name, rule);\n  }\n\n  /**\n   * Remove a validation rule\n   */\n  removeRule(name: string): void {\n    this.rules.delete(name);\n  }\n\n  /**\n   * Validate all environment variables\n   */\n  validate(): ConfigValidationResult {\n    const variables: VariableValidationResult[] = [];\n    const errors: string[] = [];\n    const warnings: string[] = [];\n\n    this.logger.info('Starting environment variable validation', undefined, {\n      totalRules: this.rules.size\n    });\n\n    for (const rule of this.rules.values()) {\n      const result = this.validateVariable(rule);\n      variables.push(result);\n\n      if (!result.valid && result.error) {\n        errors.push(result.error);\n      }\n\n      if (result.warning) {\n        warnings.push(result.warning);\n      }\n    }\n\n    const summary = {\n      total: variables.length,\n      valid: variables.filter(v => v.valid).length,\n      invalid: variables.filter(v => !v.valid).length,\n      warnings: variables.filter(v => v.warning).length,\n      usingDefaults: variables.filter(v => v.usingDefault).length\n    };\n\n    const validationResult: ConfigValidationResult = {\n      valid: errors.length === 0,\n      errors,\n      warnings,\n      variables,\n      summary\n    };\n\n    this.logger.info('Environment variable validation completed', undefined, {\n      valid: validationResult.valid,\n      errors: errors.length,\n      warnings: warnings.length,\n      usingDefaults: summary.usingDefaults\n    });\n\n    return validationResult;\n  }\n\n  /**\n   * Validate a single environment variable\n   */\n  private validateVariable(rule: ValidationRule): VariableValidationResult {\n    const rawValue = process.env[rule.name];\n    let value: string | number | boolean | undefined = rawValue;\n    let valid = true;\n    let error: string | undefined;\n    let warning: string | undefined;\n    let usingDefault = false;\n\n    // Check if variable is missing\n    if (rawValue === undefined || rawValue === '') {\n      if (rule.required) {\n        if (rule.defaultValue !== undefined) {\n          value = rule.defaultValue;\n          usingDefault = true;\n          warning = `Using default value for required variable ${rule.name}: ${rule.defaultValue}`;\n        } else {\n          valid = false;\n          error = `Required environment variable ${rule.name} is not set`;\n          return { name: rule.name, value, valid, error, warning, usingDefault };\n        }\n      } else if (rule.defaultValue !== undefined) {\n        value = rule.defaultValue;\n        usingDefault = true;\n      } else {\n        // Optional variable with no default\n        return { name: rule.name, value: undefined, valid: true, warning, usingDefault };\n      }\n    }\n\n    // Type validation and conversion\n    if (value !== undefined) {\n      const typeValidation = this.validateType(rule, String(value));\n      if (!typeValidation.valid) {\n        valid = false;\n        error = typeValidation.error;\n      } else {\n        value = typeValidation.value;\n      }\n    }\n\n    return { name: rule.name, value, valid, error, warning, usingDefault };\n  }\n\n  /**\n   * Validate and convert value based on type\n   */\n  private validateType(rule: ValidationRule, rawValue: string): {\n    valid: boolean;\n    value: string | number | boolean;\n    error?: string;\n  } {\n    switch (rule.type) {\n      case 'string':\n        return this.validateString(rule, rawValue);\n      case 'number':\n        return this.validateNumber(rule, rawValue);\n      case 'boolean':\n        return this.validateBoolean(rule, rawValue);\n      case 'url':\n        return this.validateUrl(rule, rawValue);\n      case 'port':\n        return this.validatePort(rule, rawValue);\n      case 'enum':\n        return this.validateEnum(rule, rawValue);\n      default:\n        return {\n          valid: false,\n          value: rawValue,\n          error: `Unknown validation type: ${rule.type}`\n        };\n    }\n  }\n\n  /**\n   * Validate string type\n   */\n  private validateString(rule: ValidationRule, value: string): {\n    valid: boolean;\n    value: string;\n    error?: string;\n  } {\n    if (rule.pattern && !rule.pattern.test(value)) {\n      return {\n        valid: false,\n        value,\n        error: `${rule.name} does not match required pattern`\n      };\n    }\n\n    return { valid: true, value };\n  }\n\n  /**\n   * Validate number type\n   */\n  private validateNumber(rule: ValidationRule, value: string): {\n    valid: boolean;\n    value: number;\n    error?: string;\n  } {\n    const numValue = Number(value);\n\n    if (isNaN(numValue)) {\n      return {\n        valid: false,\n        value: numValue,\n        error: `${rule.name} must be a valid number, got: ${value}`\n      };\n    }\n\n    if (rule.minValue !== undefined && numValue < rule.minValue) {\n      return {\n        valid: false,\n        value: numValue,\n        error: `${rule.name} must be >= ${rule.minValue}, got: ${numValue}`\n      };\n    }\n\n    if (rule.maxValue !== undefined && numValue > rule.maxValue) {\n      return {\n        valid: false,\n        value: numValue,\n        error: `${rule.name} must be <= ${rule.maxValue}, got: ${numValue}`\n      };\n    }\n\n    return { valid: true, value: numValue };\n  }\n\n  /**\n   * Validate boolean type\n   */\n  private validateBoolean(rule: ValidationRule, value: string): {\n    valid: boolean;\n    value: boolean;\n    error?: string;\n  } {\n    const lowerValue = value.toLowerCase();\n\n    if (['true', '1', 'yes', 'on'].includes(lowerValue)) {\n      return { valid: true, value: true };\n    }\n\n    if (['false', '0', 'no', 'off'].includes(lowerValue)) {\n      return { valid: true, value: false };\n    }\n\n    return {\n      valid: false,\n      value: false,\n      error: `${rule.name} must be a boolean value (true/false, 1/0, yes/no, on/off), got: ${value}`\n    };\n  }\n\n  /**\n   * Validate URL type\n   */\n  private validateUrl(rule: ValidationRule, value: string): {\n    valid: boolean;\n    value: string;\n    error?: string;\n  } {\n    try {\n      new URL(value);\n      return { valid: true, value };\n    } catch {\n      return {\n        valid: false,\n        value,\n        error: `${rule.name} must be a valid URL, got: ${value}`\n      };\n    }\n  }\n\n  /**\n   * Validate port type\n   */\n  private validatePort(rule: ValidationRule, value: string): {\n    valid: boolean;\n    value: number;\n    error?: string;\n  } {\n    const numValue = Number(value);\n\n    if (isNaN(numValue)) {\n      return {\n        valid: false,\n        value: numValue,\n        error: `${rule.name} must be a valid port number, got: ${value}`\n      };\n    }\n\n    if (numValue < 1 || numValue > 65535) {\n      return {\n        valid: false,\n        value: numValue,\n        error: `${rule.name} must be a valid port number (1-65535), got: ${numValue}`\n      };\n    }\n\n    return { valid: true, value: numValue };\n  }\n\n  /**\n   * Validate enum type\n   */\n  private validateEnum(rule: ValidationRule, value: string): {\n    valid: boolean;\n    value: string;\n    error?: string;\n  } {\n    if (!rule.enumValues || !rule.enumValues.includes(value)) {\n      return {\n        valid: false,\n        value,\n        error: `${rule.name} must be one of: ${rule.enumValues?.join(', ')}, got: ${value}`\n      };\n    }\n\n    return { valid: true, value };\n  }\n\n  /**\n   * Get configuration summary with masked sensitive values\n   */\n  getConfigSummary(): Record<string, string> {\n    const summary: Record<string, string> = {};\n    const sensitivePatterns = [\n      /secret/i,\n      /password/i,\n      /key/i,\n      /token/i,\n      /auth/i,\n      /credential/i\n    ];\n\n    for (const rule of this.rules.values()) {\n      const value = process.env[rule.name];\n      const isSensitive = sensitivePatterns.some(pattern => pattern.test(rule.name));\n\n      if (value === undefined) {\n        summary[rule.name] = '[NOT SET]';\n      } else if (isSensitive) {\n        summary[rule.name] = '[CONFIGURED]';\n      } else {\n        summary[rule.name] = value;\n      }\n    }\n\n    return summary;\n  }\n\n  /**\n   * Get all validation rules\n   */\n  getRules(): ValidationRule[] {\n    return Array.from(this.rules.values());\n  }\n\n  /**\n   * Get a specific validation rule\n   */\n  getRule(name: string): ValidationRule | undefined {\n    return this.rules.get(name);\n  }\n}"],"version":3}