1e614913e899610f76b4d3504985c885
"use strict";
/**
 * Unit tests for InMemoryCache
 */
Object.defineProperty(exports, "__esModule", { value: true });
const InMemoryCache_1 = require("../../src/cache/InMemoryCache");
describe('InMemoryCache', () => {
    let cache;
    beforeEach(() => {
        cache = new InMemoryCache_1.InMemoryCache(5, 1000); // Max 5 items, 1 second TTL
        cache.initialize();
    });
    afterEach(() => {
        cache.shutdown();
    });
    describe('basic operations', () => {
        it('should set and get values', () => {
            cache.set('key1', 'value1');
            expect(cache.get('key1')).toBe('value1');
            expect(cache.has('key1')).toBe(true);
            expect(cache.size()).toBe(1);
        });
        it('should return undefined for missing keys', () => {
            expect(cache.get('missing')).toBeUndefined();
            expect(cache.has('missing')).toBe(false);
        });
        it('should delete values', () => {
            cache.set('key1', 'value1');
            expect(cache.delete('key1')).toBe(true);
            expect(cache.get('key1')).toBeUndefined();
            expect(cache.has('key1')).toBe(false);
            expect(cache.size()).toBe(0);
        });
        it('should return false when deleting non-existent key', () => {
            expect(cache.delete('missing')).toBe(false);
        });
        it('should clear all values', () => {
            cache.set('key1', 'value1');
            cache.set('key2', 'value2');
            cache.clear();
            expect(cache.size()).toBe(0);
            expect(cache.isEmpty()).toBe(true);
            expect(cache.get('key1')).toBeUndefined();
            expect(cache.get('key2')).toBeUndefined();
        });
    });
    describe('TTL functionality', () => {
        it('should expire values after TTL', (done) => {
            cache.set('key1', 'value1', 100); // 100ms TTL
            expect(cache.get('key1')).toBe('value1');
            setTimeout(() => {
                expect(cache.get('key1')).toBeUndefined();
                expect(cache.has('key1')).toBe(false);
                done();
            }, 150);
        });
        it('should use default TTL when not specified', () => {
            cache.set('key1', 'value1'); // Uses default 1000ms TTL
            expect(cache.get('key1')).toBe('value1');
            // Should still be available after a short time
            setTimeout(() => {
                expect(cache.get('key1')).toBe('value1');
            }, 100);
        });
        it('should update TTL for existing entries', () => {
            cache.set('key1', 'value1', 100);
            expect(cache.updateTTL('key1', 2000)).toBe(true);
            expect(cache.getTTL('key1')).toBeGreaterThan(1900);
        });
        it('should return false when updating TTL for non-existent key', () => {
            expect(cache.updateTTL('missing', 1000)).toBe(false);
        });
        it('should return null TTL for non-existent key', () => {
            expect(cache.getTTL('missing')).toBeNull();
        });
    });
    describe('LRU eviction', () => {
        it('should evict least recently used items when full', () => {
            // Fill cache to capacity with some delay to ensure different access times
            for (let i = 1; i <= 5; i++) {
                cache.set(`key${i}`, `value${i}`);
                // Small delay to ensure different lastAccessed times
                if (i < 5) {
                    const start = Date.now();
                    while (Date.now() - start < 1) { } // 1ms delay
                }
            }
            expect(cache.size()).toBe(5);
            expect(cache.isFull()).toBe(true);
            // Access key5 to make it recently used (it was the last one added)
            cache.get('key5');
            // Add new item, should evict key1 (least recently used)
            cache.set('key6', 'value6');
            expect(cache.size()).toBe(5);
            expect(cache.get('key1')).toBeUndefined(); // Should be evicted (oldest)
            expect(cache.get('key5')).toBe('value5'); // Should still exist (recently accessed)
            expect(cache.get('key6')).toBe('value6'); // Should exist (just added)
        });
        it('should evict multiple items when needed', () => {
            const largeCache = new InMemoryCache_1.InMemoryCache(10, 1000);
            largeCache.initialize();
            // Fill cache
            for (let i = 1; i <= 10; i++) {
                largeCache.set(`key${i}`, `value${i}`);
            }
            expect(largeCache.size()).toBe(10);
            // Add new item, should evict 10% (1 item minimum)
            largeCache.set('key11', 'value11');
            expect(largeCache.size()).toBe(10); // Should still be at capacity
            expect(largeCache.get('key11')).toBe('value11');
            largeCache.shutdown();
        });
    });
    describe('multiple operations', () => {
        it('should get multiple values', () => {
            cache.set('key1', 'value1');
            cache.set('key2', 'value2');
            cache.set('key3', 'value3');
            const result = cache.getMultiple(['key1', 'key2', 'missing']);
            expect(result.size).toBe(2);
            expect(result.get('key1')).toBe('value1');
            expect(result.get('key2')).toBe('value2');
            expect(result.has('missing')).toBe(false);
        });
        it('should set multiple values', () => {
            const entries = new Map([
                ['key1', 'value1'],
                ['key2', 'value2'],
                ['key3', 'value3']
            ]);
            cache.setMultiple(entries, 500);
            expect(cache.size()).toBe(3);
            expect(cache.get('key1')).toBe('value1');
            expect(cache.get('key2')).toBe('value2');
            expect(cache.get('key3')).toBe('value3');
        });
        it('should delete multiple values', () => {
            cache.set('key1', 'value1');
            cache.set('key2', 'value2');
            cache.set('key3', 'value3');
            const deletedCount = cache.deleteMultiple(['key1', 'key3', 'missing']);
            expect(deletedCount).toBe(2);
            expect(cache.size()).toBe(1);
            expect(cache.get('key1')).toBeUndefined();
            expect(cache.get('key2')).toBe('value2');
            expect(cache.get('key3')).toBeUndefined();
        });
    });
    describe('statistics and monitoring', () => {
        it('should track hit and miss statistics', () => {
            cache.set('key1', 'value1');
            // Generate hits
            cache.get('key1');
            cache.get('key1');
            // Generate misses
            cache.get('missing1');
            cache.get('missing2');
            const stats = cache.getStats();
            expect(stats.hits).toBe(2);
            expect(stats.misses).toBe(2);
            expect(stats.hitRate).toBe(50); // 2 hits out of 4 total requests
        });
        it('should provide cache statistics', () => {
            cache.set('key1', 'value1');
            cache.set('key2', 'value2');
            const stats = cache.getStats();
            expect(stats.size).toBe(2);
            expect(stats.maxSize).toBe(5);
            expect(stats.memoryUsage).toBeGreaterThan(0);
            expect(stats.hitRate).toBeGreaterThanOrEqual(0);
        });
        it('should get expiring entries', (done) => {
            cache.set('key1', 'value1', 200); // Expires in 200ms
            cache.set('key2', 'value2', 2000); // Expires in 2s
            setTimeout(() => {
                const expiring = cache.getExpiringEntries(300); // Within 300ms
                expect(expiring.length).toBe(1);
                expect(expiring[0].key).toBe('key1');
                expect(expiring[0].timeLeft).toBeLessThan(200);
                done();
            }, 50);
        });
        it('should get most accessed entries', () => {
            cache.set('key1', 'value1');
            cache.set('key2', 'value2');
            cache.set('key3', 'value3');
            // Access key2 multiple times
            cache.get('key2');
            cache.get('key2');
            cache.get('key2');
            // Access key1 once
            cache.get('key1');
            const mostAccessed = cache.getMostAccessed(2);
            expect(mostAccessed.length).toBe(2);
            expect(mostAccessed[0].key).toBe('key2');
            expect(mostAccessed[0].accessCount).toBe(3);
            expect(mostAccessed[1].key).toBe('key1');
            expect(mostAccessed[1].accessCount).toBe(1);
        });
        it('should get all valid keys', (done) => {
            cache.set('key1', 'value1');
            cache.set('key2', 'value2');
            cache.set('key3', 'value3', 50); // Will expire soon
            const keys = cache.keys();
            expect(keys).toContain('key1');
            expect(keys).toContain('key2');
            expect(keys).toContain('key3');
            // Wait for key3 to expire
            setTimeout(() => {
                const keysAfterExpiry = cache.keys();
                expect(keysAfterExpiry).toContain('key1');
                expect(keysAfterExpiry).toContain('key2');
                expect(keysAfterExpiry).not.toContain('key3');
                done();
            }, 100);
        });
    });
    describe('event emission', () => {
        it('should emit set event', () => {
            const setSpy = jest.fn();
            cache.on('set', setSpy);
            cache.set('key1', 'value1', 500);
            expect(setSpy).toHaveBeenCalledWith(expect.objectContaining({
                key: 'key1',
                ttlMs: 500,
                size: 1,
                expiresAt: expect.any(String)
            }));
        });
        it('should emit hit event', () => {
            const hitSpy = jest.fn();
            cache.on('hit', hitSpy);
            cache.set('key1', 'value1');
            cache.get('key1');
            expect(hitSpy).toHaveBeenCalledWith(expect.objectContaining({
                key: 'key1',
                accessCount: 1
            }));
        });
        it('should emit miss event', () => {
            const missSpy = jest.fn();
            cache.on('miss', missSpy);
            cache.get('missing');
            expect(missSpy).toHaveBeenCalledWith({ key: 'missing' });
        });
        it('should emit delete event', () => {
            const deleteSpy = jest.fn();
            cache.on('delete', deleteSpy);
            cache.set('key1', 'value1');
            cache.delete('key1');
            expect(deleteSpy).toHaveBeenCalledWith(expect.objectContaining({
                key: 'key1',
                remainingSize: 0
            }));
        });
        it('should emit clear event', () => {
            const clearSpy = jest.fn();
            cache.on('clear', clearSpy);
            cache.set('key1', 'value1');
            cache.set('key2', 'value2');
            cache.clear();
            expect(clearSpy).toHaveBeenCalledWith({ previousSize: 2 });
        });
        it('should emit eviction event', () => {
            const evictionSpy = jest.fn();
            cache.on('eviction', evictionSpy);
            // Fill cache to capacity
            for (let i = 1; i <= 5; i++) {
                cache.set(`key${i}`, `value${i}`);
            }
            // Add one more to trigger eviction
            cache.set('key6', 'value6');
            expect(evictionSpy).toHaveBeenCalledWith(expect.objectContaining({
                evictedCount: 1, // Should evict exactly 1 item
                remainingSize: 4 // Size before adding the new item
            }));
        });
        it('should emit expired event', (done) => {
            const expiredSpy = jest.fn();
            cache.on('expired', expiredSpy);
            cache.set('key1', 'value1', 50); // 50ms TTL
            setTimeout(() => {
                cache.get('key1'); // This should trigger expiration
                expect(expiredSpy).toHaveBeenCalledWith({ key: 'key1' });
                done();
            }, 100);
        });
    });
    describe('edge cases', () => {
        it('should handle empty cache operations', () => {
            expect(cache.isEmpty()).toBe(true);
            expect(cache.size()).toBe(0);
            expect(cache.keys()).toEqual([]);
            expect(cache.getStats().size).toBe(0);
        });
        it('should handle complex data types', () => {
            const complexData = {
                array: [1, 2, 3],
                nested: { a: 1, b: { c: 2 } },
                date: new Date(),
                null: null,
                undefined: undefined
            };
            cache.set('complex', complexData);
            const retrieved = cache.get('complex');
            expect(retrieved).toEqual(complexData);
        });
        it('should handle zero TTL', () => {
            cache.set('key1', 'value1', 0);
            // Should expire immediately (zero TTL means expire at current time)
            expect(cache.get('key1')).toBeUndefined();
        });
        it('should handle very large TTL', () => {
            const largeTTL = 365 * 24 * 60 * 60 * 1000; // 1 year
            cache.set('key1', 'value1', largeTTL);
            expect(cache.get('key1')).toBe('value1');
            expect(cache.getTTL('key1')).toBeGreaterThan(largeTTL - 1000);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLWJyYWluL3Rlc3RzL2NhY2hlL0luTWVtb3J5Q2FjaGUudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBRUgsaUVBQThEO0FBRTlELFFBQVEsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO0lBQzdCLElBQUksS0FBb0IsQ0FBQztJQUV6QixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsS0FBSyxHQUFHLElBQUksNkJBQWEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyw0QkFBNEI7UUFDaEUsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3JCLENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUNuQixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7UUFDaEMsRUFBRSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtZQUNuQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztZQUU1QixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN6QyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtZQUNsRCxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFD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S0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRXRDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUNoRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLWJyYWluL3Rlc3RzL2NhY2hlL0luTWVtb3J5Q2FjaGUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaXQgdGVzdHMgZm9yIEluTWVtb3J5Q2FjaGVcbiAqL1xuXG5pbXBvcnQgeyBJbk1lbW9yeUNhY2hlIH0gZnJvbSAnLi4vLi4vc3JjL2NhY2hlL0luTWVtb3J5Q2FjaGUnO1xuXG5kZXNjcmliZSgnSW5NZW1vcnlDYWNoZScsICgpID0+IHtcbiAgbGV0IGNhY2hlOiBJbk1lbW9yeUNhY2hlO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNhY2hlID0gbmV3IEluTWVtb3J5Q2FjaGUoNSwgMTAwMCk7IC8vIE1heCA1IGl0ZW1zLCAxIHNlY29uZCBUVExcbiAgICBjYWNoZS5pbml0aWFsaXplKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgY2FjaGUuc2h1dGRvd24oKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Jhc2ljIG9wZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzZXQgYW5kIGdldCB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgICBjYWNoZS5zZXQoJ2tleTEnLCAndmFsdWUxJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjYWNoZS5nZXQoJ2tleTEnKSkudG9CZSgndmFsdWUxJyk7XG4gICAgICBleHBlY3QoY2FjaGUuaGFzKCdrZXkxJykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY2FjaGUuc2l6ZSgpKS50b0JlKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdW5kZWZpbmVkIGZvciBtaXNzaW5nIGtleXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoY2FjaGUuZ2V0KCdtaXNzaW5nJykpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjYWNoZS5oYXMoJ21pc3NpbmcnKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRlbGV0ZSB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgICBjYWNoZS5zZXQoJ2tleTEnLCAndmFsdWUxJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjYWNoZS5kZWxldGUoJ2tleTEnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjYWNoZS5nZXQoJ2tleTEnKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNhY2hlLmhhcygna2V5MScpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChjYWNoZS5zaXplKCkpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIGRlbGV0aW5nIG5vbi1leGlzdGVudCBrZXknLCAoKSA9PiB7XG4gICAgICBleHBlY3QoY2FjaGUuZGVsZXRlKCdtaXNzaW5nJykpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjbGVhciBhbGwgdmFsdWVzJywgKCkgPT4ge1xuICAgICAgY2FjaGUuc2V0KCdrZXkxJywgJ3ZhbHVlMScpO1xuICAgICAgY2FjaGUuc2V0KCdrZXkyJywgJ3ZhbHVlMicpO1xuICAgICAgXG4gICAgICBjYWNoZS5jbGVhcigpO1xuICAgICAgXG4gICAgICBleHBlY3QoY2FjaGUuc2l6ZSgpKS50b0JlKDApO1xuICAgICAgZXhwZWN0KGNhY2hlLmlzRW1wdHkoKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjYWNoZS5nZXQoJ2tleTEnKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNhY2hlLmdldCgna2V5MicpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUVEwgZnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGV4cGlyZSB2YWx1ZXMgYWZ0ZXIgVFRMJywgKGRvbmUpID0+IHtcbiAgICAgIGNhY2hlLnNldCgna2V5MScsICd2YWx1ZTEnLCAxMDApOyAvLyAxMDBtcyBUVExcbiAgICAgIFxuICAgICAgZXhwZWN0KGNhY2hlLmdldCgna2V5MScpKS50b0JlKCd2YWx1ZTEnKTtcbiAgICAgIFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGV4cGVjdChjYWNoZS5nZXQoJ2tleTEnKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QoY2FjaGUuaGFzKCdrZXkxJykpLnRvQmUoZmFsc2UpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCAxNTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgZGVmYXVsdCBUVEwgd2hlbiBub3Qgc3BlY2lmaWVkJywgKCkgPT4ge1xuICAgICAgY2FjaGUuc2V0KCdrZXkxJywgJ3ZhbHVlMScpOyAvLyBVc2VzIGRlZmF1bHQgMTAwMG1zIFRUTFxuICAgICAgXG4gICAgICBleHBlY3QoY2FjaGUuZ2V0KCdrZXkxJykpLnRvQmUoJ3ZhbHVlMScpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgc3RpbGwgYmUgYXZhaWxhYmxlIGFmdGVyIGEgc2hvcnQgdGltZVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGV4cGVjdChjYWNoZS5nZXQoJ2tleTEnKSkudG9CZSgndmFsdWUxJyk7XG4gICAgICB9LCAxMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgVFRMIGZvciBleGlzdGluZyBlbnRyaWVzJywgKCkgPT4ge1xuICAgICAgY2FjaGUuc2V0KCdrZXkxJywgJ3ZhbHVlMScsIDEwMCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjYWNoZS51cGRhdGVUVEwoJ2tleTEnLCAyMDAwKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjYWNoZS5nZXRUVEwoJ2tleTEnKSkudG9CZUdyZWF0ZXJUaGFuKDE5MDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiB1cGRhdGluZyBUVEwgZm9yIG5vbi1leGlzdGVudCBrZXknLCAoKSA9PiB7XG4gICAgICBleHBlY3QoY2FjaGUudXBkYXRlVFRMKCdtaXNzaW5nJywgMTAwMCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBUVEwgZm9yIG5vbi1leGlzdGVudCBrZXknLCAoKSA9PiB7XG4gICAgICBleHBlY3QoY2FjaGUuZ2V0VFRMKCdtaXNzaW5nJykpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMUlUgZXZpY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBldmljdCBsZWFzdCByZWNlbnRseSB1c2VkIGl0ZW1zIHdoZW4gZnVsbCcsICgpID0+IHtcbiAgICAgIC8vIEZpbGwgY2FjaGUgdG8gY2FwYWNpdHkgd2l0aCBzb21lIGRlbGF5IHRvIGVuc3VyZSBkaWZmZXJlbnQgYWNjZXNzIHRpbWVzXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA1OyBpKyspIHtcbiAgICAgICAgY2FjaGUuc2V0KGBrZXkke2l9YCwgYHZhbHVlJHtpfWApO1xuICAgICAgICAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgZGlmZmVyZW50IGxhc3RBY2Nlc3NlZCB0aW1lc1xuICAgICAgICBpZiAoaSA8IDUpIHtcbiAgICAgICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgd2hpbGUgKERhdGUubm93KCkgLSBzdGFydCA8IDEpIHt9IC8vIDFtcyBkZWxheVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGV4cGVjdChjYWNoZS5zaXplKCkpLnRvQmUoNSk7XG4gICAgICBleHBlY3QoY2FjaGUuaXNGdWxsKCkpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIEFjY2VzcyBrZXk1IHRvIG1ha2UgaXQgcmVjZW50bHkgdXNlZCAoaXQgd2FzIHRoZSBsYXN0IG9uZSBhZGRlZClcbiAgICAgIGNhY2hlLmdldCgna2V5NScpO1xuICAgICAgXG4gICAgICAvLyBBZGQgbmV3IGl0ZW0sIHNob3VsZCBldmljdCBrZXkxIChsZWFzdCByZWNlbnRseSB1c2VkKVxuICAgICAgY2FjaGUuc2V0KCdrZXk2JywgJ3ZhbHVlNicpO1xuICAgICAgXG4gICAgICBleHBlY3QoY2FjaGUuc2l6ZSgpKS50b0JlKDUpO1xuICAgICAgZXhwZWN0KGNhY2hlLmdldCgna2V5MScpKS50b0JlVW5kZWZpbmVkKCk7IC8vIFNob3VsZCBiZSBldmljdGVkIChvbGRlc3QpXG4gICAgICBleHBlY3QoY2FjaGUuZ2V0KCdrZXk1JykpLnRvQmUoJ3ZhbHVlNScpOyAvLyBTaG91bGQgc3RpbGwgZXhpc3QgKHJlY2VudGx5IGFjY2Vzc2VkKVxuICAgICAgZXhwZWN0KGNhY2hlLmdldCgna2V5NicpKS50b0JlKCd2YWx1ZTYnKTsgLy8gU2hvdWxkIGV4aXN0IChqdXN0IGFkZGVkKVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBldmljdCBtdWx0aXBsZSBpdGVtcyB3aGVuIG5lZWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGxhcmdlQ2FjaGUgPSBuZXcgSW5NZW1vcnlDYWNoZSgxMCwgMTAwMCk7XG4gICAgICBsYXJnZUNhY2hlLmluaXRpYWxpemUoKTtcbiAgICAgIFxuICAgICAgLy8gRmlsbCBjYWNoZVxuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTA7IGkrKykge1xuICAgICAgICBsYXJnZUNhY2hlLnNldChga2V5JHtpfWAsIGB2YWx1ZSR7aX1gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZXhwZWN0KGxhcmdlQ2FjaGUuc2l6ZSgpKS50b0JlKDEwKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIG5ldyBpdGVtLCBzaG91bGQgZXZpY3QgMTAlICgxIGl0ZW0gbWluaW11bSlcbiAgICAgIGxhcmdlQ2FjaGUuc2V0KCdrZXkxMScsICd2YWx1ZTExJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChsYXJnZUNhY2hlLnNpemUoKSkudG9CZSgxMCk7IC8vIFNob3VsZCBzdGlsbCBiZSBhdCBjYXBhY2l0eVxuICAgICAgZXhwZWN0KGxhcmdlQ2FjaGUuZ2V0KCdrZXkxMScpKS50b0JlKCd2YWx1ZTExJyk7XG4gICAgICBcbiAgICAgIGxhcmdlQ2FjaGUuc2h1dGRvd24oKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ211bHRpcGxlIG9wZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgbXVsdGlwbGUgdmFsdWVzJywgKCkgPT4ge1xuICAgICAgY2FjaGUuc2V0KCdrZXkxJywgJ3ZhbHVlMScpO1xuICAgICAgY2FjaGUuc2V0KCdrZXkyJywgJ3ZhbHVlMicpO1xuICAgICAgY2FjaGUuc2V0KCdrZXkzJywgJ3ZhbHVlMycpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBjYWNoZS5nZXRNdWx0aXBsZShbJ2tleTEnLCAna2V5MicsICdtaXNzaW5nJ10pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LnNpemUpLnRvQmUoMik7XG4gICAgICBleHBlY3QocmVzdWx0LmdldCgna2V5MScpKS50b0JlKCd2YWx1ZTEnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZ2V0KCdrZXkyJykpLnRvQmUoJ3ZhbHVlMicpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5oYXMoJ21pc3NpbmcnKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNldCBtdWx0aXBsZSB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlbnRyaWVzID0gbmV3IE1hcChbXG4gICAgICAgIFsna2V5MScsICd2YWx1ZTEnXSxcbiAgICAgICAgWydrZXkyJywgJ3ZhbHVlMiddLFxuICAgICAgICBbJ2tleTMnLCAndmFsdWUzJ11cbiAgICAgIF0pO1xuICAgICAgXG4gICAgICBjYWNoZS5zZXRNdWx0aXBsZShlbnRyaWVzLCA1MDApO1xuICAgICAgXG4gICAgICBleHBlY3QoY2FjaGUuc2l6ZSgpKS50b0JlKDMpO1xuICAgICAgZXhwZWN0KGNhY2hlLmdldCgna2V5MScpKS50b0JlKCd2YWx1ZTEnKTtcbiAgICAgIGV4cGVjdChjYWNoZS5nZXQoJ2tleTInKSkudG9CZSgndmFsdWUyJyk7XG4gICAgICBleHBlY3QoY2FjaGUuZ2V0KCdrZXkzJykpLnRvQmUoJ3ZhbHVlMycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZWxldGUgbXVsdGlwbGUgdmFsdWVzJywgKCkgPT4ge1xuICAgICAgY2FjaGUuc2V0KCdrZXkxJywgJ3ZhbHVlMScpO1xuICAgICAgY2FjaGUuc2V0KCdrZXkyJywgJ3ZhbHVlMicpO1xuICAgICAgY2FjaGUuc2V0KCdrZXkzJywgJ3ZhbHVlMycpO1xuICAgICAgXG4gICAgICBjb25zdCBkZWxldGVkQ291bnQgPSBjYWNoZS5kZWxldGVNdWx0aXBsZShbJ2tleTEnLCAna2V5MycsICdtaXNzaW5nJ10pO1xuICAgICAgXG4gICAgICBleHBlY3QoZGVsZXRlZENvdW50KS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGNhY2hlLnNpemUoKSkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChjYWNoZS5nZXQoJ2tleTEnKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNhY2hlLmdldCgna2V5MicpKS50b0JlKCd2YWx1ZTInKTtcbiAgICAgIGV4cGVjdChjYWNoZS5nZXQoJ2tleTMnKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc3RhdGlzdGljcyBhbmQgbW9uaXRvcmluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHRyYWNrIGhpdCBhbmQgbWlzcyBzdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgICAgY2FjaGUuc2V0KCdrZXkxJywgJ3ZhbHVlMScpO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBoaXRzXG4gICAgICBjYWNoZS5nZXQoJ2tleTEnKTtcbiAgICAgIGNhY2hlLmdldCgna2V5MScpO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBtaXNzZXNcbiAgICAgIGNhY2hlLmdldCgnbWlzc2luZzEnKTtcbiAgICAgIGNhY2hlLmdldCgnbWlzc2luZzInKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhdHMgPSBjYWNoZS5nZXRTdGF0cygpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RhdHMuaGl0cykudG9CZSgyKTtcbiAgICAgIGV4cGVjdChzdGF0cy5taXNzZXMpLnRvQmUoMik7XG4gICAgICBleHBlY3Qoc3RhdHMuaGl0UmF0ZSkudG9CZSg1MCk7IC8vIDIgaGl0cyBvdXQgb2YgNCB0b3RhbCByZXF1ZXN0c1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcm92aWRlIGNhY2hlIHN0YXRpc3RpY3MnLCAoKSA9PiB7XG4gICAgICBjYWNoZS5zZXQoJ2tleTEnLCAndmFsdWUxJyk7XG4gICAgICBjYWNoZS5zZXQoJ2tleTInLCAndmFsdWUyJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXRzID0gY2FjaGUuZ2V0U3RhdHMoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN0YXRzLnNpemUpLnRvQmUoMik7XG4gICAgICBleHBlY3Qoc3RhdHMubWF4U2l6ZSkudG9CZSg1KTtcbiAgICAgIGV4cGVjdChzdGF0cy5tZW1vcnlVc2FnZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLmhpdFJhdGUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCBleHBpcmluZyBlbnRyaWVzJywgKGRvbmUpID0+IHtcbiAgICAgIGNhY2hlLnNldCgna2V5MScsICd2YWx1ZTEnLCAyMDApOyAvLyBFeHBpcmVzIGluIDIwMG1zXG4gICAgICBjYWNoZS5zZXQoJ2tleTInLCAndmFsdWUyJywgMjAwMCk7IC8vIEV4cGlyZXMgaW4gMnNcbiAgICAgIFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGV4cGlyaW5nID0gY2FjaGUuZ2V0RXhwaXJpbmdFbnRyaWVzKDMwMCk7IC8vIFdpdGhpbiAzMDBtc1xuICAgICAgICBcbiAgICAgICAgZXhwZWN0KGV4cGlyaW5nLmxlbmd0aCkudG9CZSgxKTtcbiAgICAgICAgZXhwZWN0KGV4cGlyaW5nWzBdLmtleSkudG9CZSgna2V5MScpO1xuICAgICAgICBleHBlY3QoZXhwaXJpbmdbMF0udGltZUxlZnQpLnRvQmVMZXNzVGhhbigyMDApO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCA1MCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCBtb3N0IGFjY2Vzc2VkIGVudHJpZXMnLCAoKSA9PiB7XG4gICAgICBjYWNoZS5zZXQoJ2tleTEnLCAndmFsdWUxJyk7XG4gICAgICBjYWNoZS5zZXQoJ2tleTInLCAndmFsdWUyJyk7XG4gICAgICBjYWNoZS5zZXQoJ2tleTMnLCAndmFsdWUzJyk7XG4gICAgICBcbiAgICAgIC8vIEFjY2VzcyBrZXkyIG11bHRpcGxlIHRpbWVzXG4gICAgICBjYWNoZS5nZXQoJ2tleTInKTtcbiAgICAgIGNhY2hlLmdldCgna2V5MicpO1xuICAgICAgY2FjaGUuZ2V0KCdrZXkyJyk7XG4gICAgICBcbiAgICAgIC8vIEFjY2VzcyBrZXkxIG9uY2VcbiAgICAgIGNhY2hlLmdldCgna2V5MScpO1xuICAgICAgXG4gICAgICBjb25zdCBtb3N0QWNjZXNzZWQgPSBjYWNoZS5nZXRNb3N0QWNjZXNzZWQoMik7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb3N0QWNjZXNzZWQubGVuZ3RoKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KG1vc3RBY2Nlc3NlZFswXS5rZXkpLnRvQmUoJ2tleTInKTtcbiAgICAgIGV4cGVjdChtb3N0QWNjZXNzZWRbMF0uYWNjZXNzQ291bnQpLnRvQmUoMyk7XG4gICAgICBleHBlY3QobW9zdEFjY2Vzc2VkWzFdLmtleSkudG9CZSgna2V5MScpO1xuICAgICAgZXhwZWN0KG1vc3RBY2Nlc3NlZFsxXS5hY2Nlc3NDb3VudCkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IGFsbCB2YWxpZCBrZXlzJywgKGRvbmUpID0+IHtcbiAgICAgIGNhY2hlLnNldCgna2V5MScsICd2YWx1ZTEnKTtcbiAgICAgIGNhY2hlLnNldCgna2V5MicsICd2YWx1ZTInKTtcbiAgICAgIGNhY2hlLnNldCgna2V5MycsICd2YWx1ZTMnLCA1MCk7IC8vIFdpbGwgZXhwaXJlIHNvb25cbiAgICAgIFxuICAgICAgY29uc3Qga2V5cyA9IGNhY2hlLmtleXMoKTtcbiAgICAgIGV4cGVjdChrZXlzKS50b0NvbnRhaW4oJ2tleTEnKTtcbiAgICAgIGV4cGVjdChrZXlzKS50b0NvbnRhaW4oJ2tleTInKTtcbiAgICAgIGV4cGVjdChrZXlzKS50b0NvbnRhaW4oJ2tleTMnKTtcbiAgICAgIFxuICAgICAgLy8gV2FpdCBmb3Iga2V5MyB0byBleHBpcmVcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zdCBrZXlzQWZ0ZXJFeHBpcnkgPSBjYWNoZS5rZXlzKCk7XG4gICAgICAgIGV4cGVjdChrZXlzQWZ0ZXJFeHBpcnkpLnRvQ29udGFpbigna2V5MScpO1xuICAgICAgICBleHBlY3Qoa2V5c0FmdGVyRXhwaXJ5KS50b0NvbnRhaW4oJ2tleTInKTtcbiAgICAgICAgZXhwZWN0KGtleXNBZnRlckV4cGlyeSkubm90LnRvQ29udGFpbigna2V5MycpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCAxMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZXZlbnQgZW1pc3Npb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBlbWl0IHNldCBldmVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHNldFNweSA9IGplc3QuZm4oKTtcbiAgICAgIGNhY2hlLm9uKCdzZXQnLCBzZXRTcHkpO1xuICAgICAgXG4gICAgICBjYWNoZS5zZXQoJ2tleTEnLCAndmFsdWUxJywgNTAwKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNldFNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICBrZXk6ICdrZXkxJyxcbiAgICAgICAgdHRsTXM6IDUwMCxcbiAgICAgICAgc2l6ZTogMSxcbiAgICAgICAgZXhwaXJlc0F0OiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgIH0pKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW1pdCBoaXQgZXZlbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBoaXRTcHkgPSBqZXN0LmZuKCk7XG4gICAgICBjYWNoZS5vbignaGl0JywgaGl0U3B5KTtcbiAgICAgIFxuICAgICAgY2FjaGUuc2V0KCdrZXkxJywgJ3ZhbHVlMScpO1xuICAgICAgY2FjaGUuZ2V0KCdrZXkxJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChoaXRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAga2V5OiAna2V5MScsXG4gICAgICAgIGFjY2Vzc0NvdW50OiAxXG4gICAgICB9KSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVtaXQgbWlzcyBldmVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG1pc3NTcHkgPSBqZXN0LmZuKCk7XG4gICAgICBjYWNoZS5vbignbWlzcycsIG1pc3NTcHkpO1xuICAgICAgXG4gICAgICBjYWNoZS5nZXQoJ21pc3NpbmcnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1pc3NTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHsga2V5OiAnbWlzc2luZycgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVtaXQgZGVsZXRlIGV2ZW50JywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVsZXRlU3B5ID0gamVzdC5mbigpO1xuICAgICAgY2FjaGUub24oJ2RlbGV0ZScsIGRlbGV0ZVNweSk7XG4gICAgICBcbiAgICAgIGNhY2hlLnNldCgna2V5MScsICd2YWx1ZTEnKTtcbiAgICAgIGNhY2hlLmRlbGV0ZSgna2V5MScpO1xuICAgICAgXG4gICAgICBleHBlY3QoZGVsZXRlU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgIGtleTogJ2tleTEnLFxuICAgICAgICByZW1haW5pbmdTaXplOiAwXG4gICAgICB9KSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVtaXQgY2xlYXIgZXZlbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjbGVhclNweSA9IGplc3QuZm4oKTtcbiAgICAgIGNhY2hlLm9uKCdjbGVhcicsIGNsZWFyU3B5KTtcbiAgICAgIFxuICAgICAgY2FjaGUuc2V0KCdrZXkxJywgJ3ZhbHVlMScpO1xuICAgICAgY2FjaGUuc2V0KCdrZXkyJywgJ3ZhbHVlMicpO1xuICAgICAgY2FjaGUuY2xlYXIoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNsZWFyU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7IHByZXZpb3VzU2l6ZTogMiB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW1pdCBldmljdGlvbiBldmVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGV2aWN0aW9uU3B5ID0gamVzdC5mbigpO1xuICAgICAgY2FjaGUub24oJ2V2aWN0aW9uJywgZXZpY3Rpb25TcHkpO1xuICAgICAgXG4gICAgICAvLyBGaWxsIGNhY2hlIHRvIGNhcGFjaXR5XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA1OyBpKyspIHtcbiAgICAgICAgY2FjaGUuc2V0KGBrZXkke2l9YCwgYHZhbHVlJHtpfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBZGQgb25lIG1vcmUgdG8gdHJpZ2dlciBldmljdGlvblxuICAgICAgY2FjaGUuc2V0KCdrZXk2JywgJ3ZhbHVlNicpO1xuICAgICAgXG4gICAgICBleHBlY3QoZXZpY3Rpb25TcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgZXZpY3RlZENvdW50OiAxLCAvLyBTaG91bGQgZXZpY3QgZXhhY3RseSAxIGl0ZW1cbiAgICAgICAgcmVtYWluaW5nU2l6ZTogNCAvLyBTaXplIGJlZm9yZSBhZGRpbmcgdGhlIG5ldyBpdGVtXG4gICAgICB9KSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVtaXQgZXhwaXJlZCBldmVudCcsIChkb25lKSA9PiB7XG4gICAgICBjb25zdCBleHBpcmVkU3B5ID0gamVzdC5mbigpO1xuICAgICAgY2FjaGUub24oJ2V4cGlyZWQnLCBleHBpcmVkU3B5KTtcbiAgICAgIFxuICAgICAgY2FjaGUuc2V0KCdrZXkxJywgJ3ZhbHVlMScsIDUwKTsgLy8gNTBtcyBUVExcbiAgICAgIFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNhY2hlLmdldCgna2V5MScpOyAvLyBUaGlzIHNob3VsZCB0cmlnZ2VyIGV4cGlyYXRpb25cbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChleHBpcmVkU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7IGtleTogJ2tleTEnIH0pO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCAxMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZWRnZSBjYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBjYWNoZSBvcGVyYXRpb25zJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGNhY2hlLmlzRW1wdHkoKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjYWNoZS5zaXplKCkpLnRvQmUoMCk7XG4gICAgICBleHBlY3QoY2FjaGUua2V5cygpKS50b0VxdWFsKFtdKTtcbiAgICAgIGV4cGVjdChjYWNoZS5nZXRTdGF0cygpLnNpemUpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV4IGRhdGEgdHlwZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wbGV4RGF0YSA9IHtcbiAgICAgICAgYXJyYXk6IFsxLCAyLCAzXSxcbiAgICAgICAgbmVzdGVkOiB7IGE6IDEsIGI6IHsgYzogMiB9IH0sXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIG51bGw6IG51bGwsXG4gICAgICAgIHVuZGVmaW5lZDogdW5kZWZpbmVkXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjYWNoZS5zZXQoJ2NvbXBsZXgnLCBjb21wbGV4RGF0YSk7XG4gICAgICBjb25zdCByZXRyaWV2ZWQgPSBjYWNoZS5nZXQoJ2NvbXBsZXgnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJldHJpZXZlZCkudG9FcXVhbChjb21wbGV4RGF0YSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB6ZXJvIFRUTCcsICgpID0+IHtcbiAgICAgIGNhY2hlLnNldCgna2V5MScsICd2YWx1ZTEnLCAwKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGV4cGlyZSBpbW1lZGlhdGVseSAoemVybyBUVEwgbWVhbnMgZXhwaXJlIGF0IGN1cnJlbnQgdGltZSlcbiAgICAgIGV4cGVjdChjYWNoZS5nZXQoJ2tleTEnKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsYXJnZSBUVEwnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZVRUTCA9IDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDA7IC8vIDEgeWVhclxuICAgICAgY2FjaGUuc2V0KCdrZXkxJywgJ3ZhbHVlMScsIGxhcmdlVFRMKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNhY2hlLmdldCgna2V5MScpKS50b0JlKCd2YWx1ZTEnKTtcbiAgICAgIGV4cGVjdChjYWNoZS5nZXRUVEwoJ2tleTEnKSkudG9CZUdyZWF0ZXJUaGFuKGxhcmdlVFRMIC0gMTAwMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9