{"file":"/Users/ivan/Code/trading/titan/services/titan-brain/tests/config/ConfigValidator.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-brain/tests/config/ConfigValidator.test.ts"],"sourcesContent":["/**\n * ConfigValidator Tests\n * \n * Comprehensive unit tests for the ConfigValidator class covering\n * environment variable validation, type checking, and error handling.\n */\n\nimport { ConfigValidator, ValidationRule } from '../../src/config/ConfigValidator.js';\nimport { Logger } from '../../src/logging/Logger.js';\n\n// Mock Logger\njest.mock('../../src/logging/Logger.js');\n\ndescribe('ConfigValidator', () => {\n  let configValidator: ConfigValidator;\n  let mockLogger: jest.Mocked<Logger>;\n  let originalEnv: NodeJS.ProcessEnv;\n\n  beforeEach(() => {\n    // Save original environment\n    originalEnv = { ...process.env };\n\n    // Create mock logger\n    mockLogger = {\n      info: jest.fn(),\n      warn: jest.fn(),\n      error: jest.fn(),\n      debug: jest.fn(),\n      logSecurityEvent: jest.fn()\n    } as any;\n\n    (Logger.getInstance as jest.Mock).mockReturnValue(mockLogger);\n\n    configValidator = new ConfigValidator();\n    \n    // Clear all default rules for isolated testing\n    const defaultRules = configValidator.getRules();\n    for (const rule of defaultRules) {\n      configValidator.removeRule(rule.name);\n    }\n  });\n\n  afterEach(() => {\n    // Restore original environment\n    process.env = originalEnv;\n    jest.clearAllMocks();\n  });\n\n  describe('Rule Management', () => {\n    it('should add custom validation rules', () => {\n      const customRule: ValidationRule = {\n        name: 'CUSTOM_VAR',\n        required: true,\n        type: 'string',\n        description: 'Custom variable'\n      };\n\n      configValidator.addRule(customRule);\n\n      const rule = configValidator.getRule('CUSTOM_VAR');\n      expect(rule).toEqual(customRule);\n    });\n\n    it('should remove validation rules', () => {\n      const customRule: ValidationRule = {\n        name: 'CUSTOM_VAR',\n        required: true,\n        type: 'string',\n        description: 'Custom variable'\n      };\n\n      configValidator.addRule(customRule);\n      expect(configValidator.getRule('CUSTOM_VAR')).toBeDefined();\n\n      configValidator.removeRule('CUSTOM_VAR');\n      expect(configValidator.getRule('CUSTOM_VAR')).toBeUndefined();\n    });\n\n    it('should get all validation rules', () => {\n      // Add some test rules since we cleared defaults\n      const rule1: ValidationRule = {\n        name: 'TEST_RULE_1',\n        required: true,\n        type: 'string',\n        description: 'Test rule 1'\n      };\n      \n      const rule2: ValidationRule = {\n        name: 'TEST_RULE_2',\n        required: false,\n        type: 'number',\n        description: 'Test rule 2'\n      };\n\n      configValidator.addRule(rule1);\n      configValidator.addRule(rule2);\n\n      const rules = configValidator.getRules();\n      expect(rules.length).toBe(2);\n      expect(rules.some(rule => rule.name === 'TEST_RULE_1')).toBe(true);\n      expect(rules.some(rule => rule.name === 'TEST_RULE_2')).toBe(true);\n    });\n  });\n\n  describe('String Validation', () => {\n    it('should validate string values', () => {\n      process.env.TEST_STRING = 'test-value';\n\n      const rule: ValidationRule = {\n        name: 'TEST_STRING',\n        required: true,\n        type: 'string',\n        description: 'Test string'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(true);\n      const variable = result.variables.find(v => v.name === 'TEST_STRING');\n      expect(variable?.valid).toBe(true);\n      expect(variable?.value).toBe('test-value');\n    });\n\n    it('should validate string patterns', () => {\n      process.env.TEST_PATTERN = 'invalid-pattern';\n\n      const rule: ValidationRule = {\n        name: 'TEST_PATTERN',\n        required: true,\n        type: 'string',\n        pattern: /^valid-/,\n        description: 'Test pattern'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(false);\n      const variable = result.variables.find(v => v.name === 'TEST_PATTERN');\n      expect(variable?.valid).toBe(false);\n      expect(variable?.error).toContain('does not match required pattern');\n    });\n  });\n\n  describe('Number Validation', () => {\n    it('should validate number values', () => {\n      process.env.TEST_NUMBER = '42';\n\n      const rule: ValidationRule = {\n        name: 'TEST_NUMBER',\n        required: true,\n        type: 'number',\n        description: 'Test number'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(true);\n      const variable = result.variables.find(v => v.name === 'TEST_NUMBER');\n      expect(variable?.valid).toBe(true);\n      expect(variable?.value).toBe(42);\n    });\n\n    it('should validate number ranges', () => {\n      process.env.TEST_RANGE = '150';\n\n      const rule: ValidationRule = {\n        name: 'TEST_RANGE',\n        required: true,\n        type: 'number',\n        minValue: 1,\n        maxValue: 100,\n        description: 'Test range'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(false);\n      const variable = result.variables.find(v => v.name === 'TEST_RANGE');\n      expect(variable?.valid).toBe(false);\n      expect(variable?.error).toContain('must be <= 100');\n    });\n\n    it('should reject invalid numbers', () => {\n      process.env.TEST_INVALID_NUMBER = 'not-a-number';\n\n      const rule: ValidationRule = {\n        name: 'TEST_INVALID_NUMBER',\n        required: true,\n        type: 'number',\n        description: 'Test invalid number'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(false);\n      const variable = result.variables.find(v => v.name === 'TEST_INVALID_NUMBER');\n      expect(variable?.valid).toBe(false);\n      expect(variable?.error).toContain('must be a valid number');\n    });\n  });\n\n  describe('Boolean Validation', () => {\n    it('should validate true boolean values', () => {\n      const testCases = ['true', '1', 'yes', 'on', 'TRUE', 'YES'];\n\n      for (const testValue of testCases) {\n        process.env.TEST_BOOLEAN = testValue;\n\n        const rule: ValidationRule = {\n          name: 'TEST_BOOLEAN',\n          required: true,\n          type: 'boolean',\n          description: 'Test boolean'\n        };\n\n        configValidator.removeRule('TEST_BOOLEAN');\n        configValidator.addRule(rule);\n        const result = configValidator.validate();\n\n        const variable = result.variables.find(v => v.name === 'TEST_BOOLEAN');\n        expect(variable?.valid).toBe(true);\n        expect(variable?.value).toBe(true);\n      }\n    });\n\n    it('should validate false boolean values', () => {\n      const testCases = ['false', '0', 'no', 'off', 'FALSE', 'NO'];\n\n      for (const testValue of testCases) {\n        process.env.TEST_BOOLEAN = testValue;\n\n        const rule: ValidationRule = {\n          name: 'TEST_BOOLEAN',\n          required: true,\n          type: 'boolean',\n          description: 'Test boolean'\n        };\n\n        configValidator.removeRule('TEST_BOOLEAN');\n        configValidator.addRule(rule);\n        const result = configValidator.validate();\n\n        const variable = result.variables.find(v => v.name === 'TEST_BOOLEAN');\n        expect(variable?.valid).toBe(true);\n        expect(variable?.value).toBe(false);\n      }\n    });\n\n    it('should reject invalid boolean values', () => {\n      process.env.TEST_INVALID_BOOLEAN = 'maybe';\n\n      const rule: ValidationRule = {\n        name: 'TEST_INVALID_BOOLEAN',\n        required: true,\n        type: 'boolean',\n        description: 'Test invalid boolean'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(false);\n      const variable = result.variables.find(v => v.name === 'TEST_INVALID_BOOLEAN');\n      expect(variable?.valid).toBe(false);\n      expect(variable?.error).toContain('must be a boolean value');\n    });\n  });\n\n  describe('URL Validation', () => {\n    it('should validate valid URLs', () => {\n      const validUrls = [\n        'https://example.com',\n        'http://localhost:3000',\n        'postgresql://user:pass@host:5432/db',\n        'redis://localhost:6379'\n      ];\n\n      for (const url of validUrls) {\n        process.env.TEST_URL = url;\n\n        const rule: ValidationRule = {\n          name: 'TEST_URL',\n          required: true,\n          type: 'url',\n          description: 'Test URL'\n        };\n\n        configValidator.removeRule('TEST_URL');\n        configValidator.addRule(rule);\n        const result = configValidator.validate();\n\n        const variable = result.variables.find(v => v.name === 'TEST_URL');\n        expect(variable?.valid).toBe(true);\n        expect(variable?.value).toBe(url);\n      }\n    });\n\n    it('should reject invalid URLs', () => {\n      process.env.TEST_INVALID_URL = 'not-a-url';\n\n      const rule: ValidationRule = {\n        name: 'TEST_INVALID_URL',\n        required: true,\n        type: 'url',\n        description: 'Test invalid URL'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(false);\n      const variable = result.variables.find(v => v.name === 'TEST_INVALID_URL');\n      expect(variable?.valid).toBe(false);\n      expect(variable?.error).toContain('must be a valid URL');\n    });\n  });\n\n  describe('Port Validation', () => {\n    it('should validate valid port numbers', () => {\n      const validPorts = ['80', '443', '3000', '8080', '65535'];\n\n      for (const port of validPorts) {\n        process.env.TEST_PORT = port;\n\n        const rule: ValidationRule = {\n          name: 'TEST_PORT',\n          required: true,\n          type: 'port',\n          description: 'Test port'\n        };\n\n        configValidator.removeRule('TEST_PORT');\n        configValidator.addRule(rule);\n        const result = configValidator.validate();\n\n        const variable = result.variables.find(v => v.name === 'TEST_PORT');\n        expect(variable?.valid).toBe(true);\n        expect(variable?.value).toBe(parseInt(port, 10));\n      }\n    });\n\n    it('should reject invalid port numbers', () => {\n      const invalidPorts = ['0', '65536', '-1', 'not-a-port'];\n\n      for (const port of invalidPorts) {\n        process.env.TEST_INVALID_PORT = port;\n\n        const rule: ValidationRule = {\n          name: 'TEST_INVALID_PORT',\n          required: true,\n          type: 'port',\n          description: 'Test invalid port'\n        };\n\n        configValidator.removeRule('TEST_INVALID_PORT');\n        configValidator.addRule(rule);\n        const result = configValidator.validate();\n\n        const variable = result.variables.find(v => v.name === 'TEST_INVALID_PORT');\n        expect(variable?.valid).toBe(false);\n        expect(variable?.error).toContain('must be a valid port number');\n      }\n    });\n  });\n\n  describe('Enum Validation', () => {\n    it('should validate enum values', () => {\n      process.env.TEST_ENUM = 'production';\n\n      const rule: ValidationRule = {\n        name: 'TEST_ENUM',\n        required: true,\n        type: 'enum',\n        enumValues: ['development', 'production', 'test'],\n        description: 'Test enum'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(true);\n      const variable = result.variables.find(v => v.name === 'TEST_ENUM');\n      expect(variable?.valid).toBe(true);\n      expect(variable?.value).toBe('production');\n    });\n\n    it('should reject invalid enum values', () => {\n      process.env.TEST_INVALID_ENUM = 'invalid-value';\n\n      const rule: ValidationRule = {\n        name: 'TEST_INVALID_ENUM',\n        required: true,\n        type: 'enum',\n        enumValues: ['development', 'production', 'test'],\n        description: 'Test invalid enum'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(false);\n      const variable = result.variables.find(v => v.name === 'TEST_INVALID_ENUM');\n      expect(variable?.valid).toBe(false);\n      expect(variable?.error).toContain('must be one of: development, production, test');\n    });\n  });\n\n  describe('Required vs Optional Variables', () => {\n    it('should fail validation for missing required variables', () => {\n      delete process.env.TEST_REQUIRED;\n\n      const rule: ValidationRule = {\n        name: 'TEST_REQUIRED',\n        required: true,\n        type: 'string',\n        description: 'Test required'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(false);\n      const variable = result.variables.find(v => v.name === 'TEST_REQUIRED');\n      expect(variable?.valid).toBe(false);\n      expect(variable?.error).toContain('Required environment variable TEST_REQUIRED is not set');\n    });\n\n    it('should pass validation for missing optional variables', () => {\n      delete process.env.TEST_OPTIONAL;\n\n      const rule: ValidationRule = {\n        name: 'TEST_OPTIONAL',\n        required: false,\n        type: 'string',\n        description: 'Test optional'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      const variable = result.variables.find(v => v.name === 'TEST_OPTIONAL');\n      expect(variable?.valid).toBe(true);\n      expect(variable?.value).toBeUndefined();\n    });\n\n    it('should use default values for missing variables', () => {\n      delete process.env.TEST_DEFAULT;\n\n      const rule: ValidationRule = {\n        name: 'TEST_DEFAULT',\n        required: true,\n        type: 'string',\n        defaultValue: 'default-value',\n        description: 'Test default'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(true);\n      const variable = result.variables.find(v => v.name === 'TEST_DEFAULT');\n      expect(variable?.valid).toBe(true);\n      expect(variable?.value).toBe('default-value');\n      expect(variable?.usingDefault).toBe(true);\n      expect(variable?.warning).toContain('Using default value');\n    });\n  });\n\n  describe('Default Rules', () => {\n    beforeEach(() => {\n      // Re-create validator with default rules for this test suite\n      configValidator = new ConfigValidator();\n    });\n\n    it('should validate NODE_ENV', () => {\n      process.env.NODE_ENV = 'production';\n      process.env.PORT = '3000';\n      process.env.DATABASE_URL = 'postgresql://user:pass@localhost:5432/db';\n\n      const result = configValidator.validate();\n      const variable = result.variables.find(v => v.name === 'NODE_ENV');\n\n      expect(variable?.valid).toBe(true);\n      expect(variable?.value).toBe('production');\n    });\n\n    it('should validate PORT', () => {\n      process.env.NODE_ENV = 'production';\n      process.env.PORT = '3000';\n      process.env.DATABASE_URL = 'postgresql://user:pass@localhost:5432/db';\n\n      const result = configValidator.validate();\n      const variable = result.variables.find(v => v.name === 'PORT');\n\n      expect(variable?.valid).toBe(true);\n      expect(variable?.value).toBe(3000);\n    });\n\n    it('should validate DATABASE_URL', () => {\n      process.env.NODE_ENV = 'production';\n      process.env.PORT = '3000';\n      process.env.DATABASE_URL = 'postgresql://user:pass@localhost:5432/db';\n\n      const result = configValidator.validate();\n      const variable = result.variables.find(v => v.name === 'DATABASE_URL');\n\n      expect(variable?.valid).toBe(true);\n      expect(variable?.value).toBe('postgresql://user:pass@localhost:5432/db');\n    });\n\n    it('should handle missing required variables with defaults', () => {\n      // Clear all environment variables\n      for (const rule of configValidator.getRules()) {\n        delete process.env[rule.name];\n      }\n\n      const result = configValidator.validate();\n\n      // Should still be valid due to default values\n      expect(result.valid).toBe(false); // DATABASE_URL has no default\n      expect(result.summary.usingDefaults).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Configuration Summary', () => {\n    beforeEach(() => {\n      // Re-create validator with default rules for this test suite\n      configValidator = new ConfigValidator();\n    });\n\n    it('should provide configuration summary with masked sensitive values', () => {\n      process.env.NODE_ENV = 'production';\n      process.env.PORT = '3000';\n      process.env.HMAC_SECRET = 'super-secret-key';\n      process.env.DATABASE_URL = 'postgresql://user:pass@localhost:5432/db';\n\n      const summary = configValidator.getConfigSummary();\n\n      expect(summary.NODE_ENV).toBe('production');\n      expect(summary.PORT).toBe('3000');\n      expect(summary.HMAC_SECRET).toBe('[CONFIGURED]');\n      expect(summary.DATABASE_URL).toBe('postgresql://user:pass@localhost:5432/db');\n    });\n\n    it('should show [NOT SET] for missing variables', () => {\n      delete process.env.REDIS_URL;\n\n      const summary = configValidator.getConfigSummary();\n\n      expect(summary.REDIS_URL).toBe('[NOT SET]');\n    });\n  });\n\n  describe('Validation Summary', () => {\n    it('should provide validation summary', () => {\n      // Set up mixed validation results\n      process.env.TEST_VALID = 'valid-value';\n      process.env.TEST_INVALID = 'invalid-port';\n\n      const validRule: ValidationRule = {\n        name: 'TEST_VALID',\n        required: true,\n        type: 'string',\n        description: 'Valid test'\n      };\n\n      const invalidRule: ValidationRule = {\n        name: 'TEST_INVALID',\n        required: true,\n        type: 'port',\n        description: 'Invalid test'\n      };\n\n      const missingRule: ValidationRule = {\n        name: 'TEST_MISSING',\n        required: true,\n        type: 'string',\n        description: 'Missing test'\n      };\n\n      configValidator.addRule(validRule);\n      configValidator.addRule(invalidRule);\n      configValidator.addRule(missingRule);\n\n      const result = configValidator.validate();\n\n      expect(result.summary.total).toBe(3);\n      expect(result.summary.valid).toBe(1);\n      expect(result.summary.invalid).toBe(2);\n      expect(result.summary.total).toBe(\n        result.summary.valid + result.summary.invalid\n      );\n    });\n\n    it('should track warnings and defaults', () => {\n      // Clear optional variable to trigger default\n      delete process.env.TEST_DEFAULT;\n\n      const rule: ValidationRule = {\n        name: 'TEST_DEFAULT',\n        required: false,\n        type: 'string',\n        defaultValue: 'default-value',\n        description: 'Test default'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.summary.usingDefaults).toBe(1);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle unknown validation types', () => {\n      const rule: ValidationRule = {\n        name: 'TEST_UNKNOWN_TYPE',\n        required: true,\n        type: 'unknown' as any,\n        description: 'Test unknown type'\n      };\n\n      process.env.TEST_UNKNOWN_TYPE = 'test-value';\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(false);\n      const variable = result.variables.find(v => v.name === 'TEST_UNKNOWN_TYPE');\n      expect(variable?.valid).toBe(false);\n      expect(variable?.error).toContain('Unknown validation type');\n    });\n\n    it('should handle empty string values', () => {\n      process.env.TEST_EMPTY = '';\n\n      const rule: ValidationRule = {\n        name: 'TEST_EMPTY',\n        required: true,\n        type: 'string',\n        description: 'Test empty'\n      };\n\n      configValidator.addRule(rule);\n      const result = configValidator.validate();\n\n      expect(result.valid).toBe(false);\n      const variable = result.variables.find(v => v.name === 'TEST_EMPTY');\n      expect(variable?.valid).toBe(false);\n      expect(variable?.error).toContain('Required environment variable TEST_EMPTY is not set');\n    });\n  });\n});"],"version":3}