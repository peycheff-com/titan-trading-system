{"file":"/Users/ivan/Code/trading/titan/services/titan-brain/src/metrics/MetricsCollector.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-brain/src/metrics/MetricsCollector.ts"],"sourcesContent":["/**\n * MetricsCollector - Prometheus metrics collection for monitoring\n * \n * Implements comprehensive metrics collection for HTTP requests, database operations,\n * health checks, and custom business metrics with Prometheus format.\n * \n * Requirements: 4.2.1, 4.2.2, 4.2.3, 4.2.4, 4.2.5\n */\n\nimport { EventEmitter } from 'events';\nimport { Logger } from '../logging/Logger.js';\n\n/**\n * Metric types supported by Prometheus\n */\nexport enum MetricType {\n  COUNTER = 'counter',\n  GAUGE = 'gauge',\n  HISTOGRAM = 'histogram',\n  SUMMARY = 'summary'\n}\n\n/**\n * Metric definition\n */\nexport interface MetricDefinition {\n  name: string;\n  type: MetricType;\n  help: string;\n  labels?: string[];\n}\n\n/**\n * Metric value with labels\n */\nexport interface MetricValue {\n  value: number;\n  labels?: Record<string, string>;\n  timestamp?: number;\n}\n\n/**\n * Histogram bucket configuration\n */\nexport interface HistogramBuckets {\n  buckets: number[];\n  values: Map<number, number>;\n  sum: number;\n  count: number;\n}\n\n/**\n * HTTP request metrics\n */\nexport interface HttpMetrics {\n  requestsTotal: number;\n  requestDuration: HistogramBuckets;\n  requestsInFlight: number;\n  responseSize: HistogramBuckets;\n}\n\n/**\n * Database metrics\n */\nexport interface DatabaseMetrics {\n  connectionsActive: number;\n  connectionsIdle: number;\n  connectionsWaiting: number;\n  queryDuration: HistogramBuckets;\n  queriesTotal: number;\n  queryErrors: number;\n}\n\n/**\n * Health check metrics\n */\nexport interface HealthMetrics {\n  healthCheckStatus: number; // 1 for healthy, 0 for unhealthy\n  healthCheckDuration: HistogramBuckets;\n  componentStatus: Map<string, number>;\n}\n\n/**\n * Business metrics\n */\nexport interface BusinessMetrics {\n  signalsProcessed: number;\n  ordersExecuted: number;\n  errorsTotal: number;\n  customCounters: Map<string, number>;\n  customGauges: Map<string, number>;\n}\n\n/**\n * Prometheus metrics collector\n */\nexport class MetricsCollector extends EventEmitter {\n  private logger: Logger;\n  private metrics: Map<string, MetricDefinition> = new Map();\n  private values: Map<string, MetricValue[]> = new Map();\n  private httpMetrics: HttpMetrics;\n  private databaseMetrics: DatabaseMetrics;\n  private healthMetrics: HealthMetrics;\n  private businessMetrics: BusinessMetrics;\n  private startTime: number;\n\n  constructor(logger?: Logger) {\n    super();\n    this.logger = logger ?? Logger.getInstance('metrics-collector');\n    this.startTime = Date.now();\n    \n    // Initialize metric structures\n    this.httpMetrics = this.initializeHttpMetrics();\n    this.databaseMetrics = this.initializeDatabaseMetrics();\n    this.healthMetrics = this.initializeHealthMetrics();\n    this.businessMetrics = this.initializeBusinessMetrics();\n    \n    // Register default metrics\n    this.registerDefaultMetrics();\n    \n    this.logger.info('Metrics collector initialized');\n  }\n\n  /**\n   * Initialize HTTP metrics\n   */\n  private initializeHttpMetrics(): HttpMetrics {\n    return {\n      requestsTotal: 0,\n      requestDuration: this.createHistogramBuckets([0.005, 0.01, 0.025, 0.05, 0.1, 0.25, 0.5, 1, 2.5, 5, 10]),\n      requestsInFlight: 0,\n      responseSize: this.createHistogramBuckets([100, 1000, 10000, 100000, 1000000])\n    };\n  }\n\n  /**\n   * Initialize database metrics\n   */\n  private initializeDatabaseMetrics(): DatabaseMetrics {\n    return {\n      connectionsActive: 0,\n      connectionsIdle: 0,\n      connectionsWaiting: 0,\n      queryDuration: this.createHistogramBuckets([0.001, 0.005, 0.01, 0.025, 0.05, 0.1, 0.25, 0.5, 1, 2.5, 5]),\n      queriesTotal: 0,\n      queryErrors: 0\n    };\n  }\n\n  /**\n   * Initialize health metrics\n   */\n  private initializeHealthMetrics(): HealthMetrics {\n    return {\n      healthCheckStatus: 0,\n      healthCheckDuration: this.createHistogramBuckets([0.1, 0.25, 0.5, 1, 2.5, 5]),\n      componentStatus: new Map()\n    };\n  }\n\n  /**\n   * Initialize business metrics\n   */\n  private initializeBusinessMetrics(): BusinessMetrics {\n    return {\n      signalsProcessed: 0,\n      ordersExecuted: 0,\n      errorsTotal: 0,\n      customCounters: new Map(),\n      customGauges: new Map()\n    };\n  }\n\n  /**\n   * Create histogram buckets\n   */\n  private createHistogramBuckets(buckets: number[]): HistogramBuckets {\n    const values = new Map<number, number>();\n    buckets.forEach(bucket => values.set(bucket, 0));\n    values.set(Infinity, 0); // +Inf bucket\n    \n    return {\n      buckets,\n      values,\n      sum: 0,\n      count: 0\n    };\n  }\n\n  /**\n   * Register default Prometheus metrics\n   */\n  private registerDefaultMetrics(): void {\n    // HTTP metrics\n    this.registerMetric({\n      name: 'http_requests_total',\n      type: MetricType.COUNTER,\n      help: 'Total number of HTTP requests',\n      labels: ['method', 'route', 'status_code']\n    });\n\n    this.registerMetric({\n      name: 'http_request_duration_seconds',\n      type: MetricType.HISTOGRAM,\n      help: 'HTTP request duration in seconds',\n      labels: ['method', 'route']\n    });\n\n    this.registerMetric({\n      name: 'http_requests_in_flight',\n      type: MetricType.GAUGE,\n      help: 'Current number of HTTP requests being processed'\n    });\n\n    this.registerMetric({\n      name: 'http_response_size_bytes',\n      type: MetricType.HISTOGRAM,\n      help: 'HTTP response size in bytes',\n      labels: ['method', 'route']\n    });\n\n    // Database metrics\n    this.registerMetric({\n      name: 'database_connections_active',\n      type: MetricType.GAUGE,\n      help: 'Number of active database connections'\n    });\n\n    this.registerMetric({\n      name: 'database_connections_idle',\n      type: MetricType.GAUGE,\n      help: 'Number of idle database connections'\n    });\n\n    this.registerMetric({\n      name: 'database_connections_waiting',\n      type: MetricType.GAUGE,\n      help: 'Number of clients waiting for database connections'\n    });\n\n    this.registerMetric({\n      name: 'database_query_duration_seconds',\n      type: MetricType.HISTOGRAM,\n      help: 'Database query duration in seconds',\n      labels: ['operation']\n    });\n\n    this.registerMetric({\n      name: 'database_queries_total',\n      type: MetricType.COUNTER,\n      help: 'Total number of database queries',\n      labels: ['operation', 'status']\n    });\n\n    // Health check metrics\n    this.registerMetric({\n      name: 'health_check_status',\n      type: MetricType.GAUGE,\n      help: 'Health check status (1 = healthy, 0 = unhealthy)'\n    });\n\n    this.registerMetric({\n      name: 'health_check_duration_seconds',\n      type: MetricType.HISTOGRAM,\n      help: 'Health check duration in seconds'\n    });\n\n    this.registerMetric({\n      name: 'component_health_status',\n      type: MetricType.GAUGE,\n      help: 'Component health status (1 = healthy, 0 = unhealthy)',\n      labels: ['component']\n    });\n\n    // Business metrics\n    this.registerMetric({\n      name: 'signals_processed_total',\n      type: MetricType.COUNTER,\n      help: 'Total number of signals processed',\n      labels: ['type', 'status']\n    });\n\n    this.registerMetric({\n      name: 'orders_executed_total',\n      type: MetricType.COUNTER,\n      help: 'Total number of orders executed',\n      labels: ['side', 'status']\n    });\n\n    this.registerMetric({\n      name: 'errors_total',\n      type: MetricType.COUNTER,\n      help: 'Total number of errors',\n      labels: ['type', 'component']\n    });\n\n    // System metrics\n    this.registerMetric({\n      name: 'process_start_time_seconds',\n      type: MetricType.GAUGE,\n      help: 'Start time of the process since unix epoch in seconds'\n    });\n\n    this.registerMetric({\n      name: 'process_uptime_seconds',\n      type: MetricType.GAUGE,\n      help: 'Process uptime in seconds'\n    });\n  }\n\n  /**\n   * Register a new metric\n   */\n  registerMetric(definition: MetricDefinition): void {\n    this.metrics.set(definition.name, definition);\n    this.values.set(definition.name, []);\n    \n    this.logger.debug('Registered metric', undefined, {\n      name: definition.name,\n      type: definition.type,\n      labels: definition.labels\n    });\n  }\n\n  /**\n   * Record HTTP request metrics\n   */\n  recordHttpRequest(\n    method: string,\n    route: string,\n    statusCode: number,\n    duration: number,\n    responseSize: number\n  ): void {\n    // Increment total requests\n    this.httpMetrics.requestsTotal++;\n    this.incrementCounter('http_requests_total', { method, route, status_code: statusCode.toString() });\n\n    // Record request duration\n    this.recordHistogram(this.httpMetrics.requestDuration, duration);\n    this.recordHistogramMetric('http_request_duration_seconds', duration, { method, route });\n\n    // Record response size\n    this.recordHistogram(this.httpMetrics.responseSize, responseSize);\n    this.recordHistogramMetric('http_response_size_bytes', responseSize, { method, route });\n\n    this.emit('http:request', { method, route, statusCode, duration, responseSize });\n  }\n\n  /**\n   * Record HTTP request start (increment in-flight counter)\n   */\n  recordHttpRequestStart(): void {\n    this.httpMetrics.requestsInFlight++;\n    this.setGauge('http_requests_in_flight', this.httpMetrics.requestsInFlight);\n  }\n\n  /**\n   * Record HTTP request end (decrement in-flight counter)\n   */\n  recordHttpRequestEnd(): void {\n    this.httpMetrics.requestsInFlight = Math.max(0, this.httpMetrics.requestsInFlight - 1);\n    this.setGauge('http_requests_in_flight', this.httpMetrics.requestsInFlight);\n  }\n\n  /**\n   * Record database connection metrics\n   */\n  recordDatabaseConnections(active: number, idle: number, waiting: number): void {\n    this.databaseMetrics.connectionsActive = active;\n    this.databaseMetrics.connectionsIdle = idle;\n    this.databaseMetrics.connectionsWaiting = waiting;\n\n    this.setGauge('database_connections_active', active);\n    this.setGauge('database_connections_idle', idle);\n    this.setGauge('database_connections_waiting', waiting);\n\n    this.emit('database:connections', { active, idle, waiting });\n  }\n\n  /**\n   * Record database query metrics\n   */\n  recordDatabaseQuery(operation: string, duration: number, success: boolean): void {\n    this.databaseMetrics.queriesTotal++;\n    if (!success) {\n      this.databaseMetrics.queryErrors++;\n    }\n\n    this.recordHistogram(this.databaseMetrics.queryDuration, duration);\n    this.recordHistogramMetric('database_query_duration_seconds', duration, { operation });\n    this.incrementCounter('database_queries_total', { \n      operation, \n      status: success ? 'success' : 'error' \n    });\n\n    this.emit('database:query', { operation, duration, success });\n  }\n\n  /**\n   * Record health check metrics\n   */\n  recordHealthCheck(healthy: boolean, duration: number): void {\n    this.healthMetrics.healthCheckStatus = healthy ? 1 : 0;\n    this.recordHistogram(this.healthMetrics.healthCheckDuration, duration);\n\n    this.setGauge('health_check_status', this.healthMetrics.healthCheckStatus);\n    this.recordHistogramMetric('health_check_duration_seconds', duration);\n\n    this.emit('health:check', { healthy, duration });\n  }\n\n  /**\n   * Record component health status\n   */\n  recordComponentHealth(component: string, healthy: boolean): void {\n    const status = healthy ? 1 : 0;\n    this.healthMetrics.componentStatus.set(component, status);\n    this.setGauge('component_health_status', status, { component });\n\n    this.emit('health:component', { component, healthy });\n  }\n\n  /**\n   * Record business metrics\n   */\n  recordSignalProcessed(type: string, success: boolean): void {\n    this.businessMetrics.signalsProcessed++;\n    this.incrementCounter('signals_processed_total', { \n      type, \n      status: success ? 'success' : 'error' \n    });\n\n    this.emit('business:signal', { type, success });\n  }\n\n  /**\n   * Record order execution\n   */\n  recordOrderExecuted(side: string, success: boolean): void {\n    this.businessMetrics.ordersExecuted++;\n    this.incrementCounter('orders_executed_total', { \n      side, \n      status: success ? 'success' : 'error' \n    });\n\n    this.emit('business:order', { side, success });\n  }\n\n  /**\n   * Record error\n   */\n  recordError(type: string, component: string): void {\n    this.businessMetrics.errorsTotal++;\n    this.incrementCounter('errors_total', { type, component });\n\n    this.emit('error:recorded', { type, component });\n  }\n\n  /**\n   * Increment a counter metric\n   */\n  private incrementCounter(name: string, labels?: Record<string, string>, value: number = 1): void {\n    const values = this.values.get(name) || [];\n    const existingIndex = values.findIndex(v => this.labelsMatch(v.labels, labels));\n    \n    if (existingIndex >= 0) {\n      values[existingIndex].value += value;\n    } else {\n      values.push({ value, labels, timestamp: Date.now() });\n    }\n    \n    this.values.set(name, values);\n  }\n\n  /**\n   * Set a gauge metric\n   */\n  private setGauge(name: string, value: number, labels?: Record<string, string>): void {\n    const values = this.values.get(name) || [];\n    const existingIndex = values.findIndex(v => this.labelsMatch(v.labels, labels));\n    \n    if (existingIndex >= 0) {\n      values[existingIndex].value = value;\n      values[existingIndex].timestamp = Date.now();\n    } else {\n      values.push({ value, labels, timestamp: Date.now() });\n    }\n    \n    this.values.set(name, values);\n  }\n\n  /**\n   * Record histogram metric\n   */\n  private recordHistogramMetric(name: string, value: number, labels?: Record<string, string>): void {\n    // This is a simplified histogram recording - in a real implementation,\n    // you'd want to maintain separate bucket counts per label combination\n    const values = this.values.get(name) || [];\n    values.push({ value, labels, timestamp: Date.now() });\n    this.values.set(name, values);\n  }\n\n  /**\n   * Record value in histogram buckets\n   */\n  private recordHistogram(histogram: HistogramBuckets, value: number): void {\n    histogram.sum += value;\n    histogram.count++;\n    \n    // Increment bucket counters\n    for (const bucket of histogram.buckets) {\n      if (value <= bucket) {\n        histogram.values.set(bucket, (histogram.values.get(bucket) || 0) + 1);\n      }\n    }\n    // Always increment +Inf bucket\n    histogram.values.set(Infinity, (histogram.values.get(Infinity) || 0) + 1);\n  }\n\n  /**\n   * Check if labels match\n   */\n  private labelsMatch(labels1?: Record<string, string>, labels2?: Record<string, string>): boolean {\n    if (!labels1 && !labels2) return true;\n    if (!labels1 || !labels2) return false;\n    \n    const keys1 = Object.keys(labels1).sort();\n    const keys2 = Object.keys(labels2).sort();\n    \n    if (keys1.length !== keys2.length) return false;\n    \n    return keys1.every((key, index) => \n      key === keys2[index] && labels1[key] === labels2[key]\n    );\n  }\n\n  /**\n   * Get all metrics in Prometheus format\n   */\n  getPrometheusMetrics(): string {\n    let output = '';\n    \n    // Add process metrics\n    this.setGauge('process_start_time_seconds', this.startTime / 1000);\n    this.setGauge('process_uptime_seconds', (Date.now() - this.startTime) / 1000);\n    \n    // Generate metrics output\n    for (const [name, definition] of this.metrics) {\n      const values = this.values.get(name) || [];\n      \n      // Always add help and type comments, even if no values\n      output += `# HELP ${name} ${definition.help}\\n`;\n      output += `# TYPE ${name} ${definition.type}\\n`;\n      \n      // Add metric values if they exist\n      if (values.length > 0) {\n        for (const value of values) {\n          const labelsStr = this.formatLabels(value.labels);\n          output += `${name}${labelsStr} ${value.value}\\n`;\n        }\n      }\n      \n      output += '\\n';\n    }\n    \n    return output;\n  }\n\n  /**\n   * Format labels for Prometheus output\n   */\n  private formatLabels(labels?: Record<string, string>): string {\n    if (!labels || Object.keys(labels).length === 0) {\n      return '';\n    }\n    \n    const labelPairs = Object.entries(labels)\n      .map(([key, value]) => `${key}=\"${value.replace(/\"/g, '\\\\\"')}\"`)\n      .join(',');\n    \n    return `{${labelPairs}}`;\n  }\n\n  /**\n   * Get metrics summary\n   */\n  getMetricsSummary(): {\n    totalMetrics: number;\n    httpRequests: number;\n    databaseQueries: number;\n    errors: number;\n    uptime: number;\n  } {\n    return {\n      totalMetrics: this.metrics.size,\n      httpRequests: this.httpMetrics.requestsTotal,\n      databaseQueries: this.databaseMetrics.queriesTotal,\n      errors: this.businessMetrics.errorsTotal,\n      uptime: (Date.now() - this.startTime) / 1000\n    };\n  }\n\n  /**\n   * Reset all metrics (useful for testing)\n   */\n  reset(): void {\n    this.values.clear();\n    this.httpMetrics = this.initializeHttpMetrics();\n    this.databaseMetrics = this.initializeDatabaseMetrics();\n    this.healthMetrics = this.initializeHealthMetrics();\n    this.businessMetrics = this.initializeBusinessMetrics();\n    \n    this.logger.info('Metrics collector reset');\n  }\n}"],"version":3}