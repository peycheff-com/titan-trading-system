{"file":"/Users/ivan/Code/trading/titan/services/titan-brain/src/config/defaults.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-brain/src/config/defaults.ts"],"sourcesContent":["/**\n * Default Configuration for Titan Brain\n * Contains all default values for the system\n */\n\nimport { TitanBrainConfig, EquityTier } from '../types/index.js';\n\nexport const defaultConfig: TitanBrainConfig = {\n  brain: {\n    signalTimeout: 100, // 100ms max latency\n    metricUpdateInterval: 60000, // 1 minute\n    dashboardCacheTTL: 5000, // 5 seconds\n    maxQueueSize: 100,\n  },\n\n  allocationEngine: {\n    transitionPoints: {\n      startP2: 1500,  // Phase 2 starts at $1,500\n      fullP2: 5000,   // Phase 2 full allocation at $5,000\n      startP3: 25000, // Phase 3 starts at $25,000\n    },\n    leverageCaps: {\n      [EquityTier.MICRO]: 20,        // < $1,500: 20x max\n      [EquityTier.SMALL]: 10,        // $1,500 - $5,000: 10x max\n      [EquityTier.MEDIUM]: 5,        // $5,000 - $25,000: 5x max\n      [EquityTier.LARGE]: 3,         // $25,000 - $50,000: 3x max\n      [EquityTier.INSTITUTIONAL]: 2, // > $50,000: 2x max\n    },\n  },\n\n  performanceTracker: {\n    windowDays: 7,\n    minTradeCount: 10,\n    malusMultiplier: 0.5,\n    bonusMultiplier: 1.2,\n    malusThreshold: 0,\n    bonusThreshold: 2.0,\n  },\n\n  riskGuardian: {\n    maxCorrelation: 0.8,\n    correlationPenalty: 0.5, // 50% size reduction\n    betaUpdateInterval: 300000, // 5 minutes\n    correlationUpdateInterval: 300000, // 5 minutes\n  },\n\n  capitalFlow: {\n    sweepThreshold: 1.2, // 20% excess triggers sweep\n    reserveLimit: 200, // $200 minimum\n    sweepSchedule: '0 0 * * *', // Daily at midnight UTC\n    maxRetries: 3,\n    retryBaseDelay: 1000, // 1 second\n  },\n\n  circuitBreaker: {\n    maxDailyDrawdown: 0.15, // 15%\n    minEquity: 150, // $150 (75% of $200 starting)\n    consecutiveLossLimit: 3,\n    consecutiveLossWindow: 3600000, // 1 hour\n    cooldownMinutes: 30,\n  },\n\n  database: {\n    host: 'localhost',\n    port: 5432,\n    database: 'titan_brain',\n    user: 'postgres',\n    password: 'postgres',\n    maxConnections: 20,\n    idleTimeout: 30000,\n  },\n\n  redis: {\n    url: 'redis://localhost:6379',\n    maxRetries: 3,\n    retryDelay: 1000,\n  },\n\n  server: {\n    host: '0.0.0.0',\n    port: 3100,\n    corsOrigins: ['http://localhost:3000'],\n  },\n\n  notifications: {\n    telegram: {\n      enabled: false,\n    },\n    email: {\n      enabled: false,\n    },\n  },\n};\n\n/**\n * Load configuration from environment variables\n */\nexport function loadConfigFromEnv(): Partial<TitanBrainConfig> {\n  const config: Partial<TitanBrainConfig> = {};\n\n  // Database config from env\n  if (process.env.DB_HOST) {\n    config.database = {\n      ...defaultConfig.database,\n      host: process.env.DB_HOST,\n      port: parseInt(process.env.DB_PORT || '5432'),\n      database: process.env.DB_NAME || 'titan_brain',\n      user: process.env.DB_USER || 'postgres',\n      password: process.env.DB_PASSWORD || 'postgres',\n    };\n  }\n\n  // Redis config from env\n  if (process.env.REDIS_URL) {\n    config.redis = {\n      ...defaultConfig.redis,\n      url: process.env.REDIS_URL,\n    };\n  }\n\n  // Server config from env\n  if (process.env.SERVER_PORT) {\n    config.server = {\n      ...defaultConfig.server,\n      host: process.env.SERVER_HOST || '0.0.0.0',\n      port: parseInt(process.env.SERVER_PORT),\n    };\n  }\n\n  // Telegram notifications from env\n  if (process.env.TELEGRAM_BOT_TOKEN && process.env.TELEGRAM_CHAT_ID) {\n    config.notifications = {\n      ...defaultConfig.notifications,\n      telegram: {\n        enabled: true,\n        botToken: process.env.TELEGRAM_BOT_TOKEN,\n        chatId: process.env.TELEGRAM_CHAT_ID,\n      },\n    };\n  }\n\n  return config;\n}\n\n/**\n * Merge configurations with defaults\n */\nexport function mergeConfig(\n  partial: Partial<TitanBrainConfig>\n): TitanBrainConfig {\n  return {\n    brain: { ...defaultConfig.brain, ...partial.brain },\n    allocationEngine: {\n      ...defaultConfig.allocationEngine,\n      ...partial.allocationEngine,\n    },\n    performanceTracker: {\n      ...defaultConfig.performanceTracker,\n      ...partial.performanceTracker,\n    },\n    riskGuardian: { ...defaultConfig.riskGuardian, ...partial.riskGuardian },\n    capitalFlow: { ...defaultConfig.capitalFlow, ...partial.capitalFlow },\n    circuitBreaker: {\n      ...defaultConfig.circuitBreaker,\n      ...partial.circuitBreaker,\n    },\n    database: { ...defaultConfig.database, ...partial.database },\n    redis: { ...defaultConfig.redis, ...partial.redis },\n    server: { ...defaultConfig.server, ...partial.server },\n    notifications: {\n      ...defaultConfig.notifications,\n      ...partial.notifications,\n    },\n  };\n}\n"],"version":3}