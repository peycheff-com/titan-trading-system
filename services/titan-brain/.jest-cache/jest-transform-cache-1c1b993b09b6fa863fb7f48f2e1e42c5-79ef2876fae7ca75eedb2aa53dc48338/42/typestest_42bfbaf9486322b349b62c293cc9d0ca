372762b8d4a6a1c33310060153978ba3
"use strict";
/**
 * Type Tests
 * Verifies type definitions are correct and usable
 */
Object.defineProperty(exports, "__esModule", { value: true });
const index_js_1 = require("../../src/types/index.js");
describe('Types', () => {
    describe('EquityTier', () => {
        it('should have all expected tiers', () => {
            expect(index_js_1.EquityTier.MICRO).toBe('MICRO');
            expect(index_js_1.EquityTier.SMALL).toBe('SMALL');
            expect(index_js_1.EquityTier.MEDIUM).toBe('MEDIUM');
            expect(index_js_1.EquityTier.LARGE).toBe('LARGE');
            expect(index_js_1.EquityTier.INSTITUTIONAL).toBe('INSTITUTIONAL');
        });
    });
    describe('AllocationVector', () => {
        it('should create valid allocation vector', () => {
            const vector = {
                w1: 0.5,
                w2: 0.3,
                w3: 0.2,
                timestamp: Date.now(),
            };
            expect(vector.w1 + vector.w2 + vector.w3).toBeCloseTo(1.0);
        });
    });
    describe('PhaseId', () => {
        it('should accept valid phase IDs', () => {
            const phases = ['phase1', 'phase2', 'phase3'];
            expect(phases).toHaveLength(3);
        });
    });
    describe('IntentSignal', () => {
        it('should create valid intent signal', () => {
            const signal = {
                signalId: 'sig_123',
                phaseId: 'phase1',
                symbol: 'BTCUSDT',
                side: 'BUY',
                requestedSize: 1000,
                timestamp: Date.now(),
            };
            expect(signal.signalId).toBe('sig_123');
            expect(signal.phaseId).toBe('phase1');
            expect(signal.side).toBe('BUY');
        });
    });
    describe('Position', () => {
        it('should create valid position', () => {
            const position = {
                symbol: 'BTCUSDT',
                side: 'LONG',
                size: 5000,
                entryPrice: 50000,
                unrealizedPnL: 100,
                leverage: 10,
                phaseId: 'phase1',
            };
            expect(position.symbol).toBe('BTCUSDT');
            expect(position.side).toBe('LONG');
            expect(position.leverage).toBe(10);
        });
    });
    describe('BreakerType', () => {
        it('should have HARD and SOFT types', () => {
            expect(index_js_1.BreakerType.HARD).toBe('HARD');
            expect(index_js_1.BreakerType.SOFT).toBe('SOFT');
        });
    });
    describe('BreakerStatus', () => {
        it('should create valid breaker status', () => {
            const status = {
                active: false,
                dailyDrawdown: 0.05,
                consecutiveLosses: 1,
                equityLevel: 1000,
            };
            expect(status.active).toBe(false);
            expect(status.dailyDrawdown).toBe(0.05);
        });
        it('should create active breaker status', () => {
            const status = {
                active: true,
                type: index_js_1.BreakerType.HARD,
                reason: 'Daily drawdown exceeded',
                triggeredAt: Date.now(),
                dailyDrawdown: 0.16,
                consecutiveLosses: 0,
                equityLevel: 170,
            };
            expect(status.active).toBe(true);
            expect(status.type).toBe(index_js_1.BreakerType.HARD);
        });
    });
    describe('TreasuryStatus', () => {
        it('should create valid treasury status', () => {
            const status = {
                futuresWallet: 1000,
                spotWallet: 500,
                totalSwept: 500,
                highWatermark: 1200,
                lockedProfit: 500,
                riskCapital: 1000,
            };
            expect(status.futuresWallet).toBe(1000);
            expect(status.spotWallet).toBe(500);
            expect(status.totalSwept).toBe(500);
        });
    });
    describe('BrainDecision', () => {
        it('should create valid brain decision', () => {
            const decision = {
                signalId: 'sig_123',
                approved: true,
                authorizedSize: 800,
                reason: 'Signal approved with size reduction',
                allocation: {
                    w1: 0.8,
                    w2: 0.2,
                    w3: 0,
                    timestamp: Date.now(),
                },
                performance: {
                    phaseId: 'phase1',
                    sharpeRatio: 1.5,
                    totalPnL: 500,
                    tradeCount: 20,
                    winRate: 0.6,
                    avgWin: 50,
                    avgLoss: 30,
                    modifier: 1.0,
                },
                risk: {
                    approved: true,
                    reason: 'Within risk limits',
                    adjustedSize: 800,
                    riskMetrics: {
                        currentLeverage: 5,
                        projectedLeverage: 8,
                        correlation: 0.3,
                        portfolioDelta: 1000,
                        portfolioBeta: 0.8,
                    },
                },
                timestamp: Date.now(),
            };
            expect(decision.approved).toBe(true);
            expect(decision.authorizedSize).toBe(800);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLWJyYWluL3Rlc3RzL3VuaXQvdHlwZXMudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOztBQUVILHVEQVVrQztBQUVsQyxRQUFRLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtJQUNyQixRQUFRLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtRQUMxQixFQUFFLENBQUMsZ0NBQWdDLEVBQUUsR0FBRyxFQUFFO1lBQ3hDLE1BQU0sQ0FBQyxxQkFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN2QyxNQUFNLENBQUMscUJBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLHFCQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxxQkFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN2QyxNQUFNLENBQUMscUJBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDekQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7UUFDaEMsRUFBRSxDQUFDLHVDQUF1QyxFQUFFLEdBQUcsRUFBRTtZQUMvQyxNQUFNLE1BQU0sR0FBcUI7Z0JBQy9CLEVBQUUsRUFBRSxHQUFHO2dCQUNQLEVBQUUsRUFBRSxHQUFHO2dCQUNQLEVBQUUsRUFBRSxHQUFHO2dCQUNQLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQ3RCLENBQUM7WUFFRixNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxX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LENBQUMsSUFBSSxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9pdmFuL0NvZGUvdHJhZGluZy90aXRhbi9zZXJ2aWNlcy90aXRhbi1icmFpbi90ZXN0cy91bml0L3R5cGVzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUeXBlIFRlc3RzXG4gKiBWZXJpZmllcyB0eXBlIGRlZmluaXRpb25zIGFyZSBjb3JyZWN0IGFuZCB1c2FibGVcbiAqL1xuXG5pbXBvcnQge1xuICBFcXVpdHlUaWVyLFxuICBBbGxvY2F0aW9uVmVjdG9yLFxuICBQaGFzZUlkLFxuICBJbnRlbnRTaWduYWwsXG4gIFBvc2l0aW9uLFxuICBCcmVha2VyVHlwZSxcbiAgQnJlYWtlclN0YXR1cyxcbiAgVHJlYXN1cnlTdGF0dXMsXG4gIEJyYWluRGVjaXNpb24sXG59IGZyb20gJy4uLy4uL3NyYy90eXBlcy9pbmRleC5qcyc7XG5cbmRlc2NyaWJlKCdUeXBlcycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ0VxdWl0eVRpZXInLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIGFsbCBleHBlY3RlZCB0aWVycycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFcXVpdHlUaWVyLk1JQ1JPKS50b0JlKCdNSUNSTycpO1xuICAgICAgZXhwZWN0KEVxdWl0eVRpZXIuU01BTEwpLnRvQmUoJ1NNQUxMJyk7XG4gICAgICBleHBlY3QoRXF1aXR5VGllci5NRURJVU0pLnRvQmUoJ01FRElVTScpO1xuICAgICAgZXhwZWN0KEVxdWl0eVRpZXIuTEFSR0UpLnRvQmUoJ0xBUkdFJyk7XG4gICAgICBleHBlY3QoRXF1aXR5VGllci5JTlNUSVRVVElPTkFMKS50b0JlKCdJTlNUSVRVVElPTkFMJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBbGxvY2F0aW9uVmVjdG9yJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIHZhbGlkIGFsbG9jYXRpb24gdmVjdG9yJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmVjdG9yOiBBbGxvY2F0aW9uVmVjdG9yID0ge1xuICAgICAgICB3MTogMC41LFxuICAgICAgICB3MjogMC4zLFxuICAgICAgICB3MzogMC4yLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QodmVjdG9yLncxICsgdmVjdG9yLncyICsgdmVjdG9yLnczKS50b0JlQ2xvc2VUbygxLjApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGhhc2VJZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCBwaGFzZSBJRHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwaGFzZXM6IFBoYXNlSWRbXSA9IFsncGhhc2UxJywgJ3BoYXNlMicsICdwaGFzZTMnXTtcbiAgICAgIGV4cGVjdChwaGFzZXMpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVudFNpZ25hbCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSB2YWxpZCBpbnRlbnQgc2lnbmFsJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgIHNpZ25hbElkOiAnc2lnXzEyMycsXG4gICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnLFxuICAgICAgICBzeW1ib2w6ICdCVENVU0RUJyxcbiAgICAgICAgc2lkZTogJ0JVWScsXG4gICAgICAgIHJlcXVlc3RlZFNpemU6IDEwMDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChzaWduYWwuc2lnbmFsSWQpLnRvQmUoJ3NpZ18xMjMnKTtcbiAgICAgIGV4cGVjdChzaWduYWwucGhhc2VJZCkudG9CZSgncGhhc2UxJyk7XG4gICAgICBleHBlY3Qoc2lnbmFsLnNpZGUpLnRvQmUoJ0JVWScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUG9zaXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgdmFsaWQgcG9zaXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBwb3NpdGlvbjogUG9zaXRpb24gPSB7XG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICBzaWRlOiAnTE9ORycsXG4gICAgICAgIHNpemU6IDUwMDAsXG4gICAgICAgIGVudHJ5UHJpY2U6IDUwMDAwLFxuICAgICAgICB1bnJlYWxpemVkUG5MOiAxMDAsXG4gICAgICAgIGxldmVyYWdlOiAxMCxcbiAgICAgICAgcGhhc2VJZDogJ3BoYXNlMScsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QocG9zaXRpb24uc3ltYm9sKS50b0JlKCdCVENVU0RUJyk7XG4gICAgICBleHBlY3QocG9zaXRpb24uc2lkZSkudG9CZSgnTE9ORycpO1xuICAgICAgZXhwZWN0KHBvc2l0aW9uLmxldmVyYWdlKS50b0JlKDEwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0JyZWFrZXJUeXBlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBIQVJEIGFuZCBTT0ZUIHR5cGVzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEJyZWFrZXJUeXBlLkhBUkQpLnRvQmUoJ0hBUkQnKTtcbiAgICAgIGV4cGVjdChCcmVha2VyVHlwZS5TT0ZUKS50b0JlKCdTT0ZUJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCcmVha2VyU3RhdHVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIHZhbGlkIGJyZWFrZXIgc3RhdHVzJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHVzOiBCcmVha2VyU3RhdHVzID0ge1xuICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgICBkYWlseURyYXdkb3duOiAwLjA1LFxuICAgICAgICBjb25zZWN1dGl2ZUxvc3NlczogMSxcbiAgICAgICAgZXF1aXR5TGV2ZWw6IDEwMDAsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3Qoc3RhdHVzLmFjdGl2ZSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3Qoc3RhdHVzLmRhaWx5RHJhd2Rvd24pLnRvQmUoMC4wNSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhY3RpdmUgYnJlYWtlciBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0dXM6IEJyZWFrZXJTdGF0dXMgPSB7XG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgdHlwZTogQnJlYWtlclR5cGUuSEFSRCxcbiAgICAgICAgcmVhc29uOiAnRGFpbHkgZHJhd2Rvd24gZXhjZWVkZWQnLFxuICAgICAgICB0cmlnZ2VyZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgZGFpbHlEcmF3ZG93bjogMC4xNixcbiAgICAgICAgY29uc2VjdXRpdmVMb3NzZXM6IDAsXG4gICAgICAgIGVxdWl0eUxldmVsOiAxNzAsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3Qoc3RhdHVzLmFjdGl2ZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzdGF0dXMudHlwZSkudG9CZShCcmVha2VyVHlwZS5IQVJEKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1RyZWFzdXJ5U3RhdHVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIHZhbGlkIHRyZWFzdXJ5IHN0YXR1cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXR1czogVHJlYXN1cnlTdGF0dXMgPSB7XG4gICAgICAgIGZ1dHVyZXNXYWxsZXQ6IDEwMDAsXG4gICAgICAgIHNwb3RXYWxsZXQ6IDUwMCxcbiAgICAgICAgdG90YWxTd2VwdDogNTAwLFxuICAgICAgICBoaWdoV2F0ZXJtYXJrOiAxMjAwLFxuICAgICAgICBsb2NrZWRQcm9maXQ6IDUwMCxcbiAgICAgICAgcmlza0NhcGl0YWw6IDEwMDAsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3Qoc3RhdHVzLmZ1dHVyZXNXYWxsZXQpLnRvQmUoMTAwMCk7XG4gICAgICBleHBlY3Qoc3RhdHVzLnNwb3RXYWxsZXQpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChzdGF0dXMudG90YWxTd2VwdCkudG9CZSg1MDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQnJhaW5EZWNpc2lvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSB2YWxpZCBicmFpbiBkZWNpc2lvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGRlY2lzaW9uOiBCcmFpbkRlY2lzaW9uID0ge1xuICAgICAgICBzaWduYWxJZDogJ3NpZ18xMjMnLFxuICAgICAgICBhcHByb3ZlZDogdHJ1ZSxcbiAgICAgICAgYXV0aG9yaXplZFNpemU6IDgwMCxcbiAgICAgICAgcmVhc29uOiAnU2lnbmFsIGFwcHJvdmVkIHdpdGggc2l6ZSByZWR1Y3Rpb24nLFxuICAgICAgICBhbGxvY2F0aW9uOiB7XG4gICAgICAgICAgdzE6IDAuOCxcbiAgICAgICAgICB3MjogMC4yLFxuICAgICAgICAgIHczOiAwLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSxcbiAgICAgICAgcGVyZm9ybWFuY2U6IHtcbiAgICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyxcbiAgICAgICAgICBzaGFycGVSYXRpbzogMS41LFxuICAgICAgICAgIHRvdGFsUG5MOiA1MDAsXG4gICAgICAgICAgdHJhZGVDb3VudDogMjAsXG4gICAgICAgICAgd2luUmF0ZTogMC42LFxuICAgICAgICAgIGF2Z1dpbjogNTAsXG4gICAgICAgICAgYXZnTG9zczogMzAsXG4gICAgICAgICAgbW9kaWZpZXI6IDEuMCxcbiAgICAgICAgfSxcbiAgICAgICAgcmlzazoge1xuICAgICAgICAgIGFwcHJvdmVkOiB0cnVlLFxuICAgICAgICAgIHJlYXNvbjogJ1dpdGhpbiByaXNrIGxpbWl0cycsXG4gICAgICAgICAgYWRqdXN0ZWRTaXplOiA4MDAsXG4gICAgICAgICAgcmlza01ldHJpY3M6IHtcbiAgICAgICAgICAgIGN1cnJlbnRMZXZlcmFnZTogNSxcbiAgICAgICAgICAgIHByb2plY3RlZExldmVyYWdlOiA4LFxuICAgICAgICAgICAgY29ycmVsYXRpb246IDAuMyxcbiAgICAgICAgICAgIHBvcnRmb2xpb0RlbHRhOiAxMDAwLFxuICAgICAgICAgICAgcG9ydGZvbGlvQmV0YTogMC44LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChkZWNpc2lvbi5hcHByb3ZlZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5hdXRob3JpemVkU2l6ZSkudG9CZSg4MDApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9