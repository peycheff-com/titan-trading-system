{"file":"/Users/ivan/Code/trading/titan/services/titan-brain/tests/logging/Logger.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-brain/tests/logging/Logger.test.ts"],"sourcesContent":["/**\n * Logger.test.ts - Unit tests for structured logging\n * \n * Tests the Logger class functionality including structured logging,\n * correlation IDs, performance tracking, and sensitive data masking.\n */\n\nimport { Logger, LogLevel, LoggerConfig } from '../../src/logging/Logger';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\n// Mock console methods\nconst originalConsole = { ...console };\nconst mockConsole = {\n  debug: jest.fn(),\n  info: jest.fn(),\n  warn: jest.fn(),\n  error: jest.fn(),\n  log: jest.fn()\n};\n\n// Mock fs methods\njest.mock('fs');\nconst mockFs = fs as jest.Mocked<typeof fs>;\n\ndescribe('Logger', () => {\n  let logger: Logger;\n  let testConfig: LoggerConfig;\n\n  beforeEach(() => {\n    // Reset console mocks\n    Object.assign(console, mockConsole);\n    Object.keys(mockConsole).forEach(key => {\n      (mockConsole as any)[key].mockClear();\n    });\n\n    // Reset fs mocks\n    mockFs.existsSync.mockReturnValue(true);\n    mockFs.mkdirSync.mockImplementation();\n    mockFs.appendFileSync.mockImplementation();\n\n    // Create test configuration\n    testConfig = {\n      level: LogLevel.DEBUG,\n      component: 'test-component',\n      enableConsole: true,\n      enableFile: false,\n      enablePerformanceLogging: true,\n      sensitiveFields: ['password', 'secret', 'token'],\n      maxStackTraceLines: 5\n    };\n\n    logger = new Logger(testConfig);\n  });\n\n  afterEach(() => {\n    // Restore original console\n    Object.assign(console, originalConsole);\n    \n    // Clear any active timers\n    logger.clearTimers();\n  });\n\n  describe('Configuration', () => {\n    it('should create configuration from environment variables', () => {\n      process.env.LOG_LEVEL = 'WARN';\n      process.env.LOG_ENABLE_CONSOLE = 'true';\n      process.env.LOG_ENABLE_FILE = 'true';\n      process.env.LOG_FILE_PATH = './test.log';\n      process.env.LOG_SENSITIVE_FIELDS = 'password,secret,apikey';\n\n      const config = Logger.createConfigFromEnv('test-service');\n\n      expect(config.level).toBe(LogLevel.WARN);\n      expect(config.component).toBe('test-service');\n      expect(config.enableConsole).toBe(true);\n      expect(config.enableFile).toBe(true);\n      expect(config.filePath).toBe('./test.log');\n      expect(config.sensitiveFields).toEqual(['password', 'secret', 'apikey']);\n\n      // Clean up\n      delete process.env.LOG_LEVEL;\n      delete process.env.LOG_ENABLE_CONSOLE;\n      delete process.env.LOG_ENABLE_FILE;\n      delete process.env.LOG_FILE_PATH;\n      delete process.env.LOG_SENSITIVE_FIELDS;\n    });\n\n    it('should use default values when environment variables are not set', () => {\n      const config = Logger.createConfigFromEnv();\n\n      expect(config.level).toBe(LogLevel.INFO);\n      expect(config.component).toBe('titan-brain');\n      expect(config.enableConsole).toBe(true);\n      expect(config.enableFile).toBe(false);\n    });\n\n    it('should create singleton instance', () => {\n      const instance1 = Logger.getInstance('test');\n      const instance2 = Logger.getInstance('test');\n\n      expect(instance1).toBe(instance2);\n    });\n  });\n\n  describe('Basic Logging', () => {\n    it('should log debug messages', () => {\n      const correlationId = 'test-correlation-id';\n      const metadata = { key: 'value' };\n\n      logger.debug('Debug message', correlationId, metadata);\n\n      expect(mockConsole.debug).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.debug.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.level).toBe('DEBUG');\n      expect(logEntry.message).toBe('Debug message');\n      expect(logEntry.correlationId).toBe(correlationId);\n      expect(logEntry.component).toBe('test-component');\n      expect(logEntry.metadata).toEqual(metadata);\n      expect(logEntry.timestamp).toBeDefined();\n    });\n\n    it('should log info messages', () => {\n      logger.info('Info message');\n\n      expect(mockConsole.info).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.info.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.level).toBe('INFO');\n      expect(logEntry.message).toBe('Info message');\n    });\n\n    it('should log warning messages', () => {\n      logger.warn('Warning message');\n\n      expect(mockConsole.warn).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.warn.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.level).toBe('WARN');\n      expect(logEntry.message).toBe('Warning message');\n    });\n\n    it('should log error messages with error objects', () => {\n      const error = new Error('Test error');\n      error.stack = 'Error: Test error\\n    at test.js:1:1\\n    at test.js:2:2';\n\n      logger.error('Error message', error);\n\n      expect(mockConsole.error).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.error.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.level).toBe('ERROR');\n      expect(logEntry.message).toBe('Error message');\n      expect(logEntry.error).toBeDefined();\n      expect(logEntry.error.name).toBe('Error');\n      expect(logEntry.error.message).toBe('Test error');\n      expect(logEntry.error.stack).toContain('Error: Test error');\n    });\n\n    it('should log fatal messages', () => {\n      logger.fatal('Fatal message');\n\n      expect(mockConsole.error).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.error.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.level).toBe('FATAL');\n      expect(logEntry.message).toBe('Fatal message');\n    });\n  });\n\n  describe('Log Level Filtering', () => {\n    it('should respect log level configuration', () => {\n      const warnLogger = new Logger({\n        ...testConfig,\n        level: LogLevel.WARN\n      });\n\n      warnLogger.debug('Debug message');\n      warnLogger.info('Info message');\n      warnLogger.warn('Warning message');\n      warnLogger.error('Error message');\n\n      expect(mockConsole.debug).not.toHaveBeenCalled();\n      expect(mockConsole.info).not.toHaveBeenCalled();\n      expect(mockConsole.warn).toHaveBeenCalledTimes(1);\n      expect(mockConsole.error).toHaveBeenCalledTimes(1);\n    });\n\n    it('should allow changing log level at runtime', () => {\n      // First set to WARN level so we can see the setLogLevel message\n      logger.setLogLevel(LogLevel.WARN);\n      \n      // Clear the mock calls from setLogLevel\n      Object.keys(mockConsole).forEach(key => {\n        (mockConsole as any)[key].mockClear();\n      });\n\n      // Now set to ERROR level\n      logger.setLogLevel(LogLevel.ERROR);\n\n      logger.debug('Debug message');\n      logger.info('Info message');\n      logger.warn('Warning message');\n      logger.error('Error message');\n\n      expect(mockConsole.debug).not.toHaveBeenCalled();\n      expect(mockConsole.info).not.toHaveBeenCalled(); // setLogLevel won't log at ERROR level\n      expect(mockConsole.warn).not.toHaveBeenCalled();\n      expect(mockConsole.error).toHaveBeenCalledTimes(1); // error message only\n    });\n  });\n\n  describe('Sensitive Data Masking', () => {\n    it('should mask sensitive fields in metadata', () => {\n      const metadata = {\n        username: 'testuser',\n        password: 'secret123',\n        apiToken: 'abc123',\n        normalField: 'normal value'\n      };\n\n      logger.info('Test message', undefined, metadata);\n\n      const logCall = mockConsole.info.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.metadata.username).toBe('testuser');\n      expect(logEntry.metadata.password).toBe('[MASKED]');\n      expect(logEntry.metadata.apiToken).toBe('[MASKED]');\n      expect(logEntry.metadata.normalField).toBe('normal value');\n    });\n\n    it('should mask sensitive data in nested objects', () => {\n      const metadata = {\n        user: {\n          name: 'testuser',\n          password: 'secret123'\n        },\n        config: {\n          apiSecret: 'secret456',\n          timeout: 5000\n        }\n      };\n\n      logger.info('Test message', undefined, metadata);\n\n      const logCall = mockConsole.info.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.metadata.user.name).toBe('testuser');\n      expect(logEntry.metadata.user.password).toBe('[MASKED]');\n      expect(logEntry.metadata.config.apiSecret).toBe('[MASKED]');\n      expect(logEntry.metadata.config.timeout).toBe(5000);\n    });\n\n    it('should mask sensitive data in arrays', () => {\n      const metadata = {\n        items: [\n          { name: 'item1', secret: 'secret1' },\n          { name: 'item2', secret: 'secret2' }\n        ]\n      };\n\n      logger.info('Test message', undefined, metadata);\n\n      const logCall = mockConsole.info.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.metadata.items[0].name).toBe('item1');\n      expect(logEntry.metadata.items[0].secret).toBe('[MASKED]');\n      expect(logEntry.metadata.items[1].name).toBe('item2');\n      expect(logEntry.metadata.items[1].secret).toBe('[MASKED]');\n    });\n  });\n\n  describe('Performance Timing', () => {\n    it('should track operation timing', () => {\n      const timerId = logger.startTimer('test-operation', 'correlation-123', { key: 'value' });\n\n      expect(typeof timerId).toBe('string');\n      expect(logger.getActiveTimerCount()).toBe(1);\n\n      // Simulate some work\n      const duration = logger.endTimer(timerId, { result: 'success' });\n\n      expect(typeof duration).toBe('number');\n      expect(duration).toBeGreaterThanOrEqual(0);\n      expect(logger.getActiveTimerCount()).toBe(0);\n\n      // Check that performance log was written\n      expect(mockConsole.debug).toHaveBeenCalledTimes(1); // Start timer\n      expect(mockConsole.info).toHaveBeenCalledTimes(1);  // End timer\n\n      const endLogCall = mockConsole.info.mock.calls[0][0];\n      const endLogEntry = JSON.parse(endLogCall);\n\n      expect(endLogEntry.operation).toBe('test-operation');\n      expect(endLogEntry.duration).toBe(duration);\n      expect(endLogEntry.correlationId).toBe('correlation-123');\n      expect(endLogEntry.metadata.key).toBe('value');\n      expect(endLogEntry.metadata.result).toBe('success');\n    });\n\n    it('should handle invalid timer IDs', () => {\n      const duration = logger.endTimer('invalid-timer-id');\n\n      expect(duration).toBeNull();\n      expect(mockConsole.warn).toHaveBeenCalledTimes(1);\n    });\n\n    it('should disable performance logging when configured', () => {\n      const noPerformanceLogger = new Logger({\n        ...testConfig,\n        enablePerformanceLogging: false\n      });\n\n      const timerId = noPerformanceLogger.startTimer('test-operation');\n      noPerformanceLogger.endTimer(timerId);\n\n      expect(mockConsole.debug).not.toHaveBeenCalled();\n      expect(mockConsole.info).not.toHaveBeenCalled();\n    });\n  });\n\n  describe('Specialized Logging Methods', () => {\n    it('should log HTTP requests', () => {\n      logger.logHttpRequest('GET', '/api/test', 200, 150, 'correlation-123', {\n        userAgent: 'test-agent'\n      });\n\n      expect(mockConsole.info).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.info.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.message).toBe('HTTP GET /api/test - 200');\n      expect(logEntry.operation).toBe('http_request');\n      expect(logEntry.duration).toBe(150);\n      expect(logEntry.correlationId).toBe('correlation-123');\n      expect(logEntry.metadata.method).toBe('GET');\n      expect(logEntry.metadata.url).toBe('/api/test');\n      expect(logEntry.metadata.statusCode).toBe(200);\n      expect(logEntry.metadata.userAgent).toBe('test-agent');\n    });\n\n    it('should log HTTP requests as warnings for error status codes', () => {\n      logger.logHttpRequest('POST', '/api/error', 500, 200);\n\n      expect(mockConsole.warn).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.warn.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.level).toBe('WARN');\n      expect(logEntry.message).toBe('HTTP POST /api/error - 500');\n    });\n\n    it('should log database operations', () => {\n      logger.logDatabaseOperation('SELECT', 'users', 50, 10, 'correlation-123');\n\n      expect(mockConsole.debug).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.debug.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.message).toBe('Database SELECT on users');\n      expect(logEntry.operation).toBe('database_operation');\n      expect(logEntry.duration).toBe(50);\n      expect(logEntry.metadata.operation).toBe('SELECT');\n      expect(logEntry.metadata.table).toBe('users');\n      expect(logEntry.metadata.rowCount).toBe(10);\n    });\n\n    it('should log cache operations', () => {\n      logger.logCacheOperation('GET', 'user:123', true, 5, 'correlation-123');\n\n      expect(mockConsole.debug).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.debug.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.message).toBe('Cache GET for user:123 - HIT');\n      expect(logEntry.operation).toBe('cache_operation');\n      expect(logEntry.duration).toBe(5);\n      expect(logEntry.metadata.operation).toBe('GET');\n      expect(logEntry.metadata.key).toBe('user:123');\n      expect(logEntry.metadata.hit).toBe(true);\n    });\n\n    it('should log security events', () => {\n      logger.logSecurityEvent('Invalid login attempt', 'high', 'correlation-123', {\n        ip: '192.168.1.1',\n        username: 'admin'\n      });\n\n      expect(mockConsole.error).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.error.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.level).toBe('ERROR');\n      expect(logEntry.message).toBe('Security event: Invalid login attempt');\n      expect(logEntry.operation).toBe('security_event');\n      expect(logEntry.metadata.event).toBe('Invalid login attempt');\n      expect(logEntry.metadata.severity).toBe('high');\n      expect(logEntry.metadata.ip).toBe('192.168.1.1');\n      expect(logEntry.metadata.username).toBe('admin');\n    });\n\n    it('should log critical security events as fatal', () => {\n      logger.logSecurityEvent('System compromise detected', 'critical');\n\n      expect(mockConsole.error).toHaveBeenCalledTimes(1);\n      const logCall = mockConsole.error.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.level).toBe('FATAL');\n    });\n  });\n\n  describe('File Logging', () => {\n    it('should write to file when enabled', () => {\n      const fileLogger = new Logger({\n        ...testConfig,\n        enableFile: true,\n        filePath: './test.log'\n      });\n\n      mockFs.existsSync.mockReturnValue(false);\n\n      fileLogger.info('Test message');\n\n      expect(mockFs.mkdirSync).toHaveBeenCalledWith(path.dirname('./test.log'), { recursive: true });\n      expect(mockFs.appendFileSync).toHaveBeenCalledWith('./test.log', expect.stringContaining('\"message\":\"Test message\"'));\n    });\n\n    it('should handle file write errors gracefully', () => {\n      const fileLogger = new Logger({\n        ...testConfig,\n        enableFile: true,\n        filePath: './test.log'\n      });\n\n      mockFs.appendFileSync.mockImplementation(() => {\n        throw new Error('File write error');\n      });\n\n      fileLogger.info('Test message');\n\n      expect(mockConsole.error).toHaveBeenCalledWith('Failed to write to log file:', expect.any(Error));\n    });\n  });\n\n  describe('Correlation ID Generation', () => {\n    it('should generate unique correlation IDs', () => {\n      const id1 = Logger.generateCorrelationId();\n      const id2 = Logger.generateCorrelationId();\n\n      expect(typeof id1).toBe('string');\n      expect(typeof id2).toBe('string');\n      expect(id1).not.toBe(id2);\n      expect(id1.length).toBeGreaterThan(0);\n      expect(id2.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Configuration Management', () => {\n    it('should return current configuration', () => {\n      const config = logger.getConfig();\n\n      expect(config).toEqual(testConfig);\n      expect(config).not.toBe(testConfig); // Should be a copy\n    });\n\n    it('should clear all timers', () => {\n      logger.startTimer('timer1');\n      logger.startTimer('timer2');\n\n      expect(logger.getActiveTimerCount()).toBe(2);\n\n      logger.clearTimers();\n\n      expect(logger.getActiveTimerCount()).toBe(0);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle errors with custom codes', () => {\n      const error = new Error('Custom error') as any;\n      error.code = 'CUSTOM_ERROR';\n      error.statusCode = 400;\n\n      logger.error('Error with code', error);\n\n      const logCall = mockConsole.error.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      expect(logEntry.error.code).toBe('CUSTOM_ERROR');\n    });\n\n    it('should limit stack trace lines', () => {\n      const error = new Error('Test error');\n      error.stack = Array(20).fill(0).map((_, i) => `    at line${i}`).join('\\n');\n\n      logger.error('Error with long stack', error);\n\n      const logCall = mockConsole.error.mock.calls[0][0];\n      const logEntry = JSON.parse(logCall);\n\n      const stackLines = logEntry.error.stack.split('\\n');\n      expect(stackLines.length).toBeLessThanOrEqual(testConfig.maxStackTraceLines);\n    });\n  });\n});"],"version":3}