59a3edaced8fdab8d1eafb2ff541b4d6
"use strict";
/**
 * Unit Tests for RiskGuardian
 *
 * Tests specific scenarios with known inputs and expected outputs
 */
Object.defineProperty(exports, "__esModule", { value: true });
const RiskGuardian_1 = require("../../src/engine/RiskGuardian");
const AllocationEngine_1 = require("../../src/engine/AllocationEngine");
const index_1 = require("../../src/types/index");
// Test configurations
const allocationConfig = {
    transitionPoints: {
        startP2: 1500,
        fullP2: 5000,
        startP3: 25000
    },
    leverageCaps: {
        [index_1.EquityTier.MICRO]: 20,
        [index_1.EquityTier.SMALL]: 20,
        [index_1.EquityTier.MEDIUM]: 5,
        [index_1.EquityTier.LARGE]: 5,
        [index_1.EquityTier.INSTITUTIONAL]: 2
    }
};
const riskConfig = {
    maxCorrelation: 0.8,
    correlationPenalty: 0.5,
    correlationUpdateInterval: 300000, // 5 minutes
    betaUpdateInterval: 300000 // 5 minutes
};
describe('RiskGuardian Unit Tests', () => {
    let allocationEngine;
    let riskGuardian;
    beforeEach(() => {
        allocationEngine = new AllocationEngine_1.AllocationEngine(allocationConfig);
        riskGuardian = new RiskGuardian_1.RiskGuardian(riskConfig, allocationEngine);
    });
    describe('Leverage Calculation with Multiple Positions', () => {
        /**
         * **Validates: Requirements 3.1, 3.2**
         *
         * Test leverage calculation with known position sizes and equity
         */
        it('should calculate leverage correctly with multiple positions', () => {
            // Set up test scenario
            const equity = 10000;
            riskGuardian.setEquity(equity);
            const positions = [
                {
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 5000, // $5,000 notional
                    entryPrice: 50000,
                    unrealizedPnL: 100,
                    leverage: 1,
                    phaseId: 'phase1'
                },
                {
                    symbol: 'ETHUSDT',
                    side: 'SHORT',
                    size: 3000, // $3,000 notional
                    entryPrice: 3000,
                    unrealizedPnL: -50,
                    leverage: 1,
                    phaseId: 'phase2'
                }
            ];
            const leverage = riskGuardian.calculateCombinedLeverage(positions);
            // Expected: (5000 + 3000) / 10000 = 0.8x leverage
            expect(leverage).toBeCloseTo(0.8, 6);
        });
        it('should handle empty positions array', () => {
            riskGuardian.setEquity(10000);
            const leverage = riskGuardian.calculateCombinedLeverage([]);
            expect(leverage).toBe(0);
        });
        it('should handle zero equity gracefully', () => {
            riskGuardian.setEquity(0);
            const positions = [{
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 1000,
                    entryPrice: 50000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                }];
            const leverage = riskGuardian.calculateCombinedLeverage(positions);
            expect(leverage).toBe(0); // Should handle division by zero
        });
        it('should calculate leverage with large positions', () => {
            const equity = 1000;
            riskGuardian.setEquity(equity);
            const positions = [{
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 20000, // 20x leverage
                    entryPrice: 50000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                }];
            const leverage = riskGuardian.calculateCombinedLeverage(positions);
            expect(leverage).toBeCloseTo(20, 6);
        });
    });
    describe('Correlation Calculation Between Assets', () => {
        /**
         * **Validates: Requirements 3.6, 3.7**
         *
         * Test correlation calculation with known price movements
         */
        it('should calculate perfect positive correlation', () => {
            // Add identical price movements for both assets
            const baseTime = Date.now() - 300000; // 5 minutes ago
            const prices = [50000, 51000, 52000, 51500, 53000];
            for (let i = 0; i < prices.length; i++) {
                const time = baseTime + i * 60000; // 1 minute intervals
                riskGuardian.updatePriceHistory('BTCUSDT', prices[i], time);
                riskGuardian.updatePriceHistory('ETHUSDT', prices[i] * 0.06, time); // Scale for ETH
            }
            const correlation = riskGuardian.calculateCorrelation('BTCUSDT', 'ETHUSDT');
            expect(correlation).toBeCloseTo(1.0, 2); // Should be close to perfect correlation
        });
        it('should calculate perfect negative correlation', () => {
            // Add opposite price movements
            const baseTime = Date.now() - 300000;
            const btcPrices = [50000, 51000, 52000, 51500, 53000];
            const ethPrices = [3000, 2950, 2900, 2925, 2850]; // Opposite direction
            for (let i = 0; i < btcPrices.length; i++) {
                const time = baseTime + i * 60000;
                riskGuardian.updatePriceHistory('BTCUSDT', btcPrices[i], time);
                riskGuardian.updatePriceHistory('ETHUSDT', ethPrices[i], time);
            }
            const correlation = riskGuardian.calculateCorrelation('BTCUSDT', 'ETHUSDT');
            expect(correlation).toBeLessThan(-0.8); // Should be strongly negative
        });
        it('should return 1.0 for self-correlation', () => {
            // Add some price history
            const baseTime = Date.now() - 180000;
            for (let i = 0; i < 5; i++) {
                const time = baseTime + i * 30000;
                const price = 50000 + i * 1000;
                riskGuardian.updatePriceHistory('BTCUSDT', price, time);
            }
            const correlation = riskGuardian.calculateCorrelation('BTCUSDT', 'BTCUSDT');
            expect(correlation).toBeCloseTo(1.0, 6);
        });
        it('should handle insufficient price history', () => {
            // Only add one price point
            riskGuardian.updatePriceHistory('BTCUSDT', 50000, Date.now());
            riskGuardian.updatePriceHistory('ETHUSDT', 3000, Date.now());
            const correlation = riskGuardian.calculateCorrelation('BTCUSDT', 'ETHUSDT');
            expect(correlation).toBe(0); // Should return 0 for insufficient data
        });
        it('should handle unknown symbols', () => {
            const correlation = riskGuardian.calculateCorrelation('UNKNOWN1', 'UNKNOWN2');
            expect(correlation).toBe(0);
        });
    });
    describe('Phase 3 Hedge Auto-Approval', () => {
        /**
         * **Validates: Requirements 3.5**
         *
         * Test that Phase 3 hedge positions are auto-approved when they reduce delta
         */
        it('should auto-approve Phase 3 hedge that reduces long delta', () => {
            const equity = 10000;
            riskGuardian.setEquity(equity);
            // Existing long position creating positive delta
            const existingPositions = [{
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 15000, // Large position that would exceed leverage cap
                    entryPrice: 50000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                }];
            // Phase 3 hedge signal (short to reduce delta)
            const hedgeSignal = {
                signalId: 'hedge-test',
                phaseId: 'phase3',
                symbol: 'BTCUSDT',
                side: 'SELL',
                requestedSize: 8000, // Partial hedge
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(hedgeSignal, existingPositions);
            expect(decision.approved).toBe(true);
            expect(decision.reason).toContain('Phase 3 hedge approved');
            expect(decision.riskMetrics.portfolioDelta).toBeLessThan(15000); // Delta should be reduced
        });
        it('should auto-approve Phase 3 hedge that reduces short delta', () => {
            const equity = 10000;
            riskGuardian.setEquity(equity);
            // Existing short position creating negative delta
            const existingPositions = [{
                    symbol: 'ETHUSDT',
                    side: 'SHORT',
                    size: 12000, // Large short position
                    entryPrice: 3000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase2'
                }];
            // Phase 3 hedge signal (long to reduce negative delta)
            const hedgeSignal = {
                signalId: 'hedge-test-2',
                phaseId: 'phase3',
                symbol: 'ETHUSDT',
                side: 'BUY',
                requestedSize: 5000, // Partial hedge
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(hedgeSignal, existingPositions);
            expect(decision.approved).toBe(true);
            expect(decision.reason).toContain('Phase 3 hedge approved');
            expect(Math.abs(decision.riskMetrics.portfolioDelta)).toBeLessThan(12000); // Absolute delta reduced
        });
        it('should not auto-approve Phase 3 signal that increases delta', () => {
            const equity = 1000; // Low equity to trigger leverage cap
            riskGuardian.setEquity(equity);
            // Existing long position
            const existingPositions = [{
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 5000,
                    entryPrice: 50000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                }];
            // Phase 3 signal that increases delta (same direction)
            const signal = {
                signalId: 'non-hedge-test',
                phaseId: 'phase3',
                symbol: 'BTCUSDT',
                side: 'BUY', // Same direction as existing position
                requestedSize: 15000, // Would exceed leverage cap
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(signal, existingPositions);
            // Should be rejected due to leverage cap, not auto-approved
            expect(decision.approved).toBe(false);
            expect(decision.reason).toContain('Leverage cap exceeded');
        });
    });
    describe('High Correlation Size Reduction', () => {
        /**
         * **Validates: Requirements 3.7**
         *
         * Test that high correlation triggers size reduction
         */
        it('should reduce position size for high correlation same-direction trades', () => {
            const equity = 50000; // High equity to avoid leverage issues
            riskGuardian.setEquity(equity);
            // Set up high correlation between BTC and ETH
            const baseTime = Date.now() - 300000;
            for (let i = 0; i < 10; i++) {
                const time = baseTime + i * 30000;
                const btcPrice = 50000 + i * 1000; // Rising trend
                const ethPrice = 3000 + i * 60; // Same rising trend (correlated)
                riskGuardian.updatePriceHistory('BTCUSDT', btcPrice, time);
                riskGuardian.updatePriceHistory('ETHUSDT', ethPrice, time);
            }
            // Existing BTC long position
            const existingPositions = [{
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 10000,
                    entryPrice: 50000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                }];
            // New ETH long signal (same direction as BTC)
            const signal = {
                signalId: 'correlation-test',
                phaseId: 'phase2',
                symbol: 'ETHUSDT',
                side: 'BUY',
                requestedSize: 8000,
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(signal, existingPositions);
            // Should be approved but with reduced size due to correlation
            if (decision.approved && decision.riskMetrics.correlation > 0.8) {
                expect(decision.adjustedSize).toBeDefined();
                expect(decision.adjustedSize).toBeLessThan(signal.requestedSize);
                expect(decision.reason).toContain('correlation');
            }
        });
        it('should allow full size for opposite-direction trades (hedge effect)', () => {
            const equity = 50000;
            riskGuardian.setEquity(equity);
            // Set up high correlation
            const baseTime = Date.now() - 300000;
            for (let i = 0; i < 10; i++) {
                const time = baseTime + i * 30000;
                const btcPrice = 50000 + i * 1000;
                const ethPrice = 3000 + i * 60; // Same trend (correlated)
                riskGuardian.updatePriceHistory('BTCUSDT', btcPrice, time);
                riskGuardian.updatePriceHistory('ETHUSDT', ethPrice, time);
            }
            // Existing BTC long position
            const existingPositions = [{
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 10000,
                    entryPrice: 50000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                }];
            // New ETH short signal (opposite direction - hedge effect)
            const signal = {
                signalId: 'hedge-correlation-test',
                phaseId: 'phase2',
                symbol: 'ETHUSDT',
                side: 'SELL',
                requestedSize: 8000,
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(signal, existingPositions);
            // Should be approved with full size (hedge effect)
            expect(decision.approved).toBe(true);
            if (decision.adjustedSize) {
                expect(decision.adjustedSize).toBe(signal.requestedSize);
            }
        });
        it('should handle correlation penalty calculation correctly', () => {
            const equity = 50000;
            riskGuardian.setEquity(equity);
            // Mock high correlation scenario
            const correlation = 0.9; // High correlation
            const originalSize = 10000;
            const expectedReduction = originalSize * riskConfig.correlationPenalty; // 50% reduction
            const expectedAdjustedSize = originalSize - expectedReduction;
            // This tests the correlation penalty logic indirectly
            // by checking that the penalty factor is applied correctly
            expect(riskConfig.correlationPenalty).toBe(0.5);
            expect(expectedAdjustedSize).toBe(5000); // 50% of original
        });
    });
    describe('Portfolio Delta Calculation', () => {
        /**
         * **Validates: Requirements 3.2**
         *
         * Test portfolio delta calculation with mixed positions
         */
        it('should calculate portfolio delta with mixed long/short positions', () => {
            const positions = [
                {
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 10000, // +10000 delta
                    entryPrice: 50000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                },
                {
                    symbol: 'ETHUSDT',
                    side: 'SHORT',
                    size: 6000, // -6000 delta
                    entryPrice: 3000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase2'
                },
                {
                    symbol: 'ADAUSDT',
                    side: 'LONG',
                    size: 3000, // +3000 delta
                    entryPrice: 0.5,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                }
            ];
            const delta = riskGuardian.calculatePortfolioDelta(positions);
            // Expected: 10000 - 6000 + 3000 = 7000
            expect(delta).toBe(7000);
        });
        it('should return zero delta for balanced portfolio', () => {
            const positions = [
                {
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 5000,
                    entryPrice: 50000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                },
                {
                    symbol: 'ETHUSDT',
                    side: 'SHORT',
                    size: 5000,
                    entryPrice: 3000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase2'
                }
            ];
            const delta = riskGuardian.calculatePortfolioDelta(positions);
            expect(delta).toBe(0);
        });
        it('should handle all long positions', () => {
            const positions = [
                {
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 5000,
                    entryPrice: 50000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                },
                {
                    symbol: 'ETHUSDT',
                    side: 'LONG',
                    size: 3000,
                    entryPrice: 3000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase2'
                }
            ];
            const delta = riskGuardian.calculatePortfolioDelta(positions);
            expect(delta).toBe(8000);
        });
        it('should handle all short positions', () => {
            const positions = [
                {
                    symbol: 'BTCUSDT',
                    side: 'SHORT',
                    size: 4000,
                    entryPrice: 50000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase1'
                },
                {
                    symbol: 'ETHUSDT',
                    side: 'SHORT',
                    size: 2000,
                    entryPrice: 3000,
                    unrealizedPnL: 0,
                    leverage: 1,
                    phaseId: 'phase2'
                }
            ];
            const delta = riskGuardian.calculatePortfolioDelta(positions);
            expect(delta).toBe(-6000);
        });
    });
    describe('Signal Validation Edge Cases', () => {
        /**
         * **Validates: Requirements 3.1, 3.3**
         *
         * Test edge cases in signal validation
         */
        it('should handle zero-size signal', () => {
            riskGuardian.setEquity(10000);
            const signal = {
                signalId: 'zero-size-test',
                phaseId: 'phase1',
                symbol: 'BTCUSDT',
                side: 'BUY',
                requestedSize: 0,
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(signal, []);
            expect(decision.approved).toBe(false);
            expect(decision.reason).toContain('Invalid signal size');
        });
        it('should handle negative-size signal', () => {
            riskGuardian.setEquity(10000);
            const signal = {
                signalId: 'negative-size-test',
                phaseId: 'phase1',
                symbol: 'BTCUSDT',
                side: 'BUY',
                requestedSize: -1000,
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(signal, []);
            expect(decision.approved).toBe(false);
            expect(decision.reason).toContain('Invalid signal size');
        });
        it('should handle very large signal that exceeds maximum leverage', () => {
            const equity = 1000; // Small equity
            riskGuardian.setEquity(equity);
            const signal = {
                signalId: 'large-signal-test',
                phaseId: 'phase1',
                symbol: 'BTCUSDT',
                side: 'BUY',
                requestedSize: 50000, // 50x leverage, exceeds 20x cap
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(signal, []);
            expect(decision.approved).toBe(false);
            expect(decision.reason).toContain('Leverage cap exceeded');
            expect(decision.riskMetrics.projectedLeverage).toBeGreaterThan(20);
        });
        it('should approve signal at exactly the leverage cap', () => {
            const equity = 1000;
            riskGuardian.setEquity(equity);
            const signal = {
                signalId: 'exact-cap-test',
                phaseId: 'phase1',
                symbol: 'BTCUSDT',
                side: 'BUY',
                requestedSize: 20000, // Exactly 20x leverage
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(signal, []);
            expect(decision.approved).toBe(true);
            expect(decision.riskMetrics.projectedLeverage).toBeCloseTo(20, 6);
        });
    });
    describe('Risk Metrics Calculation', () => {
        /**
         * **Validates: Requirements 3.1, 3.2, 3.6**
         *
         * Test that risk metrics are calculated correctly
         */
        it('should calculate all risk metrics correctly', () => {
            const equity = 10000;
            riskGuardian.setEquity(equity);
            // Set up correlation data
            const baseTime = Date.now() - 300000;
            for (let i = 0; i < 10; i++) {
                const time = baseTime + i * 30000;
                riskGuardian.updatePriceHistory('BTCUSDT', 50000 + i * 1000, time);
                riskGuardian.updatePriceHistory('ETHUSDT', 3000 + i * 60, time);
            }
            const existingPositions = [{
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    size: 5000,
                    entryPrice: 50000,
                    unrealizedPnL: 100,
                    leverage: 1,
                    phaseId: 'phase1'
                }];
            const signal = {
                signalId: 'metrics-test',
                phaseId: 'phase2',
                symbol: 'ETHUSDT',
                side: 'BUY',
                requestedSize: 3000,
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(signal, existingPositions);
            // Verify all risk metrics are present and valid
            expect(decision.riskMetrics).toBeDefined();
            expect(decision.riskMetrics.currentLeverage).toBeCloseTo(0.5, 6); // 5000/10000
            expect(decision.riskMetrics.projectedLeverage).toBeCloseTo(0.8, 6); // 8000/10000
            expect(decision.riskMetrics.portfolioDelta).toBe(5000); // Current long position
            expect(decision.riskMetrics.correlation).toBeGreaterThanOrEqual(0);
            expect(decision.riskMetrics.correlation).toBeLessThanOrEqual(1);
            expect(decision.riskMetrics.portfolioBeta).toBeGreaterThanOrEqual(0);
        });
        it('should handle metrics calculation with no existing positions', () => {
            const equity = 10000;
            riskGuardian.setEquity(equity);
            const signal = {
                signalId: 'no-positions-test',
                phaseId: 'phase1',
                symbol: 'BTCUSDT',
                side: 'BUY',
                requestedSize: 2000,
                timestamp: Date.now()
            };
            const decision = riskGuardian.checkSignal(signal, []);
            expect(decision.riskMetrics.currentLeverage).toBe(0);
            expect(decision.riskMetrics.projectedLeverage).toBeCloseTo(0.2, 6); // 2000/10000
            expect(decision.riskMetrics.portfolioDelta).toBe(0);
            expect(decision.riskMetrics.correlation).toBe(0); // No existing positions to correlate with
            expect(decision.riskMetrics.portfolioBeta).toBeGreaterThanOrEqual(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLWJyYWluL3Rlc3RzL3VuaXQvUmlza0d1YXJkaWFuLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBRUgsZ0VBQTZEO0FBQzdELHdFQUFxRTtBQUNyRSxpREFPK0I7QUFFL0Isc0JBQXNCO0FBQ3RCLE1BQU0sZ0JBQWdCLEdBQTJCO0lBQy9DLGdCQUFnQixFQUFFO1FBQ2hCLE9BQU8sRUFBRSxJQUFJO1FBQ2IsTUFBTSxFQUFFLElBQUk7UUFDWixPQUFPLEVBQUUsS0FBSztLQUNmO0lBQ0QsWUFBWSxFQUFFO1FBQ1osQ0FBQyxrQkFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUU7UUFDdEIsQ0FBQyxrQkFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUU7UUFDdEIsQ0FBQyxrQkFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDdEIsQ0FBQyxrQkFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDckIsQ0FBQyxrQkFBVSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUM7S0FDOUI7Q0FDRixDQUFDO0FBRUYsTUFBTSxVQUFVLEdBQXVCO0lBQ3JDLGNBQWMsRUFBRSxHQUFHO0lBQ25CLGtCQUFrQixFQUFFLEdBQUc7SUFDdkIseUJBQXlCLEVBQUUsTUFBTSxFQUFFLFlBQVk7SUFDL0Msa0JBQWtCLEVBQUUsTUFBTSxDQUFDLFlBQVk7Q0FDeEMsQ0FBQztBQUVGLFFBQVEsQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7SUFDdkMsSUFBSSxnQkFBa0MsQ0FBQztJQUN2QyxJQUFJLFlBQTBCLENBQUM7SUFFL0IsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLGdCQUFnQixHQUFHLElBQUksbUNBQWdCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUMxRCxZQUFZLEdBQUcsSUFBSSwyQkFBWSxDQUFDLFVBQVUsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ2hFLENBQUMsQ0FBQyxDQUFD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LENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLWJyYWluL3Rlc3RzL3VuaXQvUmlza0d1YXJkaWFuLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IFRlc3RzIGZvciBSaXNrR3VhcmRpYW5cbiAqIFxuICogVGVzdHMgc3BlY2lmaWMgc2NlbmFyaW9zIHdpdGgga25vd24gaW5wdXRzIGFuZCBleHBlY3RlZCBvdXRwdXRzXG4gKi9cblxuaW1wb3J0IHsgUmlza0d1YXJkaWFuIH0gZnJvbSAnLi4vLi4vc3JjL2VuZ2luZS9SaXNrR3VhcmRpYW4nO1xuaW1wb3J0IHsgQWxsb2NhdGlvbkVuZ2luZSB9IGZyb20gJy4uLy4uL3NyYy9lbmdpbmUvQWxsb2NhdGlvbkVuZ2luZSc7XG5pbXBvcnQgeyBcbiAgUmlza0d1YXJkaWFuQ29uZmlnLCBcbiAgQWxsb2NhdGlvbkVuZ2luZUNvbmZpZywgXG4gIEludGVudFNpZ25hbCwgXG4gIFBvc2l0aW9uLFxuICBQaGFzZUlkLFxuICBFcXVpdHlUaWVyXG59IGZyb20gJy4uLy4uL3NyYy90eXBlcy9pbmRleCc7XG5cbi8vIFRlc3QgY29uZmlndXJhdGlvbnNcbmNvbnN0IGFsbG9jYXRpb25Db25maWc6IEFsbG9jYXRpb25FbmdpbmVDb25maWcgPSB7XG4gIHRyYW5zaXRpb25Qb2ludHM6IHtcbiAgICBzdGFydFAyOiAxNTAwLFxuICAgIGZ1bGxQMjogNTAwMCxcbiAgICBzdGFydFAzOiAyNTAwMFxuICB9LFxuICBsZXZlcmFnZUNhcHM6IHtcbiAgICBbRXF1aXR5VGllci5NSUNST106IDIwLFxuICAgIFtFcXVpdHlUaWVyLlNNQUxMXTogMjAsXG4gICAgW0VxdWl0eVRpZXIuTUVESVVNXTogNSxcbiAgICBbRXF1aXR5VGllci5MQVJHRV06IDUsXG4gICAgW0VxdWl0eVRpZXIuSU5TVElUVVRJT05BTF06IDJcbiAgfVxufTtcblxuY29uc3Qgcmlza0NvbmZpZzogUmlza0d1YXJkaWFuQ29uZmlnID0ge1xuICBtYXhDb3JyZWxhdGlvbjogMC44LFxuICBjb3JyZWxhdGlvblBlbmFsdHk6IDAuNSxcbiAgY29ycmVsYXRpb25VcGRhdGVJbnRlcnZhbDogMzAwMDAwLCAvLyA1IG1pbnV0ZXNcbiAgYmV0YVVwZGF0ZUludGVydmFsOiAzMDAwMDAgLy8gNSBtaW51dGVzXG59O1xuXG5kZXNjcmliZSgnUmlza0d1YXJkaWFuIFVuaXQgVGVzdHMnLCAoKSA9PiB7XG4gIGxldCBhbGxvY2F0aW9uRW5naW5lOiBBbGxvY2F0aW9uRW5naW5lO1xuICBsZXQgcmlza0d1YXJkaWFuOiBSaXNrR3VhcmRpYW47XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgYWxsb2NhdGlvbkVuZ2luZSA9IG5ldyBBbGxvY2F0aW9uRW5naW5lKGFsbG9jYXRpb25Db25maWcpO1xuICAgIHJpc2tHdWFyZGlhbiA9IG5ldyBSaXNrR3VhcmRpYW4ocmlza0NvbmZpZywgYWxsb2NhdGlvbkVuZ2luZSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMZXZlcmFnZSBDYWxjdWxhdGlvbiB3aXRoIE11bHRpcGxlIFBvc2l0aW9ucycsICgpID0+IHtcbiAgICAvKipcbiAgICAgKiAqKlZhbGlkYXRlczogUmVxdWlyZW1lbnRzIDMuMSwgMy4yKipcbiAgICAgKiBcbiAgICAgKiBUZXN0IGxldmVyYWdlIGNhbGN1bGF0aW9uIHdpdGgga25vd24gcG9zaXRpb24gc2l6ZXMgYW5kIGVxdWl0eVxuICAgICAqL1xuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGxldmVyYWdlIGNvcnJlY3RseSB3aXRoIG11bHRpcGxlIHBvc2l0aW9ucycsICgpID0+IHtcbiAgICAgIC8vIFNldCB1cCB0ZXN0IHNjZW5hcmlvXG4gICAgICBjb25zdCBlcXVpdHkgPSAxMDAwMDtcbiAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoZXF1aXR5KTtcblxuICAgICAgY29uc3QgcG9zaXRpb25zOiBQb3NpdGlvbltdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgICAgc2lkZTogJ0xPTkcnLFxuICAgICAgICAgIHNpemU6IDUwMDAsIC8vICQ1LDAwMCBub3Rpb25hbFxuICAgICAgICAgIGVudHJ5UHJpY2U6IDUwMDAwLFxuICAgICAgICAgIHVucmVhbGl6ZWRQbkw6IDEwMCxcbiAgICAgICAgICBsZXZlcmFnZTogMSxcbiAgICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyBhcyBQaGFzZUlkXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzeW1ib2w6ICdFVEhVU0RUJyxcbiAgICAgICAgICBzaWRlOiAnU0hPUlQnLFxuICAgICAgICAgIHNpemU6IDMwMDAsIC8vICQzLDAwMCBub3Rpb25hbFxuICAgICAgICAgIGVudHJ5UHJpY2U6IDMwMDAsXG4gICAgICAgICAgdW5yZWFsaXplZFBuTDogLTUwLFxuICAgICAgICAgIGxldmVyYWdlOiAxLFxuICAgICAgICAgIHBoYXNlSWQ6ICdwaGFzZTInIGFzIFBoYXNlSWRcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgY29uc3QgbGV2ZXJhZ2UgPSByaXNrR3VhcmRpYW4uY2FsY3VsYXRlQ29tYmluZWRMZXZlcmFnZShwb3NpdGlvbnMpO1xuICAgICAgXG4gICAgICAvLyBFeHBlY3RlZDogKDUwMDAgKyAzMDAwKSAvIDEwMDAwID0gMC44eCBsZXZlcmFnZVxuICAgICAgZXhwZWN0KGxldmVyYWdlKS50b0JlQ2xvc2VUbygwLjgsIDYpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgcG9zaXRpb25zIGFycmF5JywgKCkgPT4ge1xuICAgICAgcmlza0d1YXJkaWFuLnNldEVxdWl0eSgxMDAwMCk7XG4gICAgICBjb25zdCBsZXZlcmFnZSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVDb21iaW5lZExldmVyYWdlKFtdKTtcbiAgICAgIGV4cGVjdChsZXZlcmFnZSkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHplcm8gZXF1aXR5IGdyYWNlZnVsbHknLCAoKSA9PiB7XG4gICAgICByaXNrR3VhcmRpYW4uc2V0RXF1aXR5KDApO1xuICAgICAgY29uc3QgcG9zaXRpb25zOiBQb3NpdGlvbltdID0gW3tcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHNpZGU6ICdMT05HJyxcbiAgICAgICAgc2l6ZTogMTAwMCxcbiAgICAgICAgZW50cnlQcmljZTogNTAwMDAsXG4gICAgICAgIHVucmVhbGl6ZWRQbkw6IDAsXG4gICAgICAgIGxldmVyYWdlOiAxLFxuICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyBhcyBQaGFzZUlkXG4gICAgICB9XTtcblxuICAgICAgY29uc3QgbGV2ZXJhZ2UgPSByaXNrR3VhcmRpYW4uY2FsY3VsYXRlQ29tYmluZWRMZXZlcmFnZShwb3NpdGlvbnMpO1xuICAgICAgZXhwZWN0KGxldmVyYWdlKS50b0JlKDApOyAvLyBTaG91bGQgaGFuZGxlIGRpdmlzaW9uIGJ5IHplcm9cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGxldmVyYWdlIHdpdGggbGFyZ2UgcG9zaXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXF1aXR5ID0gMTAwMDtcbiAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoZXF1aXR5KTtcblxuICAgICAgY29uc3QgcG9zaXRpb25zOiBQb3NpdGlvbltdID0gW3tcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHNpZGU6ICdMT05HJyxcbiAgICAgICAgc2l6ZTogMjAwMDAsIC8vIDIweCBsZXZlcmFnZVxuICAgICAgICBlbnRyeVByaWNlOiA1MDAwMCxcbiAgICAgICAgdW5yZWFsaXplZFBuTDogMCxcbiAgICAgICAgbGV2ZXJhZ2U6IDEsXG4gICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnIGFzIFBoYXNlSWRcbiAgICAgIH1dO1xuXG4gICAgICBjb25zdCBsZXZlcmFnZSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVDb21iaW5lZExldmVyYWdlKHBvc2l0aW9ucyk7XG4gICAgICBleHBlY3QobGV2ZXJhZ2UpLnRvQmVDbG9zZVRvKDIwLCA2KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvcnJlbGF0aW9uIENhbGN1bGF0aW9uIEJldHdlZW4gQXNzZXRzJywgKCkgPT4ge1xuICAgIC8qKlxuICAgICAqICoqVmFsaWRhdGVzOiBSZXF1aXJlbWVudHMgMy42LCAzLjcqKlxuICAgICAqIFxuICAgICAqIFRlc3QgY29ycmVsYXRpb24gY2FsY3VsYXRpb24gd2l0aCBrbm93biBwcmljZSBtb3ZlbWVudHNcbiAgICAgKi9cbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBwZXJmZWN0IHBvc2l0aXZlIGNvcnJlbGF0aW9uJywgKCkgPT4ge1xuICAgICAgLy8gQWRkIGlkZW50aWNhbCBwcmljZSBtb3ZlbWVudHMgZm9yIGJvdGggYXNzZXRzXG4gICAgICBjb25zdCBiYXNlVGltZSA9IERhdGUubm93KCkgLSAzMDAwMDA7IC8vIDUgbWludXRlcyBhZ29cbiAgICAgIGNvbnN0IHByaWNlcyA9IFs1MDAwMCwgNTEwMDAsIDUyMDAwLCA1MTUwMCwgNTMwMDBdO1xuICAgICAgXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB0aW1lID0gYmFzZVRpbWUgKyBpICogNjAwMDA7IC8vIDEgbWludXRlIGludGVydmFsc1xuICAgICAgICByaXNrR3VhcmRpYW4udXBkYXRlUHJpY2VIaXN0b3J5KCdCVENVU0RUJywgcHJpY2VzW2ldLCB0aW1lKTtcbiAgICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnRVRIVVNEVCcsIHByaWNlc1tpXSAqIDAuMDYsIHRpbWUpOyAvLyBTY2FsZSBmb3IgRVRIXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvcnJlbGF0aW9uID0gcmlza0d1YXJkaWFuLmNhbGN1bGF0ZUNvcnJlbGF0aW9uKCdCVENVU0RUJywgJ0VUSFVTRFQnKTtcbiAgICAgIGV4cGVjdChjb3JyZWxhdGlvbikudG9CZUNsb3NlVG8oMS4wLCAyKTsgLy8gU2hvdWxkIGJlIGNsb3NlIHRvIHBlcmZlY3QgY29ycmVsYXRpb25cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHBlcmZlY3QgbmVnYXRpdmUgY29ycmVsYXRpb24nLCAoKSA9PiB7XG4gICAgICAvLyBBZGQgb3Bwb3NpdGUgcHJpY2UgbW92ZW1lbnRzXG4gICAgICBjb25zdCBiYXNlVGltZSA9IERhdGUubm93KCkgLSAzMDAwMDA7XG4gICAgICBjb25zdCBidGNQcmljZXMgPSBbNTAwMDAsIDUxMDAwLCA1MjAwMCwgNTE1MDAsIDUzMDAwXTtcbiAgICAgIGNvbnN0IGV0aFByaWNlcyA9IFszMDAwLCAyOTUwLCAyOTAwLCAyOTI1LCAyODUwXTsgLy8gT3Bwb3NpdGUgZGlyZWN0aW9uXG4gICAgICBcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnRjUHJpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSBiYXNlVGltZSArIGkgKiA2MDAwMDtcbiAgICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnQlRDVVNEVCcsIGJ0Y1ByaWNlc1tpXSwgdGltZSk7XG4gICAgICAgIHJpc2tHdWFyZGlhbi51cGRhdGVQcmljZUhpc3RvcnkoJ0VUSFVTRFQnLCBldGhQcmljZXNbaV0sIHRpbWUpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb3JyZWxhdGlvbiA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVDb3JyZWxhdGlvbignQlRDVVNEVCcsICdFVEhVU0RUJyk7XG4gICAgICBleHBlY3QoY29ycmVsYXRpb24pLnRvQmVMZXNzVGhhbigtMC44KTsgLy8gU2hvdWxkIGJlIHN0cm9uZ2x5IG5lZ2F0aXZlXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiAxLjAgZm9yIHNlbGYtY29ycmVsYXRpb24nLCAoKSA9PiB7XG4gICAgICAvLyBBZGQgc29tZSBwcmljZSBoaXN0b3J5XG4gICAgICBjb25zdCBiYXNlVGltZSA9IERhdGUubm93KCkgLSAxODAwMDA7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICBjb25zdCB0aW1lID0gYmFzZVRpbWUgKyBpICogMzAwMDA7XG4gICAgICAgIGNvbnN0IHByaWNlID0gNTAwMDAgKyBpICogMTAwMDtcbiAgICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnQlRDVVNEVCcsIHByaWNlLCB0aW1lKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29ycmVsYXRpb24gPSByaXNrR3VhcmRpYW4uY2FsY3VsYXRlQ29ycmVsYXRpb24oJ0JUQ1VTRFQnLCAnQlRDVVNEVCcpO1xuICAgICAgZXhwZWN0KGNvcnJlbGF0aW9uKS50b0JlQ2xvc2VUbygxLjAsIDYpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW5zdWZmaWNpZW50IHByaWNlIGhpc3RvcnknLCAoKSA9PiB7XG4gICAgICAvLyBPbmx5IGFkZCBvbmUgcHJpY2UgcG9pbnRcbiAgICAgIHJpc2tHdWFyZGlhbi51cGRhdGVQcmljZUhpc3RvcnkoJ0JUQ1VTRFQnLCA1MDAwMCwgRGF0ZS5ub3coKSk7XG4gICAgICByaXNrR3VhcmRpYW4udXBkYXRlUHJpY2VIaXN0b3J5KCdFVEhVU0RUJywgMzAwMCwgRGF0ZS5ub3coKSk7XG5cbiAgICAgIGNvbnN0IGNvcnJlbGF0aW9uID0gcmlza0d1YXJkaWFuLmNhbGN1bGF0ZUNvcnJlbGF0aW9uKCdCVENVU0RUJywgJ0VUSFVTRFQnKTtcbiAgICAgIGV4cGVjdChjb3JyZWxhdGlvbikudG9CZSgwKTsgLy8gU2hvdWxkIHJldHVybiAwIGZvciBpbnN1ZmZpY2llbnQgZGF0YVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5rbm93biBzeW1ib2xzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29ycmVsYXRpb24gPSByaXNrR3VhcmRpYW4uY2FsY3VsYXRlQ29ycmVsYXRpb24oJ1VOS05PV04xJywgJ1VOS05PV04yJyk7XG4gICAgICBleHBlY3QoY29ycmVsYXRpb24pLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQaGFzZSAzIEhlZGdlIEF1dG8tQXBwcm92YWwnLCAoKSA9PiB7XG4gICAgLyoqXG4gICAgICogKipWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyAzLjUqKlxuICAgICAqIFxuICAgICAqIFRlc3QgdGhhdCBQaGFzZSAzIGhlZGdlIHBvc2l0aW9ucyBhcmUgYXV0by1hcHByb3ZlZCB3aGVuIHRoZXkgcmVkdWNlIGRlbHRhXG4gICAgICovXG4gICAgaXQoJ3Nob3VsZCBhdXRvLWFwcHJvdmUgUGhhc2UgMyBoZWRnZSB0aGF0IHJlZHVjZXMgbG9uZyBkZWx0YScsICgpID0+IHtcbiAgICAgIGNvbnN0IGVxdWl0eSA9IDEwMDAwO1xuICAgICAgcmlza0d1YXJkaWFuLnNldEVxdWl0eShlcXVpdHkpO1xuXG4gICAgICAvLyBFeGlzdGluZyBsb25nIHBvc2l0aW9uIGNyZWF0aW5nIHBvc2l0aXZlIGRlbHRhXG4gICAgICBjb25zdCBleGlzdGluZ1Bvc2l0aW9uczogUG9zaXRpb25bXSA9IFt7XG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICBzaWRlOiAnTE9ORycsXG4gICAgICAgIHNpemU6IDE1MDAwLCAvLyBMYXJnZSBwb3NpdGlvbiB0aGF0IHdvdWxkIGV4Y2VlZCBsZXZlcmFnZSBjYXBcbiAgICAgICAgZW50cnlQcmljZTogNTAwMDAsXG4gICAgICAgIHVucmVhbGl6ZWRQbkw6IDAsXG4gICAgICAgIGxldmVyYWdlOiAxLFxuICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyBhcyBQaGFzZUlkXG4gICAgICB9XTtcblxuICAgICAgLy8gUGhhc2UgMyBoZWRnZSBzaWduYWwgKHNob3J0IHRvIHJlZHVjZSBkZWx0YSlcbiAgICAgIGNvbnN0IGhlZGdlU2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgIHNpZ25hbElkOiAnaGVkZ2UtdGVzdCcsXG4gICAgICAgIHBoYXNlSWQ6ICdwaGFzZTMnIGFzIFBoYXNlSWQsXG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICBzaWRlOiAnU0VMTCcsXG4gICAgICAgIHJlcXVlc3RlZFNpemU6IDgwMDAsIC8vIFBhcnRpYWwgaGVkZ2VcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBkZWNpc2lvbiA9IHJpc2tHdWFyZGlhbi5jaGVja1NpZ25hbChoZWRnZVNpZ25hbCwgZXhpc3RpbmdQb3NpdGlvbnMpO1xuXG4gICAgICBleHBlY3QoZGVjaXNpb24uYXBwcm92ZWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGVjaXNpb24ucmVhc29uKS50b0NvbnRhaW4oJ1BoYXNlIDMgaGVkZ2UgYXBwcm92ZWQnKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcy5wb3J0Zm9saW9EZWx0YSkudG9CZUxlc3NUaGFuKDE1MDAwKTsgLy8gRGVsdGEgc2hvdWxkIGJlIHJlZHVjZWRcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXV0by1hcHByb3ZlIFBoYXNlIDMgaGVkZ2UgdGhhdCByZWR1Y2VzIHNob3J0IGRlbHRhJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXF1aXR5ID0gMTAwMDA7XG4gICAgICByaXNrR3VhcmRpYW4uc2V0RXF1aXR5KGVxdWl0eSk7XG5cbiAgICAgIC8vIEV4aXN0aW5nIHNob3J0IHBvc2l0aW9uIGNyZWF0aW5nIG5lZ2F0aXZlIGRlbHRhXG4gICAgICBjb25zdCBleGlzdGluZ1Bvc2l0aW9uczogUG9zaXRpb25bXSA9IFt7XG4gICAgICAgIHN5bWJvbDogJ0VUSFVTRFQnLFxuICAgICAgICBzaWRlOiAnU0hPUlQnLFxuICAgICAgICBzaXplOiAxMjAwMCwgLy8gTGFyZ2Ugc2hvcnQgcG9zaXRpb25cbiAgICAgICAgZW50cnlQcmljZTogMzAwMCxcbiAgICAgICAgdW5yZWFsaXplZFBuTDogMCxcbiAgICAgICAgbGV2ZXJhZ2U6IDEsXG4gICAgICAgIHBoYXNlSWQ6ICdwaGFzZTInIGFzIFBoYXNlSWRcbiAgICAgIH1dO1xuXG4gICAgICAvLyBQaGFzZSAzIGhlZGdlIHNpZ25hbCAobG9uZyB0byByZWR1Y2UgbmVnYXRpdmUgZGVsdGEpXG4gICAgICBjb25zdCBoZWRnZVNpZ25hbDogSW50ZW50U2lnbmFsID0ge1xuICAgICAgICBzaWduYWxJZDogJ2hlZGdlLXRlc3QtMicsXG4gICAgICAgIHBoYXNlSWQ6ICdwaGFzZTMnIGFzIFBoYXNlSWQsXG4gICAgICAgIHN5bWJvbDogJ0VUSFVTRFQnLFxuICAgICAgICBzaWRlOiAnQlVZJyxcbiAgICAgICAgcmVxdWVzdGVkU2l6ZTogNTAwMCwgLy8gUGFydGlhbCBoZWRnZVxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRlY2lzaW9uID0gcmlza0d1YXJkaWFuLmNoZWNrU2lnbmFsKGhlZGdlU2lnbmFsLCBleGlzdGluZ1Bvc2l0aW9ucyk7XG5cbiAgICAgIGV4cGVjdChkZWNpc2lvbi5hcHByb3ZlZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yZWFzb24pLnRvQ29udGFpbignUGhhc2UgMyBoZWRnZSBhcHByb3ZlZCcpO1xuICAgICAgZXhwZWN0KE1hdGguYWJzKGRlY2lzaW9uLnJpc2tNZXRyaWNzLnBvcnRmb2xpb0RlbHRhKSkudG9CZUxlc3NUaGFuKDEyMDAwKTsgLy8gQWJzb2x1dGUgZGVsdGEgcmVkdWNlZFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgYXV0by1hcHByb3ZlIFBoYXNlIDMgc2lnbmFsIHRoYXQgaW5jcmVhc2VzIGRlbHRhJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXF1aXR5ID0gMTAwMDsgLy8gTG93IGVxdWl0eSB0byB0cmlnZ2VyIGxldmVyYWdlIGNhcFxuICAgICAgcmlza0d1YXJkaWFuLnNldEVxdWl0eShlcXVpdHkpO1xuXG4gICAgICAvLyBFeGlzdGluZyBsb25nIHBvc2l0aW9uXG4gICAgICBjb25zdCBleGlzdGluZ1Bvc2l0aW9uczogUG9zaXRpb25bXSA9IFt7XG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICBzaWRlOiAnTE9ORycsXG4gICAgICAgIHNpemU6IDUwMDAsXG4gICAgICAgIGVudHJ5UHJpY2U6IDUwMDAwLFxuICAgICAgICB1bnJlYWxpemVkUG5MOiAwLFxuICAgICAgICBsZXZlcmFnZTogMSxcbiAgICAgICAgcGhhc2VJZDogJ3BoYXNlMScgYXMgUGhhc2VJZFxuICAgICAgfV07XG5cbiAgICAgIC8vIFBoYXNlIDMgc2lnbmFsIHRoYXQgaW5jcmVhc2VzIGRlbHRhIChzYW1lIGRpcmVjdGlvbilcbiAgICAgIGNvbnN0IHNpZ25hbDogSW50ZW50U2lnbmFsID0ge1xuICAgICAgICBzaWduYWxJZDogJ25vbi1oZWRnZS10ZXN0JyxcbiAgICAgICAgcGhhc2VJZDogJ3BoYXNlMycgYXMgUGhhc2VJZCxcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHNpZGU6ICdCVVknLCAvLyBTYW1lIGRpcmVjdGlvbiBhcyBleGlzdGluZyBwb3NpdGlvblxuICAgICAgICByZXF1ZXN0ZWRTaXplOiAxNTAwMCwgLy8gV291bGQgZXhjZWVkIGxldmVyYWdlIGNhcFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRlY2lzaW9uID0gcmlza0d1YXJkaWFuLmNoZWNrU2lnbmFsKHNpZ25hbCwgZXhpc3RpbmdQb3NpdGlvbnMpO1xuXG4gICAgICAvLyBTaG91bGQgYmUgcmVqZWN0ZWQgZHVlIHRvIGxldmVyYWdlIGNhcCwgbm90IGF1dG8tYXBwcm92ZWRcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5hcHByb3ZlZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGVjaXNpb24ucmVhc29uKS50b0NvbnRhaW4oJ0xldmVyYWdlIGNhcCBleGNlZWRlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSGlnaCBDb3JyZWxhdGlvbiBTaXplIFJlZHVjdGlvbicsICgpID0+IHtcbiAgICAvKipcbiAgICAgKiAqKlZhbGlkYXRlczogUmVxdWlyZW1lbnRzIDMuNyoqXG4gICAgICogXG4gICAgICogVGVzdCB0aGF0IGhpZ2ggY29ycmVsYXRpb24gdHJpZ2dlcnMgc2l6ZSByZWR1Y3Rpb25cbiAgICAgKi9cbiAgICBpdCgnc2hvdWxkIHJlZHVjZSBwb3NpdGlvbiBzaXplIGZvciBoaWdoIGNvcnJlbGF0aW9uIHNhbWUtZGlyZWN0aW9uIHRyYWRlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGVxdWl0eSA9IDUwMDAwOyAvLyBIaWdoIGVxdWl0eSB0byBhdm9pZCBsZXZlcmFnZSBpc3N1ZXNcbiAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoZXF1aXR5KTtcblxuICAgICAgLy8gU2V0IHVwIGhpZ2ggY29ycmVsYXRpb24gYmV0d2VlbiBCVEMgYW5kIEVUSFxuICAgICAgY29uc3QgYmFzZVRpbWUgPSBEYXRlLm5vdygpIC0gMzAwMDAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSBiYXNlVGltZSArIGkgKiAzMDAwMDtcbiAgICAgICAgY29uc3QgYnRjUHJpY2UgPSA1MDAwMCArIGkgKiAxMDAwOyAvLyBSaXNpbmcgdHJlbmRcbiAgICAgICAgY29uc3QgZXRoUHJpY2UgPSAzMDAwICsgaSAqIDYwOyAvLyBTYW1lIHJpc2luZyB0cmVuZCAoY29ycmVsYXRlZClcbiAgICAgICAgXG4gICAgICAgIHJpc2tHdWFyZGlhbi51cGRhdGVQcmljZUhpc3RvcnkoJ0JUQ1VTRFQnLCBidGNQcmljZSwgdGltZSk7XG4gICAgICAgIHJpc2tHdWFyZGlhbi51cGRhdGVQcmljZUhpc3RvcnkoJ0VUSFVTRFQnLCBldGhQcmljZSwgdGltZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEV4aXN0aW5nIEJUQyBsb25nIHBvc2l0aW9uXG4gICAgICBjb25zdCBleGlzdGluZ1Bvc2l0aW9uczogUG9zaXRpb25bXSA9IFt7XG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICBzaWRlOiAnTE9ORycsXG4gICAgICAgIHNpemU6IDEwMDAwLFxuICAgICAgICBlbnRyeVByaWNlOiA1MDAwMCxcbiAgICAgICAgdW5yZWFsaXplZFBuTDogMCxcbiAgICAgICAgbGV2ZXJhZ2U6IDEsXG4gICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnIGFzIFBoYXNlSWRcbiAgICAgIH1dO1xuXG4gICAgICAvLyBOZXcgRVRIIGxvbmcgc2lnbmFsIChzYW1lIGRpcmVjdGlvbiBhcyBCVEMpXG4gICAgICBjb25zdCBzaWduYWw6IEludGVudFNpZ25hbCA9IHtcbiAgICAgICAgc2lnbmFsSWQ6ICdjb3JyZWxhdGlvbi10ZXN0JyxcbiAgICAgICAgcGhhc2VJZDogJ3BoYXNlMicgYXMgUGhhc2VJZCxcbiAgICAgICAgc3ltYm9sOiAnRVRIVVNEVCcsXG4gICAgICAgIHNpZGU6ICdCVVknLFxuICAgICAgICByZXF1ZXN0ZWRTaXplOiA4MDAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRlY2lzaW9uID0gcmlza0d1YXJkaWFuLmNoZWNrU2lnbmFsKHNpZ25hbCwgZXhpc3RpbmdQb3NpdGlvbnMpO1xuXG4gICAgICAvLyBTaG91bGQgYmUgYXBwcm92ZWQgYnV0IHdpdGggcmVkdWNlZCBzaXplIGR1ZSB0byBjb3JyZWxhdGlvblxuICAgICAgaWYgKGRlY2lzaW9uLmFwcHJvdmVkICYmIGRlY2lzaW9uLnJpc2tNZXRyaWNzLmNvcnJlbGF0aW9uID4gMC44KSB7XG4gICAgICAgIGV4cGVjdChkZWNpc2lvbi5hZGp1c3RlZFNpemUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChkZWNpc2lvbi5hZGp1c3RlZFNpemUhKS50b0JlTGVzc1RoYW4oc2lnbmFsLnJlcXVlc3RlZFNpemUpO1xuICAgICAgICBleHBlY3QoZGVjaXNpb24ucmVhc29uKS50b0NvbnRhaW4oJ2NvcnJlbGF0aW9uJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGZ1bGwgc2l6ZSBmb3Igb3Bwb3NpdGUtZGlyZWN0aW9uIHRyYWRlcyAoaGVkZ2UgZWZmZWN0KScsICgpID0+IHtcbiAgICAgIGNvbnN0IGVxdWl0eSA9IDUwMDAwO1xuICAgICAgcmlza0d1YXJkaWFuLnNldEVxdWl0eShlcXVpdHkpO1xuXG4gICAgICAvLyBTZXQgdXAgaGlnaCBjb3JyZWxhdGlvblxuICAgICAgY29uc3QgYmFzZVRpbWUgPSBEYXRlLm5vdygpIC0gMzAwMDAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSBiYXNlVGltZSArIGkgKiAzMDAwMDtcbiAgICAgICAgY29uc3QgYnRjUHJpY2UgPSA1MDAwMCArIGkgKiAxMDAwO1xuICAgICAgICBjb25zdCBldGhQcmljZSA9IDMwMDAgKyBpICogNjA7IC8vIFNhbWUgdHJlbmQgKGNvcnJlbGF0ZWQpXG4gICAgICAgIFxuICAgICAgICByaXNrR3VhcmRpYW4udXBkYXRlUHJpY2VIaXN0b3J5KCdCVENVU0RUJywgYnRjUHJpY2UsIHRpbWUpO1xuICAgICAgICByaXNrR3VhcmRpYW4udXBkYXRlUHJpY2VIaXN0b3J5KCdFVEhVU0RUJywgZXRoUHJpY2UsIHRpbWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBFeGlzdGluZyBCVEMgbG9uZyBwb3NpdGlvblxuICAgICAgY29uc3QgZXhpc3RpbmdQb3NpdGlvbnM6IFBvc2l0aW9uW10gPSBbe1xuICAgICAgICBzeW1ib2w6ICdCVENVU0RUJyxcbiAgICAgICAgc2lkZTogJ0xPTkcnLFxuICAgICAgICBzaXplOiAxMDAwMCxcbiAgICAgICAgZW50cnlQcmljZTogNTAwMDAsXG4gICAgICAgIHVucmVhbGl6ZWRQbkw6IDAsXG4gICAgICAgIGxldmVyYWdlOiAxLFxuICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyBhcyBQaGFzZUlkXG4gICAgICB9XTtcblxuICAgICAgLy8gTmV3IEVUSCBzaG9ydCBzaWduYWwgKG9wcG9zaXRlIGRpcmVjdGlvbiAtIGhlZGdlIGVmZmVjdClcbiAgICAgIGNvbnN0IHNpZ25hbDogSW50ZW50U2lnbmFsID0ge1xuICAgICAgICBzaWduYWxJZDogJ2hlZGdlLWNvcnJlbGF0aW9uLXRlc3QnLFxuICAgICAgICBwaGFzZUlkOiAncGhhc2UyJyBhcyBQaGFzZUlkLFxuICAgICAgICBzeW1ib2w6ICdFVEhVU0RUJyxcbiAgICAgICAgc2lkZTogJ1NFTEwnLFxuICAgICAgICByZXF1ZXN0ZWRTaXplOiA4MDAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRlY2lzaW9uID0gcmlza0d1YXJkaWFuLmNoZWNrU2lnbmFsKHNpZ25hbCwgZXhpc3RpbmdQb3NpdGlvbnMpO1xuXG4gICAgICAvLyBTaG91bGQgYmUgYXBwcm92ZWQgd2l0aCBmdWxsIHNpemUgKGhlZGdlIGVmZmVjdClcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5hcHByb3ZlZCkudG9CZSh0cnVlKTtcbiAgICAgIGlmIChkZWNpc2lvbi5hZGp1c3RlZFNpemUpIHtcbiAgICAgICAgZXhwZWN0KGRlY2lzaW9uLmFkanVzdGVkU2l6ZSkudG9CZShzaWduYWwucmVxdWVzdGVkU2l6ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb3JyZWxhdGlvbiBwZW5hbHR5IGNhbGN1bGF0aW9uIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IGVxdWl0eSA9IDUwMDAwO1xuICAgICAgcmlza0d1YXJkaWFuLnNldEVxdWl0eShlcXVpdHkpO1xuXG4gICAgICAvLyBNb2NrIGhpZ2ggY29ycmVsYXRpb24gc2NlbmFyaW9cbiAgICAgIGNvbnN0IGNvcnJlbGF0aW9uID0gMC45OyAvLyBIaWdoIGNvcnJlbGF0aW9uXG4gICAgICBjb25zdCBvcmlnaW5hbFNpemUgPSAxMDAwMDtcbiAgICAgIGNvbnN0IGV4cGVjdGVkUmVkdWN0aW9uID0gb3JpZ2luYWxTaXplICogcmlza0NvbmZpZy5jb3JyZWxhdGlvblBlbmFsdHk7IC8vIDUwJSByZWR1Y3Rpb25cbiAgICAgIGNvbnN0IGV4cGVjdGVkQWRqdXN0ZWRTaXplID0gb3JpZ2luYWxTaXplIC0gZXhwZWN0ZWRSZWR1Y3Rpb247XG5cbiAgICAgIC8vIFRoaXMgdGVzdHMgdGhlIGNvcnJlbGF0aW9uIHBlbmFsdHkgbG9naWMgaW5kaXJlY3RseVxuICAgICAgLy8gYnkgY2hlY2tpbmcgdGhhdCB0aGUgcGVuYWx0eSBmYWN0b3IgaXMgYXBwbGllZCBjb3JyZWN0bHlcbiAgICAgIGV4cGVjdChyaXNrQ29uZmlnLmNvcnJlbGF0aW9uUGVuYWx0eSkudG9CZSgwLjUpO1xuICAgICAgZXhwZWN0KGV4cGVjdGVkQWRqdXN0ZWRTaXplKS50b0JlKDUwMDApOyAvLyA1MCUgb2Ygb3JpZ2luYWxcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BvcnRmb2xpbyBEZWx0YSBDYWxjdWxhdGlvbicsICgpID0+IHtcbiAgICAvKipcbiAgICAgKiAqKlZhbGlkYXRlczogUmVxdWlyZW1lbnRzIDMuMioqXG4gICAgICogXG4gICAgICogVGVzdCBwb3J0Zm9saW8gZGVsdGEgY2FsY3VsYXRpb24gd2l0aCBtaXhlZCBwb3NpdGlvbnNcbiAgICAgKi9cbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBwb3J0Zm9saW8gZGVsdGEgd2l0aCBtaXhlZCBsb25nL3Nob3J0IHBvc2l0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uczogUG9zaXRpb25bXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHNpZGU6ICdMT05HJyxcbiAgICAgICAgICBzaXplOiAxMDAwMCwgLy8gKzEwMDAwIGRlbHRhXG4gICAgICAgICAgZW50cnlQcmljZTogNTAwMDAsXG4gICAgICAgICAgdW5yZWFsaXplZFBuTDogMCxcbiAgICAgICAgICBsZXZlcmFnZTogMSxcbiAgICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyBhcyBQaGFzZUlkXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzeW1ib2w6ICdFVEhVU0RUJyxcbiAgICAgICAgICBzaWRlOiAnU0hPUlQnLFxuICAgICAgICAgIHNpemU6IDYwMDAsIC8vIC02MDAwIGRlbHRhXG4gICAgICAgICAgZW50cnlQcmljZTogMzAwMCxcbiAgICAgICAgICB1bnJlYWxpemVkUG5MOiAwLFxuICAgICAgICAgIGxldmVyYWdlOiAxLFxuICAgICAgICAgIHBoYXNlSWQ6ICdwaGFzZTInIGFzIFBoYXNlSWRcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHN5bWJvbDogJ0FEQVVTRFQnLFxuICAgICAgICAgIHNpZGU6ICdMT05HJyxcbiAgICAgICAgICBzaXplOiAzMDAwLCAvLyArMzAwMCBkZWx0YVxuICAgICAgICAgIGVudHJ5UHJpY2U6IDAuNSxcbiAgICAgICAgICB1bnJlYWxpemVkUG5MOiAwLFxuICAgICAgICAgIGxldmVyYWdlOiAxLFxuICAgICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnIGFzIFBoYXNlSWRcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgY29uc3QgZGVsdGEgPSByaXNrR3VhcmRpYW4uY2FsY3VsYXRlUG9ydGZvbGlvRGVsdGEocG9zaXRpb25zKTtcbiAgICAgIFxuICAgICAgLy8gRXhwZWN0ZWQ6IDEwMDAwIC0gNjAwMCArIDMwMDAgPSA3MDAwXG4gICAgICBleHBlY3QoZGVsdGEpLnRvQmUoNzAwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB6ZXJvIGRlbHRhIGZvciBiYWxhbmNlZCBwb3J0Zm9saW8nLCAoKSA9PiB7XG4gICAgICBjb25zdCBwb3NpdGlvbnM6IFBvc2l0aW9uW10gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBzeW1ib2w6ICdCVENVU0RUJyxcbiAgICAgICAgICBzaWRlOiAnTE9ORycsXG4gICAgICAgICAgc2l6ZTogNTAwMCxcbiAgICAgICAgICBlbnRyeVByaWNlOiA1MDAwMCxcbiAgICAgICAgICB1bnJlYWxpemVkUG5MOiAwLFxuICAgICAgICAgIGxldmVyYWdlOiAxLFxuICAgICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnIGFzIFBoYXNlSWRcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHN5bWJvbDogJ0VUSFVTRFQnLFxuICAgICAgICAgIHNpZGU6ICdTSE9SVCcsXG4gICAgICAgICAgc2l6ZTogNTAwMCxcbiAgICAgICAgICBlbnRyeVByaWNlOiAzMDAwLFxuICAgICAgICAgIHVucmVhbGl6ZWRQbkw6IDAsXG4gICAgICAgICAgbGV2ZXJhZ2U6IDEsXG4gICAgICAgICAgcGhhc2VJZDogJ3BoYXNlMicgYXMgUGhhc2VJZFxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBkZWx0YSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVQb3J0Zm9saW9EZWx0YShwb3NpdGlvbnMpO1xuICAgICAgZXhwZWN0KGRlbHRhKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYWxsIGxvbmcgcG9zaXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgcG9zaXRpb25zOiBQb3NpdGlvbltdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgICAgc2lkZTogJ0xPTkcnLFxuICAgICAgICAgIHNpemU6IDUwMDAsXG4gICAgICAgICAgZW50cnlQcmljZTogNTAwMDAsXG4gICAgICAgICAgdW5yZWFsaXplZFBuTDogMCxcbiAgICAgICAgICBsZXZlcmFnZTogMSxcbiAgICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyBhcyBQaGFzZUlkXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzeW1ib2w6ICdFVEhVU0RUJyxcbiAgICAgICAgICBzaWRlOiAnTE9ORycsXG4gICAgICAgICAgc2l6ZTogMzAwMCxcbiAgICAgICAgICBlbnRyeVByaWNlOiAzMDAwLFxuICAgICAgICAgIHVucmVhbGl6ZWRQbkw6IDAsXG4gICAgICAgICAgbGV2ZXJhZ2U6IDEsXG4gICAgICAgICAgcGhhc2VJZDogJ3BoYXNlMicgYXMgUGhhc2VJZFxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBkZWx0YSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVQb3J0Zm9saW9EZWx0YShwb3NpdGlvbnMpO1xuICAgICAgZXhwZWN0KGRlbHRhKS50b0JlKDgwMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYWxsIHNob3J0IHBvc2l0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uczogUG9zaXRpb25bXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHNpZGU6ICdTSE9SVCcsXG4gICAgICAgICAgc2l6ZTogNDAwMCxcbiAgICAgICAgICBlbnRyeVByaWNlOiA1MDAwMCxcbiAgICAgICAgICB1bnJlYWxpemVkUG5MOiAwLFxuICAgICAgICAgIGxldmVyYWdlOiAxLFxuICAgICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnIGFzIFBoYXNlSWRcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHN5bWJvbDogJ0VUSFVTRFQnLFxuICAgICAgICAgIHNpZGU6ICdTSE9SVCcsXG4gICAgICAgICAgc2l6ZTogMjAwMCxcbiAgICAgICAgICBlbnRyeVByaWNlOiAzMDAwLFxuICAgICAgICAgIHVucmVhbGl6ZWRQbkw6IDAsXG4gICAgICAgICAgbGV2ZXJhZ2U6IDEsXG4gICAgICAgICAgcGhhc2VJZDogJ3BoYXNlMicgYXMgUGhhc2VJZFxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBkZWx0YSA9IHJpc2tHdWFyZGlhbi5jYWxjdWxhdGVQb3J0Zm9saW9EZWx0YShwb3NpdGlvbnMpO1xuICAgICAgZXhwZWN0KGRlbHRhKS50b0JlKC02MDAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NpZ25hbCBWYWxpZGF0aW9uIEVkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgLyoqXG4gICAgICogKipWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyAzLjEsIDMuMyoqXG4gICAgICogXG4gICAgICogVGVzdCBlZGdlIGNhc2VzIGluIHNpZ25hbCB2YWxpZGF0aW9uXG4gICAgICovXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgemVyby1zaXplIHNpZ25hbCcsICgpID0+IHtcbiAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoMTAwMDApO1xuXG4gICAgICBjb25zdCBzaWduYWw6IEludGVudFNpZ25hbCA9IHtcbiAgICAgICAgc2lnbmFsSWQ6ICd6ZXJvLXNpemUtdGVzdCcsXG4gICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnIGFzIFBoYXNlSWQsXG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICBzaWRlOiAnQlVZJyxcbiAgICAgICAgcmVxdWVzdGVkU2l6ZTogMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBkZWNpc2lvbiA9IHJpc2tHdWFyZGlhbi5jaGVja1NpZ25hbChzaWduYWwsIFtdKTtcblxuICAgICAgZXhwZWN0KGRlY2lzaW9uLmFwcHJvdmVkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yZWFzb24pLnRvQ29udGFpbignSW52YWxpZCBzaWduYWwgc2l6ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmVnYXRpdmUtc2l6ZSBzaWduYWwnLCAoKSA9PiB7XG4gICAgICByaXNrR3VhcmRpYW4uc2V0RXF1aXR5KDEwMDAwKTtcblxuICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgIHNpZ25hbElkOiAnbmVnYXRpdmUtc2l6ZS10ZXN0JyxcbiAgICAgICAgcGhhc2VJZDogJ3BoYXNlMScgYXMgUGhhc2VJZCxcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHNpZGU6ICdCVVknLFxuICAgICAgICByZXF1ZXN0ZWRTaXplOiAtMTAwMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBkZWNpc2lvbiA9IHJpc2tHdWFyZGlhbi5jaGVja1NpZ25hbChzaWduYWwsIFtdKTtcblxuICAgICAgZXhwZWN0KGRlY2lzaW9uLmFwcHJvdmVkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yZWFzb24pLnRvQ29udGFpbignSW52YWxpZCBzaWduYWwgc2l6ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsYXJnZSBzaWduYWwgdGhhdCBleGNlZWRzIG1heGltdW0gbGV2ZXJhZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlcXVpdHkgPSAxMDAwOyAvLyBTbWFsbCBlcXVpdHlcbiAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoZXF1aXR5KTtcblxuICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgIHNpZ25hbElkOiAnbGFyZ2Utc2lnbmFsLXRlc3QnLFxuICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyBhcyBQaGFzZUlkLFxuICAgICAgICBzeW1ib2w6ICdCVENVU0RUJyxcbiAgICAgICAgc2lkZTogJ0JVWScsXG4gICAgICAgIHJlcXVlc3RlZFNpemU6IDUwMDAwLCAvLyA1MHggbGV2ZXJhZ2UsIGV4Y2VlZHMgMjB4IGNhcFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRlY2lzaW9uID0gcmlza0d1YXJkaWFuLmNoZWNrU2lnbmFsKHNpZ25hbCwgW10pO1xuXG4gICAgICBleHBlY3QoZGVjaXNpb24uYXBwcm92ZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRlY2lzaW9uLnJlYXNvbikudG9Db250YWluKCdMZXZlcmFnZSBjYXAgZXhjZWVkZWQnKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcy5wcm9qZWN0ZWRMZXZlcmFnZSkudG9CZUdyZWF0ZXJUaGFuKDIwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXBwcm92ZSBzaWduYWwgYXQgZXhhY3RseSB0aGUgbGV2ZXJhZ2UgY2FwJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXF1aXR5ID0gMTAwMDtcbiAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoZXF1aXR5KTtcblxuICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgIHNpZ25hbElkOiAnZXhhY3QtY2FwLXRlc3QnLFxuICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyBhcyBQaGFzZUlkLFxuICAgICAgICBzeW1ib2w6ICdCVENVU0RUJyxcbiAgICAgICAgc2lkZTogJ0JVWScsXG4gICAgICAgIHJlcXVlc3RlZFNpemU6IDIwMDAwLCAvLyBFeGFjdGx5IDIweCBsZXZlcmFnZVxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRlY2lzaW9uID0gcmlza0d1YXJkaWFuLmNoZWNrU2lnbmFsKHNpZ25hbCwgW10pO1xuXG4gICAgICBleHBlY3QoZGVjaXNpb24uYXBwcm92ZWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGVjaXNpb24ucmlza01ldHJpY3MucHJvamVjdGVkTGV2ZXJhZ2UpLnRvQmVDbG9zZVRvKDIwLCA2KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Jpc2sgTWV0cmljcyBDYWxjdWxhdGlvbicsICgpID0+IHtcbiAgICAvKipcbiAgICAgKiAqKlZhbGlkYXRlczogUmVxdWlyZW1lbnRzIDMuMSwgMy4yLCAzLjYqKlxuICAgICAqIFxuICAgICAqIFRlc3QgdGhhdCByaXNrIG1ldHJpY3MgYXJlIGNhbGN1bGF0ZWQgY29ycmVjdGx5XG4gICAgICovXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgYWxsIHJpc2sgbWV0cmljcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBlcXVpdHkgPSAxMDAwMDtcbiAgICAgIHJpc2tHdWFyZGlhbi5zZXRFcXVpdHkoZXF1aXR5KTtcblxuICAgICAgLy8gU2V0IHVwIGNvcnJlbGF0aW9uIGRhdGFcbiAgICAgIGNvbnN0IGJhc2VUaW1lID0gRGF0ZS5ub3coKSAtIDMwMDAwMDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBjb25zdCB0aW1lID0gYmFzZVRpbWUgKyBpICogMzAwMDA7XG4gICAgICAgIHJpc2tHdWFyZGlhbi51cGRhdGVQcmljZUhpc3RvcnkoJ0JUQ1VTRFQnLCA1MDAwMCArIGkgKiAxMDAwLCB0aW1lKTtcbiAgICAgICAgcmlza0d1YXJkaWFuLnVwZGF0ZVByaWNlSGlzdG9yeSgnRVRIVVNEVCcsIDMwMDAgKyBpICogNjAsIHRpbWUpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBleGlzdGluZ1Bvc2l0aW9uczogUG9zaXRpb25bXSA9IFt7XG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICBzaWRlOiAnTE9ORycsXG4gICAgICAgIHNpemU6IDUwMDAsXG4gICAgICAgIGVudHJ5UHJpY2U6IDUwMDAwLFxuICAgICAgICB1bnJlYWxpemVkUG5MOiAxMDAsXG4gICAgICAgIGxldmVyYWdlOiAxLFxuICAgICAgICBwaGFzZUlkOiAncGhhc2UxJyBhcyBQaGFzZUlkXG4gICAgICB9XTtcblxuICAgICAgY29uc3Qgc2lnbmFsOiBJbnRlbnRTaWduYWwgPSB7XG4gICAgICAgIHNpZ25hbElkOiAnbWV0cmljcy10ZXN0JyxcbiAgICAgICAgcGhhc2VJZDogJ3BoYXNlMicgYXMgUGhhc2VJZCxcbiAgICAgICAgc3ltYm9sOiAnRVRIVVNEVCcsXG4gICAgICAgIHNpZGU6ICdCVVknLFxuICAgICAgICByZXF1ZXN0ZWRTaXplOiAzMDAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRlY2lzaW9uID0gcmlza0d1YXJkaWFuLmNoZWNrU2lnbmFsKHNpZ25hbCwgZXhpc3RpbmdQb3NpdGlvbnMpO1xuXG4gICAgICAvLyBWZXJpZnkgYWxsIHJpc2sgbWV0cmljcyBhcmUgcHJlc2VudCBhbmQgdmFsaWRcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcy5jdXJyZW50TGV2ZXJhZ2UpLnRvQmVDbG9zZVRvKDAuNSwgNik7IC8vIDUwMDAvMTAwMDBcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcy5wcm9qZWN0ZWRMZXZlcmFnZSkudG9CZUNsb3NlVG8oMC44LCA2KTsgLy8gODAwMC8xMDAwMFxuICAgICAgZXhwZWN0KGRlY2lzaW9uLnJpc2tNZXRyaWNzLnBvcnRmb2xpb0RlbHRhKS50b0JlKDUwMDApOyAvLyBDdXJyZW50IGxvbmcgcG9zaXRpb25cbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcy5jb3JyZWxhdGlvbikudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcy5jb3JyZWxhdGlvbikudG9CZUxlc3NUaGFuT3JFcXVhbCgxKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcy5wb3J0Zm9saW9CZXRhKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWV0cmljcyBjYWxjdWxhdGlvbiB3aXRoIG5vIGV4aXN0aW5nIHBvc2l0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGVxdWl0eSA9IDEwMDAwO1xuICAgICAgcmlza0d1YXJkaWFuLnNldEVxdWl0eShlcXVpdHkpO1xuXG4gICAgICBjb25zdCBzaWduYWw6IEludGVudFNpZ25hbCA9IHtcbiAgICAgICAgc2lnbmFsSWQ6ICduby1wb3NpdGlvbnMtdGVzdCcsXG4gICAgICAgIHBoYXNlSWQ6ICdwaGFzZTEnIGFzIFBoYXNlSWQsXG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICBzaWRlOiAnQlVZJyxcbiAgICAgICAgcmVxdWVzdGVkU2l6ZTogMjAwMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBkZWNpc2lvbiA9IHJpc2tHdWFyZGlhbi5jaGVja1NpZ25hbChzaWduYWwsIFtdKTtcblxuICAgICAgZXhwZWN0KGRlY2lzaW9uLnJpc2tNZXRyaWNzLmN1cnJlbnRMZXZlcmFnZSkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcy5wcm9qZWN0ZWRMZXZlcmFnZSkudG9CZUNsb3NlVG8oMC4yLCA2KTsgLy8gMjAwMC8xMDAwMFxuICAgICAgZXhwZWN0KGRlY2lzaW9uLnJpc2tNZXRyaWNzLnBvcnRmb2xpb0RlbHRhKS50b0JlKDApO1xuICAgICAgZXhwZWN0KGRlY2lzaW9uLnJpc2tNZXRyaWNzLmNvcnJlbGF0aW9uKS50b0JlKDApOyAvLyBObyBleGlzdGluZyBwb3NpdGlvbnMgdG8gY29ycmVsYXRlIHdpdGhcbiAgICAgIGV4cGVjdChkZWNpc2lvbi5yaXNrTWV0cmljcy5wb3J0Zm9saW9CZXRhKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==