5c9128a69a33a3a0aa97460e06fef074
"use strict";
/**
 * POI Map Component
 * Displays Points of Interest (Order Blocks, FVGs, Liquidity Pools)
 *
 * Requirements: 8.4 (POI Map Component)
 * - Display active Order Blocks with distance and confidence
 * - Display active FVGs with distance and confidence
 * - Display active Liquidity Pools with strength
 * - Color code by proximity (red < 0.5%, yellow < 2%)
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.POIMapComponent = void 0;
class POIMapComponent {
    pois = [];
    constructor() {
        // Initialize with empty POI list
    }
    updateConfig(config) {
        this.pois = config.pois;
    }
    render() {
        const lines = [];
        // Header
        lines.push('Type      Price     Dist   Conf');
        // Sort POIs by distance (closest first)
        const sortedPOIs = [...this.pois].sort((a, b) => Math.abs(a.distance) - Math.abs(b.distance));
        // Display up to 8 POIs
        const displayPOIs = sortedPOIs.slice(0, 8);
        for (const poi of displayPOIs) {
            const line = this.formatPOILine(poi);
            lines.push(line);
        }
        // Fill remaining lines if needed
        while (lines.length < 9) { // 1 header + 8 data lines
            lines.push(''.padEnd(31));
        }
        return lines;
    }
    formatPOILine(poi) {
        const poiColor = this.getPOIColor(poi.distance, poi.confidence);
        const typeStr = this.formatPOIType(poi.type, poi.direction).padEnd(8);
        const priceStr = this.formatPrice(poi.price).padEnd(8);
        const distStr = this.formatDistance(poi.distance).padEnd(6);
        const confStr = `${poi.confidence.toFixed(0)}%`;
        return `${poiColor}${typeStr}\x1b[0m ${priceStr} ${distStr} ${confStr}`;
    }
    formatPOIType(type, direction) {
        const typeMap = {
            'ORDER_BLOCK': 'OB',
            'FVG': 'FVG',
            'LIQUIDITY_POOL': 'LIQ'
        };
        const directionMap = {
            'BULLISH': 'BULL',
            'BEARISH': 'BEAR'
        };
        const shortType = typeMap[type] || type.substring(0, 3);
        const shortDirection = directionMap[direction] || direction.substring(0, 4);
        return `${shortType}-${shortDirection}`;
    }
    formatPrice(price) {
        if (price >= 1000) {
            return price.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
        }
        else if (price >= 1) {
            return price.toFixed(2);
        }
        else {
            return price.toFixed(4);
        }
    }
    formatDistance(distance) {
        const sign = distance >= 0 ? '+' : '';
        return `${sign}${distance.toFixed(1)}%`;
    }
    getPOIColor(distance, confidence) {
        // Color code by proximity (red < 0.5%, yellow < 2%)
        if (Math.abs(distance) < 0.5) {
            return confidence > 80 ? '\x1b[1m\x1b[31m' : '\x1b[31m'; // Red (very close)
        }
        else if (Math.abs(distance) < 2.0) {
            return confidence > 70 ? '\x1b[1m\x1b[33m' : '\x1b[33m'; // Yellow (close)
        }
        else {
            return '\x1b[37m'; // White (far)
        }
    }
}
exports.POIMapComponent = POIMapComponent;
exports.default = POIMapComponent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvc3JjL2NvbnNvbGUvUE9JTWFwLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7O0dBU0c7OztBQWVILE1BQWEsZUFBZTtJQUNsQixJQUFJLEdBQWUsRUFBRSxDQUFDO0lBRTlCO1FBQ0UsaUNBQWlDO0lBQ25DLENBQUM7SUFFRCxZQUFZLENBQUMsTUFBNEI7UUFDdkMsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQzFCLENBQUM7SUFFRCxNQUFNO1FBQ0osTUFBTSxLQUFLLEdBQWEsRUFBRSxDQUFDO1FBRTNCLFNBQVM7UUFDVCxLQUFLLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxDQUFDLENBQUM7UUFFOUMsd0NBQXdDO1FBQ3hDLE1BQU0sVUFBVSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUU5Rix1QkFBdUI7UUFDdkIsTUFBTSxXQUFXLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFM0MsS0FBSyxNQUFNLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztZQUM5QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3JDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkIsQ0FBQztRQUVELGlDQUFpQztRQUNqQyxPQUFPLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQywwQkFBMEI7WUFDbkQsS0FBSyxDQUFDLElBQUksQ0FBQyxF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SSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztZQUNwQyxPQUFPLFVBQVUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxpQkFBaUI7UUFDNUUsQ0FBQzthQUFNLENBQUM7WUFDTixPQUFPLFVBQVUsQ0FBQyxDQUFDLGNBQWM7UUFDbkMsQ0FBQztJQUNILENBQUM7Q0FDRjtBQXpGRCwwQ0F5RkM7QUFFRCxrQkFBZSxlQUFlLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvc3JjL2NvbnNvbGUvUE9JTWFwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUE9JIE1hcCBDb21wb25lbnRcbiAqIERpc3BsYXlzIFBvaW50cyBvZiBJbnRlcmVzdCAoT3JkZXIgQmxvY2tzLCBGVkdzLCBMaXF1aWRpdHkgUG9vbHMpXG4gKiBcbiAqIFJlcXVpcmVtZW50czogOC40IChQT0kgTWFwIENvbXBvbmVudClcbiAqIC0gRGlzcGxheSBhY3RpdmUgT3JkZXIgQmxvY2tzIHdpdGggZGlzdGFuY2UgYW5kIGNvbmZpZGVuY2VcbiAqIC0gRGlzcGxheSBhY3RpdmUgRlZHcyB3aXRoIGRpc3RhbmNlIGFuZCBjb25maWRlbmNlICBcbiAqIC0gRGlzcGxheSBhY3RpdmUgTGlxdWlkaXR5IFBvb2xzIHdpdGggc3RyZW5ndGhcbiAqIC0gQ29sb3IgY29kZSBieSBwcm94aW1pdHkgKHJlZCA8IDAuNSUsIHllbGxvdyA8IDIlKVxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUE9JRW50cnkge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAnT1JERVJfQkxPQ0snIHwgJ0ZWRycgfCAnTElRVUlESVRZX1BPT0wnO1xuICBkaXJlY3Rpb246ICdCVUxMSVNIJyB8ICdCRUFSSVNIJztcbiAgcHJpY2U6IG51bWJlcjtcbiAgZGlzdGFuY2U6IG51bWJlcjsgLy8gcGVyY2VudGFnZSBmcm9tIGN1cnJlbnQgcHJpY2VcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xuICBhZ2U6IG51bWJlcjsgLy8gaG91cnMgc2luY2UgY3JlYXRpb25cbiAgbWl0aWdhdGVkOiBib29sZWFuO1xuICBzdHJlbmd0aDogbnVtYmVyOyAvLyAwLTEwMFxuICB2b2x1bWU/OiBudW1iZXI7IC8vIGZvciBsaXF1aWRpdHkgcG9vbHNcbn1cblxuZXhwb3J0IGNsYXNzIFBPSU1hcENvbXBvbmVudCB7XG4gIHByaXZhdGUgcG9pczogUE9JRW50cnlbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIEluaXRpYWxpemUgd2l0aCBlbXB0eSBQT0kgbGlzdFxuICB9XG5cbiAgdXBkYXRlQ29uZmlnKGNvbmZpZzogeyBwb2lzOiBQT0lFbnRyeVtdIH0pOiB2b2lkIHtcbiAgICB0aGlzLnBvaXMgPSBjb25maWcucG9pcztcbiAgfVxuXG4gIHJlbmRlcigpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gSGVhZGVyXG4gICAgbGluZXMucHVzaCgnVHlwZSAgICAgIFByaWNlICAgICBEaXN0ICAgQ29uZicpO1xuICAgIFxuICAgIC8vIFNvcnQgUE9JcyBieSBkaXN0YW5jZSAoY2xvc2VzdCBmaXJzdClcbiAgICBjb25zdCBzb3J0ZWRQT0lzID0gWy4uLnRoaXMucG9pc10uc29ydCgoYSwgYikgPT4gTWF0aC5hYnMoYS5kaXN0YW5jZSkgLSBNYXRoLmFicyhiLmRpc3RhbmNlKSk7XG4gICAgXG4gICAgLy8gRGlzcGxheSB1cCB0byA4IFBPSXNcbiAgICBjb25zdCBkaXNwbGF5UE9JcyA9IHNvcnRlZFBPSXMuc2xpY2UoMCwgOCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBwb2kgb2YgZGlzcGxheVBPSXMpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmZvcm1hdFBPSUxpbmUocG9pKTtcbiAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEZpbGwgcmVtYWluaW5nIGxpbmVzIGlmIG5lZWRlZFxuICAgIHdoaWxlIChsaW5lcy5sZW5ndGggPCA5KSB7IC8vIDEgaGVhZGVyICsgOCBkYXRhIGxpbmVzXG4gICAgICBsaW5lcy5wdXNoKCcnLnBhZEVuZCgzMSkpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdFBPSUxpbmUocG9pOiBQT0lFbnRyeSk6IHN0cmluZyB7XG4gICAgY29uc3QgcG9pQ29sb3IgPSB0aGlzLmdldFBPSUNvbG9yKHBvaS5kaXN0YW5jZSwgcG9pLmNvbmZpZGVuY2UpO1xuICAgIGNvbnN0IHR5cGVTdHIgPSB0aGlzLmZvcm1hdFBPSVR5cGUocG9pLnR5cGUsIHBvaS5kaXJlY3Rpb24pLnBhZEVuZCg4KTtcbiAgICBjb25zdCBwcmljZVN0ciA9IHRoaXMuZm9ybWF0UHJpY2UocG9pLnByaWNlKS5wYWRFbmQoOCk7XG4gICAgY29uc3QgZGlzdFN0ciA9IHRoaXMuZm9ybWF0RGlzdGFuY2UocG9pLmRpc3RhbmNlKS5wYWRFbmQoNik7XG4gICAgY29uc3QgY29uZlN0ciA9IGAke3BvaS5jb25maWRlbmNlLnRvRml4ZWQoMCl9JWA7XG4gICAgXG4gICAgcmV0dXJuIGAke3BvaUNvbG9yfSR7dHlwZVN0cn1cXHgxYlswbSAke3ByaWNlU3RyfSAke2Rpc3RTdHJ9ICR7Y29uZlN0cn1gO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRQT0lUeXBlKHR5cGU6IHN0cmluZywgZGlyZWN0aW9uOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHR5cGVNYXAgPSB7XG4gICAgICAnT1JERVJfQkxPQ0snOiAnT0InLFxuICAgICAgJ0ZWRyc6ICdGVkcnLFxuICAgICAgJ0xJUVVJRElUWV9QT09MJzogJ0xJUSdcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGRpcmVjdGlvbk1hcCA9IHtcbiAgICAgICdCVUxMSVNIJzogJ0JVTEwnLFxuICAgICAgJ0JFQVJJU0gnOiAnQkVBUidcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IHNob3J0VHlwZSA9IHR5cGVNYXBbdHlwZSBhcyBrZXlvZiB0eXBlb2YgdHlwZU1hcF0gfHwgdHlwZS5zdWJzdHJpbmcoMCwgMyk7XG4gICAgY29uc3Qgc2hvcnREaXJlY3Rpb24gPSBkaXJlY3Rpb25NYXBbZGlyZWN0aW9uIGFzIGtleW9mIHR5cGVvZiBkaXJlY3Rpb25NYXBdIHx8IGRpcmVjdGlvbi5zdWJzdHJpbmcoMCwgNCk7XG4gICAgXG4gICAgcmV0dXJuIGAke3Nob3J0VHlwZX0tJHtzaG9ydERpcmVjdGlvbn1gO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRQcmljZShwcmljZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAocHJpY2UgPj0gMTAwMCkge1xuICAgICAgcmV0dXJuIHByaWNlLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAwLCBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAgfSk7XG4gICAgfSBlbHNlIGlmIChwcmljZSA+PSAxKSB7XG4gICAgICByZXR1cm4gcHJpY2UudG9GaXhlZCgyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHByaWNlLnRvRml4ZWQoNCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXREaXN0YW5jZShkaXN0YW5jZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBzaWduID0gZGlzdGFuY2UgPj0gMCA/ICcrJyA6ICcnO1xuICAgIHJldHVybiBgJHtzaWdufSR7ZGlzdGFuY2UudG9GaXhlZCgxKX0lYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UE9JQ29sb3IoZGlzdGFuY2U6IG51bWJlciwgY29uZmlkZW5jZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAvLyBDb2xvciBjb2RlIGJ5IHByb3hpbWl0eSAocmVkIDwgMC41JSwgeWVsbG93IDwgMiUpXG4gICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlKSA8IDAuNSkge1xuICAgICAgcmV0dXJuIGNvbmZpZGVuY2UgPiA4MCA/ICdcXHgxYlsxbVxceDFiWzMxbScgOiAnXFx4MWJbMzFtJzsgLy8gUmVkICh2ZXJ5IGNsb3NlKVxuICAgIH0gZWxzZSBpZiAoTWF0aC5hYnMoZGlzdGFuY2UpIDwgMi4wKSB7XG4gICAgICByZXR1cm4gY29uZmlkZW5jZSA+IDcwID8gJ1xceDFiWzFtXFx4MWJbMzNtJyA6ICdcXHgxYlszM20nOyAvLyBZZWxsb3cgKGNsb3NlKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ1xceDFiWzM3bSc7IC8vIFdoaXRlIChmYXIpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBPSU1hcENvbXBvbmVudDsiXSwidmVyc2lvbiI6M30=