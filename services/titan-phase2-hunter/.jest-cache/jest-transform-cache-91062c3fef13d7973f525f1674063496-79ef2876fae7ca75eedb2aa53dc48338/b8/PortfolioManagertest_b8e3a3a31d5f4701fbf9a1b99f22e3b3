aa7dad122e9aad16133b1fe53ff11408
"use strict";
/**
 * Unit tests for PortfolioManager
 * Tests multi-symbol portfolio management functionality
 */
Object.defineProperty(exports, "__esModule", { value: true });
const PortfolioManager_1 = require("../../src/risk/PortfolioManager");
describe('PortfolioManager', () => {
    let portfolioManager;
    let mockPositions;
    let mockSignals;
    beforeEach(() => {
        // Create portfolio manager with test config
        const config = {
            maxTotalExposure: 2.0, // 200% of equity
            maxConcurrentPositions: 5,
            baseRiskPercent: 0.02, // 2%
            maxPortfolioHeat: 0.15, // 15%
            directionalBiasThreshold: 0.6, // 60%
            directionalBiasReduction: 0.2, // 20%
            alignmentScoreWeight: 0.7, // 70%
            rsScoreWeight: 0.3, // 30%
            maxSignalsToRank: 10
        };
        portfolioManager = new PortfolioManager_1.PortfolioManager(config);
        // Create mock positions
        mockPositions = [
            {
                id: 'pos-1',
                symbol: 'BTCUSDT',
                side: 'LONG',
                entryPrice: 50000,
                currentPrice: 51000,
                quantity: 0.1,
                leverage: 3,
                stopLoss: 49250, // 1.5% stop
                takeProfit: 52250, // 4.5% target
                unrealizedPnL: 100,
                realizedPnL: 0,
                entryTime: Date.now() - (24 * 60 * 60 * 1000), // 24 hours ago
                status: 'OPEN',
                rValue: 1.33, // (51000-50000)/(50000-49250) = 1.33R
                atr: 1000
            },
            {
                id: 'pos-2',
                symbol: 'ETHUSDT',
                side: 'LONG',
                entryPrice: 3000,
                currentPrice: 3100,
                quantity: 1,
                leverage: 4,
                stopLoss: 2955, // 1.5% stop
                takeProfit: 3135, // 4.5% target
                unrealizedPnL: 100,
                realizedPnL: 0,
                entryTime: Date.now() - (12 * 60 * 60 * 1000), // 12 hours ago
                status: 'OPEN',
                rValue: 2.22, // (3100-3000)/(3000-2955) = 2.22R
                atr: 50
            }
        ];
        // Create mock signals with hologram states
        mockSignals = [
            {
                signal: {
                    symbol: 'ADAUSDT',
                    direction: 'LONG',
                    hologramStatus: 'A+',
                    alignmentScore: 95,
                    rsScore: 0.05,
                    sessionType: 'LONDON',
                    poiType: 'ORDER_BLOCK',
                    cvdConfirmation: true,
                    confidence: 90,
                    entryPrice: 0.5,
                    stopLoss: 0.4925,
                    takeProfit: 0.5225,
                    positionSize: 1000,
                    leverage: 3,
                    timestamp: Date.now()
                },
                hologramState: {
                    symbol: 'ADAUSDT',
                    timestamp: Date.now(),
                    daily: {},
                    h4: {},
                    m15: {},
                    alignmentScore: 95,
                    status: 'A+',
                    veto: { vetoed: false, reason: null, direction: null },
                    rsScore: 0.05
                }
            },
            {
                signal: {
                    symbol: 'SOLUSDT',
                    direction: 'SHORT',
                    hologramStatus: 'B',
                    alignmentScore: 75,
                    rsScore: -0.03,
                    sessionType: 'NY',
                    poiType: 'FVG',
                    cvdConfirmation: true,
                    confidence: 80,
                    entryPrice: 100,
                    stopLoss: 101.5,
                    takeProfit: 95.5,
                    positionSize: 10,
                    leverage: 4,
                    timestamp: Date.now()
                },
                hologramState: {
                    symbol: 'SOLUSDT',
                    timestamp: Date.now(),
                    daily: {},
                    h4: {},
                    m15: {},
                    alignmentScore: 75,
                    status: 'B',
                    veto: { vetoed: false, reason: null, direction: null },
                    rsScore: -0.03
                }
            }
        ];
    });
    afterEach(() => {
        portfolioManager.destroy();
    });
    describe('calcTotalExposure', () => {
        it('should calculate total exposure correctly', () => {
            const totalEquity = 10000;
            const exposure = portfolioManager.calcTotalExposure(mockPositions, totalEquity);
            // Position 1: 0.1 * 51000 * 3 = 15300
            // Position 2: 1 * 3100 * 4 = 12400
            // Total: 27700, Exposure: 27700/10000 = 2.77 (277%)
            // Capped at 2.0 (200%)
            expect(exposure).toBe(2.0);
        });
        it('should return 0 for zero equity', () => {
            const exposure = portfolioManager.calcTotalExposure(mockPositions, 0);
            expect(exposure).toBe(0);
        });
        it('should handle empty positions', () => {
            const exposure = portfolioManager.calcTotalExposure([], 10000);
            expect(exposure).toBe(0);
        });
    });
    describe('enforceMaxPositions', () => {
        it('should allow new position when under limit', () => {
            const canOpen = portfolioManager.enforceMaxPositions(mockPositions);
            expect(canOpen).toBe(true); // 2 positions < 5 limit
        });
        it('should reject new position when at limit', () => {
            // Create 5 positions to hit the limit
            const maxPositions = Array(5).fill(null).map((_, i) => ({
                ...mockPositions[0],
                id: `pos-${i}`,
                status: 'OPEN'
            }));
            const canOpen = portfolioManager.enforceMaxPositions(maxPositions);
            expect(canOpen).toBe(false);
        });
        it('should only count open positions', () => {
            const positionsWithClosed = [
                ...mockPositions,
                { ...mockPositions[0], id: 'pos-3', status: 'CLOSED' },
                { ...mockPositions[0], id: 'pos-4', status: 'CLOSED' }
            ];
            const canOpen = portfolioManager.enforceMaxPositions(positionsWithClosed);
            expect(canOpen).toBe(true); // Only 2 open positions
        });
    });
    describe('allocateRiskPerTrade', () => {
        it('should allocate risk dynamically based on open positions', () => {
            const totalEquity = 10000;
            const allocation = portfolioManager.allocateRiskPerTrade(totalEquity, mockPositions);
            // Base risk: 2%, Open positions: 2, Adjusted: 2% / (2+1) = 0.67%
            expect(allocation.baseRiskPerTrade).toBe(0.02);
            expect(allocation.adjustedRiskPerTrade).toBeCloseTo(0.0067, 4);
            expect(allocation.maxPositionSize).toBeCloseTo(4444, 0); // (10000 * 0.0067) / 0.015
            expect(allocation.recommendedLeverage).toBeGreaterThan(1);
            expect(allocation.recommendedLeverage).toBeLessThanOrEqual(5);
        });
        it('should handle no open positions', () => {
            const totalEquity = 10000;
            const allocation = portfolioManager.allocateRiskPerTrade(totalEquity, []);
            // No positions: 2% / 1 = 2%
            expect(allocation.adjustedRiskPerTrade).toBe(0.02);
        });
    });
    describe('rankSignals', () => {
        it('should rank signals by composite score', () => {
            const ranked = portfolioManager.rankSignals(mockSignals);
            expect(ranked).toHaveLength(2);
            expect(ranked[0].rank).toBe(1);
            expect(ranked[1].rank).toBe(2);
            // First signal should have higher composite score (A+ with 95 alignment)
            expect(ranked[0].compositeScore).toBeGreaterThan(ranked[1].compositeScore);
            expect(ranked[0].signal.symbol).toBe('ADAUSDT');
        });
        it('should limit to top 3 signals', () => {
            // Add more signals
            const moreSignals = [
                ...mockSignals,
                ...Array(5).fill(null).map((_, i) => ({
                    signal: { ...mockSignals[0].signal, symbol: `TEST${i}USDT` },
                    hologramState: { ...mockSignals[0].hologramState, alignmentScore: 60 - i }
                }))
            ];
            const ranked = portfolioManager.rankSignals(moreSignals);
            expect(ranked).toHaveLength(3); // Limited to top 3
        });
        it('should handle empty signals array', () => {
            const ranked = portfolioManager.rankSignals([]);
            expect(ranked).toHaveLength(0);
        });
    });
    describe('checkPortfolioHeat', () => {
        it('should calculate portfolio heat correctly', () => {
            const totalEquity = 10000;
            const canTrade = portfolioManager.checkPortfolioHeat(mockPositions, totalEquity);
            // Position 1 risk: (50000-49250) * 0.1 = 75
            // Position 2 risk: (3000-2955) * 1 = 45
            // Total risk: 120, Heat: 120/10000 = 1.2% < 15%
            expect(canTrade).toBe(true);
        });
        it('should reject when portfolio heat exceeds limit', () => {
            // Create high-risk positions
            const highRiskPositions = mockPositions.map(pos => ({
                ...pos,
                quantity: pos.quantity * 50 // Increase quantity to increase risk
            }));
            const totalEquity = 1000; // Small equity to increase heat percentage
            const canTrade = portfolioManager.checkPortfolioHeat(highRiskPositions, totalEquity);
            expect(canTrade).toBe(false);
        });
        it('should return false for zero equity', () => {
            const canTrade = portfolioManager.checkPortfolioHeat(mockPositions, 0);
            expect(canTrade).toBe(false);
        });
    });
    describe('adjustForDirectionalBias', () => {
        it('should not adjust when no directional bias', () => {
            // Mixed positions (1 LONG, 1 SHORT)
            const mixedPositions = [
                mockPositions[0], // LONG
                { ...mockPositions[1], side: 'SHORT' } // SHORT
            ];
            const adjustedSize = portfolioManager.adjustForDirectionalBias(mixedPositions, 'LONG', 1000);
            expect(adjustedSize).toBe(1000); // No adjustment
        });
        it('should reduce position size when adding to directional bias', () => {
            // All LONG positions (100% bias)
            const longPositions = mockPositions; // Both are LONG
            const adjustedSize = portfolioManager.adjustForDirectionalBias(longPositions, 'LONG', 1000);
            // Should reduce by 20%: 1000 * (1 - 0.2) = 800
            expect(adjustedSize).toBe(800);
        });
        it('should not adjust when going against directional bias', () => {
            // All LONG positions
            const longPositions = mockPositions; // Both are LONG
            const adjustedSize = portfolioManager.adjustForDirectionalBias(longPositions, 'SHORT', 1000);
            expect(adjustedSize).toBe(1000); // No adjustment when going against bias
        });
        it('should handle empty positions', () => {
            const adjustedSize = portfolioManager.adjustForDirectionalBias([], 'LONG', 1000);
            expect(adjustedSize).toBe(1000); // No adjustment with no positions
        });
    });
    describe('updatePortfolioState', () => {
        it('should update portfolio state correctly', () => {
            const totalEquity = 10000;
            portfolioManager.updatePortfolioState(mockPositions, totalEquity);
            const state = portfolioManager.getPortfolioState();
            expect(state.totalEquity).toBe(totalEquity);
            expect(state.openPositions).toHaveLength(2);
            expect(state.directionalBias).toBe('LONG'); // Both positions are LONG
            expect(state.biasPercentage).toBe(1.0); // 100% LONG
            expect(state.totalUnrealizedPnL).toBe(200); // 100 + 100
            expect(state.totalRealizedPnL).toBe(0);
        });
        it('should detect neutral bias with mixed positions', () => {
            const mixedPositions = [
                mockPositions[0], // LONG
                { ...mockPositions[1], side: 'SHORT' } // SHORT
            ];
            portfolioManager.updatePortfolioState(mixedPositions, 10000);
            const state = portfolioManager.getPortfolioState();
            expect(state.directionalBias).toBe('NEUTRAL');
            expect(state.biasPercentage).toBe(0);
        });
    });
    describe('canAcceptSignal', () => {
        beforeEach(() => {
            // Add positions to portfolio manager
            mockPositions.forEach(pos => portfolioManager.addPosition(pos));
            portfolioManager.updatePortfolioState(mockPositions, 10000);
        });
        it('should accept signal when all limits are within bounds', () => {
            // Debug: Check current state
            const state = portfolioManager.getPortfolioState();
            console.log('Portfolio state:', {
                exposurePercentage: state.exposurePercentage,
                portfolioHeat: state.portfolioHeat,
                openPositions: state.openPositions.length
            });
            const canAccept = portfolioManager.canAcceptSignal(mockSignals[0].signal, mockSignals[0].hologramState, 10000);
            expect(canAccept).toBe(true);
        });
        it('should reject signal when position limit exceeded', () => {
            // Add more positions to hit the limit
            for (let i = 3; i <= 5; i++) {
                portfolioManager.addPosition({
                    ...mockPositions[0],
                    id: `pos-${i}`,
                    status: 'OPEN'
                });
            }
            const canAccept = portfolioManager.canAcceptSignal(mockSignals[0].signal, mockSignals[0].hologramState, 10000);
            expect(canAccept).toBe(false);
        });
    });
    describe('getPortfolioStatistics', () => {
        beforeEach(() => {
            mockPositions.forEach(pos => portfolioManager.addPosition(pos));
            portfolioManager.updatePortfolioState(mockPositions, 10000);
        });
        it('should return correct portfolio statistics', () => {
            const stats = portfolioManager.getPortfolioStatistics();
            expect(stats.totalPositions).toBe(2);
            expect(stats.openPositions).toBe(2);
            expect(stats.exposureUtilization).toBeGreaterThan(0);
            expect(stats.heatUtilization).toBeGreaterThan(0);
            expect(stats.positionUtilization).toBe(0.4); // 2/5 = 0.4
            expect(stats.avgPositionSize).toBeGreaterThan(0);
            expect(stats.largestPosition).toBeGreaterThan(0);
            expect(stats.directionalBias).toContain('LONG');
            expect(stats.totalPnL).toBe(200);
        });
    });
    describe('position management', () => {
        it('should add and remove positions correctly', () => {
            const position = mockPositions[0];
            portfolioManager.addPosition(position);
            expect(portfolioManager.getAllPositions()).toHaveLength(1);
            portfolioManager.removePosition(position.id);
            expect(portfolioManager.getAllPositions()).toHaveLength(0);
        });
        it('should update positions correctly', () => {
            const position = mockPositions[0];
            portfolioManager.addPosition(position);
            const updatedPosition = { ...position, currentPrice: 52000 };
            portfolioManager.updatePosition(updatedPosition);
            const retrieved = portfolioManager.getAllPositions()[0];
            expect(retrieved.currentPrice).toBe(52000);
        });
        it('should get open positions only', () => {
            const openPosition = mockPositions[0];
            const closedPosition = { ...mockPositions[1], status: 'CLOSED' };
            portfolioManager.addPosition(openPosition);
            portfolioManager.addPosition(closedPosition);
            const openPositions = portfolioManager.getOpenPositions();
            expect(openPositions).toHaveLength(1);
            expect(openPositions[0].status).toBe('OPEN');
        });
        it('should clear all positions', () => {
            mockPositions.forEach(pos => portfolioManager.addPosition(pos));
            expect(portfolioManager.getAllPositions()).toHaveLength(2);
            portfolioManager.clearPositions();
            expect(portfolioManager.getAllPositions()).toHaveLength(0);
        });
    });
    describe('configuration', () => {
        it('should update configuration correctly', () => {
            const newConfig = { maxConcurrentPositions: 10 };
            portfolioManager.updateConfig(newConfig);
            // Test that new config is applied
            const positions = Array(8).fill(null).map((_, i) => ({
                ...mockPositions[0],
                id: `pos-${i}`,
                status: 'OPEN'
            }));
            const canOpen = portfolioManager.enforceMaxPositions(positions);
            expect(canOpen).toBe(true); // Should allow since limit is now 10
        });
    });
    describe('event emission', () => {
        it('should emit portfolio updated event', (done) => {
            portfolioManager.on('portfolio:updated', (state) => {
                expect(state.totalEquity).toBe(10000);
                expect(state.openPositions).toHaveLength(2);
                done();
            });
            portfolioManager.updatePortfolioState(mockPositions, 10000);
        });
        it('should emit signal rejected event', (done) => {
            portfolioManager.on('portfolio:signal_rejected', (signal, reason) => {
                expect(signal.symbol).toBe('ADAUSDT');
                expect(reason).toBe('POSITION_LIMIT_EXCEEDED');
                done();
            });
            // Add positions to hit limit
            for (let i = 1; i <= 5; i++) {
                portfolioManager.addPosition({
                    ...mockPositions[0],
                    id: `pos-${i}`,
                    status: 'OPEN'
                });
            }
            portfolioManager.canAcceptSignal(mockSignals[0].signal, mockSignals[0].hologramState, 10000);
        });
        it('should emit directional bias event', (done) => {
            portfolioManager.on('portfolio:directional_bias', (bias, percentage) => {
                expect(bias).toBe('LONG');
                expect(percentage).toBe(1.0);
                done();
            });
            portfolioManager.adjustForDirectionalBias(mockPositions, 'LONG', 1000);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvdGVzdHMvdW5pdC9Qb3J0Zm9saW9NYW5hZ2VyLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCxzRUFBMkY7QUFHM0YsUUFBUSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtJQUNoQyxJQUFJLGdCQUFrQyxDQUFDO0lBQ3ZDLElBQUksYUFBeUIsQ0FBQztJQUM5QixJQUFJLFdBQXdFLENBQUM7SUFFN0UsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLDRDQUE0QztRQUM1QyxNQUFNLE1BQU0sR0FBb0M7WUFDOUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLGlCQUFpQjtZQUN4QyxzQkFBc0IsRUFBRSxDQUFDO1lBQ3pCLGVBQWUsRUFBRSxJQUFJLEVBQUUsS0FBSztZQUM1QixnQkFBZ0IsRUFBRSxJQUFJLEVBQUUsTUFBTTtZQUM5Qix3QkFBd0IsRUFBRSxHQUFHLEVBQUUsTUFBTTtZQUNyQyx3QkFBd0IsRUFBRSxHQUFHLEVBQUUsTUFBTTtZQUNyQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUUsTUFBTTtZQUNqQyxhQUFhLEVBQUUsR0FBRyxFQUFFLE1BQU07WUFDMUIsZ0JBQWdCLEVBQUUsRUFBRTtTQUNyQixDQUFDO1FBRUYsZ0JBQWdCLEdBQUcsSUFBSSxtQ0FBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVoRCx3QkFBd0I7UUFDeEIsYUFBYSxHQUFHO1lBQ2Q7Z0JBQ0UsRUFBRSxFQUFFLE9BQU87Z0JBQ1gsTUFBTSxFQUFFLFNBQVM7Z0JBQ2pCLElBQUksRUFBRSxNQUFNO2dCQUNaLFVBQVUsRUFBRSxLQUFLO2dCQUNqQixZQUFZLEVBQUUsS0FBSztnQkFDbkIsUUFBUSxFQUFFLEdBQUc7Z0JBQ2IsUUFBUSxFQUFFLENBQUM7Z0JBQ1gsUUFBUSxFQUFFLEtBQUssRUFBRSxZQUFZO2dCQUM3QixVQUFVLEVBQUUsS0FBSyxFQUFFLGNBQWM7Z0JBQ2pDLGFB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QkFDZCxNQUFNLEVBQUUsTUFBTTtpQkFDZixDQUFDLENBQUM7WUFDTCxDQUFDO1lBRUQsZ0JBQWdCLENBQUMsZUFBZSxDQUM5QixXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUNyQixXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxFQUM1QixLQUFLLENBQ04sQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLG9DQUFvQyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7WUFDaEQsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLDRCQUE0QixFQUFFLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxFQUFFO2dCQUNyRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUMxQixNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUM3QixJQUFJLEVBQUUsQ0FBQztZQUNULENBQUMsQ0FBQyxDQUFDO1lBRUgsZ0JBQWdCLENBQUMsd0JBQXdCLENBQUMsYUFBYSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN6RSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvdGVzdHMvdW5pdC9Qb3J0Zm9saW9NYW5hZ2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IHRlc3RzIGZvciBQb3J0Zm9saW9NYW5hZ2VyXG4gKiBUZXN0cyBtdWx0aS1zeW1ib2wgcG9ydGZvbGlvIG1hbmFnZW1lbnQgZnVuY3Rpb25hbGl0eVxuICovXG5cbmltcG9ydCB7IFBvcnRmb2xpb01hbmFnZXIsIFBvcnRmb2xpb01hbmFnZXJDb25maWcgfSBmcm9tICcuLi8uLi9zcmMvcmlzay9Qb3J0Zm9saW9NYW5hZ2VyJztcbmltcG9ydCB7IFBvc2l0aW9uLCBTaWduYWxEYXRhLCBIb2xvZ3JhbVN0YXRlIH0gZnJvbSAnLi4vLi4vc3JjL3R5cGVzJztcblxuZGVzY3JpYmUoJ1BvcnRmb2xpb01hbmFnZXInLCAoKSA9PiB7XG4gIGxldCBwb3J0Zm9saW9NYW5hZ2VyOiBQb3J0Zm9saW9NYW5hZ2VyO1xuICBsZXQgbW9ja1Bvc2l0aW9uczogUG9zaXRpb25bXTtcbiAgbGV0IG1vY2tTaWduYWxzOiBBcnJheTx7IHNpZ25hbDogU2lnbmFsRGF0YTsgaG9sb2dyYW1TdGF0ZTogSG9sb2dyYW1TdGF0ZSB9PjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBDcmVhdGUgcG9ydGZvbGlvIG1hbmFnZXIgd2l0aCB0ZXN0IGNvbmZpZ1xuICAgIGNvbnN0IGNvbmZpZzogUGFydGlhbDxQb3J0Zm9saW9NYW5hZ2VyQ29uZmlnPiA9IHtcbiAgICAgIG1heFRvdGFsRXhwb3N1cmU6IDIuMCwgLy8gMjAwJSBvZiBlcXVpdHlcbiAgICAgIG1heENvbmN1cnJlbnRQb3NpdGlvbnM6IDUsXG4gICAgICBiYXNlUmlza1BlcmNlbnQ6IDAuMDIsIC8vIDIlXG4gICAgICBtYXhQb3J0Zm9saW9IZWF0OiAwLjE1LCAvLyAxNSVcbiAgICAgIGRpcmVjdGlvbmFsQmlhc1RocmVzaG9sZDogMC42LCAvLyA2MCVcbiAgICAgIGRpcmVjdGlvbmFsQmlhc1JlZHVjdGlvbjogMC4yLCAvLyAyMCVcbiAgICAgIGFsaWdubWVudFNjb3JlV2VpZ2h0OiAwLjcsIC8vIDcwJVxuICAgICAgcnNTY29yZVdlaWdodDogMC4zLCAvLyAzMCVcbiAgICAgIG1heFNpZ25hbHNUb1Jhbms6IDEwXG4gICAgfTtcblxuICAgIHBvcnRmb2xpb01hbmFnZXIgPSBuZXcgUG9ydGZvbGlvTWFuYWdlcihjb25maWcpO1xuXG4gICAgLy8gQ3JlYXRlIG1vY2sgcG9zaXRpb25zXG4gICAgbW9ja1Bvc2l0aW9ucyA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdwb3MtMScsXG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICBzaWRlOiAnTE9ORycsXG4gICAgICAgIGVudHJ5UHJpY2U6IDUwMDAwLFxuICAgICAgICBjdXJyZW50UHJpY2U6IDUxMDAwLFxuICAgICAgICBxdWFudGl0eTogMC4xLFxuICAgICAgICBsZXZlcmFnZTogMyxcbiAgICAgICAgc3RvcExvc3M6IDQ5MjUwLCAvLyAxLjUlIHN0b3BcbiAgICAgICAgdGFrZVByb2ZpdDogNTIyNTAsIC8vIDQuNSUgdGFyZ2V0XG4gICAgICAgIHVucmVhbGl6ZWRQbkw6IDEwMCxcbiAgICAgICAgcmVhbGl6ZWRQbkw6IDAsXG4gICAgICAgIGVudHJ5VGltZTogRGF0ZS5ub3coKSAtICgyNCAqIDYwICogNjAgKiAxMDAwKSwgLy8gMjQgaG91cnMgYWdvXG4gICAgICAgIHN0YXR1czogJ09QRU4nLFxuICAgICAgICByVmFsdWU6IDEuMzMsIC8vICg1MTAwMC01MDAwMCkvKDUwMDAwLTQ5MjUwKSA9IDEuMzNSXG4gICAgICAgIGF0cjogMTAwMFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdwb3MtMicsXG4gICAgICAgIHN5bWJvbDogJ0VUSFVTRFQnLFxuICAgICAgICBzaWRlOiAnTE9ORycsXG4gICAgICAgIGVudHJ5UHJpY2U6IDMwMDAsXG4gICAgICAgIGN1cnJlbnRQcmljZTogMzEwMCxcbiAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgIGxldmVyYWdlOiA0LFxuICAgICAgICBzdG9wTG9zczogMjk1NSwgLy8gMS41JSBzdG9wXG4gICAgICAgIHRha2VQcm9maXQ6IDMxMzUsIC8vIDQuNSUgdGFyZ2V0XG4gICAgICAgIHVucmVhbGl6ZWRQbkw6IDEwMCxcbiAgICAgICAgcmVhbGl6ZWRQbkw6IDAsXG4gICAgICAgIGVudHJ5VGltZTogRGF0ZS5ub3coKSAtICgxMiAqIDYwICogNjAgKiAxMDAwKSwgLy8gMTIgaG91cnMgYWdvXG4gICAgICAgIHN0YXR1czogJ09QRU4nLFxuICAgICAgICByVmFsdWU6IDIuMjIsIC8vICgzMTAwLTMwMDApLygzMDAwLTI5NTUpID0gMi4yMlJcbiAgICAgICAgYXRyOiA1MFxuICAgICAgfVxuICAgIF07XG5cbiAgICAvLyBDcmVhdGUgbW9jayBzaWduYWxzIHdpdGggaG9sb2dyYW0gc3RhdGVzXG4gICAgbW9ja1NpZ25hbHMgPSBbXG4gICAgICB7XG4gICAgICAgIHNpZ25hbDoge1xuICAgICAgICAgIHN5bWJvbDogJ0FEQVVTRFQnLFxuICAgICAgICAgIGRpcmVjdGlvbjogJ0xPTkcnLFxuICAgICAgICAgIGhvbG9ncmFtU3RhdHVzOiAnQSsnLFxuICAgICAgICAgIGFsaWdubWVudFNjb3JlOiA5NSxcbiAgICAgICAgICByc1Njb3JlOiAwLjA1LFxuICAgICAgICAgIHNlc3Npb25UeXBlOiAnTE9ORE9OJyxcbiAgICAgICAgICBwb2lUeXBlOiAnT1JERVJfQkxPQ0snLFxuICAgICAgICAgIGN2ZENvbmZpcm1hdGlvbjogdHJ1ZSxcbiAgICAgICAgICBjb25maWRlbmNlOiA5MCxcbiAgICAgICAgICBlbnRyeVByaWNlOiAwLjUsXG4gICAgICAgICAgc3RvcExvc3M6IDAuNDkyNSxcbiAgICAgICAgICB0YWtlUHJvZml0OiAwLjUyMjUsXG4gICAgICAgICAgcG9zaXRpb25TaXplOiAxMDAwLFxuICAgICAgICAgIGxldmVyYWdlOiAzLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9LFxuICAgICAgICBob2xvZ3JhbVN0YXRlOiB7XG4gICAgICAgICAgc3ltYm9sOiAnQURBVVNEVCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgIGRhaWx5OiB7fSBhcyBhbnksXG4gICAgICAgICAgaDQ6IHt9IGFzIGFueSxcbiAgICAgICAgICBtMTU6IHt9IGFzIGFueSxcbiAgICAgICAgICBhbGlnbm1lbnRTY29yZTogOTUsXG4gICAgICAgICAgc3RhdHVzOiAnQSsnLFxuICAgICAgICAgIHZldG86IHsgdmV0b2VkOiBmYWxzZSwgcmVhc29uOiBudWxsLCBkaXJlY3Rpb246IG51bGwgfSxcbiAgICAgICAgICByc1Njb3JlOiAwLjA1XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHNpZ25hbDoge1xuICAgICAgICAgIHN5bWJvbDogJ1NPTFVTRFQnLFxuICAgICAgICAgIGRpcmVjdGlvbjogJ1NIT1JUJyxcbiAgICAgICAgICBob2xvZ3JhbVN0YXR1czogJ0InLFxuICAgICAgICAgIGFsaWdubWVudFNjb3JlOiA3NSxcbiAgICAgICAgICByc1Njb3JlOiAtMC4wMyxcbiAgICAgICAgICBzZXNzaW9uVHlwZTogJ05ZJyxcbiAgICAgICAgICBwb2lUeXBlOiAnRlZHJyxcbiAgICAgICAgICBjdmRDb25maXJtYXRpb246IHRydWUsXG4gICAgICAgICAgY29uZmlkZW5jZTogODAsXG4gICAgICAgICAgZW50cnlQcmljZTogMTAwLFxuICAgICAgICAgIHN0b3BMb3NzOiAxMDEuNSxcbiAgICAgICAgICB0YWtlUHJvZml0OiA5NS41LFxuICAgICAgICAgIHBvc2l0aW9uU2l6ZTogMTAsXG4gICAgICAgICAgbGV2ZXJhZ2U6IDQsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgIH0sXG4gICAgICAgIGhvbG9ncmFtU3RhdGU6IHtcbiAgICAgICAgICBzeW1ib2w6ICdTT0xVU0RUJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgZGFpbHk6IHt9IGFzIGFueSxcbiAgICAgICAgICBoNDoge30gYXMgYW55LFxuICAgICAgICAgIG0xNToge30gYXMgYW55LFxuICAgICAgICAgIGFsaWdubWVudFNjb3JlOiA3NSxcbiAgICAgICAgICBzdGF0dXM6ICdCJyxcbiAgICAgICAgICB2ZXRvOiB7IHZldG9lZDogZmFsc2UsIHJlYXNvbjogbnVsbCwgZGlyZWN0aW9uOiBudWxsIH0sXG4gICAgICAgICAgcnNTY29yZTogLTAuMDNcbiAgICAgICAgfVxuICAgICAgfVxuICAgIF07XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgcG9ydGZvbGlvTWFuYWdlci5kZXN0cm95KCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjYWxjVG90YWxFeHBvc3VyZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSB0b3RhbCBleHBvc3VyZSBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b3RhbEVxdWl0eSA9IDEwMDAwO1xuICAgICAgY29uc3QgZXhwb3N1cmUgPSBwb3J0Zm9saW9NYW5hZ2VyLmNhbGNUb3RhbEV4cG9zdXJlKG1vY2tQb3NpdGlvbnMsIHRvdGFsRXF1aXR5KTtcbiAgICAgIFxuICAgICAgLy8gUG9zaXRpb24gMTogMC4xICogNTEwMDAgKiAzID0gMTUzMDBcbiAgICAgIC8vIFBvc2l0aW9uIDI6IDEgKiAzMTAwICogNCA9IDEyNDAwXG4gICAgICAvLyBUb3RhbDogMjc3MDAsIEV4cG9zdXJlOiAyNzcwMC8xMDAwMCA9IDIuNzcgKDI3NyUpXG4gICAgICAvLyBDYXBwZWQgYXQgMi4wICgyMDAlKVxuICAgICAgZXhwZWN0KGV4cG9zdXJlKS50b0JlKDIuMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiAwIGZvciB6ZXJvIGVxdWl0eScsICgpID0+IHtcbiAgICAgIGNvbnN0IGV4cG9zdXJlID0gcG9ydGZvbGlvTWFuYWdlci5jYWxjVG90YWxFeHBvc3VyZShtb2NrUG9zaXRpb25zLCAwKTtcbiAgICAgIGV4cGVjdChleHBvc3VyZSkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHBvc2l0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGV4cG9zdXJlID0gcG9ydGZvbGlvTWFuYWdlci5jYWxjVG90YWxFeHBvc3VyZShbXSwgMTAwMDApO1xuICAgICAgZXhwZWN0KGV4cG9zdXJlKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZW5mb3JjZU1heFBvc2l0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFsbG93IG5ldyBwb3NpdGlvbiB3aGVuIHVuZGVyIGxpbWl0JywgKCkgPT4ge1xuICAgICAgY29uc3QgY2FuT3BlbiA9IHBvcnRmb2xpb01hbmFnZXIuZW5mb3JjZU1heFBvc2l0aW9ucyhtb2NrUG9zaXRpb25zKTtcbiAgICAgIGV4cGVjdChjYW5PcGVuKS50b0JlKHRydWUpOyAvLyAyIHBvc2l0aW9ucyA8IDUgbGltaXRcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG5ldyBwb3NpdGlvbiB3aGVuIGF0IGxpbWl0JywgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIDUgcG9zaXRpb25zIHRvIGhpdCB0aGUgbGltaXRcbiAgICAgIGNvbnN0IG1heFBvc2l0aW9ucyA9IEFycmF5KDUpLmZpbGwobnVsbCkubWFwKChfLCBpKSA9PiAoe1xuICAgICAgICAuLi5tb2NrUG9zaXRpb25zWzBdLFxuICAgICAgICBpZDogYHBvcy0ke2l9YCxcbiAgICAgICAgc3RhdHVzOiAnT1BFTicgYXMgY29uc3RcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgICAgY29uc3QgY2FuT3BlbiA9IHBvcnRmb2xpb01hbmFnZXIuZW5mb3JjZU1heFBvc2l0aW9ucyhtYXhQb3NpdGlvbnMpO1xuICAgICAgZXhwZWN0KGNhbk9wZW4pLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBvbmx5IGNvdW50IG9wZW4gcG9zaXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgcG9zaXRpb25zV2l0aENsb3NlZCA9IFtcbiAgICAgICAgLi4ubW9ja1Bvc2l0aW9ucyxcbiAgICAgICAgeyAuLi5tb2NrUG9zaXRpb25zWzBdLCBpZDogJ3Bvcy0zJywgc3RhdHVzOiAnQ0xPU0VEJyBhcyBjb25zdCB9LFxuICAgICAgICB7IC4uLm1vY2tQb3NpdGlvbnNbMF0sIGlkOiAncG9zLTQnLCBzdGF0dXM6ICdDTE9TRUQnIGFzIGNvbnN0IH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGNvbnN0IGNhbk9wZW4gPSBwb3J0Zm9saW9NYW5hZ2VyLmVuZm9yY2VNYXhQb3NpdGlvbnMocG9zaXRpb25zV2l0aENsb3NlZCk7XG4gICAgICBleHBlY3QoY2FuT3BlbikudG9CZSh0cnVlKTsgLy8gT25seSAyIG9wZW4gcG9zaXRpb25zXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhbGxvY2F0ZVJpc2tQZXJUcmFkZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFsbG9jYXRlIHJpc2sgZHluYW1pY2FsbHkgYmFzZWQgb24gb3BlbiBwb3NpdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b3RhbEVxdWl0eSA9IDEwMDAwO1xuICAgICAgY29uc3QgYWxsb2NhdGlvbiA9IHBvcnRmb2xpb01hbmFnZXIuYWxsb2NhdGVSaXNrUGVyVHJhZGUodG90YWxFcXVpdHksIG1vY2tQb3NpdGlvbnMpO1xuICAgICAgXG4gICAgICAvLyBCYXNlIHJpc2s6IDIlLCBPcGVuIHBvc2l0aW9uczogMiwgQWRqdXN0ZWQ6IDIlIC8gKDIrMSkgPSAwLjY3JVxuICAgICAgZXhwZWN0KGFsbG9jYXRpb24uYmFzZVJpc2tQZXJUcmFkZSkudG9CZSgwLjAyKTtcbiAgICAgIGV4cGVjdChhbGxvY2F0aW9uLmFkanVzdGVkUmlza1BlclRyYWRlKS50b0JlQ2xvc2VUbygwLjAwNjcsIDQpO1xuICAgICAgZXhwZWN0KGFsbG9jYXRpb24ubWF4UG9zaXRpb25TaXplKS50b0JlQ2xvc2VUbyg0NDQ0LCAwKTsgLy8gKDEwMDAwICogMC4wMDY3KSAvIDAuMDE1XG4gICAgICBleHBlY3QoYWxsb2NhdGlvbi5yZWNvbW1lbmRlZExldmVyYWdlKS50b0JlR3JlYXRlclRoYW4oMSk7XG4gICAgICBleHBlY3QoYWxsb2NhdGlvbi5yZWNvbW1lbmRlZExldmVyYWdlKS50b0JlTGVzc1RoYW5PckVxdWFsKDUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbm8gb3BlbiBwb3NpdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b3RhbEVxdWl0eSA9IDEwMDAwO1xuICAgICAgY29uc3QgYWxsb2NhdGlvbiA9IHBvcnRmb2xpb01hbmFnZXIuYWxsb2NhdGVSaXNrUGVyVHJhZGUodG90YWxFcXVpdHksIFtdKTtcbiAgICAgIFxuICAgICAgLy8gTm8gcG9zaXRpb25zOiAyJSAvIDEgPSAyJVxuICAgICAgZXhwZWN0KGFsbG9jYXRpb24uYWRqdXN0ZWRSaXNrUGVyVHJhZGUpLnRvQmUoMC4wMik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdyYW5rU2lnbmFscycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJhbmsgc2lnbmFscyBieSBjb21wb3NpdGUgc2NvcmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCByYW5rZWQgPSBwb3J0Zm9saW9NYW5hZ2VyLnJhbmtTaWduYWxzKG1vY2tTaWduYWxzKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJhbmtlZCkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJhbmtlZFswXS5yYW5rKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHJhbmtlZFsxXS5yYW5rKS50b0JlKDIpO1xuICAgICAgXG4gICAgICAvLyBGaXJzdCBzaWduYWwgc2hvdWxkIGhhdmUgaGlnaGVyIGNvbXBvc2l0ZSBzY29yZSAoQSsgd2l0aCA5NSBhbGlnbm1lbnQpXG4gICAgICBleHBlY3QocmFua2VkWzBdLmNvbXBvc2l0ZVNjb3JlKS50b0JlR3JlYXRlclRoYW4ocmFua2VkWzFdLmNvbXBvc2l0ZVNjb3JlKTtcbiAgICAgIGV4cGVjdChyYW5rZWRbMF0uc2lnbmFsLnN5bWJvbCkudG9CZSgnQURBVVNEVCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsaW1pdCB0byB0b3AgMyBzaWduYWxzJywgKCkgPT4ge1xuICAgICAgLy8gQWRkIG1vcmUgc2lnbmFsc1xuICAgICAgY29uc3QgbW9yZVNpZ25hbHMgPSBbXG4gICAgICAgIC4uLm1vY2tTaWduYWxzLFxuICAgICAgICAuLi5BcnJheSg1KS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gKHtcbiAgICAgICAgICBzaWduYWw6IHsgLi4ubW9ja1NpZ25hbHNbMF0uc2lnbmFsLCBzeW1ib2w6IGBURVNUJHtpfVVTRFRgIH0sXG4gICAgICAgICAgaG9sb2dyYW1TdGF0ZTogeyAuLi5tb2NrU2lnbmFsc1swXS5ob2xvZ3JhbVN0YXRlLCBhbGlnbm1lbnRTY29yZTogNjAgLSBpIH1cbiAgICAgICAgfSkpXG4gICAgICBdO1xuICAgICAgXG4gICAgICBjb25zdCByYW5rZWQgPSBwb3J0Zm9saW9NYW5hZ2VyLnJhbmtTaWduYWxzKG1vcmVTaWduYWxzKTtcbiAgICAgIGV4cGVjdChyYW5rZWQpLnRvSGF2ZUxlbmd0aCgzKTsgLy8gTGltaXRlZCB0byB0b3AgM1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgc2lnbmFscyBhcnJheScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJhbmtlZCA9IHBvcnRmb2xpb01hbmFnZXIucmFua1NpZ25hbHMoW10pO1xuICAgICAgZXhwZWN0KHJhbmtlZCkudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY2hlY2tQb3J0Zm9saW9IZWF0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHBvcnRmb2xpbyBoZWF0IGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHRvdGFsRXF1aXR5ID0gMTAwMDA7XG4gICAgICBjb25zdCBjYW5UcmFkZSA9IHBvcnRmb2xpb01hbmFnZXIuY2hlY2tQb3J0Zm9saW9IZWF0KG1vY2tQb3NpdGlvbnMsIHRvdGFsRXF1aXR5KTtcbiAgICAgIFxuICAgICAgLy8gUG9zaXRpb24gMSByaXNrOiAoNTAwMDAtNDkyNTApICogMC4xID0gNzVcbiAgICAgIC8vIFBvc2l0aW9uIDIgcmlzazogKDMwMDAtMjk1NSkgKiAxID0gNDVcbiAgICAgIC8vIFRvdGFsIHJpc2s6IDEyMCwgSGVhdDogMTIwLzEwMDAwID0gMS4yJSA8IDE1JVxuICAgICAgZXhwZWN0KGNhblRyYWRlKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3Qgd2hlbiBwb3J0Zm9saW8gaGVhdCBleGNlZWRzIGxpbWl0JywgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGhpZ2gtcmlzayBwb3NpdGlvbnNcbiAgICAgIGNvbnN0IGhpZ2hSaXNrUG9zaXRpb25zID0gbW9ja1Bvc2l0aW9ucy5tYXAocG9zID0+ICh7XG4gICAgICAgIC4uLnBvcyxcbiAgICAgICAgcXVhbnRpdHk6IHBvcy5xdWFudGl0eSAqIDUwIC8vIEluY3JlYXNlIHF1YW50aXR5IHRvIGluY3JlYXNlIHJpc2tcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgICAgY29uc3QgdG90YWxFcXVpdHkgPSAxMDAwOyAvLyBTbWFsbCBlcXVpdHkgdG8gaW5jcmVhc2UgaGVhdCBwZXJjZW50YWdlXG4gICAgICBjb25zdCBjYW5UcmFkZSA9IHBvcnRmb2xpb01hbmFnZXIuY2hlY2tQb3J0Zm9saW9IZWF0KGhpZ2hSaXNrUG9zaXRpb25zLCB0b3RhbEVxdWl0eSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjYW5UcmFkZSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSBmb3IgemVybyBlcXVpdHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYW5UcmFkZSA9IHBvcnRmb2xpb01hbmFnZXIuY2hlY2tQb3J0Zm9saW9IZWF0KG1vY2tQb3NpdGlvbnMsIDApO1xuICAgICAgZXhwZWN0KGNhblRyYWRlKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FkanVzdEZvckRpcmVjdGlvbmFsQmlhcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG5vdCBhZGp1c3Qgd2hlbiBubyBkaXJlY3Rpb25hbCBiaWFzJywgKCkgPT4ge1xuICAgICAgLy8gTWl4ZWQgcG9zaXRpb25zICgxIExPTkcsIDEgU0hPUlQpXG4gICAgICBjb25zdCBtaXhlZFBvc2l0aW9ucyA9IFtcbiAgICAgICAgbW9ja1Bvc2l0aW9uc1swXSwgLy8gTE9OR1xuICAgICAgICB7IC4uLm1vY2tQb3NpdGlvbnNbMV0sIHNpZGU6ICdTSE9SVCcgYXMgY29uc3QgfSAvLyBTSE9SVFxuICAgICAgXTtcbiAgICAgIFxuICAgICAgY29uc3QgYWRqdXN0ZWRTaXplID0gcG9ydGZvbGlvTWFuYWdlci5hZGp1c3RGb3JEaXJlY3Rpb25hbEJpYXMoXG4gICAgICAgIG1peGVkUG9zaXRpb25zLCBcbiAgICAgICAgJ0xPTkcnLCBcbiAgICAgICAgMTAwMFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFkanVzdGVkU2l6ZSkudG9CZSgxMDAwKTsgLy8gTm8gYWRqdXN0bWVudFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWR1Y2UgcG9zaXRpb24gc2l6ZSB3aGVuIGFkZGluZyB0byBkaXJlY3Rpb25hbCBiaWFzJywgKCkgPT4ge1xuICAgICAgLy8gQWxsIExPTkcgcG9zaXRpb25zICgxMDAlIGJpYXMpXG4gICAgICBjb25zdCBsb25nUG9zaXRpb25zID0gbW9ja1Bvc2l0aW9uczsgLy8gQm90aCBhcmUgTE9OR1xuICAgICAgXG4gICAgICBjb25zdCBhZGp1c3RlZFNpemUgPSBwb3J0Zm9saW9NYW5hZ2VyLmFkanVzdEZvckRpcmVjdGlvbmFsQmlhcyhcbiAgICAgICAgbG9uZ1Bvc2l0aW9ucywgXG4gICAgICAgICdMT05HJywgXG4gICAgICAgIDEwMDBcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCByZWR1Y2UgYnkgMjAlOiAxMDAwICogKDEgLSAwLjIpID0gODAwXG4gICAgICBleHBlY3QoYWRqdXN0ZWRTaXplKS50b0JlKDgwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBhZGp1c3Qgd2hlbiBnb2luZyBhZ2FpbnN0IGRpcmVjdGlvbmFsIGJpYXMnLCAoKSA9PiB7XG4gICAgICAvLyBBbGwgTE9ORyBwb3NpdGlvbnNcbiAgICAgIGNvbnN0IGxvbmdQb3NpdGlvbnMgPSBtb2NrUG9zaXRpb25zOyAvLyBCb3RoIGFyZSBMT05HXG4gICAgICBcbiAgICAgIGNvbnN0IGFkanVzdGVkU2l6ZSA9IHBvcnRmb2xpb01hbmFnZXIuYWRqdXN0Rm9yRGlyZWN0aW9uYWxCaWFzKFxuICAgICAgICBsb25nUG9zaXRpb25zLCBcbiAgICAgICAgJ1NIT1JUJywgXG4gICAgICAgIDEwMDBcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChhZGp1c3RlZFNpemUpLnRvQmUoMTAwMCk7IC8vIE5vIGFkanVzdG1lbnQgd2hlbiBnb2luZyBhZ2FpbnN0IGJpYXNcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHBvc2l0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFkanVzdGVkU2l6ZSA9IHBvcnRmb2xpb01hbmFnZXIuYWRqdXN0Rm9yRGlyZWN0aW9uYWxCaWFzKFtdLCAnTE9ORycsIDEwMDApO1xuICAgICAgZXhwZWN0KGFkanVzdGVkU2l6ZSkudG9CZSgxMDAwKTsgLy8gTm8gYWRqdXN0bWVudCB3aXRoIG5vIHBvc2l0aW9uc1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndXBkYXRlUG9ydGZvbGlvU3RhdGUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgcG9ydGZvbGlvIHN0YXRlIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHRvdGFsRXF1aXR5ID0gMTAwMDA7XG4gICAgICBwb3J0Zm9saW9NYW5hZ2VyLnVwZGF0ZVBvcnRmb2xpb1N0YXRlKG1vY2tQb3NpdGlvbnMsIHRvdGFsRXF1aXR5KTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhdGUgPSBwb3J0Zm9saW9NYW5hZ2VyLmdldFBvcnRmb2xpb1N0YXRlKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzdGF0ZS50b3RhbEVxdWl0eSkudG9CZSh0b3RhbEVxdWl0eSk7XG4gICAgICBleHBlY3Qoc3RhdGUub3BlblBvc2l0aW9ucykudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHN0YXRlLmRpcmVjdGlvbmFsQmlhcykudG9CZSgnTE9ORycpOyAvLyBCb3RoIHBvc2l0aW9ucyBhcmUgTE9OR1xuICAgICAgZXhwZWN0KHN0YXRlLmJpYXNQZXJjZW50YWdlKS50b0JlKDEuMCk7IC8vIDEwMCUgTE9OR1xuICAgICAgZXhwZWN0KHN0YXRlLnRvdGFsVW5yZWFsaXplZFBuTCkudG9CZSgyMDApOyAvLyAxMDAgKyAxMDBcbiAgICAgIGV4cGVjdChzdGF0ZS50b3RhbFJlYWxpemVkUG5MKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgbmV1dHJhbCBiaWFzIHdpdGggbWl4ZWQgcG9zaXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWl4ZWRQb3NpdGlvbnMgPSBbXG4gICAgICAgIG1vY2tQb3NpdGlvbnNbMF0sIC8vIExPTkdcbiAgICAgICAgeyAuLi5tb2NrUG9zaXRpb25zWzFdLCBzaWRlOiAnU0hPUlQnIGFzIGNvbnN0IH0gLy8gU0hPUlRcbiAgICAgIF07XG4gICAgICBcbiAgICAgIHBvcnRmb2xpb01hbmFnZXIudXBkYXRlUG9ydGZvbGlvU3RhdGUobWl4ZWRQb3NpdGlvbnMsIDEwMDAwKTtcbiAgICAgIGNvbnN0IHN0YXRlID0gcG9ydGZvbGlvTWFuYWdlci5nZXRQb3J0Zm9saW9TdGF0ZSgpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RhdGUuZGlyZWN0aW9uYWxCaWFzKS50b0JlKCdORVVUUkFMJyk7XG4gICAgICBleHBlY3Qoc3RhdGUuYmlhc1BlcmNlbnRhZ2UpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjYW5BY2NlcHRTaWduYWwnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAvLyBBZGQgcG9zaXRpb25zIHRvIHBvcnRmb2xpbyBtYW5hZ2VyXG4gICAgICBtb2NrUG9zaXRpb25zLmZvckVhY2gocG9zID0+IHBvcnRmb2xpb01hbmFnZXIuYWRkUG9zaXRpb24ocG9zKSk7XG4gICAgICBwb3J0Zm9saW9NYW5hZ2VyLnVwZGF0ZVBvcnRmb2xpb1N0YXRlKG1vY2tQb3NpdGlvbnMsIDEwMDAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWNjZXB0IHNpZ25hbCB3aGVuIGFsbCBsaW1pdHMgYXJlIHdpdGhpbiBib3VuZHMnLCAoKSA9PiB7XG4gICAgICAvLyBEZWJ1ZzogQ2hlY2sgY3VycmVudCBzdGF0ZVxuICAgICAgY29uc3Qgc3RhdGUgPSBwb3J0Zm9saW9NYW5hZ2VyLmdldFBvcnRmb2xpb1N0YXRlKCk7XG4gICAgICBjb25zb2xlLmxvZygnUG9ydGZvbGlvIHN0YXRlOicsIHtcbiAgICAgICAgZXhwb3N1cmVQZXJjZW50YWdlOiBzdGF0ZS5leHBvc3VyZVBlcmNlbnRhZ2UsXG4gICAgICAgIHBvcnRmb2xpb0hlYXQ6IHN0YXRlLnBvcnRmb2xpb0hlYXQsXG4gICAgICAgIG9wZW5Qb3NpdGlvbnM6IHN0YXRlLm9wZW5Qb3NpdGlvbnMubGVuZ3RoXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgY2FuQWNjZXB0ID0gcG9ydGZvbGlvTWFuYWdlci5jYW5BY2NlcHRTaWduYWwoXG4gICAgICAgIG1vY2tTaWduYWxzWzBdLnNpZ25hbCxcbiAgICAgICAgbW9ja1NpZ25hbHNbMF0uaG9sb2dyYW1TdGF0ZSxcbiAgICAgICAgMTAwMDBcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjYW5BY2NlcHQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBzaWduYWwgd2hlbiBwb3NpdGlvbiBsaW1pdCBleGNlZWRlZCcsICgpID0+IHtcbiAgICAgIC8vIEFkZCBtb3JlIHBvc2l0aW9ucyB0byBoaXQgdGhlIGxpbWl0XG4gICAgICBmb3IgKGxldCBpID0gMzsgaSA8PSA1OyBpKyspIHtcbiAgICAgICAgcG9ydGZvbGlvTWFuYWdlci5hZGRQb3NpdGlvbih7XG4gICAgICAgICAgLi4ubW9ja1Bvc2l0aW9uc1swXSxcbiAgICAgICAgICBpZDogYHBvcy0ke2l9YCxcbiAgICAgICAgICBzdGF0dXM6ICdPUEVOJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgY2FuQWNjZXB0ID0gcG9ydGZvbGlvTWFuYWdlci5jYW5BY2NlcHRTaWduYWwoXG4gICAgICAgIG1vY2tTaWduYWxzWzBdLnNpZ25hbCxcbiAgICAgICAgbW9ja1NpZ25hbHNbMF0uaG9sb2dyYW1TdGF0ZSxcbiAgICAgICAgMTAwMDBcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjYW5BY2NlcHQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0UG9ydGZvbGlvU3RhdGlzdGljcycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tQb3NpdGlvbnMuZm9yRWFjaChwb3MgPT4gcG9ydGZvbGlvTWFuYWdlci5hZGRQb3NpdGlvbihwb3MpKTtcbiAgICAgIHBvcnRmb2xpb01hbmFnZXIudXBkYXRlUG9ydGZvbGlvU3RhdGUobW9ja1Bvc2l0aW9ucywgMTAwMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBwb3J0Zm9saW8gc3RhdGlzdGljcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzID0gcG9ydGZvbGlvTWFuYWdlci5nZXRQb3J0Zm9saW9TdGF0aXN0aWNzKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbFBvc2l0aW9ucykudG9CZSgyKTtcbiAgICAgIGV4cGVjdChzdGF0cy5vcGVuUG9zaXRpb25zKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KHN0YXRzLmV4cG9zdXJlVXRpbGl6YXRpb24pLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5oZWF0VXRpbGl6YXRpb24pLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5wb3NpdGlvblV0aWxpemF0aW9uKS50b0JlKDAuNCk7IC8vIDIvNSA9IDAuNFxuICAgICAgZXhwZWN0KHN0YXRzLmF2Z1Bvc2l0aW9uU2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLmxhcmdlc3RQb3NpdGlvbikudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLmRpcmVjdGlvbmFsQmlhcykudG9Db250YWluKCdMT05HJyk7XG4gICAgICBleHBlY3Qoc3RhdHMudG90YWxQbkwpLnRvQmUoMjAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Bvc2l0aW9uIG1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhZGQgYW5kIHJlbW92ZSBwb3NpdGlvbnMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBtb2NrUG9zaXRpb25zWzBdO1xuICAgICAgXG4gICAgICBwb3J0Zm9saW9NYW5hZ2VyLmFkZFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgIGV4cGVjdChwb3J0Zm9saW9NYW5hZ2VyLmdldEFsbFBvc2l0aW9ucygpKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBcbiAgICAgIHBvcnRmb2xpb01hbmFnZXIucmVtb3ZlUG9zaXRpb24ocG9zaXRpb24uaWQpO1xuICAgICAgZXhwZWN0KHBvcnRmb2xpb01hbmFnZXIuZ2V0QWxsUG9zaXRpb25zKCkpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHBvc2l0aW9ucyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IG1vY2tQb3NpdGlvbnNbMF07XG4gICAgICBwb3J0Zm9saW9NYW5hZ2VyLmFkZFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgIFxuICAgICAgY29uc3QgdXBkYXRlZFBvc2l0aW9uID0geyAuLi5wb3NpdGlvbiwgY3VycmVudFByaWNlOiA1MjAwMCB9O1xuICAgICAgcG9ydGZvbGlvTWFuYWdlci51cGRhdGVQb3NpdGlvbih1cGRhdGVkUG9zaXRpb24pO1xuICAgICAgXG4gICAgICBjb25zdCByZXRyaWV2ZWQgPSBwb3J0Zm9saW9NYW5hZ2VyLmdldEFsbFBvc2l0aW9ucygpWzBdO1xuICAgICAgZXhwZWN0KHJldHJpZXZlZC5jdXJyZW50UHJpY2UpLnRvQmUoNTIwMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgb3BlbiBwb3NpdGlvbnMgb25seScsICgpID0+IHtcbiAgICAgIGNvbnN0IG9wZW5Qb3NpdGlvbiA9IG1vY2tQb3NpdGlvbnNbMF07XG4gICAgICBjb25zdCBjbG9zZWRQb3NpdGlvbiA9IHsgLi4ubW9ja1Bvc2l0aW9uc1sxXSwgc3RhdHVzOiAnQ0xPU0VEJyBhcyBjb25zdCB9O1xuICAgICAgXG4gICAgICBwb3J0Zm9saW9NYW5hZ2VyLmFkZFBvc2l0aW9uKG9wZW5Qb3NpdGlvbik7XG4gICAgICBwb3J0Zm9saW9NYW5hZ2VyLmFkZFBvc2l0aW9uKGNsb3NlZFBvc2l0aW9uKTtcbiAgICAgIFxuICAgICAgY29uc3Qgb3BlblBvc2l0aW9ucyA9IHBvcnRmb2xpb01hbmFnZXIuZ2V0T3BlblBvc2l0aW9ucygpO1xuICAgICAgZXhwZWN0KG9wZW5Qb3NpdGlvbnMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChvcGVuUG9zaXRpb25zWzBdLnN0YXR1cykudG9CZSgnT1BFTicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjbGVhciBhbGwgcG9zaXRpb25zJywgKCkgPT4ge1xuICAgICAgbW9ja1Bvc2l0aW9ucy5mb3JFYWNoKHBvcyA9PiBwb3J0Zm9saW9NYW5hZ2VyLmFkZFBvc2l0aW9uKHBvcykpO1xuICAgICAgZXhwZWN0KHBvcnRmb2xpb01hbmFnZXIuZ2V0QWxsUG9zaXRpb25zKCkpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIFxuICAgICAgcG9ydGZvbGlvTWFuYWdlci5jbGVhclBvc2l0aW9ucygpO1xuICAgICAgZXhwZWN0KHBvcnRmb2xpb01hbmFnZXIuZ2V0QWxsUG9zaXRpb25zKCkpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgY29uZmlndXJhdGlvbiBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdDb25maWcgPSB7IG1heENvbmN1cnJlbnRQb3NpdGlvbnM6IDEwIH07XG4gICAgICBwb3J0Zm9saW9NYW5hZ2VyLnVwZGF0ZUNvbmZpZyhuZXdDb25maWcpO1xuICAgICAgXG4gICAgICAvLyBUZXN0IHRoYXQgbmV3IGNvbmZpZyBpcyBhcHBsaWVkXG4gICAgICBjb25zdCBwb3NpdGlvbnMgPSBBcnJheSg4KS5maWxsKG51bGwpLm1hcCgoXywgaSkgPT4gKHtcbiAgICAgICAgLi4ubW9ja1Bvc2l0aW9uc1swXSxcbiAgICAgICAgaWQ6IGBwb3MtJHtpfWAsXG4gICAgICAgIHN0YXR1czogJ09QRU4nIGFzIGNvbnN0XG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNhbk9wZW4gPSBwb3J0Zm9saW9NYW5hZ2VyLmVuZm9yY2VNYXhQb3NpdGlvbnMocG9zaXRpb25zKTtcbiAgICAgIGV4cGVjdChjYW5PcGVuKS50b0JlKHRydWUpOyAvLyBTaG91bGQgYWxsb3cgc2luY2UgbGltaXQgaXMgbm93IDEwXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdldmVudCBlbWlzc2lvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGVtaXQgcG9ydGZvbGlvIHVwZGF0ZWQgZXZlbnQnLCAoZG9uZSkgPT4ge1xuICAgICAgcG9ydGZvbGlvTWFuYWdlci5vbigncG9ydGZvbGlvOnVwZGF0ZWQnLCAoc3RhdGUpID0+IHtcbiAgICAgICAgZXhwZWN0KHN0YXRlLnRvdGFsRXF1aXR5KS50b0JlKDEwMDAwKTtcbiAgICAgICAgZXhwZWN0KHN0YXRlLm9wZW5Qb3NpdGlvbnMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHBvcnRmb2xpb01hbmFnZXIudXBkYXRlUG9ydGZvbGlvU3RhdGUobW9ja1Bvc2l0aW9ucywgMTAwMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBlbWl0IHNpZ25hbCByZWplY3RlZCBldmVudCcsIChkb25lKSA9PiB7XG4gICAgICBwb3J0Zm9saW9NYW5hZ2VyLm9uKCdwb3J0Zm9saW86c2lnbmFsX3JlamVjdGVkJywgKHNpZ25hbCwgcmVhc29uKSA9PiB7XG4gICAgICAgIGV4cGVjdChzaWduYWwuc3ltYm9sKS50b0JlKCdBREFVU0RUJyk7XG4gICAgICAgIGV4cGVjdChyZWFzb24pLnRvQmUoJ1BPU0lUSU9OX0xJTUlUX0VYQ0VFREVEJyk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBZGQgcG9zaXRpb25zIHRvIGhpdCBsaW1pdFxuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gNTsgaSsrKSB7XG4gICAgICAgIHBvcnRmb2xpb01hbmFnZXIuYWRkUG9zaXRpb24oe1xuICAgICAgICAgIC4uLm1vY2tQb3NpdGlvbnNbMF0sXG4gICAgICAgICAgaWQ6IGBwb3MtJHtpfWAsXG4gICAgICAgICAgc3RhdHVzOiAnT1BFTidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHBvcnRmb2xpb01hbmFnZXIuY2FuQWNjZXB0U2lnbmFsKFxuICAgICAgICBtb2NrU2lnbmFsc1swXS5zaWduYWwsXG4gICAgICAgIG1vY2tTaWduYWxzWzBdLmhvbG9ncmFtU3RhdGUsXG4gICAgICAgIDEwMDAwXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBlbWl0IGRpcmVjdGlvbmFsIGJpYXMgZXZlbnQnLCAoZG9uZSkgPT4ge1xuICAgICAgcG9ydGZvbGlvTWFuYWdlci5vbigncG9ydGZvbGlvOmRpcmVjdGlvbmFsX2JpYXMnLCAoYmlhcywgcGVyY2VudGFnZSkgPT4ge1xuICAgICAgICBleHBlY3QoYmlhcykudG9CZSgnTE9ORycpO1xuICAgICAgICBleHBlY3QocGVyY2VudGFnZSkudG9CZSgxLjApO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcG9ydGZvbGlvTWFuYWdlci5hZGp1c3RGb3JEaXJlY3Rpb25hbEJpYXMobW9ja1Bvc2l0aW9ucywgJ0xPTkcnLCAxMDAwKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=