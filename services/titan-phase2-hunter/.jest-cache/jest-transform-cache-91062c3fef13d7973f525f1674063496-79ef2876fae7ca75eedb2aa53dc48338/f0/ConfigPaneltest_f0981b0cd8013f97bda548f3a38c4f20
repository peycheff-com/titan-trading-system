d04fbb78e0ac740c352fcf0cfa9961e5
"use strict";
/**
 * ConfigPanel Component Tests
 *
 * Tests for the F1 Configuration Panel functionality
 */
Object.defineProperty(exports, "__esModule", { value: true });
const ConfigManager_1 = require("../config/ConfigManager");
// Mock configuration for testing
const mockConfig = {
    alignmentWeights: {
        daily: 50,
        h4: 30,
        m15: 20
    },
    rsConfig: {
        threshold: 2,
        lookbackPeriod: 4
    },
    riskConfig: {
        maxLeverage: 5,
        stopLossPercent: 1.5,
        targetPercent: 4.5
    },
    portfolioConfig: {
        maxConcurrentPositions: 5,
        maxPortfolioHeat: 15,
        correlationThreshold: 0.7
    },
    version: 1,
    lastModified: Date.now()
};
describe('ConfigPanel Integration', () => {
    let configManager;
    beforeEach(() => {
        configManager = new ConfigManager_1.ConfigManager('./test-config');
    });
    afterEach(() => {
        configManager.destroy();
    });
    it('should validate alignment weights sum to 100%', () => {
        const invalidConfig = {
            ...mockConfig,
            alignmentWeights: {
                daily: 60,
                h4: 30,
                m15: 20 // Total = 110%
            }
        };
        expect(() => {
            configManager.updateAlignmentWeights(invalidConfig.alignmentWeights);
        }).toThrow('Alignment weights must sum to 100%');
    });
    it('should accept valid alignment weights', () => {
        const validWeights = {
            daily: 45,
            h4: 35,
            m15: 20 // Total = 100%
        };
        expect(() => {
            configManager.updateAlignmentWeights(validWeights);
        }).not.toThrow();
    });
    it('should validate RS threshold range', () => {
        expect(() => {
            configManager.updateRSConfig({ threshold: 6 }); // Above max of 5%
        }).toThrow();
        expect(() => {
            configManager.updateRSConfig({ threshold: -1 }); // Below min of 0%
        }).toThrow();
        expect(() => {
            configManager.updateRSConfig({ threshold: 2.5 }); // Valid range
        }).not.toThrow();
    });
    it('should validate risk configuration ranges', () => {
        expect(() => {
            configManager.updateRiskConfig({ maxLeverage: 6 }); // Above max of 5x
        }).toThrow();
        expect(() => {
            configManager.updateRiskConfig({ stopLossPercent: 0.5 }); // Below min of 1%
        }).toThrow();
        expect(() => {
            configManager.updateRiskConfig({ targetPercent: 7 }); // Above max of 6%
        }).toThrow();
        expect(() => {
            configManager.updateRiskConfig({
                maxLeverage: 4,
                stopLossPercent: 2,
                targetPercent: 5
            }); // Valid ranges
        }).not.toThrow();
    });
    it('should validate portfolio configuration ranges', () => {
        expect(() => {
            configManager.updatePortfolioConfig({ maxConcurrentPositions: 2 }); // Below min of 3
        }).toThrow();
        expect(() => {
            configManager.updatePortfolioConfig({ maxPortfolioHeat: 25 }); // Above max of 20%
        }).toThrow();
        expect(() => {
            configManager.updatePortfolioConfig({ correlationThreshold: 0.5 }); // Below min of 0.6
        }).toThrow();
        expect(() => {
            configManager.updatePortfolioConfig({
                maxConcurrentPositions: 6,
                maxPortfolioHeat: 18,
                correlationThreshold: 0.8
            }); // Valid ranges
        }).not.toThrow();
    });
    it('should calculate correct R:R ratio', () => {
        const config = configManager.getConfig();
        const rrRatio = config.riskConfig.targetPercent / config.riskConfig.stopLossPercent;
        expect(rrRatio).toBeGreaterThanOrEqual(2.0); // Minimum 2:1 R:R
        expect(rrRatio).toBe(3.0); // Default 4.5% / 1.5% = 3:1
    });
    it('should provide configuration summary', () => {
        const summary = configManager.getConfigSummary();
        expect(summary).toContain('Alignment');
        expect(summary).toContain('RS');
        expect(summary).toContain('Risk');
        expect(summary).toContain('Portfolio');
        expect(summary).toContain('50%'); // Daily weight
        expect(summary).toContain('30%'); // 4H weight
        expect(summary).toContain('20%'); // 15m weight
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvc3JjL2NvbnNvbGUvQ29uZmlnUGFuZWwudGVzdC50c3giLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBRUgsMkRBQXNFO0FBRXRFLGlDQUFpQztBQUNqQyxNQUFNLFVBQVUsR0FBaUI7SUFDL0IsZ0JBQWdCLEVBQUU7UUFDaEIsS0FBSyxFQUFFLEVBQUU7UUFDVCxFQUFFLEVBQUUsRUFBRTtRQUNOLEdBQUcsRUFBRSxFQUFFO0tBQ1I7SUFDRCxRQUFRLEVBQUU7UUFDUixTQUFTLEVBQUUsQ0FBQztRQUNaLGNBQWMsRUFBRSxDQUFDO0tBQ2xCO0lBQ0QsVUFBVSxFQUFFO1FBQ1YsV0FBVyxFQUFFLENBQUM7UUFDZCxlQUFlLEVBQUUsR0FBRztRQUNwQixhQUFhLEVBQUUsR0FBRztLQUNuQjtJQUNELGVBQWUsRUFBRTtRQUNmLHNCQUFzQixFQUFFLENBQUM7UUFDekIsZ0JBQWdCLEVBQUUsRUFBRTtRQUNwQixvQkFBb0IsRUFBRSxHQUFHO0tBQzFCO0lBQ0QsT0FBTyxFQUFFLENBQUM7SUFDVixZQUFZLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtDQUN6QixDQUFDO0FBRUYsUUFBUSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtJQUN2QyxJQUFJLGFBQTRCLENBQUM7SUFFakMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLGFBQWEsR0FBRyxJQUFJLDZCQUFhLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDckQsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzFCLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLCtDQUErQyxFQUFFLEdBQUcsRUFBRTtRQUN2RCxNQUFNLGFBQWEsR0FBaUI7WUFDbEMsR0FBRyxVQUFVO1lBQ2IsZ0JBQWdCLEVBQUU7Z0JBQ2hCLEtBQUssRUFBRSxFQUFFO2dCQUNULEVBQUUsRUFBRSxFQUFFO2dCQUNOLEdBQUcsRUFBRSxFQUFFLENBQUMsZUFBZTthQUN4QjtTQUNGLENBQUM7UUFFRixNQUFNLENBQUMsR0FBRyxFQUFFO1lBQ1YsYUFBYSxDQUFDLHNCQUFzQixDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3ZFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO0lBQ25ELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHVDQUF1QyxFQUFFLEdBQUcsRUFBRTtRQUMvQyxNQUFNLFlBQVksR0FBRztZQUNuQixLQUFLLEVBQUUsRUFBRTtZQUNULEVBQUUsRUFBRSxFQUFFO1lBQ04sR0FBRyxFQUFFLEVBQUUsQ0FBQyxlQUFlO1NBQ3hCLENBQUM7UUFFRixNQUFNLENBQUMsR0FBRyxFQUFFO1lBQ1YsYUFBYSxDQUFDLHNCQUFzQixDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3JELENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNuQixDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7UUFDNUMsTUFBTSxDQUFDLEdBQUcsRUFBRTtZQUNWLGFBQWEsQ0FBQyxjQUFjLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGtCQUFrQjtRQUNwRSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUViLE1BQU0sQ0FBQyxHQUFHLEVBQUU7WUFDVixhQUFhLENBQUMsY0FBYyxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGtCQUFrQjtRQUNyRSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUViLE1BQU0sQ0FBQyxHQUFHLEVBQUU7WUFDVixhQUFhLENBQUMsY0FBYyxDQUFDLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjO1FBQ2xFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNuQixDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxHQUFHLEVBQUU7UUFDbkQsTUFBTSxDQUFDLEdBQUcsRUFBRTtZQUNWLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsa0JBQWtCO1FBQ3hFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRWIsTUFBTSxDQUFDLEdBQUcsRUFBRTtZQUNWLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLGVBQWUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsa0JBQWtCO1FBQzlFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRWIsTUFBTSxDQUFDLEdBQUcsRUFBRTtZQUNWLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLGFBQWEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsa0JBQWtCO1FBQzFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRWIsTUFBTSxDQUFDLEdBQUcsRUFBRTtZQUNWLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDN0IsV0FBVyxFQUFFLENBQUM7Z0JBQ2QsZUFBZSxFQUFFLENBQUM7Z0JBQ2xCLGFBQWEsRUFBRSxDQUFDO2FBQ2pCLENBQUMsQ0FBQyxDQUFDLGVBQWU7UUFDckIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ25CLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLGdEQUFnRCxFQUFFLEdBQUcsRUFBRTtRQUN4RCxNQUFNLENBQUMsR0FBRyxFQUFFO1lBQ1YsYUFBYSxDQUFDLHFCQUFxQixDQUFDLEVBQUUsc0JBQXNCLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGlCQUFpQjtRQUN2RixDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUViLE1BQU0sQ0FBQyxHQUFHLEVBQUU7WUFDVixhQUFhLENBQUMscUJBQXFCLENBQUMsRUFBRSxnQkFBZ0IsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsbUJBQW1CO1FBQ3BGLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRWIsTUFBTSxDQUFDLEdBQUcsRUFBRTtZQUNWLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFLG9CQUFvQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxtQkFBbUI7UUFDekYsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFFYixNQUFNLENBQUMsR0FBRyxFQUFFO1lBQ1YsYUFBYSxDQUFDLHFCQUFxQixDQUFDO2dCQUNsQyxzQkFBc0IsRUFBRSxDQUFDO2dCQUN6QixnQkFBZ0IsRUFBRSxFQUFFO2dCQUNwQixvQkFBb0IsRUFBRSxHQUFHO2FBQzFCLENBQUMsQ0FBQyxDQUFDLGVBQWU7UUFDckIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ25CLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLG9DQUFvQyxFQUFFLEdBQUcsRUFBRTtRQUM1QyxNQUFNLE1BQU0sR0FBRyxhQUFhLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDekMsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUM7UUFFcEYsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsa0JBQWtCO1FBQy9ELE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyw0QkFBNEI7SUFDekQsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO1FBQzlDLE1BQU0sT0FBTyxHQUFHLGFBQWEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBRWpELE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDdkMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2xDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDdkMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGVBQWU7UUFDakQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFlBQVk7UUFDOUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGFBQWE7SUFDakQsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvaXZhbi9Db2RlL3RyYWRpbmcvdGl0YW4vc2VydmljZXMvdGl0YW4tcGhhc2UyLWh1bnRlci9zcmMvY29uc29sZS9Db25maWdQYW5lbC50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbmZpZ1BhbmVsIENvbXBvbmVudCBUZXN0c1xuICogXG4gKiBUZXN0cyBmb3IgdGhlIEYxIENvbmZpZ3VyYXRpb24gUGFuZWwgZnVuY3Rpb25hbGl0eVxuICovXG5cbmltcG9ydCB7IENvbmZpZ01hbmFnZXIsIFBoYXNlMkNvbmZpZyB9IGZyb20gJy4uL2NvbmZpZy9Db25maWdNYW5hZ2VyJztcblxuLy8gTW9jayBjb25maWd1cmF0aW9uIGZvciB0ZXN0aW5nXG5jb25zdCBtb2NrQ29uZmlnOiBQaGFzZTJDb25maWcgPSB7XG4gIGFsaWdubWVudFdlaWdodHM6IHtcbiAgICBkYWlseTogNTAsXG4gICAgaDQ6IDMwLFxuICAgIG0xNTogMjBcbiAgfSxcbiAgcnNDb25maWc6IHtcbiAgICB0aHJlc2hvbGQ6IDIsXG4gICAgbG9va2JhY2tQZXJpb2Q6IDRcbiAgfSxcbiAgcmlza0NvbmZpZzoge1xuICAgIG1heExldmVyYWdlOiA1LFxuICAgIHN0b3BMb3NzUGVyY2VudDogMS41LFxuICAgIHRhcmdldFBlcmNlbnQ6IDQuNVxuICB9LFxuICBwb3J0Zm9saW9Db25maWc6IHtcbiAgICBtYXhDb25jdXJyZW50UG9zaXRpb25zOiA1LFxuICAgIG1heFBvcnRmb2xpb0hlYXQ6IDE1LFxuICAgIGNvcnJlbGF0aW9uVGhyZXNob2xkOiAwLjdcbiAgfSxcbiAgdmVyc2lvbjogMSxcbiAgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpXG59O1xuXG5kZXNjcmliZSgnQ29uZmlnUGFuZWwgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gIGxldCBjb25maWdNYW5hZ2VyOiBDb25maWdNYW5hZ2VyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNvbmZpZ01hbmFnZXIgPSBuZXcgQ29uZmlnTWFuYWdlcignLi90ZXN0LWNvbmZpZycpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGNvbmZpZ01hbmFnZXIuZGVzdHJveSgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHZhbGlkYXRlIGFsaWdubWVudCB3ZWlnaHRzIHN1bSB0byAxMDAlJywgKCkgPT4ge1xuICAgIGNvbnN0IGludmFsaWRDb25maWc6IFBoYXNlMkNvbmZpZyA9IHtcbiAgICAgIC4uLm1vY2tDb25maWcsXG4gICAgICBhbGlnbm1lbnRXZWlnaHRzOiB7XG4gICAgICAgIGRhaWx5OiA2MCxcbiAgICAgICAgaDQ6IDMwLFxuICAgICAgICBtMTU6IDIwIC8vIFRvdGFsID0gMTEwJVxuICAgICAgfVxuICAgIH07XG5cbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVBbGlnbm1lbnRXZWlnaHRzKGludmFsaWRDb25maWcuYWxpZ25tZW50V2VpZ2h0cyk7XG4gICAgfSkudG9UaHJvdygnQWxpZ25tZW50IHdlaWdodHMgbXVzdCBzdW0gdG8gMTAwJScpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCBhbGlnbm1lbnQgd2VpZ2h0cycsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZFdlaWdodHMgPSB7XG4gICAgICBkYWlseTogNDUsXG4gICAgICBoNDogMzUsXG4gICAgICBtMTU6IDIwIC8vIFRvdGFsID0gMTAwJVxuICAgIH07XG5cbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVBbGlnbm1lbnRXZWlnaHRzKHZhbGlkV2VpZ2h0cyk7XG4gICAgfSkubm90LnRvVGhyb3coKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBSUyB0aHJlc2hvbGQgcmFuZ2UnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlUlNDb25maWcoeyB0aHJlc2hvbGQ6IDYgfSk7IC8vIEFib3ZlIG1heCBvZiA1JVxuICAgIH0pLnRvVGhyb3coKTtcblxuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZVJTQ29uZmlnKHsgdGhyZXNob2xkOiAtMSB9KTsgLy8gQmVsb3cgbWluIG9mIDAlXG4gICAgfSkudG9UaHJvdygpO1xuXG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlUlNDb25maWcoeyB0aHJlc2hvbGQ6IDIuNSB9KTsgLy8gVmFsaWQgcmFuZ2VcbiAgICB9KS5ub3QudG9UaHJvdygpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHZhbGlkYXRlIHJpc2sgY29uZmlndXJhdGlvbiByYW5nZXMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlUmlza0NvbmZpZyh7IG1heExldmVyYWdlOiA2IH0pOyAvLyBBYm92ZSBtYXggb2YgNXhcbiAgICB9KS50b1Rocm93KCk7XG5cbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVSaXNrQ29uZmlnKHsgc3RvcExvc3NQZXJjZW50OiAwLjUgfSk7IC8vIEJlbG93IG1pbiBvZiAxJVxuICAgIH0pLnRvVGhyb3coKTtcblxuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZVJpc2tDb25maWcoeyB0YXJnZXRQZXJjZW50OiA3IH0pOyAvLyBBYm92ZSBtYXggb2YgNiVcbiAgICB9KS50b1Rocm93KCk7XG5cbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVSaXNrQ29uZmlnKHsgXG4gICAgICAgIG1heExldmVyYWdlOiA0LFxuICAgICAgICBzdG9wTG9zc1BlcmNlbnQ6IDIsXG4gICAgICAgIHRhcmdldFBlcmNlbnQ6IDVcbiAgICAgIH0pOyAvLyBWYWxpZCByYW5nZXNcbiAgICB9KS5ub3QudG9UaHJvdygpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHZhbGlkYXRlIHBvcnRmb2xpbyBjb25maWd1cmF0aW9uIHJhbmdlcycsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVQb3J0Zm9saW9Db25maWcoeyBtYXhDb25jdXJyZW50UG9zaXRpb25zOiAyIH0pOyAvLyBCZWxvdyBtaW4gb2YgM1xuICAgIH0pLnRvVGhyb3coKTtcblxuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZVBvcnRmb2xpb0NvbmZpZyh7IG1heFBvcnRmb2xpb0hlYXQ6IDI1IH0pOyAvLyBBYm92ZSBtYXggb2YgMjAlXG4gICAgfSkudG9UaHJvdygpO1xuXG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlUG9ydGZvbGlvQ29uZmlnKHsgY29ycmVsYXRpb25UaHJlc2hvbGQ6IDAuNSB9KTsgLy8gQmVsb3cgbWluIG9mIDAuNlxuICAgIH0pLnRvVGhyb3coKTtcblxuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZVBvcnRmb2xpb0NvbmZpZyh7XG4gICAgICAgIG1heENvbmN1cnJlbnRQb3NpdGlvbnM6IDYsXG4gICAgICAgIG1heFBvcnRmb2xpb0hlYXQ6IDE4LFxuICAgICAgICBjb3JyZWxhdGlvblRocmVzaG9sZDogMC44XG4gICAgICB9KTsgLy8gVmFsaWQgcmFuZ2VzXG4gICAgfSkubm90LnRvVGhyb3coKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY29ycmVjdCBSOlIgcmF0aW8nLCAoKSA9PiB7XG4gICAgY29uc3QgY29uZmlnID0gY29uZmlnTWFuYWdlci5nZXRDb25maWcoKTtcbiAgICBjb25zdCByclJhdGlvID0gY29uZmlnLnJpc2tDb25maWcudGFyZ2V0UGVyY2VudCAvIGNvbmZpZy5yaXNrQ29uZmlnLnN0b3BMb3NzUGVyY2VudDtcbiAgICBcbiAgICBleHBlY3QocnJSYXRpbykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgyLjApOyAvLyBNaW5pbXVtIDI6MSBSOlJcbiAgICBleHBlY3QocnJSYXRpbykudG9CZSgzLjApOyAvLyBEZWZhdWx0IDQuNSUgLyAxLjUlID0gMzoxXG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcHJvdmlkZSBjb25maWd1cmF0aW9uIHN1bW1hcnknLCAoKSA9PiB7XG4gICAgY29uc3Qgc3VtbWFyeSA9IGNvbmZpZ01hbmFnZXIuZ2V0Q29uZmlnU3VtbWFyeSgpO1xuICAgIFxuICAgIGV4cGVjdChzdW1tYXJ5KS50b0NvbnRhaW4oJ0FsaWdubWVudCcpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0NvbnRhaW4oJ1JTJyk7XG4gICAgZXhwZWN0KHN1bW1hcnkpLnRvQ29udGFpbignUmlzaycpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0NvbnRhaW4oJ1BvcnRmb2xpbycpO1xuICAgIGV4cGVjdChzdW1tYXJ5KS50b0NvbnRhaW4oJzUwJScpOyAvLyBEYWlseSB3ZWlnaHRcbiAgICBleHBlY3Qoc3VtbWFyeSkudG9Db250YWluKCczMCUnKTsgLy8gNEggd2VpZ2h0XG4gICAgZXhwZWN0KHN1bW1hcnkpLnRvQ29udGFpbignMjAlJyk7IC8vIDE1bSB3ZWlnaHRcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=