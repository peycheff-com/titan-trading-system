cf1601e7d7fe6588c1b830bb505513fa
"use strict";
/**
 * Unit Tests for FractalMath Engine
 *
 * Tests all core fractal detection and market structure analysis functions
 * using known data patterns and edge cases.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const FractalMath_1 = require("../../src/engine/FractalMath");
describe('FractalMath', () => {
    // Helper function to create test OHLCV data
    const createCandle = (timestamp, open, high, low, close, volume = 1000) => ({
        timestamp,
        open,
        high,
        low,
        close,
        volume
    });
    describe('detectFractals', () => {
        it('should detect swing high fractal', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102), // i=0
                createCandle(2, 102, 108, 98, 106), // i=1
                createCandle(3, 106, 115, 104, 112), // i=2 - Swing High (115 > all neighbors)
                createCandle(4, 112, 110, 105, 108), // i=3
                createCandle(5, 108, 109, 103, 107) // i=4
            ];
            const fractals = FractalMath_1.FractalMath.detectFractals(candles);
            expect(fractals).toHaveLength(1);
            expect(fractals[0].type).toBe('HIGH');
            expect(fractals[0].price).toBe(115);
            expect(fractals[0].barIndex).toBe(2);
            expect(fractals[0].confirmed).toBe(true);
        });
        it('should detect swing low fractal', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102), // i=0
                createCandle(2, 102, 108, 98, 106), // i=1
                createCandle(3, 106, 110, 85, 88), // i=2 - Swing Low (85 < all neighbors)
                createCandle(4, 88, 95, 87, 92), // i=3
                createCandle(5, 92, 96, 90, 94) // i=4
            ];
            const fractals = FractalMath_1.FractalMath.detectFractals(candles);
            // Should detect both high (110) and low (85) fractals at index 2
            expect(fractals).toHaveLength(2);
            const lowFractal = fractals.find(f => f.type === 'LOW');
            expect(lowFractal).toBeDefined();
            expect(lowFractal.price).toBe(85);
            expect(lowFractal.barIndex).toBe(2);
            expect(lowFractal.confirmed).toBe(true);
        });
        it('should detect both high and low fractals', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102), // i=0
                createCandle(2, 102, 108, 98, 106), // i=1
                createCandle(3, 106, 115, 104, 112), // i=2 - Swing High
                createCandle(4, 112, 110, 105, 108), // i=3
                createCandle(5, 108, 109, 103, 107), // i=4
                createCandle(6, 107, 110, 102, 105), // i=5
                createCandle(7, 105, 108, 85, 88), // i=6 - Swing Low
                createCandle(8, 88, 95, 87, 92), // i=7
                createCandle(9, 92, 96, 90, 94) // i=8
            ];
            const fractals = FractalMath_1.FractalMath.detectFractals(candles);
            expect(fractals).toHaveLength(2);
            expect(fractals[0].type).toBe('HIGH');
            expect(fractals[0].price).toBe(115);
            expect(fractals[1].type).toBe('LOW');
            expect(fractals[1].price).toBe(85);
        });
        it('should return empty array for insufficient candles', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102),
                createCandle(2, 102, 108, 98, 106)
            ];
            const fractals = FractalMath_1.FractalMath.detectFractals(candles);
            expect(fractals).toHaveLength(0);
        });
        it('should not detect fractal when pattern is not met', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102),
                createCandle(2, 102, 108, 98, 106),
                createCandle(3, 106, 110, 104, 108), // Not a fractal (110 not > 108)
                createCandle(4, 108, 112, 105, 110),
                createCandle(5, 110, 115, 108, 112)
            ];
            const fractals = FractalMath_1.FractalMath.detectFractals(candles);
            expect(fractals).toHaveLength(0);
        });
    });
    describe('detectBOS', () => {
        it('should detect bullish BOS when close breaks above swing high', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102),
                createCandle(2, 102, 108, 98, 106),
                createCandle(3, 106, 115, 104, 112), // Swing High at 115 (index 2)
                createCandle(4, 112, 110, 105, 108),
                createCandle(5, 108, 109, 103, 107),
                createCandle(6, 107, 120, 105, 118) // Close at 118 > 115 (BOS at index 5)
            ];
            const fractals = FractalMath_1.FractalMath.detectFractals(candles);
            console.log('Detected fractals:', fractals);
            const bosEvents = FractalMath_1.FractalMath.detectBOS(candles, fractals);
            console.log('BOS events:', bosEvents);
            expect(bosEvents).toHaveLength(1);
            expect(bosEvents[0].direction).toBe('BULLISH');
            expect(bosEvents[0].price).toBe(118);
            expect(bosEvents[0].fractalsBreached).toHaveLength(1);
            expect(bosEvents[0].fractalsBreached[0].price).toBe(115);
        });
        it('should detect bearish BOS when close breaks below swing low', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102),
                createCandle(2, 102, 108, 98, 106),
                createCandle(3, 106, 110, 85, 88), // Swing Low at 85
                createCandle(4, 88, 95, 87, 92),
                createCandle(5, 92, 96, 90, 94),
                createCandle(6, 94, 90, 80, 82) // Close at 82 < 85 (BOS)
            ];
            const fractals = FractalMath_1.FractalMath.detectFractals(candles);
            const bosEvents = FractalMath_1.FractalMath.detectBOS(candles, fractals);
            expect(bosEvents).toHaveLength(1);
            expect(bosEvents[0].direction).toBe('BEARISH');
            expect(bosEvents[0].price).toBe(82);
            expect(bosEvents[0].fractalsBreached).toHaveLength(1);
            expect(bosEvents[0].fractalsBreached[0].price).toBe(85);
        });
        it('should return empty array when no fractals provided', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102),
                createCandle(2, 102, 108, 98, 106)
            ];
            const bosEvents = FractalMath_1.FractalMath.detectBOS(candles, []);
            expect(bosEvents).toHaveLength(0);
        });
    });
    describe('detectMSS', () => {
        it('should detect bearish MSS when bullish trend reverses', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102),
                createCandle(2, 102, 108, 98, 106),
                createCandle(3, 106, 110, 85, 88), // Swing Low
                createCandle(4, 88, 95, 87, 92),
                createCandle(5, 92, 96, 90, 94),
                createCandle(6, 94, 90, 80, 82) // Bearish BOS
            ];
            const fractals = FractalMath_1.FractalMath.detectFractals(candles);
            const mss = FractalMath_1.FractalMath.detectMSS(candles, fractals, 'BULL');
            expect(mss).not.toBeNull();
            expect(mss.direction).toBe('BEARISH');
            expect(mss.price).toBe(82);
            expect(mss.significance).toBe(80);
        });
        it('should detect bullish MSS when bearish trend reverses', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102),
                createCandle(2, 102, 108, 98, 106),
                createCandle(3, 106, 115, 104, 112), // Swing High
                createCandle(4, 112, 110, 105, 108),
                createCandle(5, 108, 109, 103, 107),
                createCandle(6, 107, 120, 105, 118) // Bullish BOS
            ];
            const fractals = FractalMath_1.FractalMath.detectFractals(candles);
            const mss = FractalMath_1.FractalMath.detectMSS(candles, fractals, 'BEAR');
            expect(mss).not.toBeNull();
            expect(mss.direction).toBe('BULLISH');
            expect(mss.price).toBe(118);
            expect(mss.significance).toBe(80);
        });
        it('should return null when no MSS occurs', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102),
                createCandle(2, 102, 108, 98, 106),
                createCandle(3, 106, 115, 104, 112), // Swing High
                createCandle(4, 112, 110, 105, 108),
                createCandle(5, 108, 109, 103, 107),
                createCandle(6, 107, 120, 105, 118) // Bullish BOS (same direction as trend)
            ];
            const fractals = FractalMath_1.FractalMath.detectFractals(candles);
            const mss = FractalMath_1.FractalMath.detectMSS(candles, fractals, 'BULL'); // Same direction
            expect(mss).toBeNull();
        });
    });
    describe('calcDealingRange', () => {
        it('should calculate dealing range with premium/discount zones', () => {
            const fractals = [
                {
                    type: 'HIGH',
                    price: 120,
                    barIndex: 2,
                    timestamp: 1000,
                    confirmed: true
                },
                {
                    type: 'LOW',
                    price: 80,
                    barIndex: 6,
                    timestamp: 2000,
                    confirmed: true
                }
            ];
            const dealingRange = FractalMath_1.FractalMath.calcDealingRange(fractals);
            expect(dealingRange.high).toBe(120);
            expect(dealingRange.low).toBe(80);
            expect(dealingRange.range).toBe(40);
            expect(dealingRange.midpoint).toBe(100); // 80 + (40 * 0.5)
            expect(dealingRange.premiumThreshold).toBe(100);
            expect(dealingRange.discountThreshold).toBe(100);
        });
        it('should throw error when insufficient fractals', () => {
            expect(() => {
                FractalMath_1.FractalMath.calcDealingRange([]);
            }).toThrow('Insufficient fractals to calculate dealing range');
        });
        it('should handle multiple fractals and find highest/lowest', () => {
            const fractals = [
                { type: 'HIGH', price: 110, barIndex: 1, timestamp: 1000, confirmed: true },
                { type: 'HIGH', price: 125, barIndex: 3, timestamp: 2000, confirmed: true }, // Highest
                { type: 'HIGH', price: 115, barIndex: 5, timestamp: 3000, confirmed: true },
                { type: 'LOW', price: 85, barIndex: 2, timestamp: 1500, confirmed: true },
                { type: 'LOW', price: 75, barIndex: 4, timestamp: 2500, confirmed: true }, // Lowest
                { type: 'LOW', price: 90, barIndex: 6, timestamp: 3500, confirmed: true }
            ];
            const dealingRange = FractalMath_1.FractalMath.calcDealingRange(fractals);
            expect(dealingRange.high).toBe(125);
            expect(dealingRange.low).toBe(75);
            expect(dealingRange.range).toBe(50);
            expect(dealingRange.midpoint).toBe(100); // 75 + (50 * 0.5)
        });
    });
    describe('getTrendState', () => {
        it('should return BULL for consistent bullish BOS', () => {
            const bosEvents = [
                {
                    direction: 'BULLISH',
                    price: 105,
                    barIndex: 3,
                    timestamp: 1000,
                    fractalsBreached: []
                },
                {
                    direction: 'BULLISH',
                    price: 110,
                    barIndex: 6,
                    timestamp: 2000,
                    fractalsBreached: []
                },
                {
                    direction: 'BULLISH',
                    price: 115,
                    barIndex: 9,
                    timestamp: 3000,
                    fractalsBreached: []
                }
            ];
            const trendState = FractalMath_1.FractalMath.getTrendState(bosEvents);
            expect(trendState).toBe('BULL');
        });
        it('should return BEAR for consistent bearish BOS', () => {
            const bosEvents = [
                {
                    direction: 'BEARISH',
                    price: 95,
                    barIndex: 3,
                    timestamp: 1000,
                    fractalsBreached: []
                },
                {
                    direction: 'BEARISH',
                    price: 90,
                    barIndex: 6,
                    timestamp: 2000,
                    fractalsBreached: []
                },
                {
                    direction: 'BEARISH',
                    price: 85,
                    barIndex: 9,
                    timestamp: 3000,
                    fractalsBreached: []
                }
            ];
            const trendState = FractalMath_1.FractalMath.getTrendState(bosEvents);
            expect(trendState).toBe('BEAR');
        });
        it('should return RANGE for mixed BOS', () => {
            const bosEvents = [
                {
                    direction: 'BULLISH',
                    price: 105,
                    barIndex: 3,
                    timestamp: 1000,
                    fractalsBreached: []
                },
                {
                    direction: 'BEARISH',
                    price: 95,
                    barIndex: 6,
                    timestamp: 2000,
                    fractalsBreached: []
                }
            ];
            const trendState = FractalMath_1.FractalMath.getTrendState(bosEvents);
            expect(trendState).toBe('RANGE');
        });
        it('should return RANGE for insufficient BOS events', () => {
            const bosEvents = [
                {
                    direction: 'BULLISH',
                    price: 105,
                    barIndex: 3,
                    timestamp: 1000,
                    fractalsBreached: []
                }
            ];
            const trendState = FractalMath_1.FractalMath.getTrendState(bosEvents);
            expect(trendState).toBe('RANGE');
        });
    });
    describe('validateCandles', () => {
        it('should validate correct OHLCV data', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102),
                createCandle(2, 102, 108, 98, 106),
                createCandle(3, 106, 115, 104, 112),
                createCandle(4, 112, 118, 108, 115),
                createCandle(5, 115, 120, 112, 118)
            ];
            expect(() => FractalMath_1.FractalMath.validateCandles(candles)).not.toThrow();
        });
        it('should throw error for insufficient candles', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 102)
            ];
            expect(() => FractalMath_1.FractalMath.validateCandles(candles, 5)).toThrow('Insufficient candles');
        });
        it('should throw error for invalid high-low relationship', () => {
            const candles = [
                createCandle(1, 100, 95, 105, 102) // high < low
            ];
            expect(() => FractalMath_1.FractalMath.validateCandles(candles, 1)).toThrow('high (95) < low (105)');
        });
        it('should throw error for close outside high-low range', () => {
            const candles = [
                createCandle(1, 100, 105, 95, 110) // close > high
            ];
            expect(() => FractalMath_1.FractalMath.validateCandles(candles, 1)).toThrow('close (110) outside high-low range');
        });
    });
    describe('helper methods', () => {
        it('should get last fractal of specific type', () => {
            const fractals = [
                { type: 'HIGH', price: 110, barIndex: 1, timestamp: 1000, confirmed: true },
                { type: 'LOW', price: 85, barIndex: 2, timestamp: 1500, confirmed: true },
                { type: 'HIGH', price: 125, barIndex: 3, timestamp: 2000, confirmed: true }
            ];
            const lastHigh = FractalMath_1.FractalMath.getLastFractal(fractals, 'HIGH');
            const lastLow = FractalMath_1.FractalMath.getLastFractal(fractals, 'LOW');
            expect(lastHigh?.price).toBe(125);
            expect(lastLow?.price).toBe(85);
        });
        it('should determine price location in dealing range', () => {
            const dealingRange = {
                high: 120,
                low: 80,
                midpoint: 100,
                premiumThreshold: 100,
                discountThreshold: 100,
                range: 40
            };
            expect(FractalMath_1.FractalMath.getPriceLocation(115, dealingRange)).toBe('PREMIUM');
            expect(FractalMath_1.FractalMath.getPriceLocation(85, dealingRange)).toBe('DISCOUNT');
            expect(FractalMath_1.FractalMath.getPriceLocation(100, dealingRange)).toBe('EQUILIBRIUM');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvdGVzdHMvdW5pdC9GcmFjdGFsTWF0aC50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCw4REFBMkQ7QUFHM0QsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7SUFDM0IsNENBQTRDO0lBQzVDLE1BQU0sWUFBWSxHQUFHLENBQUMsU0FBaUIsRUFBRSxJQUFZLEVBQUUsSUFBWSxFQUFFLEdBQVcsRUFBRSxLQUFhLEVBQUUsU0FBaUIsSUFBSSxFQUFTLEVBQUUsQ0FBQyxDQUFDO1FBQ2pJLFNBQVM7UUFDVCxJQUFJO1FBQ0osSUFBSTtRQUNKLEdBQUc7UUFDSCxLQUFLO1FBQ0wsTUFBTTtLQUNQLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7UUFDOUIsRUFBRSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtZQUMxQyxNQUFNLE9BQU8sR0FBWTtnQkFDdkIsWUFBWSxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRyxNQUFNO2dCQUMzQyxZQUFZLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFHLE1BQU07Z0JBQzNDLFlBQVksQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUseUNBQXlDO2dCQUM5RSxZQUFZLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLE1BQU07Z0JBQzNDLFlBQVksQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUUsTUFBTTthQUM1QyxDQUFDO1lBRUYsTUFBTSxRQUFRLEdBQUcseUJBQVcsQ0FBQyxj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Q0FBQyxHQUFHLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDOUUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9pdmFuL0NvZGUvdHJhZGluZy90aXRhbi9zZXJ2aWNlcy90aXRhbi1waGFzZTItaHVudGVyL3Rlc3RzL3VuaXQvRnJhY3RhbE1hdGgudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaXQgVGVzdHMgZm9yIEZyYWN0YWxNYXRoIEVuZ2luZVxuICogXG4gKiBUZXN0cyBhbGwgY29yZSBmcmFjdGFsIGRldGVjdGlvbiBhbmQgbWFya2V0IHN0cnVjdHVyZSBhbmFseXNpcyBmdW5jdGlvbnNcbiAqIHVzaW5nIGtub3duIGRhdGEgcGF0dGVybnMgYW5kIGVkZ2UgY2FzZXMuXG4gKi9cblxuaW1wb3J0IHsgRnJhY3RhbE1hdGggfSBmcm9tICcuLi8uLi9zcmMvZW5naW5lL0ZyYWN0YWxNYXRoJztcbmltcG9ydCB7IE9ITENWLCBGcmFjdGFsLCBCT1MsIFRyZW5kU3RhdGUgfSBmcm9tICcuLi8uLi9zcmMvdHlwZXMnO1xuXG5kZXNjcmliZSgnRnJhY3RhbE1hdGgnLCAoKSA9PiB7XG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgdGVzdCBPSExDViBkYXRhXG4gIGNvbnN0IGNyZWF0ZUNhbmRsZSA9ICh0aW1lc3RhbXA6IG51bWJlciwgb3BlbjogbnVtYmVyLCBoaWdoOiBudW1iZXIsIGxvdzogbnVtYmVyLCBjbG9zZTogbnVtYmVyLCB2b2x1bWU6IG51bWJlciA9IDEwMDApOiBPSExDViA9PiAoe1xuICAgIHRpbWVzdGFtcCxcbiAgICBvcGVuLFxuICAgIGhpZ2gsXG4gICAgbG93LFxuICAgIGNsb3NlLFxuICAgIHZvbHVtZVxuICB9KTtcblxuICBkZXNjcmliZSgnZGV0ZWN0RnJhY3RhbHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3Qgc3dpbmcgaGlnaCBmcmFjdGFsJywgKCkgPT4ge1xuICAgICAgY29uc3QgY2FuZGxlczogT0hMQ1ZbXSA9IFtcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDEsIDEwMCwgMTA1LCA5NSwgMTAyKSwgIC8vIGk9MFxuICAgICAgICBjcmVhdGVDYW5kbGUoMiwgMTAyLCAxMDgsIDk4LCAxMDYpLCAgLy8gaT0xXG4gICAgICAgIGNyZWF0ZUNhbmRsZSgzLCAxMDYsIDExNSwgMTA0LCAxMTIpLCAvLyBpPTIgLSBTd2luZyBIaWdoICgxMTUgPiBhbGwgbmVpZ2hib3JzKVxuICAgICAgICBjcmVhdGVDYW5kbGUoNCwgMTEyLCAxMTAsIDEwNSwgMTA4KSwgLy8gaT0zXG4gICAgICAgIGNyZWF0ZUNhbmRsZSg1LCAxMDgsIDEwOSwgMTAzLCAxMDcpICAvLyBpPTRcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGZyYWN0YWxzID0gRnJhY3RhbE1hdGguZGV0ZWN0RnJhY3RhbHMoY2FuZGxlcyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChmcmFjdGFscykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KGZyYWN0YWxzWzBdLnR5cGUpLnRvQmUoJ0hJR0gnKTtcbiAgICAgIGV4cGVjdChmcmFjdGFsc1swXS5wcmljZSkudG9CZSgxMTUpO1xuICAgICAgZXhwZWN0KGZyYWN0YWxzWzBdLmJhckluZGV4KS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGZyYWN0YWxzWzBdLmNvbmZpcm1lZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IHN3aW5nIGxvdyBmcmFjdGFsJywgKCkgPT4ge1xuICAgICAgY29uc3QgY2FuZGxlczogT0hMQ1ZbXSA9IFtcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDEsIDEwMCwgMTA1LCA5NSwgMTAyKSwgIC8vIGk9MFxuICAgICAgICBjcmVhdGVDYW5kbGUoMiwgMTAyLCAxMDgsIDk4LCAxMDYpLCAgLy8gaT0xXG4gICAgICAgIGNyZWF0ZUNhbmRsZSgzLCAxMDYsIDExMCwgODUsIDg4KSwgICAvLyBpPTIgLSBTd2luZyBMb3cgKDg1IDwgYWxsIG5laWdoYm9ycylcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDQsIDg4LCA5NSwgODcsIDkyKSwgICAgIC8vIGk9M1xuICAgICAgICBjcmVhdGVDYW5kbGUoNSwgOTIsIDk2LCA5MCwgOTQpICAgICAgLy8gaT00XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBmcmFjdGFscyA9IEZyYWN0YWxNYXRoLmRldGVjdEZyYWN0YWxzKGNhbmRsZXMpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgZGV0ZWN0IGJvdGggaGlnaCAoMTEwKSBhbmQgbG93ICg4NSkgZnJhY3RhbHMgYXQgaW5kZXggMlxuICAgICAgZXhwZWN0KGZyYWN0YWxzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBjb25zdCBsb3dGcmFjdGFsID0gZnJhY3RhbHMuZmluZChmID0+IGYudHlwZSA9PT0gJ0xPVycpO1xuICAgICAgZXhwZWN0KGxvd0ZyYWN0YWwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobG93RnJhY3RhbCEucHJpY2UpLnRvQmUoODUpO1xuICAgICAgZXhwZWN0KGxvd0ZyYWN0YWwhLmJhckluZGV4KS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGxvd0ZyYWN0YWwhLmNvbmZpcm1lZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGJvdGggaGlnaCBhbmQgbG93IGZyYWN0YWxzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY2FuZGxlczogT0hMQ1ZbXSA9IFtcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDEsIDEwMCwgMTA1LCA5NSwgMTAyKSwgIC8vIGk9MFxuICAgICAgICBjcmVhdGVDYW5kbGUoMiwgMTAyLCAxMDgsIDk4LCAxMDYpLCAgLy8gaT0xXG4gICAgICAgIGNyZWF0ZUNhbmRsZSgzLCAxMDYsIDExNSwgMTA0LCAxMTIpLCAvLyBpPTIgLSBTd2luZyBIaWdoXG4gICAgICAgIGNyZWF0ZUNhbmRsZSg0LCAxMTIsIDExMCwgMTA1LCAxMDgpLCAvLyBpPTNcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDUsIDEwOCwgMTA5LCAxMDMsIDEwNyksIC8vIGk9NFxuICAgICAgICBjcmVhdGVDYW5kbGUoNiwgMTA3LCAxMTAsIDEwMiwgMTA1KSwgLy8gaT01XG4gICAgICAgIGNyZWF0ZUNhbmRsZSg3LCAxMDUsIDEwOCwgODUsIDg4KSwgICAvLyBpPTYgLSBTd2luZyBMb3dcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDgsIDg4LCA5NSwgODcsIDkyKSwgICAgIC8vIGk9N1xuICAgICAgICBjcmVhdGVDYW5kbGUoOSwgOTIsIDk2LCA5MCwgOTQpICAgICAgLy8gaT04XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBmcmFjdGFscyA9IEZyYWN0YWxNYXRoLmRldGVjdEZyYWN0YWxzKGNhbmRsZXMpO1xuICAgICAgXG4gICAgICBleHBlY3QoZnJhY3RhbHMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChmcmFjdGFsc1swXS50eXBlKS50b0JlKCdISUdIJyk7XG4gICAgICBleHBlY3QoZnJhY3RhbHNbMF0ucHJpY2UpLnRvQmUoMTE1KTtcbiAgICAgIGV4cGVjdChmcmFjdGFsc1sxXS50eXBlKS50b0JlKCdMT1cnKTtcbiAgICAgIGV4cGVjdChmcmFjdGFsc1sxXS5wcmljZSkudG9CZSg4NSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSBmb3IgaW5zdWZmaWNpZW50IGNhbmRsZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYW5kbGVzOiBPSExDVltdID0gW1xuICAgICAgICBjcmVhdGVDYW5kbGUoMSwgMTAwLCAxMDUsIDk1LCAxMDIpLFxuICAgICAgICBjcmVhdGVDYW5kbGUoMiwgMTAyLCAxMDgsIDk4LCAxMDYpXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBmcmFjdGFscyA9IEZyYWN0YWxNYXRoLmRldGVjdEZyYWN0YWxzKGNhbmRsZXMpO1xuICAgICAgZXhwZWN0KGZyYWN0YWxzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBkZXRlY3QgZnJhY3RhbCB3aGVuIHBhdHRlcm4gaXMgbm90IG1ldCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbmRsZXM6IE9ITENWW10gPSBbXG4gICAgICAgIGNyZWF0ZUNhbmRsZSgxLCAxMDAsIDEwNSwgOTUsIDEwMiksXG4gICAgICAgIGNyZWF0ZUNhbmRsZSgyLCAxMDIsIDEwOCwgOTgsIDEwNiksXG4gICAgICAgIGNyZWF0ZUNhbmRsZSgzLCAxMDYsIDExMCwgMTA0LCAxMDgpLCAvLyBOb3QgYSBmcmFjdGFsICgxMTAgbm90ID4gMTA4KVxuICAgICAgICBjcmVhdGVDYW5kbGUoNCwgMTA4LCAxMTIsIDEwNSwgMTEwKSxcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDUsIDExMCwgMTE1LCAxMDgsIDExMilcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGZyYWN0YWxzID0gRnJhY3RhbE1hdGguZGV0ZWN0RnJhY3RhbHMoY2FuZGxlcyk7XG4gICAgICBleHBlY3QoZnJhY3RhbHMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RldGVjdEJPUycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBidWxsaXNoIEJPUyB3aGVuIGNsb3NlIGJyZWFrcyBhYm92ZSBzd2luZyBoaWdoJywgKCkgPT4ge1xuICAgICAgY29uc3QgY2FuZGxlczogT0hMQ1ZbXSA9IFtcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDEsIDEwMCwgMTA1LCA5NSwgMTAyKSxcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDIsIDEwMiwgMTA4LCA5OCwgMTA2KSxcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDMsIDEwNiwgMTE1LCAxMDQsIDExMiksIC8vIFN3aW5nIEhpZ2ggYXQgMTE1IChpbmRleCAyKVxuICAgICAgICBjcmVhdGVDYW5kbGUoNCwgMTEyLCAxMTAsIDEwNSwgMTA4KSxcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDUsIDEwOCwgMTA5LCAxMDMsIDEwNyksXG4gICAgICAgIGNyZWF0ZUNhbmRsZSg2LCAxMDcsIDEyMCwgMTA1LCAxMTgpICAvLyBDbG9zZSBhdCAxMTggPiAxMTUgKEJPUyBhdCBpbmRleCA1KVxuICAgICAgXTtcblxuICAgICAgY29uc3QgZnJhY3RhbHMgPSBGcmFjdGFsTWF0aC5kZXRlY3RGcmFjdGFscyhjYW5kbGVzKTtcbiAgICAgIGNvbnNvbGUubG9nKCdEZXRlY3RlZCBmcmFjdGFsczonLCBmcmFjdGFscyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGJvc0V2ZW50cyA9IEZyYWN0YWxNYXRoLmRldGVjdEJPUyhjYW5kbGVzLCBmcmFjdGFscyk7XG4gICAgICBjb25zb2xlLmxvZygnQk9TIGV2ZW50czonLCBib3NFdmVudHMpO1xuICAgICAgXG4gICAgICBleHBlY3QoYm9zRXZlbnRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoYm9zRXZlbnRzWzBdLmRpcmVjdGlvbikudG9CZSgnQlVMTElTSCcpO1xuICAgICAgZXhwZWN0KGJvc0V2ZW50c1swXS5wcmljZSkudG9CZSgxMTgpO1xuICAgICAgZXhwZWN0KGJvc0V2ZW50c1swXS5mcmFjdGFsc0JyZWFjaGVkKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoYm9zRXZlbnRzWzBdLmZyYWN0YWxzQnJlYWNoZWRbMF0ucHJpY2UpLnRvQmUoMTE1KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGJlYXJpc2ggQk9TIHdoZW4gY2xvc2UgYnJlYWtzIGJlbG93IHN3aW5nIGxvdycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbmRsZXM6IE9ITENWW10gPSBbXG4gICAgICAgIGNyZWF0ZUNhbmRsZSgxLCAxMDAsIDEwNSwgOTUsIDEwMiksXG4gICAgICAgIGNyZWF0ZUNhbmRsZSgyLCAxMDIsIDEwOCwgOTgsIDEwNiksXG4gICAgICAgIGNyZWF0ZUNhbmRsZSgzLCAxMDYsIDExMCwgODUsIDg4KSwgICAvLyBTd2luZyBMb3cgYXQgODVcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDQsIDg4LCA5NSwgODcsIDkyKSxcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDUsIDkyLCA5NiwgOTAsIDk0KSxcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDYsIDk0LCA5MCwgODAsIDgyKSAgICAgIC8vIENsb3NlIGF0IDgyIDwgODUgKEJPUylcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGZyYWN0YWxzID0gRnJhY3RhbE1hdGguZGV0ZWN0RnJhY3RhbHMoY2FuZGxlcyk7XG4gICAgICBjb25zdCBib3NFdmVudHMgPSBGcmFjdGFsTWF0aC5kZXRlY3RCT1MoY2FuZGxlcywgZnJhY3RhbHMpO1xuICAgICAgXG4gICAgICBleHBlY3QoYm9zRXZlbnRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoYm9zRXZlbnRzWzBdLmRpcmVjdGlvbikudG9CZSgnQkVBUklTSCcpO1xuICAgICAgZXhwZWN0KGJvc0V2ZW50c1swXS5wcmljZSkudG9CZSg4Mik7XG4gICAgICBleHBlY3QoYm9zRXZlbnRzWzBdLmZyYWN0YWxzQnJlYWNoZWQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChib3NFdmVudHNbMF0uZnJhY3RhbHNCcmVhY2hlZFswXS5wcmljZSkudG9CZSg4NSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSB3aGVuIG5vIGZyYWN0YWxzIHByb3ZpZGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgY2FuZGxlczogT0hMQ1ZbXSA9IFtcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDEsIDEwMCwgMTA1LCA5NSwgMTAyKSxcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDIsIDEwMiwgMTA4LCA5OCwgMTA2KVxuICAgICAgXTtcblxuICAgICAgY29uc3QgYm9zRXZlbnRzID0gRnJhY3RhbE1hdGguZGV0ZWN0Qk9TKGNhbmRsZXMsIFtdKTtcbiAgICAgIGV4cGVjdChib3NFdmVudHMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RldGVjdE1TUycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBiZWFyaXNoIE1TUyB3aGVuIGJ1bGxpc2ggdHJlbmQgcmV2ZXJzZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYW5kbGVzOiBPSExDVltdID0gW1xuICAgICAgICBjcmVhdGVDYW5kbGUoMSwgMTAwLCAxMDUsIDk1LCAxMDIpLFxuICAgICAgICBjcmVhdGVDYW5kbGUoMiwgMTAyLCAxMDgsIDk4LCAxMDYpLFxuICAgICAgICBjcmVhdGVDYW5kbGUoMywgMTA2LCAxMTAsIDg1LCA4OCksICAgLy8gU3dpbmcgTG93XG4gICAgICAgIGNyZWF0ZUNhbmRsZSg0LCA4OCwgOTUsIDg3LCA5MiksXG4gICAgICAgIGNyZWF0ZUNhbmRsZSg1LCA5MiwgOTYsIDkwLCA5NCksXG4gICAgICAgIGNyZWF0ZUNhbmRsZSg2LCA5NCwgOTAsIDgwLCA4MikgICAgICAvLyBCZWFyaXNoIEJPU1xuICAgICAgXTtcblxuICAgICAgY29uc3QgZnJhY3RhbHMgPSBGcmFjdGFsTWF0aC5kZXRlY3RGcmFjdGFscyhjYW5kbGVzKTtcbiAgICAgIGNvbnN0IG1zcyA9IEZyYWN0YWxNYXRoLmRldGVjdE1TUyhjYW5kbGVzLCBmcmFjdGFscywgJ0JVTEwnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1zcykubm90LnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QobXNzIS5kaXJlY3Rpb24pLnRvQmUoJ0JFQVJJU0gnKTtcbiAgICAgIGV4cGVjdChtc3MhLnByaWNlKS50b0JlKDgyKTtcbiAgICAgIGV4cGVjdChtc3MhLnNpZ25pZmljYW5jZSkudG9CZSg4MCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBidWxsaXNoIE1TUyB3aGVuIGJlYXJpc2ggdHJlbmQgcmV2ZXJzZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYW5kbGVzOiBPSExDVltdID0gW1xuICAgICAgICBjcmVhdGVDYW5kbGUoMSwgMTAwLCAxMDUsIDk1LCAxMDIpLFxuICAgICAgICBjcmVhdGVDYW5kbGUoMiwgMTAyLCAxMDgsIDk4LCAxMDYpLFxuICAgICAgICBjcmVhdGVDYW5kbGUoMywgMTA2LCAxMTUsIDEwNCwgMTEyKSwgLy8gU3dpbmcgSGlnaFxuICAgICAgICBjcmVhdGVDYW5kbGUoNCwgMTEyLCAxMTAsIDEwNSwgMTA4KSxcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDUsIDEwOCwgMTA5LCAxMDMsIDEwNyksXG4gICAgICAgIGNyZWF0ZUNhbmRsZSg2LCAxMDcsIDEyMCwgMTA1LCAxMTgpICAvLyBCdWxsaXNoIEJPU1xuICAgICAgXTtcblxuICAgICAgY29uc3QgZnJhY3RhbHMgPSBGcmFjdGFsTWF0aC5kZXRlY3RGcmFjdGFscyhjYW5kbGVzKTtcbiAgICAgIGNvbnN0IG1zcyA9IEZyYWN0YWxNYXRoLmRldGVjdE1TUyhjYW5kbGVzLCBmcmFjdGFscywgJ0JFQVInKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1zcykubm90LnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QobXNzIS5kaXJlY3Rpb24pLnRvQmUoJ0JVTExJU0gnKTtcbiAgICAgIGV4cGVjdChtc3MhLnByaWNlKS50b0JlKDExOCk7XG4gICAgICBleHBlY3QobXNzIS5zaWduaWZpY2FuY2UpLnRvQmUoODApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCB3aGVuIG5vIE1TUyBvY2N1cnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYW5kbGVzOiBPSExDVltdID0gW1xuICAgICAgICBjcmVhdGVDYW5kbGUoMSwgMTAwLCAxMDUsIDk1LCAxMDIpLFxuICAgICAgICBjcmVhdGVDYW5kbGUoMiwgMTAyLCAxMDgsIDk4LCAxMDYpLFxuICAgICAgICBjcmVhdGVDYW5kbGUoMywgMTA2LCAxMTUsIDEwNCwgMTEyKSwgLy8gU3dpbmcgSGlnaFxuICAgICAgICBjcmVhdGVDYW5kbGUoNCwgMTEyLCAxMTAsIDEwNSwgMTA4KSxcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDUsIDEwOCwgMTA5LCAxMDMsIDEwNyksXG4gICAgICAgIGNyZWF0ZUNhbmRsZSg2LCAxMDcsIDEyMCwgMTA1LCAxMTgpICAvLyBCdWxsaXNoIEJPUyAoc2FtZSBkaXJlY3Rpb24gYXMgdHJlbmQpXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBmcmFjdGFscyA9IEZyYWN0YWxNYXRoLmRldGVjdEZyYWN0YWxzKGNhbmRsZXMpO1xuICAgICAgY29uc3QgbXNzID0gRnJhY3RhbE1hdGguZGV0ZWN0TVNTKGNhbmRsZXMsIGZyYWN0YWxzLCAnQlVMTCcpOyAvLyBTYW1lIGRpcmVjdGlvblxuICAgICAgXG4gICAgICBleHBlY3QobXNzKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY2FsY0RlYWxpbmdSYW5nZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBkZWFsaW5nIHJhbmdlIHdpdGggcHJlbWl1bS9kaXNjb3VudCB6b25lcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGZyYWN0YWxzOiBGcmFjdGFsW10gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAnSElHSCcsXG4gICAgICAgICAgcHJpY2U6IDEyMCxcbiAgICAgICAgICBiYXJJbmRleDogMixcbiAgICAgICAgICB0aW1lc3RhbXA6IDEwMDAsXG4gICAgICAgICAgY29uZmlybWVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAnTE9XJyxcbiAgICAgICAgICBwcmljZTogODAsXG4gICAgICAgICAgYmFySW5kZXg6IDYsXG4gICAgICAgICAgdGltZXN0YW1wOiAyMDAwLFxuICAgICAgICAgIGNvbmZpcm1lZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBkZWFsaW5nUmFuZ2UgPSBGcmFjdGFsTWF0aC5jYWxjRGVhbGluZ1JhbmdlKGZyYWN0YWxzKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGRlYWxpbmdSYW5nZS5oaWdoKS50b0JlKDEyMCk7XG4gICAgICBleHBlY3QoZGVhbGluZ1JhbmdlLmxvdykudG9CZSg4MCk7XG4gICAgICBleHBlY3QoZGVhbGluZ1JhbmdlLnJhbmdlKS50b0JlKDQwKTtcbiAgICAgIGV4cGVjdChkZWFsaW5nUmFuZ2UubWlkcG9pbnQpLnRvQmUoMTAwKTsgLy8gODAgKyAoNDAgKiAwLjUpXG4gICAgICBleHBlY3QoZGVhbGluZ1JhbmdlLnByZW1pdW1UaHJlc2hvbGQpLnRvQmUoMTAwKTtcbiAgICAgIGV4cGVjdChkZWFsaW5nUmFuZ2UuZGlzY291bnRUaHJlc2hvbGQpLnRvQmUoMTAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBpbnN1ZmZpY2llbnQgZnJhY3RhbHMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBGcmFjdGFsTWF0aC5jYWxjRGVhbGluZ1JhbmdlKFtdKTtcbiAgICAgIH0pLnRvVGhyb3coJ0luc3VmZmljaWVudCBmcmFjdGFscyB0byBjYWxjdWxhdGUgZGVhbGluZyByYW5nZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbXVsdGlwbGUgZnJhY3RhbHMgYW5kIGZpbmQgaGlnaGVzdC9sb3dlc3QnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmcmFjdGFsczogRnJhY3RhbFtdID0gW1xuICAgICAgICB7IHR5cGU6ICdISUdIJywgcHJpY2U6IDExMCwgYmFySW5kZXg6IDEsIHRpbWVzdGFtcDogMTAwMCwgY29uZmlybWVkOiB0cnVlIH0sXG4gICAgICAgIHsgdHlwZTogJ0hJR0gnLCBwcmljZTogMTI1LCBiYXJJbmRleDogMywgdGltZXN0YW1wOiAyMDAwLCBjb25maXJtZWQ6IHRydWUgfSwgLy8gSGlnaGVzdFxuICAgICAgICB7IHR5cGU6ICdISUdIJywgcHJpY2U6IDExNSwgYmFySW5kZXg6IDUsIHRpbWVzdGFtcDogMzAwMCwgY29uZmlybWVkOiB0cnVlIH0sXG4gICAgICAgIHsgdHlwZTogJ0xPVycsIHByaWNlOiA4NSwgYmFySW5kZXg6IDIsIHRpbWVzdGFtcDogMTUwMCwgY29uZmlybWVkOiB0cnVlIH0sXG4gICAgICAgIHsgdHlwZTogJ0xPVycsIHByaWNlOiA3NSwgYmFySW5kZXg6IDQsIHRpbWVzdGFtcDogMjUwMCwgY29uZmlybWVkOiB0cnVlIH0sICAvLyBMb3dlc3RcbiAgICAgICAgeyB0eXBlOiAnTE9XJywgcHJpY2U6IDkwLCBiYXJJbmRleDogNiwgdGltZXN0YW1wOiAzNTAwLCBjb25maXJtZWQ6IHRydWUgfVxuICAgICAgXTtcblxuICAgICAgY29uc3QgZGVhbGluZ1JhbmdlID0gRnJhY3RhbE1hdGguY2FsY0RlYWxpbmdSYW5nZShmcmFjdGFscyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChkZWFsaW5nUmFuZ2UuaGlnaCkudG9CZSgxMjUpO1xuICAgICAgZXhwZWN0KGRlYWxpbmdSYW5nZS5sb3cpLnRvQmUoNzUpO1xuICAgICAgZXhwZWN0KGRlYWxpbmdSYW5nZS5yYW5nZSkudG9CZSg1MCk7XG4gICAgICBleHBlY3QoZGVhbGluZ1JhbmdlLm1pZHBvaW50KS50b0JlKDEwMCk7IC8vIDc1ICsgKDUwICogMC41KVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0VHJlbmRTdGF0ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBCVUxMIGZvciBjb25zaXN0ZW50IGJ1bGxpc2ggQk9TJywgKCkgPT4ge1xuICAgICAgY29uc3QgYm9zRXZlbnRzOiBCT1NbXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGRpcmVjdGlvbjogJ0JVTExJU0gnLFxuICAgICAgICAgIHByaWNlOiAxMDUsXG4gICAgICAgICAgYmFySW5kZXg6IDMsXG4gICAgICAgICAgdGltZXN0YW1wOiAxMDAwLFxuICAgICAgICAgIGZyYWN0YWxzQnJlYWNoZWQ6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBkaXJlY3Rpb246ICdCVUxMSVNIJyxcbiAgICAgICAgICBwcmljZTogMTEwLFxuICAgICAgICAgIGJhckluZGV4OiA2LFxuICAgICAgICAgIHRpbWVzdGFtcDogMjAwMCxcbiAgICAgICAgICBmcmFjdGFsc0JyZWFjaGVkOiBbXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZGlyZWN0aW9uOiAnQlVMTElTSCcsXG4gICAgICAgICAgcHJpY2U6IDExNSxcbiAgICAgICAgICBiYXJJbmRleDogOSxcbiAgICAgICAgICB0aW1lc3RhbXA6IDMwMDAsXG4gICAgICAgICAgZnJhY3RhbHNCcmVhY2hlZDogW11cbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgY29uc3QgdHJlbmRTdGF0ZSA9IEZyYWN0YWxNYXRoLmdldFRyZW5kU3RhdGUoYm9zRXZlbnRzKTtcbiAgICAgIGV4cGVjdCh0cmVuZFN0YXRlKS50b0JlKCdCVUxMJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBCRUFSIGZvciBjb25zaXN0ZW50IGJlYXJpc2ggQk9TJywgKCkgPT4ge1xuICAgICAgY29uc3QgYm9zRXZlbnRzOiBCT1NbXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGRpcmVjdGlvbjogJ0JFQVJJU0gnLFxuICAgICAgICAgIHByaWNlOiA5NSxcbiAgICAgICAgICBiYXJJbmRleDogMyxcbiAgICAgICAgICB0aW1lc3RhbXA6IDEwMDAsXG4gICAgICAgICAgZnJhY3RhbHNCcmVhY2hlZDogW11cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGRpcmVjdGlvbjogJ0JFQVJJU0gnLFxuICAgICAgICAgIHByaWNlOiA5MCxcbiAgICAgICAgICBiYXJJbmRleDogNixcbiAgICAgICAgICB0aW1lc3RhbXA6IDIwMDAsXG4gICAgICAgICAgZnJhY3RhbHNCcmVhY2hlZDogW11cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGRpcmVjdGlvbjogJ0JFQVJJU0gnLFxuICAgICAgICAgIHByaWNlOiA4NSxcbiAgICAgICAgICBiYXJJbmRleDogOSxcbiAgICAgICAgICB0aW1lc3RhbXA6IDMwMDAsXG4gICAgICAgICAgZnJhY3RhbHNCcmVhY2hlZDogW11cbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgY29uc3QgdHJlbmRTdGF0ZSA9IEZyYWN0YWxNYXRoLmdldFRyZW5kU3RhdGUoYm9zRXZlbnRzKTtcbiAgICAgIGV4cGVjdCh0cmVuZFN0YXRlKS50b0JlKCdCRUFSJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBSQU5HRSBmb3IgbWl4ZWQgQk9TJywgKCkgPT4ge1xuICAgICAgY29uc3QgYm9zRXZlbnRzOiBCT1NbXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGRpcmVjdGlvbjogJ0JVTExJU0gnLFxuICAgICAgICAgIHByaWNlOiAxMDUsXG4gICAgICAgICAgYmFySW5kZXg6IDMsXG4gICAgICAgICAgdGltZXN0YW1wOiAxMDAwLFxuICAgICAgICAgIGZyYWN0YWxzQnJlYWNoZWQ6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBkaXJlY3Rpb246ICdCRUFSSVNIJyxcbiAgICAgICAgICBwcmljZTogOTUsXG4gICAgICAgICAgYmFySW5kZXg6IDYsXG4gICAgICAgICAgdGltZXN0YW1wOiAyMDAwLFxuICAgICAgICAgIGZyYWN0YWxzQnJlYWNoZWQ6IFtdXG4gICAgICAgIH1cbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHRyZW5kU3RhdGUgPSBGcmFjdGFsTWF0aC5nZXRUcmVuZFN0YXRlKGJvc0V2ZW50cyk7XG4gICAgICBleHBlY3QodHJlbmRTdGF0ZSkudG9CZSgnUkFOR0UnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFJBTkdFIGZvciBpbnN1ZmZpY2llbnQgQk9TIGV2ZW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGJvc0V2ZW50czogQk9TW10gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBkaXJlY3Rpb246ICdCVUxMSVNIJyxcbiAgICAgICAgICBwcmljZTogMTA1LFxuICAgICAgICAgIGJhckluZGV4OiAzLFxuICAgICAgICAgIHRpbWVzdGFtcDogMTAwMCxcbiAgICAgICAgICBmcmFjdGFsc0JyZWFjaGVkOiBbXVxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCB0cmVuZFN0YXRlID0gRnJhY3RhbE1hdGguZ2V0VHJlbmRTdGF0ZShib3NFdmVudHMpO1xuICAgICAgZXhwZWN0KHRyZW5kU3RhdGUpLnRvQmUoJ1JBTkdFJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd2YWxpZGF0ZUNhbmRsZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjb3JyZWN0IE9ITENWIGRhdGEnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYW5kbGVzOiBPSExDVltdID0gW1xuICAgICAgICBjcmVhdGVDYW5kbGUoMSwgMTAwLCAxMDUsIDk1LCAxMDIpLFxuICAgICAgICBjcmVhdGVDYW5kbGUoMiwgMTAyLCAxMDgsIDk4LCAxMDYpLFxuICAgICAgICBjcmVhdGVDYW5kbGUoMywgMTA2LCAxMTUsIDEwNCwgMTEyKSxcbiAgICAgICAgY3JlYXRlQ2FuZGxlKDQsIDExMiwgMTE4LCAxMDgsIDExNSksXG4gICAgICAgIGNyZWF0ZUNhbmRsZSg1LCAxMTUsIDEyMCwgMTEyLCAxMTgpXG4gICAgICBdO1xuXG4gICAgICBleHBlY3QoKCkgPT4gRnJhY3RhbE1hdGgudmFsaWRhdGVDYW5kbGVzKGNhbmRsZXMpKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3IgaW5zdWZmaWNpZW50IGNhbmRsZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYW5kbGVzOiBPSExDVltdID0gW1xuICAgICAgICBjcmVhdGVDYW5kbGUoMSwgMTAwLCAxMDUsIDk1LCAxMDIpXG4gICAgICBdO1xuXG4gICAgICBleHBlY3QoKCkgPT4gRnJhY3RhbE1hdGgudmFsaWRhdGVDYW5kbGVzKGNhbmRsZXMsIDUpKS50b1Rocm93KCdJbnN1ZmZpY2llbnQgY2FuZGxlcycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3IgaW52YWxpZCBoaWdoLWxvdyByZWxhdGlvbnNoaXAnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYW5kbGVzOiBPSExDVltdID0gW1xuICAgICAgICBjcmVhdGVDYW5kbGUoMSwgMTAwLCA5NSwgMTA1LCAxMDIpIC8vIGhpZ2ggPCBsb3dcbiAgICAgIF07XG5cbiAgICAgIGV4cGVjdCgoKSA9PiBGcmFjdGFsTWF0aC52YWxpZGF0ZUNhbmRsZXMoY2FuZGxlcywgMSkpLnRvVGhyb3coJ2hpZ2ggKDk1KSA8IGxvdyAoMTA1KScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3IgY2xvc2Ugb3V0c2lkZSBoaWdoLWxvdyByYW5nZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbmRsZXM6IE9ITENWW10gPSBbXG4gICAgICAgIGNyZWF0ZUNhbmRsZSgxLCAxMDAsIDEwNSwgOTUsIDExMCkgLy8gY2xvc2UgPiBoaWdoXG4gICAgICBdO1xuXG4gICAgICBleHBlY3QoKCkgPT4gRnJhY3RhbE1hdGgudmFsaWRhdGVDYW5kbGVzKGNhbmRsZXMsIDEpKS50b1Rocm93KCdjbG9zZSAoMTEwKSBvdXRzaWRlIGhpZ2gtbG93IHJhbmdlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdoZWxwZXIgbWV0aG9kcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCBsYXN0IGZyYWN0YWwgb2Ygc3BlY2lmaWMgdHlwZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGZyYWN0YWxzOiBGcmFjdGFsW10gPSBbXG4gICAgICAgIHsgdHlwZTogJ0hJR0gnLCBwcmljZTogMTEwLCBiYXJJbmRleDogMSwgdGltZXN0YW1wOiAxMDAwLCBjb25maXJtZWQ6IHRydWUgfSxcbiAgICAgICAgeyB0eXBlOiAnTE9XJywgcHJpY2U6IDg1LCBiYXJJbmRleDogMiwgdGltZXN0YW1wOiAxNTAwLCBjb25maXJtZWQ6IHRydWUgfSxcbiAgICAgICAgeyB0eXBlOiAnSElHSCcsIHByaWNlOiAxMjUsIGJhckluZGV4OiAzLCB0aW1lc3RhbXA6IDIwMDAsIGNvbmZpcm1lZDogdHJ1ZSB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBsYXN0SGlnaCA9IEZyYWN0YWxNYXRoLmdldExhc3RGcmFjdGFsKGZyYWN0YWxzLCAnSElHSCcpO1xuICAgICAgY29uc3QgbGFzdExvdyA9IEZyYWN0YWxNYXRoLmdldExhc3RGcmFjdGFsKGZyYWN0YWxzLCAnTE9XJyk7XG5cbiAgICAgIGV4cGVjdChsYXN0SGlnaD8ucHJpY2UpLnRvQmUoMTI1KTtcbiAgICAgIGV4cGVjdChsYXN0TG93Py5wcmljZSkudG9CZSg4NSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVybWluZSBwcmljZSBsb2NhdGlvbiBpbiBkZWFsaW5nIHJhbmdlJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVhbGluZ1JhbmdlID0ge1xuICAgICAgICBoaWdoOiAxMjAsXG4gICAgICAgIGxvdzogODAsXG4gICAgICAgIG1pZHBvaW50OiAxMDAsXG4gICAgICAgIHByZW1pdW1UaHJlc2hvbGQ6IDEwMCxcbiAgICAgICAgZGlzY291bnRUaHJlc2hvbGQ6IDEwMCxcbiAgICAgICAgcmFuZ2U6IDQwXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoRnJhY3RhbE1hdGguZ2V0UHJpY2VMb2NhdGlvbigxMTUsIGRlYWxpbmdSYW5nZSkpLnRvQmUoJ1BSRU1JVU0nKTtcbiAgICAgIGV4cGVjdChGcmFjdGFsTWF0aC5nZXRQcmljZUxvY2F0aW9uKDg1LCBkZWFsaW5nUmFuZ2UpKS50b0JlKCdESVNDT1VOVCcpO1xuICAgICAgZXhwZWN0KEZyYWN0YWxNYXRoLmdldFByaWNlTG9jYXRpb24oMTAwLCBkZWFsaW5nUmFuZ2UpKS50b0JlKCdFUVVJTElCUklVTScpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==