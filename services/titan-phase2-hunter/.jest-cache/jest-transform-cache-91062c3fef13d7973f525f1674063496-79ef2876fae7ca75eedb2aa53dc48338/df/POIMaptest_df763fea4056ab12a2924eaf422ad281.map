{"file":"/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/unit/POIMap.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/unit/POIMap.test.ts"],"sourcesContent":["/**\n * POI Map Component Tests\n * Tests for the POI Map display component\n */\n\nimport { POIMapComponent, POIEntry } from '../../src/console/POIMap';\n\ndescribe('POIMapComponent', () => {\n  let component: POIMapComponent;\n\n  beforeEach(() => {\n    component = new POIMapComponent();\n  });\n\n  describe('render', () => {\n    it('should render header and empty lines when no POIs', () => {\n      const lines = component.render();\n      \n      expect(lines).toHaveLength(9); // 1 header + 8 data lines\n      expect(lines[0]).toBe('Type      Price     Dist   Conf');\n      expect(lines[1]).toBe(''.padEnd(31));\n    });\n\n    it('should render POI entries correctly', () => {\n      const pois: POIEntry[] = [\n        {\n          id: 'OB_1',\n          type: 'ORDER_BLOCK',\n          direction: 'BULLISH',\n          price: 50000,\n          distance: 0.3,\n          confidence: 85,\n          age: 2,\n          mitigated: false,\n          strength: 90\n        },\n        {\n          id: 'FVG_1',\n          type: 'FVG',\n          direction: 'BEARISH',\n          price: 49500,\n          distance: -1.2,\n          confidence: 75,\n          age: 1,\n          mitigated: false,\n          strength: 80\n        }\n      ];\n\n      component.updateConfig({ pois });\n      const lines = component.render();\n\n      expect(lines).toHaveLength(9);\n      expect(lines[0]).toBe('Type      Price     Dist   Conf');\n      expect(lines[1]).toContain('OB-BULL');\n      expect(lines[1]).toContain('50,000');\n      expect(lines[1]).toContain('+0.3%');\n      expect(lines[1]).toContain('85%');\n      expect(lines[2]).toContain('FVG-BEAR');\n      expect(lines[2]).toContain('49,500');\n      expect(lines[2]).toContain('-1.2%');\n      expect(lines[2]).toContain('75%');\n    });\n\n    it('should sort POIs by distance (closest first)', () => {\n      const pois: POIEntry[] = [\n        {\n          id: 'POI_1',\n          type: 'ORDER_BLOCK',\n          direction: 'BULLISH',\n          price: 50000,\n          distance: 2.5, // Far\n          confidence: 80,\n          age: 1,\n          mitigated: false,\n          strength: 85\n        },\n        {\n          id: 'POI_2',\n          type: 'FVG',\n          direction: 'BEARISH',\n          price: 49800,\n          distance: 0.2, // Close\n          confidence: 90,\n          age: 0.5,\n          mitigated: false,\n          strength: 95\n        }\n      ];\n\n      component.updateConfig({ pois });\n      const lines = component.render();\n\n      // FVG should be first (closer distance)\n      expect(lines[1]).toContain('FVG-BEAR');\n      expect(lines[1]).toContain('+0.2%');\n      // Order Block should be second (farther distance)\n      expect(lines[2]).toContain('OB-BULL');\n      expect(lines[2]).toContain('+2.5%');\n    });\n\n    it('should limit display to 8 POIs', () => {\n      const pois: POIEntry[] = Array.from({ length: 12 }, (_, i) => ({\n        id: `POI_${i}`,\n        type: 'ORDER_BLOCK' as const,\n        direction: 'BULLISH' as const,\n        price: 50000 + i * 100,\n        distance: i * 0.1,\n        confidence: 80,\n        age: 1,\n        mitigated: false,\n        strength: 85\n      }));\n\n      component.updateConfig({ pois });\n      const lines = component.render();\n\n      expect(lines).toHaveLength(9); // 1 header + 8 data lines\n      \n      // Check that only 8 POIs are displayed (plus header)\n      let nonEmptyLines = 0;\n      for (let i = 1; i < lines.length; i++) {\n        if (lines[i].trim() !== '') {\n          nonEmptyLines++;\n        }\n      }\n      expect(nonEmptyLines).toBe(8);\n    });\n  });\n\n  describe('color coding', () => {\n    it('should use red color for very close POIs (< 0.5%)', () => {\n      const pois: POIEntry[] = [\n        {\n          id: 'CLOSE_POI',\n          type: 'ORDER_BLOCK',\n          direction: 'BULLISH',\n          price: 50000,\n          distance: 0.3, // < 0.5%\n          confidence: 85,\n          age: 1,\n          mitigated: false,\n          strength: 90\n        }\n      ];\n\n      component.updateConfig({ pois });\n      const lines = component.render();\n\n      // Should contain red color code\n      expect(lines[1]).toContain('\\x1b[31m'); // Red color\n    });\n\n    it('should use yellow color for close POIs (< 2%)', () => {\n      const pois: POIEntry[] = [\n        {\n          id: 'CLOSE_POI',\n          type: 'ORDER_BLOCK',\n          direction: 'BULLISH',\n          price: 50000,\n          distance: 1.5, // < 2%\n          confidence: 75,\n          age: 1,\n          mitigated: false,\n          strength: 80\n        }\n      ];\n\n      component.updateConfig({ pois });\n      const lines = component.render();\n\n      // Should contain yellow color code\n      expect(lines[1]).toContain('\\x1b[33m'); // Yellow color\n    });\n\n    it('should use white color for far POIs (>= 2%)', () => {\n      const pois: POIEntry[] = [\n        {\n          id: 'FAR_POI',\n          type: 'ORDER_BLOCK',\n          direction: 'BULLISH',\n          price: 50000,\n          distance: 3.0, // >= 2%\n          confidence: 70,\n          age: 1,\n          mitigated: false,\n          strength: 75\n        }\n      ];\n\n      component.updateConfig({ pois });\n      const lines = component.render();\n\n      // Should contain white color code\n      expect(lines[1]).toContain('\\x1b[37m'); // White color\n    });\n  });\n\n  describe('formatting', () => {\n    it('should format POI types correctly', () => {\n      const pois: POIEntry[] = [\n        {\n          id: 'OB_1',\n          type: 'ORDER_BLOCK',\n          direction: 'BULLISH',\n          price: 50000,\n          distance: 0.5,\n          confidence: 80,\n          age: 1,\n          mitigated: false,\n          strength: 85\n        },\n        {\n          id: 'FVG_1',\n          type: 'FVG',\n          direction: 'BEARISH',\n          price: 49500,\n          distance: -0.8,\n          confidence: 75,\n          age: 1,\n          mitigated: false,\n          strength: 80\n        },\n        {\n          id: 'LIQ_1',\n          type: 'LIQUIDITY_POOL',\n          direction: 'BULLISH',\n          price: 50200,\n          distance: 1.2,\n          confidence: 90,\n          age: 0.5,\n          mitigated: false,\n          strength: 95,\n          volume: 1000000\n        }\n      ];\n\n      component.updateConfig({ pois });\n      const lines = component.render();\n\n      expect(lines[1]).toContain('OB-BULL');\n      expect(lines[2]).toContain('FVG-BEAR');\n      expect(lines[3]).toContain('LIQ-BULL');\n    });\n\n    it('should format prices correctly', () => {\n      const pois: POIEntry[] = [\n        {\n          id: 'HIGH_PRICE',\n          type: 'ORDER_BLOCK',\n          direction: 'BULLISH',\n          price: 50000, // Should show as 50,000\n          distance: 0.5,\n          confidence: 80,\n          age: 1,\n          mitigated: false,\n          strength: 85\n        },\n        {\n          id: 'LOW_PRICE',\n          type: 'FVG',\n          direction: 'BEARISH',\n          price: 1.2345, // Should show as 1.23\n          distance: -0.8,\n          confidence: 75,\n          age: 1,\n          mitigated: false,\n          strength: 80\n        },\n        {\n          id: 'VERY_LOW_PRICE',\n          type: 'LIQUIDITY_POOL',\n          direction: 'BULLISH',\n          price: 0.001234, // Should show as 0.0012\n          distance: 1.2,\n          confidence: 90,\n          age: 0.5,\n          mitigated: false,\n          strength: 95\n        }\n      ];\n\n      component.updateConfig({ pois });\n      const lines = component.render();\n\n      expect(lines[1]).toContain('50,000');\n      expect(lines[2]).toContain('1.23');\n      expect(lines[3]).toContain('0.0012');\n    });\n\n    it('should format distances with correct signs', () => {\n      const pois: POIEntry[] = [\n        {\n          id: 'POSITIVE_DIST',\n          type: 'ORDER_BLOCK',\n          direction: 'BULLISH',\n          price: 50000,\n          distance: 1.5,\n          confidence: 80,\n          age: 1,\n          mitigated: false,\n          strength: 85\n        },\n        {\n          id: 'NEGATIVE_DIST',\n          type: 'FVG',\n          direction: 'BEARISH',\n          price: 49500,\n          distance: -2.3,\n          confidence: 75,\n          age: 1,\n          mitigated: false,\n          strength: 80\n        }\n      ];\n\n      component.updateConfig({ pois });\n      const lines = component.render();\n\n      expect(lines[1]).toContain('+1.5%');\n      expect(lines[2]).toContain('-2.3%');\n    });\n  });\n\n  describe('updateConfig', () => {\n    it('should update POI list correctly', () => {\n      const initialPOIs: POIEntry[] = [\n        {\n          id: 'POI_1',\n          type: 'ORDER_BLOCK',\n          direction: 'BULLISH',\n          price: 50000,\n          distance: 1.0,\n          confidence: 80,\n          age: 1,\n          mitigated: false,\n          strength: 85\n        }\n      ];\n\n      component.updateConfig({ pois: initialPOIs });\n      let lines = component.render();\n      expect(lines[1]).toContain('OB-BULL');\n\n      const updatedPOIs: POIEntry[] = [\n        {\n          id: 'POI_2',\n          type: 'FVG',\n          direction: 'BEARISH',\n          price: 49500,\n          distance: -0.5,\n          confidence: 90,\n          age: 0.5,\n          mitigated: false,\n          strength: 95\n        }\n      ];\n\n      component.updateConfig({ pois: updatedPOIs });\n      lines = component.render();\n      expect(lines[1]).toContain('FVG-BEAR');\n      expect(lines[1]).not.toContain('OB-BULL');\n    });\n  });\n});"],"version":3}