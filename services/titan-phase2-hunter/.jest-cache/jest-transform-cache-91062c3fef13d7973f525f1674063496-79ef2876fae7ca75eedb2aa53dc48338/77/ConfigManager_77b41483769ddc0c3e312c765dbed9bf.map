{"file":"/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/src/config/ConfigManager.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/src/config/ConfigManager.ts"],"sourcesContent":["/**\n * Configuration Manager for Titan Phase 2 - The Hunter\n * \n * Provides runtime configuration management with hot-reload support,\n * default values, and validation for Phase 2 specific settings.\n * \n * Requirements: 18.1-18.8 (Runtime Configuration)\n */\n\nimport { EventEmitter } from 'events';\nimport { writeFileSync, readFileSync, existsSync, watchFile, unwatchFile, mkdirSync } from 'fs';\nimport { join, dirname } from 'path';\n\n/**\n * Alignment weight configuration\n */\nexport interface AlignmentWeights {\n  daily: number;    // 30-60%\n  h4: number;       // 20-40%\n  m15: number;      // 10-30%\n}\n\n/**\n * Relative Strength configuration\n */\nexport interface RSConfig {\n  threshold: number;      // 0-5%\n  lookbackPeriod: number; // 2-8 hours\n}\n\n/**\n * Risk management configuration\n */\nexport interface RiskConfig {\n  maxLeverage: number;      // 3-5x\n  stopLossPercent: number;  // 1-3%\n  targetPercent: number;    // 3-6%\n}\n\n/**\n * Portfolio management configuration\n */\nexport interface PortfolioConfig {\n  maxConcurrentPositions: number; // 3-8\n  maxPortfolioHeat: number;       // 10-20%\n  correlationThreshold: number;   // 0.6-0.9\n}\n\n/**\n * Complete Phase 2 configuration\n */\nexport interface Phase2Config {\n  alignmentWeights: AlignmentWeights;\n  rsConfig: RSConfig;\n  riskConfig: RiskConfig;\n  portfolioConfig: PortfolioConfig;\n  version: number;\n  lastModified: number;\n}\n\n/**\n * Configuration validation result\n */\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n}\n\n/**\n * Configuration change event\n */\nexport interface ConfigChangeEvent {\n  section: keyof Phase2Config;\n  oldValue: any;\n  newValue: any;\n  timestamp: number;\n}\n\n/**\n * Default configuration values\n */\nconst DEFAULT_CONFIG: Phase2Config = {\n  alignmentWeights: {\n    daily: 50,    // 50%\n    h4: 30,       // 30%\n    m15: 20       // 20%\n  },\n  rsConfig: {\n    threshold: 2,         // 2%\n    lookbackPeriod: 4     // 4 hours\n  },\n  riskConfig: {\n    maxLeverage: 5,       // 5x\n    stopLossPercent: 1.5, // 1.5%\n    targetPercent: 4.5    // 4.5% (3:1 R:R)\n  },\n  portfolioConfig: {\n    maxConcurrentPositions: 5,  // 5 positions\n    maxPortfolioHeat: 15,       // 15%\n    correlationThreshold: 0.7   // 0.7\n  },\n  version: 1,\n  lastModified: Date.now()\n};\n\n/**\n * Configuration Manager for Phase 2\n */\nexport class ConfigManager extends EventEmitter {\n  private config: Phase2Config;\n  private configPath: string;\n  private isWatching: boolean = false;\n\n  constructor(configDirectory: string = './config') {\n    super();\n    this.configPath = join(configDirectory, 'phase2.config.json');\n    this.config = this.loadConfig();\n  }\n\n  /**\n   * Load configuration from file with defaults\n   * Requirement 18.8: Load default configuration if file is corrupted\n   */\n  loadConfig(): Phase2Config {\n    try {\n      if (!existsSync(this.configPath)) {\n        console.log('üìã No config file found, creating default configuration');\n        this.saveConfig(DEFAULT_CONFIG);\n        return { ...DEFAULT_CONFIG };\n      }\n\n      const fileContent = readFileSync(this.configPath, 'utf8');\n      const loadedConfig = JSON.parse(fileContent) as Phase2Config;\n\n      // Validate loaded configuration\n      const validation = this.validateConfig(loadedConfig);\n      if (!validation.isValid) {\n        console.error('‚ùå CONFIG_CORRUPTED: Invalid configuration file');\n        console.error('Errors:', validation.errors);\n        console.log('üìã Loading default configuration');\n        \n        // Backup corrupted config\n        const backupPath = `${this.configPath}.corrupted.${Date.now()}`;\n        writeFileSync(backupPath, fileContent);\n        console.log(`üíæ Corrupted config backed up to: ${backupPath}`);\n        \n        // Load defaults\n        this.saveConfig(DEFAULT_CONFIG);\n        return { ...DEFAULT_CONFIG };\n      }\n\n      // Merge with defaults to ensure all fields are present\n      const mergedConfig = this.mergeWithDefaults(loadedConfig);\n      \n      console.log('‚úÖ Configuration loaded successfully');\n      if (validation.warnings.length > 0) {\n        console.warn('‚ö†Ô∏è Configuration warnings:', validation.warnings);\n      }\n\n      return mergedConfig;\n\n    } catch (error) {\n      console.error('‚ùå CONFIG_CORRUPTED: Failed to load configuration:', error);\n      console.log('üìã Loading default configuration');\n      \n      // Save defaults\n      this.saveConfig(DEFAULT_CONFIG);\n      return { ...DEFAULT_CONFIG };\n    }\n  }\n\n  /**\n   * Save configuration to file with immediate write\n   * Requirement 18.6: Write configuration to config.json file and apply changes immediately\n   */\n  saveConfig(config: Phase2Config): void {\n    try {\n      // Update version and timestamp\n      config.version = (config.version || 0) + 1;\n      config.lastModified = Date.now();\n\n      // Validate before saving\n      const validation = this.validateConfig(config);\n      if (!validation.isValid) {\n        throw new Error(`Invalid configuration: ${validation.errors.join(', ')}`);\n      }\n\n      // Ensure directory exists\n      const configDir = dirname(this.configPath);\n      if (!existsSync(configDir)) {\n        mkdirSync(configDir, { recursive: true });\n      }\n\n      // Write to file immediately\n      writeFileSync(this.configPath, JSON.stringify(config, null, 2), 'utf8');\n      \n      // Update internal config\n      const oldConfig = { ...this.config };\n      this.config = { ...config };\n\n      // Emit change event\n      this.emit('configChanged', {\n        section: 'all',\n        oldValue: oldConfig,\n        newValue: config,\n        timestamp: Date.now()\n      } as ConfigChangeEvent);\n\n      console.log('üíæ Configuration saved successfully');\n\n    } catch (error) {\n      console.error('‚ùå Failed to save configuration:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get current configuration\n   */\n  getConfig(): Phase2Config {\n    return { ...this.config };\n  }\n\n  /**\n   * Update alignment weights\n   * Requirement 18.2: Allow adjustment of Daily weight (30-60%), 4H weight (20-40%), 15m weight (10-30%)\n   */\n  updateAlignmentWeights(weights: Partial<AlignmentWeights>): void {\n    const newWeights = { ...this.config.alignmentWeights, ...weights };\n    \n    // Validate individual weight ranges first\n    if (newWeights.daily < 30 || newWeights.daily > 60) {\n      throw new Error(`Daily weight must be 30-60%, got ${newWeights.daily}%`);\n    }\n    if (newWeights.h4 < 20 || newWeights.h4 > 40) {\n      throw new Error(`4H weight must be 20-40%, got ${newWeights.h4}%`);\n    }\n    if (newWeights.m15 < 10 || newWeights.m15 > 30) {\n      throw new Error(`15m weight must be 10-30%, got ${newWeights.m15}%`);\n    }\n    \n    // Validate weights sum to 100%\n    const total = newWeights.daily + newWeights.h4 + newWeights.m15;\n    if (Math.abs(total - 100) > 0.1) {\n      throw new Error(`Alignment weights must sum to 100%, got ${total}%`);\n    }\n\n    const newConfig = {\n      ...this.config,\n      alignmentWeights: newWeights\n    };\n\n    this.saveConfig(newConfig);\n  }\n\n  /**\n   * Update RS configuration\n   * Requirement 18.3: Allow adjustment of RS threshold (0-5%) and lookback period (2-8 hours)\n   */\n  updateRSConfig(rsConfig: Partial<RSConfig>): void {\n    const newRSConfig = { ...this.config.rsConfig, ...rsConfig };\n    \n    const newConfig = {\n      ...this.config,\n      rsConfig: newRSConfig\n    };\n\n    this.saveConfig(newConfig);\n  }\n\n  /**\n   * Update risk configuration\n   * Requirement 18.4: Allow adjustment of max leverage (3-5x), stop loss (1-3%), target (3-6%)\n   */\n  updateRiskConfig(riskConfig: Partial<RiskConfig>): void {\n    const newRiskConfig = { ...this.config.riskConfig, ...riskConfig };\n    \n    const newConfig = {\n      ...this.config,\n      riskConfig: newRiskConfig\n    };\n\n    this.saveConfig(newConfig);\n  }\n\n  /**\n   * Update portfolio configuration\n   * Requirement 18.5: Allow adjustment of max positions (3-8), max heat (10-20%), correlation (0.6-0.9)\n   */\n  updatePortfolioConfig(portfolioConfig: Partial<PortfolioConfig>): void {\n    const newPortfolioConfig = { ...this.config.portfolioConfig, ...portfolioConfig };\n    \n    const newConfig = {\n      ...this.config,\n      portfolioConfig: newPortfolioConfig\n    };\n\n    this.saveConfig(newConfig);\n  }\n\n  /**\n   * Start watching configuration file for changes (hot-reload)\n   * Support hot-reload without restart\n   */\n  startWatching(): void {\n    if (this.isWatching) {\n      return;\n    }\n\n    this.isWatching = true;\n    \n    watchFile(this.configPath, { interval: 1000 }, (curr, prev) => {\n      if (curr.mtime !== prev.mtime) {\n        console.log('üîÑ Configuration file changed, reloading...');\n        try {\n          const newConfig = this.loadConfig();\n          const oldConfig = { ...this.config };\n          this.config = newConfig;\n\n          this.emit('configReloaded', {\n            section: 'all',\n            oldValue: oldConfig,\n            newValue: newConfig,\n            timestamp: Date.now()\n          } as ConfigChangeEvent);\n\n          console.log('‚úÖ Configuration reloaded successfully');\n        } catch (error) {\n          console.error('‚ùå Failed to reload configuration:', error);\n        }\n      }\n    });\n\n    console.log('üëÅÔ∏è Started watching configuration file for changes');\n  }\n\n  /**\n   * Stop watching configuration file\n   */\n  stopWatching(): void {\n    if (!this.isWatching) {\n      return;\n    }\n\n    unwatchFile(this.configPath);\n    this.isWatching = false;\n    console.log('üëÅÔ∏è Stopped watching configuration file');\n  }\n\n  /**\n   * Validate configuration against requirements\n   */\n  private validateConfig(config: Phase2Config): ValidationResult {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n\n    // Validate alignment weights\n    if (!config.alignmentWeights) {\n      errors.push('Missing alignmentWeights');\n    } else {\n      const { daily, h4, m15 } = config.alignmentWeights;\n      \n      if (daily < 30 || daily > 60) {\n        errors.push(`Daily weight must be 30-60%, got ${daily}%`);\n      }\n      if (h4 < 20 || h4 > 40) {\n        errors.push(`4H weight must be 20-40%, got ${h4}%`);\n      }\n      if (m15 < 10 || m15 > 30) {\n        errors.push(`15m weight must be 10-30%, got ${m15}%`);\n      }\n\n      const total = daily + h4 + m15;\n      if (Math.abs(total - 100) > 0.1) {\n        errors.push(`Alignment weights must sum to 100%, got ${total}%`);\n      }\n    }\n\n    // Validate RS config\n    if (!config.rsConfig) {\n      errors.push('Missing rsConfig');\n    } else {\n      const { threshold, lookbackPeriod } = config.rsConfig;\n      \n      if (threshold < 0 || threshold > 5) {\n        errors.push(`RS threshold must be 0-5%, got ${threshold}%`);\n      }\n      if (lookbackPeriod < 2 || lookbackPeriod > 8) {\n        errors.push(`RS lookback period must be 2-8 hours, got ${lookbackPeriod} hours`);\n      }\n    }\n\n    // Validate risk config\n    if (!config.riskConfig) {\n      errors.push('Missing riskConfig');\n    } else {\n      const { maxLeverage, stopLossPercent, targetPercent } = config.riskConfig;\n      \n      if (maxLeverage < 3 || maxLeverage > 5) {\n        errors.push(`Max leverage must be 3-5x, got ${maxLeverage}x`);\n      }\n      if (stopLossPercent < 1 || stopLossPercent > 3) {\n        errors.push(`Stop loss must be 1-3%, got ${stopLossPercent}%`);\n      }\n      if (targetPercent < 3 || targetPercent > 6) {\n        errors.push(`Target must be 3-6%, got ${targetPercent}%`);\n      }\n\n      // Check R:R ratio\n      const rrRatio = targetPercent / stopLossPercent;\n      if (rrRatio < 2.5) {\n        warnings.push(`R:R ratio is ${rrRatio.toFixed(1)}:1, consider increasing target or decreasing stop`);\n      }\n    }\n\n    // Validate portfolio config\n    if (!config.portfolioConfig) {\n      errors.push('Missing portfolioConfig');\n    } else {\n      const { maxConcurrentPositions, maxPortfolioHeat, correlationThreshold } = config.portfolioConfig;\n      \n      if (maxConcurrentPositions < 3 || maxConcurrentPositions > 8) {\n        errors.push(`Max concurrent positions must be 3-8, got ${maxConcurrentPositions}`);\n      }\n      if (maxPortfolioHeat < 10 || maxPortfolioHeat > 20) {\n        errors.push(`Max portfolio heat must be 10-20%, got ${maxPortfolioHeat}%`);\n      }\n      if (correlationThreshold < 0.6 || correlationThreshold > 0.9) {\n        errors.push(`Correlation threshold must be 0.6-0.9, got ${correlationThreshold}`);\n      }\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings\n    };\n  }\n\n  /**\n   * Merge loaded config with defaults to ensure all fields are present\n   */\n  private mergeWithDefaults(loadedConfig: Partial<Phase2Config>): Phase2Config {\n    return {\n      alignmentWeights: {\n        ...DEFAULT_CONFIG.alignmentWeights,\n        ...loadedConfig.alignmentWeights\n      },\n      rsConfig: {\n        ...DEFAULT_CONFIG.rsConfig,\n        ...loadedConfig.rsConfig\n      },\n      riskConfig: {\n        ...DEFAULT_CONFIG.riskConfig,\n        ...loadedConfig.riskConfig\n      },\n      portfolioConfig: {\n        ...DEFAULT_CONFIG.portfolioConfig,\n        ...loadedConfig.portfolioConfig\n      },\n      version: loadedConfig.version || DEFAULT_CONFIG.version,\n      lastModified: loadedConfig.lastModified || Date.now()\n    };\n  }\n\n  /**\n   * Reset configuration to defaults\n   */\n  resetToDefaults(): void {\n    console.log('üîÑ Resetting configuration to defaults');\n    this.saveConfig({ ...DEFAULT_CONFIG });\n  }\n\n  /**\n   * Get configuration summary for display\n   */\n  getConfigSummary(): string {\n    const config = this.config;\n    return [\n      `üìä Alignment: Daily ${config.alignmentWeights.daily}%, 4H ${config.alignmentWeights.h4}%, 15m ${config.alignmentWeights.m15}%`,\n      `üìà RS: Threshold ${config.rsConfig.threshold}%, Lookback ${config.rsConfig.lookbackPeriod}h`,\n      `‚ö° Risk: Leverage ${config.riskConfig.maxLeverage}x, Stop ${config.riskConfig.stopLossPercent}%, Target ${config.riskConfig.targetPercent}%`,\n      `üíº Portfolio: Max ${config.portfolioConfig.maxConcurrentPositions} positions, Heat ${config.portfolioConfig.maxPortfolioHeat}%, Correlation ${config.portfolioConfig.correlationThreshold}`\n    ].join('\\n');\n  }\n\n  /**\n   * Cleanup resources\n   */\n  destroy(): void {\n    this.stopWatching();\n    this.removeAllListeners();\n  }\n}"],"version":3}