1d4f16b4b3a5af5d54bbdb1910e0edc1
"use strict";
/**
 * Unit tests for CredentialManager
 *
 * Tests AES-256-GCM encryption/decryption, master password handling,
 * credential validation, and file operations.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const CredentialManager_1 = require("../../src/config/CredentialManager");
const fs_1 = require("fs");
const path_1 = require("path");
const os_1 = require("os");
describe('CredentialManager', () => {
    let credentialManager;
    let testDir;
    let originalEnv;
    const validCredentials = {
        binance: {
            apiKey: 'binance_test_api_key_32_characters_long',
            apiSecret: 'binance_test_api_secret_64_characters_long_for_testing_purposes'
        },
        bybit: {
            apiKey: 'bybit_test_api_key_24_chars',
            apiSecret: 'bybit_test_api_secret_48_characters_long_test'
        }
    };
    const testPassword = 'test_master_password_123';
    beforeEach(() => {
        // Create temporary test directory
        testDir = (0, path_1.join)((0, os_1.tmpdir)(), `titan-test-${Date.now()}`);
        (0, fs_1.mkdirSync)(testDir, { recursive: true });
        // Mock homedir to use test directory
        jest.spyOn(require('os'), 'homedir').mockReturnValue(testDir);
        // Save original environment variable
        originalEnv = process.env.TITAN_MASTER_PASSWORD;
        credentialManager = new CredentialManager_1.CredentialManager();
    });
    afterEach(() => {
        // Restore environment variable
        if (originalEnv !== undefined) {
            process.env.TITAN_MASTER_PASSWORD = originalEnv;
        }
        else {
            delete process.env.TITAN_MASTER_PASSWORD;
        }
        // Clean up test files
        try {
            const credentialsPath = (0, path_1.join)(testDir, '.titan-scanner', 'secrets.enc');
            if ((0, fs_1.existsSync)(credentialsPath)) {
                (0, fs_1.unlinkSync)(credentialsPath);
            }
        }
        catch (error) {
            // Ignore cleanup errors
        }
        // Restore mocks
        jest.restoreAllMocks();
    });
    describe('Master Password Management', () => {
        test('should set master password directly', () => {
            expect(() => credentialManager.setMasterPassword(testPassword)).not.toThrow();
        });
        test('should get master password from environment variable', () => {
            process.env.TITAN_MASTER_PASSWORD = testPassword;
            expect(() => credentialManager.setMasterPassword()).not.toThrow();
        });
        test('should throw error when no master password provided', () => {
            delete process.env.TITAN_MASTER_PASSWORD;
            expect(() => credentialManager.setMasterPassword()).toThrow('Master password not provided');
        });
        test('should throw error when trying to save without master password', () => {
            expect(() => credentialManager.saveCredentials(validCredentials)).toThrow('Master password not set');
        });
        test('should throw error when trying to load without master password', () => {
            expect(() => credentialManager.loadCredentials()).toThrow('Master password not set');
        });
    });
    describe('Credential Validation', () => {
        beforeEach(() => {
            credentialManager.setMasterPassword(testPassword);
        });
        test('should validate valid credentials', () => {
            expect(() => credentialManager.saveCredentials(validCredentials)).not.toThrow();
        });
        test('should reject credentials with empty Binance API key', () => {
            const invalidCredentials = {
                ...validCredentials,
                binance: { ...validCredentials.binance, apiKey: '' }
            };
            expect(() => credentialManager.saveCredentials(invalidCredentials)).toThrow('Binance API key is empty');
        });
        test('should reject credentials with empty Binance API secret', () => {
            const invalidCredentials = {
                ...validCredentials,
                binance: { ...validCredentials.binance, apiSecret: '' }
            };
            expect(() => credentialManager.saveCredentials(invalidCredentials)).toThrow('Binance API secret is empty');
        });
        test('should reject credentials with empty Bybit API key', () => {
            const invalidCredentials = {
                ...validCredentials,
                bybit: { ...validCredentials.bybit, apiKey: '' }
            };
            expect(() => credentialManager.saveCredentials(invalidCredentials)).toThrow('Bybit API key is empty');
        });
        test('should reject credentials with empty Bybit API secret', () => {
            const invalidCredentials = {
                ...validCredentials,
                bybit: { ...validCredentials.bybit, apiSecret: '' }
            };
            expect(() => credentialManager.saveCredentials(invalidCredentials)).toThrow('Bybit API secret is empty');
        });
        test('should reject credentials missing Binance section', () => {
            const invalidCredentials = {
                bybit: validCredentials.bybit
            };
            expect(() => credentialManager.saveCredentials(invalidCredentials)).toThrow('Missing Binance credentials');
        });
        test('should reject credentials missing Bybit section', () => {
            const invalidCredentials = {
                binance: validCredentials.binance
            };
            expect(() => credentialManager.saveCredentials(invalidCredentials)).toThrow('Missing Bybit credentials');
        });
    });
    describe('Encryption and Decryption', () => {
        beforeEach(() => {
            credentialManager.setMasterPassword(testPassword);
        });
        test('should save and load credentials successfully', () => {
            // Save credentials
            credentialManager.saveCredentials(validCredentials);
            // Load credentials
            const loadedCredentials = credentialManager.loadCredentials();
            // Verify credentials match
            expect(loadedCredentials).toEqual(validCredentials);
        });
        test('should create encrypted file with restricted permissions', () => {
            credentialManager.saveCredentials(validCredentials);
            const credentialsPath = (0, path_1.join)(testDir, '.titan-scanner', 'secrets.enc');
            expect((0, fs_1.existsSync)(credentialsPath)).toBe(true);
            // Check file permissions (on Unix systems)
            if (process.platform !== 'win32') {
                const stats = require('fs').statSync(credentialsPath);
                const permissions = (stats.mode & parseInt('777', 8)).toString(8);
                expect(permissions).toBe('600'); // Read/write for owner only
            }
        });
        test('should fail to load with wrong master password', () => {
            // Save with correct password
            credentialManager.saveCredentials(validCredentials);
            // Try to load with wrong password
            credentialManager.setMasterPassword('wrong_password');
            expect(() => credentialManager.loadCredentials()).toThrow('Failed to decrypt credentials');
        });
        test('should throw error when loading non-existent credentials', () => {
            expect(() => credentialManager.loadCredentials()).toThrow('No credentials file found');
        });
        test('should handle corrupted credentials file', () => {
            // Save valid credentials first
            credentialManager.saveCredentials(validCredentials);
            // Corrupt the file
            const credentialsPath = (0, path_1.join)(testDir, '.titan-scanner', 'secrets.enc');
            require('fs').writeFileSync(credentialsPath, 'corrupted data');
            // Try to load corrupted file
            expect(() => credentialManager.loadCredentials()).toThrow('Failed to decrypt credentials');
        });
    });
    describe('File Operations', () => {
        beforeEach(() => {
            credentialManager.setMasterPassword(testPassword);
        });
        test('should check if credentials exist', () => {
            expect(credentialManager.hasCredentials()).toBe(false);
            credentialManager.saveCredentials(validCredentials);
            expect(credentialManager.hasCredentials()).toBe(true);
        });
        test('should delete credentials securely', () => {
            credentialManager.saveCredentials(validCredentials);
            expect(credentialManager.hasCredentials()).toBe(true);
            credentialManager.deleteCredentials();
            expect(credentialManager.hasCredentials()).toBe(false);
        });
        test('should get credentials file info', () => {
            // Before saving
            let info = credentialManager.getCredentialsInfo();
            expect(info.exists).toBe(false);
            expect(info.path).toContain('.titan-scanner/secrets.enc');
            // After saving
            credentialManager.saveCredentials(validCredentials);
            info = credentialManager.getCredentialsInfo();
            expect(info.exists).toBe(true);
            expect(info.size).toBeGreaterThan(0);
            expect(typeof info.modified).toBe('object');
            expect(info.modified).toBeTruthy();
        });
        test('should test credentials validity', () => {
            expect(credentialManager.testCredentials()).toBe(false);
            credentialManager.saveCredentials(validCredentials);
            expect(credentialManager.testCredentials()).toBe(true);
            // Test with wrong password
            credentialManager.setMasterPassword('wrong_password');
            expect(credentialManager.testCredentials()).toBe(false);
        });
    });
    describe('Exchange-Specific Operations', () => {
        beforeEach(() => {
            credentialManager.setMasterPassword(testPassword);
        });
        test('should update Binance credentials', () => {
            const newApiKey = 'new_binance_api_key_32_characters_long';
            const newApiSecret = 'new_binance_api_secret_64_characters_long_for_testing_purposes';
            credentialManager.updateExchangeCredentials('binance', newApiKey, newApiSecret);
            const credentials = credentialManager.loadCredentials();
            expect(credentials.binance.apiKey).toBe(newApiKey);
            expect(credentials.binance.apiSecret).toBe(newApiSecret);
        });
        test('should update Bybit credentials', () => {
            const newApiKey = 'new_bybit_api_key_24_chars';
            const newApiSecret = 'new_bybit_api_secret_48_characters_long_test';
            credentialManager.updateExchangeCredentials('bybit', newApiKey, newApiSecret);
            const credentials = credentialManager.loadCredentials();
            expect(credentials.bybit.apiKey).toBe(newApiKey);
            expect(credentials.bybit.apiSecret).toBe(newApiSecret);
        });
        test('should get specific exchange credentials', () => {
            credentialManager.saveCredentials(validCredentials);
            const binanceCredentials = credentialManager.getExchangeCredentials('binance');
            expect(binanceCredentials).toEqual(validCredentials.binance);
            const bybitCredentials = credentialManager.getExchangeCredentials('bybit');
            expect(bybitCredentials).toEqual(validCredentials.bybit);
        });
        test('should create new credentials when updating non-existent file', () => {
            const apiKey = 'test_api_key_32_characters_long';
            const apiSecret = 'test_api_secret_64_characters_long_for_testing_purposes';
            credentialManager.updateExchangeCredentials('binance', apiKey, apiSecret);
            const credentials = credentialManager.loadCredentials();
            expect(credentials.binance.apiKey).toBe(apiKey);
            expect(credentials.binance.apiSecret).toBe(apiSecret);
            expect(credentials.bybit.apiKey).toBe('placeholder_bybit_api_key_24');
            expect(credentials.bybit.apiSecret).toBe('placeholder_bybit_api_secret_48_characters_long');
        });
    });
    describe('Master Password Change', () => {
        beforeEach(() => {
            credentialManager.setMasterPassword(testPassword);
        });
        test('should change master password successfully', () => {
            credentialManager.saveCredentials(validCredentials);
            const newPassword = 'new_master_password_456';
            credentialManager.changeMasterPassword(newPassword);
            // Verify credentials can be loaded with new password
            const loadedCredentials = credentialManager.loadCredentials();
            expect(loadedCredentials).toEqual(validCredentials);
            // Verify old password no longer works
            credentialManager.setMasterPassword(testPassword);
            expect(() => credentialManager.loadCredentials()).toThrow();
        });
        test('should throw error when changing password without current password set', () => {
            const newCredentialManager = new CredentialManager_1.CredentialManager();
            expect(() => newCredentialManager.changeMasterPassword('new_password')).toThrow('Current master password not set');
        });
        test('should restore old password on failure', () => {
            credentialManager.saveCredentials(validCredentials);
            // Mock writeFileSync to fail
            const originalWriteFileSync = require('fs').writeFileSync;
            jest.spyOn(require('fs'), 'writeFileSync').mockImplementation(() => {
                throw new Error('Write failed');
            });
            const newPassword = 'new_master_password_456';
            expect(() => credentialManager.changeMasterPassword(newPassword)).toThrow('Write failed');
            // Restore original function
            require('fs').writeFileSync = originalWriteFileSync;
            // Verify old password still works
            const loadedCredentials = credentialManager.loadCredentials();
            expect(loadedCredentials).toEqual(validCredentials);
        });
    });
    describe('Edge Cases', () => {
        beforeEach(() => {
            credentialManager.setMasterPassword(testPassword);
        });
        test('should handle credentials with whitespace', () => {
            const credentialsWithWhitespace = {
                binance: {
                    apiKey: '  binance_test_api_key_32_characters_long  ',
                    apiSecret: '  binance_test_api_secret_64_characters_long_for_testing_purposes  '
                },
                bybit: {
                    apiKey: '  bybit_test_api_key_24_chars  ',
                    apiSecret: '  bybit_test_api_secret_48_characters_long_test  '
                }
            };
            expect(() => credentialManager.saveCredentials(credentialsWithWhitespace)).not.toThrow();
        });
        test('should handle very long credentials', () => {
            const longCredentials = {
                binance: {
                    apiKey: 'a'.repeat(100),
                    apiSecret: 'b'.repeat(200)
                },
                bybit: {
                    apiKey: 'c'.repeat(100),
                    apiSecret: 'd'.repeat(200)
                }
            };
            expect(() => credentialManager.saveCredentials(longCredentials)).not.toThrow();
            const loadedCredentials = credentialManager.loadCredentials();
            expect(loadedCredentials).toEqual(longCredentials);
        });
        test('should handle special characters in credentials', () => {
            const specialCredentials = {
                binance: {
                    apiKey: 'binance_key_with_special_chars_!@#$%^&*()',
                    apiSecret: 'binance_secret_with_unicode_chars_Î±Î²Î³Î´Îµ_and_emojis_ðŸš€ðŸŒ™'
                },
                bybit: {
                    apiKey: 'bybit_key_with_numbers_123456789',
                    apiSecret: 'bybit_secret_with_mixed_Case_AND_symbols_+=[]{}|;:,.<>?'
                }
            };
            expect(() => credentialManager.saveCredentials(specialCredentials)).not.toThrow();
            const loadedCredentials = credentialManager.loadCredentials();
            expect(loadedCredentials).toEqual(specialCredentials);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvdGVzdHMvdW5pdC9DcmVkZW50aWFsTWFuYWdlci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCwwRUFBNEY7QUFDNUYsMkJBQXVEO0FBQ3ZELCtCQUE0QjtBQUM1QiwyQkFBNEI7QUFFNUIsUUFBUSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtJQUNqQyxJQUFJLGlCQUFvQyxDQUFDO0lBQ3pDLElBQUksT0FBZSxDQUFDO0lBQ3BCLElBQUksV0FBK0IsQ0FBQztJQUVwQyxNQUFNLGdCQUFnQixHQUF3QjtRQUM1QyxPQUFPLEVBQUU7WUFDUCxNQUFNLEVBQUUseUNBQXlDO1lBQ2pELFNBQVMsRUFBRSxpRUFBaUU7U0FDN0U7UUFDRCxLQUFLLEVBQUU7WUFDTCxNQUFNLEVBQUUsNkJBQTZCO1lBQ3JDLFNBQVMsRUFBRSwrQ0FBK0M7U0FDM0Q7S0FDRixDQUFDO0lBRUYsTUFBTSxZQUFZLEdBQUcsMEJBQTBCLENBQUM7SUFFaEQsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLGtDQUFrQztRQUNsQyxPQUFPLEdBQUcsSUFBQSxXQUFJLEVBQUMsSUFBQSxXQUFNLEdBQUUsRUFBRSxjQUFjLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDckQsSUFBQSxjQUFTLEVBQUMsT0FBTyxFQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFFeEMscUNBQXFDO1FBQ3JDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUU5RCxxQ0FBcUM7UUFDckMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUM7UUFFaEQsaUJBQWlCLEdBQUcsSUFBSSxxQ0FBaUIsRUFBRSxDQUFDO0lBQzlDLENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLCtCQUErQjtRQUMvQixJQUFJLFdBQVcsS0FBSyxTQUFTLEVBQUUsQ0FBQztZQUM5QixPQUFPLENBQUMsR0FBRyxDQUFDLHFCQUFxQixHQUFHLFdBQVcsQ0FBQztRQUNsRCxDQUFDO2FBQU0sQ0FBQztZQUNOLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztRQUMzQyxDQUFDO1FBRUQsc0JBQXNCO1FBQ3RCLElBQUksQ0FBQztZQUNILE1BQU0sZUFBZSxHQUFHLElBQUEsV0FBSSxFQUFDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLENBQUMsQ0FBQztZQUN2RSxJQUFJLElBQUEsZUFBVSxFQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUM7Z0JBQ2hDLElBQUEsZUFBVSxFQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQzlCLENBQUM7UUFDSCxDQUFDO1FBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztZQUNmLHdCQUF3QjtRQUMxQixDQUFDO1FBRUQsZ0JBQWdCO1FBQ2hCLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN6QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7UUFDMUMsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUMvQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDaEYsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsc0RBQXNELEVBQUUsR0FBRyxFQUFFO1lBQ2hFLE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLEdBQUcsWUFBWSxDQUFDO1lBQ2pELE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3BFLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHFEQUFxRCxFQUFFLEdBQUcsRUFBRTtZQUMvRCxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUM7WUFDekMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQ3pELDhCQUE4QixDQUMvQixDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsZ0VBQWdFLEVBQUUsR0FBRyxFQUFFO1lBQzFFLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FDdkUseUJBQXlCLENBQzFCLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxnRUFBZ0UsRUFBRSxHQUFHLEVBQUU7WUFDMUUsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUN2RCx5QkFBeUIsQ0FDMUIsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFO1FBQ3JDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2xGLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHNEQUFzRCxFQUFFLEdBQUcsRUFBRTtZQUNoRSxNQUFNLGtCQUFrQixHQUFHO2dCQUN6QixHQUFHLGdCQUFnQjtnQkFDbkIsT0FBTyxFQUFFLEVBQUUsR0FBRyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRTthQUNyRCxDQUFDO1lBRUYsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUN6RSwwQkFBMEIsQ0FDM0IsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHlEQUF5RCxFQUFFLEdBQUcsRUFBRTtZQUNuRSxNQUFNLGtCQUFrQixHQUFHO2dCQUN6QixHQUFHLGdCQUFnQjtnQkFDbkIsT0FBTyxFQUFFLEVBQUUsR0FBRyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRTthQUN4RCxDQUFDO1lBRUYsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUN6RSw2QkFBNkIsQ0FDOUIsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLG9EQUFvRCxFQUFFLEdBQUcsRUFBRTtZQUM5RCxNQUFNLGtCQUFrQixHQUFHO2dCQUN6QixHQUFHLGdCQUFnQjtnQkFDbkIsS0FBSyxFQUFFLEVBQUUsR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRTthQUNqRCxDQUFDO1lBRUYsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUN6RSx3QkFBd0IsQ0FDekIsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLHVEQUF1RCxFQUFFLEdBQUcsRUFBRTtZQUNqRSxNQUFNLGtCQUFrQixHQUFHO2dCQUN6QixHQUFHLGdCQUFnQjtnQkFDbkIsS0FBSyxFQUFFLEVBQUUsR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRTthQUNwRCxDQUFDO1lBRUYsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUN6RSwyQkFBMkIsQ0FDNUIsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLG1EQUFtRCxFQUFFLEdBQUcsRUFBRTtZQUM3RCxNQUFNLGtCQUFrQixHQUFHO2dCQUN6QixLQUFLLEVBQUUsZ0JBQWdCLENBQUMsS0FBSzthQUN2QixDQUFDO1lBRVQsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUN6RSw2QkFBNkIsQ0FDOUIsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGlEQUFpRCxFQUFFLEdBQUcsRUFBRTtZQUMzRCxNQUFNLGtCQUFrQixHQUFHO2dCQUN6QixPQUFPLEVBQUUsZ0JBQWdCLENBQUMsT0FBTzthQUMzQixDQUFDO1lBRVQsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUN6RSwyQkFBMkIsQ0FDNUIsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1FBQ3pDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQywrQ0FBK0MsRUFBRSxHQUFHLEVBQUU7WUFDekQsbUJBQW1CO1lBQ25CLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBRXBELG1CQUFtQjtZQUNuQixNQUFNLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDLGVBQWUsRUFBRSxDQUFDO1lBRTlELDJCQUEyQjtZQUMzQixNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUN0RCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQywwREFBMEQsRUFBRSxHQUFHLEVBQUU7WUFDcEUsaUJBQWlCLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFFcEQsTUFBTSxlQUFlLEdBQUcsSUFBQSxXQUFJLEVBQUMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGFBQWEsQ0FBQyxDQUFDO1lBQ3ZFLE1BQU0sQ0FBQyxJQUFBLGVBQVUsRUFBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUUvQywyQ0FBMkM7WUFDM0MsSUFBSSxPQUFPLENBQUMsUUFBUSxLQUFLLE9BQU8sRUFBRSxDQUFDO2dCQUNqQyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDO2dCQUN0RCxNQUFNLFdBQVcsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbEUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLDRCQUE0QjtZQUMvRCxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsZ0RBQWdELEVBQUUsR0FBRyxFQUFFO1lBQzFELDZCQUE2QjtZQUM3QixpQkFBaUIsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUVwRCxrQ0FBa0M7WUFDbEMsaUJBQWlCLENBQUMsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUN0RCxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQ3ZELCtCQUErQixDQUNoQyxDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsMERBQTBELEVBQUUsR0FBRyxFQUFFO1lBQ3BFLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FDdkQsMkJBQTJCLENBQzVCLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7WUFDcEQsK0JBQStCO1lBQy9CLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBRXBELG1CQUFtQjtZQUNuQixNQUFNLGVBQWUsR0FBRyxJQUFBLFdBQUksRUFBQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFDdkUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLGFBQWEsQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztZQUUvRCw2QkFBNkI7WUFDN0IsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUN2RCwrQkFBK0IsQ0FDaEMsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1FBQy9CLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsTUFBTSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXZELGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQ3BELE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4RCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsaUJBQWlCLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDcEQsTUFBTSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRXRELGlCQUFpQixDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDdEMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtZQUM1QyxnQkFBZ0I7WUFDaEIsSUFBSSxJQUFJLEdBQUcsaUJBQWlCLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztZQUNsRCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNoQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1lBRTFELGVBQWU7WUFDZixpQkFBaUIsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNwRCxJQUFJLEdBQUcsaUJBQWlCLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztZQUM5QyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMvQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzVDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDckMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO1lBQzVDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUV4RCxpQkFBaUIsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNwRCxNQUFNLENBQUMsaUJBQWlCLENBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFdkQsMkJBQTJCO1lBQzNCLGlCQUFpQixDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsOEJBQThCLEVBQUUsR0FBRyxFQUFFO1FBQzVDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsTUFBTSxTQUFTLEdBQUcsd0NBQXdDLENBQUM7WUFDM0QsTUFBTSxZQUFZLEdBQUcsZ0VBQWdFLENBQUM7WUFFdEYsaUJBQWlCLENBQUMseUJBQXlCLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxZQUFZLENBQUMsQ0FBQztZQUVoRixNQUFNLFdBQVcsR0FBRyxpQkFBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUN4RCxNQUFNLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDbkQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQzNELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtZQUMzQyxNQUFNLFNBQVMsR0FBRyw0QkFBNEIsQ0FBQztZQUMvQyxNQUFNLFlBQVksR0FBRyw4Q0FBOEMsQ0FBQztZQUVwRSxpQkFBaUIsQ0FBQyx5QkFBeUIsQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBRTlFLE1BQU0sV0FBVyxHQUFHLGlCQUFpQixDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3hELE1BQU0sQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDekQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsMENBQTBDLEVBQUUsR0FBRyxFQUFFO1lBQ3BELGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBRXBELE1BQU0sa0JBQWtCLEdBQUcsaUJBQWlCLENBQUMsc0JBQXNCLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDL0UsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRTdELE1BQU0sZ0JBQWdCLEdBQUcsaUJBQWlCLENBQUMsc0JBQXNCLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDM0UsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzNELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLCtEQUErRCxFQUFFLEdBQUcsRUFBRTtZQUN6RSxNQUFNLE1BQU0sR0FBRyxpQ0FBaUMsQ0FBQztZQUNqRCxNQUFNLFNBQVMsR0FBRyx5REFBeUQsQ0FBQztZQUU1RSxpQkFBaUIsQ0FBQyx5QkFBeUIsQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBRTFFLE1BQU0sV0FBVyxHQUFHLGlCQUFpQixDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3hELE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLDhCQUE4QixDQUFDLENBQUM7WUFDdEUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLGlEQUFpRCxDQUFDLENBQUM7UUFDOUYsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxHQUFHLEVBQUU7UUFDdEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLGlCQUFpQixDQUFDLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3BELENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtZQUN0RCxpQkFBaUIsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUVwRCxNQUFNLFdBQVcsR0FBRyx5QkFBeUIsQ0FBQztZQUM5QyxpQkFBaUIsQ0FBQyxvQkFBb0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUVwRCxxREFBcUQ7WUFDckQsTUFBTSxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUM5RCxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUVwRCxzQ0FBc0M7WUFDdEMsaUJBQWlCLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDbEQsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsd0VBQXdFLEVBQUUsR0FBRyxFQUFFO1lBQ2xGLE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxxQ0FBaUIsRUFBRSxDQUFDO1lBQ3JELE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQyxvQkFBb0IsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FDN0UsaUNBQWlDLENBQ2xDLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7WUFDbEQsaUJBQWlCLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFFcEQsNkJBQTZCO1lBQzdCLE1BQU0scUJBQXFCLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLGFBQWEsQ0FBQztZQUMxRCxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxlQUFlLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUU7Z0JBQ2pFLE1BQU0sSUFBSSxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDbEMsQ0FBQyxDQUFDLENBQUM7WUFFSCxNQUFNLFdBQVcsR0FBRyx5QkFBeUIsQ0FBQztZQUM5QyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsb0JBQW9CLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7WUFFMUYsNEJBQTRCO1lBQzVCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxhQUFhLEdBQUcscUJBQXFCLENBQUM7WUFFcEQsa0NBQWtDO1lBQ2xDLE1BQU0saUJBQWlCLEdBQUcsaUJBQWlCLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDOUQsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDdEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1FBQzFCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQywyQ0FBMkMsRUFBRSxHQUFHLEVBQUU7WUFDckQsTUFBTSx5QkFBeUIsR0FBRztnQkFDaEMsT0FBTyxFQUFFO29CQUNQLE1BQU0sRUFBRSw2Q0FBNkM7b0JBQ3JELFNBQVMsRUFBRSxxRUFBcUU7aUJBQ2pGO2dCQUNELEtBQUssRUFBRTtvQkFDTCxNQUFNLEVBQUUsaUNBQWlDO29CQUN6QyxTQUFTLEVBQUUsbURBQW1EO2lCQUMvRDthQUNGLENBQUM7WUFFRixNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsZUFBZSxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDM0YsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1lBQy9DLE1BQU0sZUFBZSxHQUFHO2dCQUN0QixPQUFPLEVBQUU7b0JBQ1AsTUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO29CQUN2QixTQUFTLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7aUJBQzNCO2dCQUNELEtBQUssRUFBRTtvQkFDTCxNQUFNLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7b0JBQ3ZCLFNBQVMsRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQztpQkFDM0I7YUFDRixDQUFDO1lBRUYsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUUvRSxNQUFNLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQzlELE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNyRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxpREFBaUQsRUFBRSxHQUFHLEVBQUU7WUFDM0QsTUFBTSxrQkFBa0IsR0FBRztnQkFDekIsT0FBTyxFQUFFO29CQUNQLE1BQU0sRUFBRSwyQ0FBMkM7b0JBQ25ELFNBQVMsRUFBRSx5REFBeUQ7aUJBQ3JFO2dCQUNELEtBQUssRUFBRTtvQkFDTCxNQUFNLEVBQUUsa0NBQWtDO29CQUMxQyxTQUFTLEVBQUUseURBQXlEO2lCQUNyRTthQUNGLENBQUM7WUFFRixNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsZUFBZSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7WUFFbEYsTUFBTSxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUM5RCxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUN4RCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvdGVzdHMvdW5pdC9DcmVkZW50aWFsTWFuYWdlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCB0ZXN0cyBmb3IgQ3JlZGVudGlhbE1hbmFnZXJcbiAqIFxuICogVGVzdHMgQUVTLTI1Ni1HQ00gZW5jcnlwdGlvbi9kZWNyeXB0aW9uLCBtYXN0ZXIgcGFzc3dvcmQgaGFuZGxpbmcsXG4gKiBjcmVkZW50aWFsIHZhbGlkYXRpb24sIGFuZCBmaWxlIG9wZXJhdGlvbnMuXG4gKi9cblxuaW1wb3J0IHsgQ3JlZGVudGlhbE1hbmFnZXIsIEV4Y2hhbmdlQ3JlZGVudGlhbHMgfSBmcm9tICcuLi8uLi9zcmMvY29uZmlnL0NyZWRlbnRpYWxNYW5hZ2VyJztcbmltcG9ydCB7IGV4aXN0c1N5bmMsIHVubGlua1N5bmMsIG1rZGlyU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IHRtcGRpciB9IGZyb20gJ29zJztcblxuZGVzY3JpYmUoJ0NyZWRlbnRpYWxNYW5hZ2VyJywgKCkgPT4ge1xuICBsZXQgY3JlZGVudGlhbE1hbmFnZXI6IENyZWRlbnRpYWxNYW5hZ2VyO1xuICBsZXQgdGVzdERpcjogc3RyaW5nO1xuICBsZXQgb3JpZ2luYWxFbnY6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICBjb25zdCB2YWxpZENyZWRlbnRpYWxzOiBFeGNoYW5nZUNyZWRlbnRpYWxzID0ge1xuICAgIGJpbmFuY2U6IHtcbiAgICAgIGFwaUtleTogJ2JpbmFuY2VfdGVzdF9hcGlfa2V5XzMyX2NoYXJhY3RlcnNfbG9uZycsXG4gICAgICBhcGlTZWNyZXQ6ICdiaW5hbmNlX3Rlc3RfYXBpX3NlY3JldF82NF9jaGFyYWN0ZXJzX2xvbmdfZm9yX3Rlc3RpbmdfcHVycG9zZXMnXG4gICAgfSxcbiAgICBieWJpdDoge1xuICAgICAgYXBpS2V5OiAnYnliaXRfdGVzdF9hcGlfa2V5XzI0X2NoYXJzJyxcbiAgICAgIGFwaVNlY3JldDogJ2J5Yml0X3Rlc3RfYXBpX3NlY3JldF80OF9jaGFyYWN0ZXJzX2xvbmdfdGVzdCdcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdGVzdFBhc3N3b3JkID0gJ3Rlc3RfbWFzdGVyX3Bhc3N3b3JkXzEyMyc7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ3JlYXRlIHRlbXBvcmFyeSB0ZXN0IGRpcmVjdG9yeVxuICAgIHRlc3REaXIgPSBqb2luKHRtcGRpcigpLCBgdGl0YW4tdGVzdC0ke0RhdGUubm93KCl9YCk7XG4gICAgbWtkaXJTeW5jKHRlc3REaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuXG4gICAgLy8gTW9jayBob21lZGlyIHRvIHVzZSB0ZXN0IGRpcmVjdG9yeVxuICAgIGplc3Quc3B5T24ocmVxdWlyZSgnb3MnKSwgJ2hvbWVkaXInKS5tb2NrUmV0dXJuVmFsdWUodGVzdERpcik7XG5cbiAgICAvLyBTYXZlIG9yaWdpbmFsIGVudmlyb25tZW50IHZhcmlhYmxlXG4gICAgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudi5USVRBTl9NQVNURVJfUEFTU1dPUkQ7XG5cbiAgICBjcmVkZW50aWFsTWFuYWdlciA9IG5ldyBDcmVkZW50aWFsTWFuYWdlcigpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIC8vIFJlc3RvcmUgZW52aXJvbm1lbnQgdmFyaWFibGVcbiAgICBpZiAob3JpZ2luYWxFbnYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcHJvY2Vzcy5lbnYuVElUQU5fTUFTVEVSX1BBU1NXT1JEID0gb3JpZ2luYWxFbnY7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5USVRBTl9NQVNURVJfUEFTU1dPUkQ7XG4gICAgfVxuXG4gICAgLy8gQ2xlYW4gdXAgdGVzdCBmaWxlc1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjcmVkZW50aWFsc1BhdGggPSBqb2luKHRlc3REaXIsICcudGl0YW4tc2Nhbm5lcicsICdzZWNyZXRzLmVuYycpO1xuICAgICAgaWYgKGV4aXN0c1N5bmMoY3JlZGVudGlhbHNQYXRoKSkge1xuICAgICAgICB1bmxpbmtTeW5jKGNyZWRlbnRpYWxzUGF0aCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIElnbm9yZSBjbGVhbnVwIGVycm9yc1xuICAgIH1cblxuICAgIC8vIFJlc3RvcmUgbW9ja3NcbiAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnTWFzdGVyIFBhc3N3b3JkIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHNldCBtYXN0ZXIgcGFzc3dvcmQgZGlyZWN0bHknLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4gY3JlZGVudGlhbE1hbmFnZXIuc2V0TWFzdGVyUGFzc3dvcmQodGVzdFBhc3N3b3JkKSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBnZXQgbWFzdGVyIHBhc3N3b3JkIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGUnLCAoKSA9PiB7XG4gICAgICBwcm9jZXNzLmVudi5USVRBTl9NQVNURVJfUEFTU1dPUkQgPSB0ZXN0UGFzc3dvcmQ7XG4gICAgICBleHBlY3QoKCkgPT4gY3JlZGVudGlhbE1hbmFnZXIuc2V0TWFzdGVyUGFzc3dvcmQoKSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB0aHJvdyBlcnJvciB3aGVuIG5vIG1hc3RlciBwYXNzd29yZCBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5USVRBTl9NQVNURVJfUEFTU1dPUkQ7XG4gICAgICBleHBlY3QoKCkgPT4gY3JlZGVudGlhbE1hbmFnZXIuc2V0TWFzdGVyUGFzc3dvcmQoKSkudG9UaHJvdyhcbiAgICAgICAgJ01hc3RlciBwYXNzd29yZCBub3QgcHJvdmlkZWQnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gdHJ5aW5nIHRvIHNhdmUgd2l0aG91dCBtYXN0ZXIgcGFzc3dvcmQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4gY3JlZGVudGlhbE1hbmFnZXIuc2F2ZUNyZWRlbnRpYWxzKHZhbGlkQ3JlZGVudGlhbHMpKS50b1Rocm93KFxuICAgICAgICAnTWFzdGVyIHBhc3N3b3JkIG5vdCBzZXQnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gdHJ5aW5nIHRvIGxvYWQgd2l0aG91dCBtYXN0ZXIgcGFzc3dvcmQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4gY3JlZGVudGlhbE1hbmFnZXIubG9hZENyZWRlbnRpYWxzKCkpLnRvVGhyb3coXG4gICAgICAgICdNYXN0ZXIgcGFzc3dvcmQgbm90IHNldCdcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDcmVkZW50aWFsIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBjcmVkZW50aWFsTWFuYWdlci5zZXRNYXN0ZXJQYXNzd29yZCh0ZXN0UGFzc3dvcmQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIHZhbGlkIGNyZWRlbnRpYWxzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KCgpID0+IGNyZWRlbnRpYWxNYW5hZ2VyLnNhdmVDcmVkZW50aWFscyh2YWxpZENyZWRlbnRpYWxzKSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZWplY3QgY3JlZGVudGlhbHMgd2l0aCBlbXB0eSBCaW5hbmNlIEFQSSBrZXknLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkQ3JlZGVudGlhbHMgPSB7XG4gICAgICAgIC4uLnZhbGlkQ3JlZGVudGlhbHMsXG4gICAgICAgIGJpbmFuY2U6IHsgLi4udmFsaWRDcmVkZW50aWFscy5iaW5hbmNlLCBhcGlLZXk6ICcnIH1cbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCgoKSA9PiBjcmVkZW50aWFsTWFuYWdlci5zYXZlQ3JlZGVudGlhbHMoaW52YWxpZENyZWRlbnRpYWxzKSkudG9UaHJvdyhcbiAgICAgICAgJ0JpbmFuY2UgQVBJIGtleSBpcyBlbXB0eSdcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVqZWN0IGNyZWRlbnRpYWxzIHdpdGggZW1wdHkgQmluYW5jZSBBUEkgc2VjcmV0JywgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZENyZWRlbnRpYWxzID0ge1xuICAgICAgICAuLi52YWxpZENyZWRlbnRpYWxzLFxuICAgICAgICBiaW5hbmNlOiB7IC4uLnZhbGlkQ3JlZGVudGlhbHMuYmluYW5jZSwgYXBpU2VjcmV0OiAnJyB9XG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gY3JlZGVudGlhbE1hbmFnZXIuc2F2ZUNyZWRlbnRpYWxzKGludmFsaWRDcmVkZW50aWFscykpLnRvVGhyb3coXG4gICAgICAgICdCaW5hbmNlIEFQSSBzZWNyZXQgaXMgZW1wdHknXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlamVjdCBjcmVkZW50aWFscyB3aXRoIGVtcHR5IEJ5Yml0IEFQSSBrZXknLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkQ3JlZGVudGlhbHMgPSB7XG4gICAgICAgIC4uLnZhbGlkQ3JlZGVudGlhbHMsXG4gICAgICAgIGJ5Yml0OiB7IC4uLnZhbGlkQ3JlZGVudGlhbHMuYnliaXQsIGFwaUtleTogJycgfVxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KCgpID0+IGNyZWRlbnRpYWxNYW5hZ2VyLnNhdmVDcmVkZW50aWFscyhpbnZhbGlkQ3JlZGVudGlhbHMpKS50b1Rocm93KFxuICAgICAgICAnQnliaXQgQVBJIGtleSBpcyBlbXB0eSdcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVqZWN0IGNyZWRlbnRpYWxzIHdpdGggZW1wdHkgQnliaXQgQVBJIHNlY3JldCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRDcmVkZW50aWFscyA9IHtcbiAgICAgICAgLi4udmFsaWRDcmVkZW50aWFscyxcbiAgICAgICAgYnliaXQ6IHsgLi4udmFsaWRDcmVkZW50aWFscy5ieWJpdCwgYXBpU2VjcmV0OiAnJyB9XG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gY3JlZGVudGlhbE1hbmFnZXIuc2F2ZUNyZWRlbnRpYWxzKGludmFsaWRDcmVkZW50aWFscykpLnRvVGhyb3coXG4gICAgICAgICdCeWJpdCBBUEkgc2VjcmV0IGlzIGVtcHR5J1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZWplY3QgY3JlZGVudGlhbHMgbWlzc2luZyBCaW5hbmNlIHNlY3Rpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkQ3JlZGVudGlhbHMgPSB7XG4gICAgICAgIGJ5Yml0OiB2YWxpZENyZWRlbnRpYWxzLmJ5Yml0XG4gICAgICB9IGFzIGFueTtcblxuICAgICAgZXhwZWN0KCgpID0+IGNyZWRlbnRpYWxNYW5hZ2VyLnNhdmVDcmVkZW50aWFscyhpbnZhbGlkQ3JlZGVudGlhbHMpKS50b1Rocm93KFxuICAgICAgICAnTWlzc2luZyBCaW5hbmNlIGNyZWRlbnRpYWxzJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZWplY3QgY3JlZGVudGlhbHMgbWlzc2luZyBCeWJpdCBzZWN0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZENyZWRlbnRpYWxzID0ge1xuICAgICAgICBiaW5hbmNlOiB2YWxpZENyZWRlbnRpYWxzLmJpbmFuY2VcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBleHBlY3QoKCkgPT4gY3JlZGVudGlhbE1hbmFnZXIuc2F2ZUNyZWRlbnRpYWxzKGludmFsaWRDcmVkZW50aWFscykpLnRvVGhyb3coXG4gICAgICAgICdNaXNzaW5nIEJ5Yml0IGNyZWRlbnRpYWxzJ1xuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VuY3J5cHRpb24gYW5kIERlY3J5cHRpb24nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBjcmVkZW50aWFsTWFuYWdlci5zZXRNYXN0ZXJQYXNzd29yZCh0ZXN0UGFzc3dvcmQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHNhdmUgYW5kIGxvYWQgY3JlZGVudGlhbHMgc3VjY2Vzc2Z1bGx5JywgKCkgPT4ge1xuICAgICAgLy8gU2F2ZSBjcmVkZW50aWFsc1xuICAgICAgY3JlZGVudGlhbE1hbmFnZXIuc2F2ZUNyZWRlbnRpYWxzKHZhbGlkQ3JlZGVudGlhbHMpO1xuXG4gICAgICAvLyBMb2FkIGNyZWRlbnRpYWxzXG4gICAgICBjb25zdCBsb2FkZWRDcmVkZW50aWFscyA9IGNyZWRlbnRpYWxNYW5hZ2VyLmxvYWRDcmVkZW50aWFscygpO1xuXG4gICAgICAvLyBWZXJpZnkgY3JlZGVudGlhbHMgbWF0Y2hcbiAgICAgIGV4cGVjdChsb2FkZWRDcmVkZW50aWFscykudG9FcXVhbCh2YWxpZENyZWRlbnRpYWxzKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgZW5jcnlwdGVkIGZpbGUgd2l0aCByZXN0cmljdGVkIHBlcm1pc3Npb25zJywgKCkgPT4ge1xuICAgICAgY3JlZGVudGlhbE1hbmFnZXIuc2F2ZUNyZWRlbnRpYWxzKHZhbGlkQ3JlZGVudGlhbHMpO1xuXG4gICAgICBjb25zdCBjcmVkZW50aWFsc1BhdGggPSBqb2luKHRlc3REaXIsICcudGl0YW4tc2Nhbm5lcicsICdzZWNyZXRzLmVuYycpO1xuICAgICAgZXhwZWN0KGV4aXN0c1N5bmMoY3JlZGVudGlhbHNQYXRoKSkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gQ2hlY2sgZmlsZSBwZXJtaXNzaW9ucyAob24gVW5peCBzeXN0ZW1zKVxuICAgICAgaWYgKHByb2Nlc3MucGxhdGZvcm0gIT09ICd3aW4zMicpIHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSByZXF1aXJlKCdmcycpLnN0YXRTeW5jKGNyZWRlbnRpYWxzUGF0aCk7XG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gKHN0YXRzLm1vZGUgJiBwYXJzZUludCgnNzc3JywgOCkpLnRvU3RyaW5nKDgpO1xuICAgICAgICBleHBlY3QocGVybWlzc2lvbnMpLnRvQmUoJzYwMCcpOyAvLyBSZWFkL3dyaXRlIGZvciBvd25lciBvbmx5XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZmFpbCB0byBsb2FkIHdpdGggd3JvbmcgbWFzdGVyIHBhc3N3b3JkJywgKCkgPT4ge1xuICAgICAgLy8gU2F2ZSB3aXRoIGNvcnJlY3QgcGFzc3dvcmRcbiAgICAgIGNyZWRlbnRpYWxNYW5hZ2VyLnNhdmVDcmVkZW50aWFscyh2YWxpZENyZWRlbnRpYWxzKTtcblxuICAgICAgLy8gVHJ5IHRvIGxvYWQgd2l0aCB3cm9uZyBwYXNzd29yZFxuICAgICAgY3JlZGVudGlhbE1hbmFnZXIuc2V0TWFzdGVyUGFzc3dvcmQoJ3dyb25nX3Bhc3N3b3JkJyk7XG4gICAgICBleHBlY3QoKCkgPT4gY3JlZGVudGlhbE1hbmFnZXIubG9hZENyZWRlbnRpYWxzKCkpLnRvVGhyb3coXG4gICAgICAgICdGYWlsZWQgdG8gZGVjcnlwdCBjcmVkZW50aWFscydcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBsb2FkaW5nIG5vbi1leGlzdGVudCBjcmVkZW50aWFscycsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiBjcmVkZW50aWFsTWFuYWdlci5sb2FkQ3JlZGVudGlhbHMoKSkudG9UaHJvdyhcbiAgICAgICAgJ05vIGNyZWRlbnRpYWxzIGZpbGUgZm91bmQnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb3JydXB0ZWQgY3JlZGVudGlhbHMgZmlsZScsICgpID0+IHtcbiAgICAgIC8vIFNhdmUgdmFsaWQgY3JlZGVudGlhbHMgZmlyc3RcbiAgICAgIGNyZWRlbnRpYWxNYW5hZ2VyLnNhdmVDcmVkZW50aWFscyh2YWxpZENyZWRlbnRpYWxzKTtcblxuICAgICAgLy8gQ29ycnVwdCB0aGUgZmlsZVxuICAgICAgY29uc3QgY3JlZGVudGlhbHNQYXRoID0gam9pbih0ZXN0RGlyLCAnLnRpdGFuLXNjYW5uZXInLCAnc2VjcmV0cy5lbmMnKTtcbiAgICAgIHJlcXVpcmUoJ2ZzJykud3JpdGVGaWxlU3luYyhjcmVkZW50aWFsc1BhdGgsICdjb3JydXB0ZWQgZGF0YScpO1xuXG4gICAgICAvLyBUcnkgdG8gbG9hZCBjb3JydXB0ZWQgZmlsZVxuICAgICAgZXhwZWN0KCgpID0+IGNyZWRlbnRpYWxNYW5hZ2VyLmxvYWRDcmVkZW50aWFscygpKS50b1Rocm93KFxuICAgICAgICAnRmFpbGVkIHRvIGRlY3J5cHQgY3JlZGVudGlhbHMnXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRmlsZSBPcGVyYXRpb25zJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgY3JlZGVudGlhbE1hbmFnZXIuc2V0TWFzdGVyUGFzc3dvcmQodGVzdFBhc3N3b3JkKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjaGVjayBpZiBjcmVkZW50aWFscyBleGlzdCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChjcmVkZW50aWFsTWFuYWdlci5oYXNDcmVkZW50aWFscygpKS50b0JlKGZhbHNlKTtcblxuICAgICAgY3JlZGVudGlhbE1hbmFnZXIuc2F2ZUNyZWRlbnRpYWxzKHZhbGlkQ3JlZGVudGlhbHMpO1xuICAgICAgZXhwZWN0KGNyZWRlbnRpYWxNYW5hZ2VyLmhhc0NyZWRlbnRpYWxzKCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZGVsZXRlIGNyZWRlbnRpYWxzIHNlY3VyZWx5JywgKCkgPT4ge1xuICAgICAgY3JlZGVudGlhbE1hbmFnZXIuc2F2ZUNyZWRlbnRpYWxzKHZhbGlkQ3JlZGVudGlhbHMpO1xuICAgICAgZXhwZWN0KGNyZWRlbnRpYWxNYW5hZ2VyLmhhc0NyZWRlbnRpYWxzKCkpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIGNyZWRlbnRpYWxNYW5hZ2VyLmRlbGV0ZUNyZWRlbnRpYWxzKCk7XG4gICAgICBleHBlY3QoY3JlZGVudGlhbE1hbmFnZXIuaGFzQ3JlZGVudGlhbHMoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZ2V0IGNyZWRlbnRpYWxzIGZpbGUgaW5mbycsICgpID0+IHtcbiAgICAgIC8vIEJlZm9yZSBzYXZpbmdcbiAgICAgIGxldCBpbmZvID0gY3JlZGVudGlhbE1hbmFnZXIuZ2V0Q3JlZGVudGlhbHNJbmZvKCk7XG4gICAgICBleHBlY3QoaW5mby5leGlzdHMpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGluZm8ucGF0aCkudG9Db250YWluKCcudGl0YW4tc2Nhbm5lci9zZWNyZXRzLmVuYycpO1xuXG4gICAgICAvLyBBZnRlciBzYXZpbmdcbiAgICAgIGNyZWRlbnRpYWxNYW5hZ2VyLnNhdmVDcmVkZW50aWFscyh2YWxpZENyZWRlbnRpYWxzKTtcbiAgICAgIGluZm8gPSBjcmVkZW50aWFsTWFuYWdlci5nZXRDcmVkZW50aWFsc0luZm8oKTtcbiAgICAgIGV4cGVjdChpbmZvLmV4aXN0cykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChpbmZvLnNpemUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgaW5mby5tb2RpZmllZCkudG9CZSgnb2JqZWN0Jyk7XG4gICAgICBleHBlY3QoaW5mby5tb2RpZmllZCkudG9CZVRydXRoeSgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHRlc3QgY3JlZGVudGlhbHMgdmFsaWRpdHknLCAoKSA9PiB7XG4gICAgICBleHBlY3QoY3JlZGVudGlhbE1hbmFnZXIudGVzdENyZWRlbnRpYWxzKCkpLnRvQmUoZmFsc2UpO1xuXG4gICAgICBjcmVkZW50aWFsTWFuYWdlci5zYXZlQ3JlZGVudGlhbHModmFsaWRDcmVkZW50aWFscyk7XG4gICAgICBleHBlY3QoY3JlZGVudGlhbE1hbmFnZXIudGVzdENyZWRlbnRpYWxzKCkpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFRlc3Qgd2l0aCB3cm9uZyBwYXNzd29yZFxuICAgICAgY3JlZGVudGlhbE1hbmFnZXIuc2V0TWFzdGVyUGFzc3dvcmQoJ3dyb25nX3Bhc3N3b3JkJyk7XG4gICAgICBleHBlY3QoY3JlZGVudGlhbE1hbmFnZXIudGVzdENyZWRlbnRpYWxzKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXhjaGFuZ2UtU3BlY2lmaWMgT3BlcmF0aW9ucycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGNyZWRlbnRpYWxNYW5hZ2VyLnNldE1hc3RlclBhc3N3b3JkKHRlc3RQYXNzd29yZCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIEJpbmFuY2UgY3JlZGVudGlhbHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdBcGlLZXkgPSAnbmV3X2JpbmFuY2VfYXBpX2tleV8zMl9jaGFyYWN0ZXJzX2xvbmcnO1xuICAgICAgY29uc3QgbmV3QXBpU2VjcmV0ID0gJ25ld19iaW5hbmNlX2FwaV9zZWNyZXRfNjRfY2hhcmFjdGVyc19sb25nX2Zvcl90ZXN0aW5nX3B1cnBvc2VzJztcblxuICAgICAgY3JlZGVudGlhbE1hbmFnZXIudXBkYXRlRXhjaGFuZ2VDcmVkZW50aWFscygnYmluYW5jZScsIG5ld0FwaUtleSwgbmV3QXBpU2VjcmV0KTtcblxuICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSBjcmVkZW50aWFsTWFuYWdlci5sb2FkQ3JlZGVudGlhbHMoKTtcbiAgICAgIGV4cGVjdChjcmVkZW50aWFscy5iaW5hbmNlLmFwaUtleSkudG9CZShuZXdBcGlLZXkpO1xuICAgICAgZXhwZWN0KGNyZWRlbnRpYWxzLmJpbmFuY2UuYXBpU2VjcmV0KS50b0JlKG5ld0FwaVNlY3JldCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIEJ5Yml0IGNyZWRlbnRpYWxzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbmV3QXBpS2V5ID0gJ25ld19ieWJpdF9hcGlfa2V5XzI0X2NoYXJzJztcbiAgICAgIGNvbnN0IG5ld0FwaVNlY3JldCA9ICduZXdfYnliaXRfYXBpX3NlY3JldF80OF9jaGFyYWN0ZXJzX2xvbmdfdGVzdCc7XG5cbiAgICAgIGNyZWRlbnRpYWxNYW5hZ2VyLnVwZGF0ZUV4Y2hhbmdlQ3JlZGVudGlhbHMoJ2J5Yml0JywgbmV3QXBpS2V5LCBuZXdBcGlTZWNyZXQpO1xuXG4gICAgICBjb25zdCBjcmVkZW50aWFscyA9IGNyZWRlbnRpYWxNYW5hZ2VyLmxvYWRDcmVkZW50aWFscygpO1xuICAgICAgZXhwZWN0KGNyZWRlbnRpYWxzLmJ5Yml0LmFwaUtleSkudG9CZShuZXdBcGlLZXkpO1xuICAgICAgZXhwZWN0KGNyZWRlbnRpYWxzLmJ5Yml0LmFwaVNlY3JldCkudG9CZShuZXdBcGlTZWNyZXQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGdldCBzcGVjaWZpYyBleGNoYW5nZSBjcmVkZW50aWFscycsICgpID0+IHtcbiAgICAgIGNyZWRlbnRpYWxNYW5hZ2VyLnNhdmVDcmVkZW50aWFscyh2YWxpZENyZWRlbnRpYWxzKTtcblxuICAgICAgY29uc3QgYmluYW5jZUNyZWRlbnRpYWxzID0gY3JlZGVudGlhbE1hbmFnZXIuZ2V0RXhjaGFuZ2VDcmVkZW50aWFscygnYmluYW5jZScpO1xuICAgICAgZXhwZWN0KGJpbmFuY2VDcmVkZW50aWFscykudG9FcXVhbCh2YWxpZENyZWRlbnRpYWxzLmJpbmFuY2UpO1xuXG4gICAgICBjb25zdCBieWJpdENyZWRlbnRpYWxzID0gY3JlZGVudGlhbE1hbmFnZXIuZ2V0RXhjaGFuZ2VDcmVkZW50aWFscygnYnliaXQnKTtcbiAgICAgIGV4cGVjdChieWJpdENyZWRlbnRpYWxzKS50b0VxdWFsKHZhbGlkQ3JlZGVudGlhbHMuYnliaXQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBuZXcgY3JlZGVudGlhbHMgd2hlbiB1cGRhdGluZyBub24tZXhpc3RlbnQgZmlsZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaUtleSA9ICd0ZXN0X2FwaV9rZXlfMzJfY2hhcmFjdGVyc19sb25nJztcbiAgICAgIGNvbnN0IGFwaVNlY3JldCA9ICd0ZXN0X2FwaV9zZWNyZXRfNjRfY2hhcmFjdGVyc19sb25nX2Zvcl90ZXN0aW5nX3B1cnBvc2VzJztcblxuICAgICAgY3JlZGVudGlhbE1hbmFnZXIudXBkYXRlRXhjaGFuZ2VDcmVkZW50aWFscygnYmluYW5jZScsIGFwaUtleSwgYXBpU2VjcmV0KTtcblxuICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSBjcmVkZW50aWFsTWFuYWdlci5sb2FkQ3JlZGVudGlhbHMoKTtcbiAgICAgIGV4cGVjdChjcmVkZW50aWFscy5iaW5hbmNlLmFwaUtleSkudG9CZShhcGlLZXkpO1xuICAgICAgZXhwZWN0KGNyZWRlbnRpYWxzLmJpbmFuY2UuYXBpU2VjcmV0KS50b0JlKGFwaVNlY3JldCk7XG4gICAgICBleHBlY3QoY3JlZGVudGlhbHMuYnliaXQuYXBpS2V5KS50b0JlKCdwbGFjZWhvbGRlcl9ieWJpdF9hcGlfa2V5XzI0Jyk7XG4gICAgICBleHBlY3QoY3JlZGVudGlhbHMuYnliaXQuYXBpU2VjcmV0KS50b0JlKCdwbGFjZWhvbGRlcl9ieWJpdF9hcGlfc2VjcmV0XzQ4X2NoYXJhY3RlcnNfbG9uZycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTWFzdGVyIFBhc3N3b3JkIENoYW5nZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGNyZWRlbnRpYWxNYW5hZ2VyLnNldE1hc3RlclBhc3N3b3JkKHRlc3RQYXNzd29yZCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY2hhbmdlIG1hc3RlciBwYXNzd29yZCBzdWNjZXNzZnVsbHknLCAoKSA9PiB7XG4gICAgICBjcmVkZW50aWFsTWFuYWdlci5zYXZlQ3JlZGVudGlhbHModmFsaWRDcmVkZW50aWFscyk7XG5cbiAgICAgIGNvbnN0IG5ld1Bhc3N3b3JkID0gJ25ld19tYXN0ZXJfcGFzc3dvcmRfNDU2JztcbiAgICAgIGNyZWRlbnRpYWxNYW5hZ2VyLmNoYW5nZU1hc3RlclBhc3N3b3JkKG5ld1Bhc3N3b3JkKTtcblxuICAgICAgLy8gVmVyaWZ5IGNyZWRlbnRpYWxzIGNhbiBiZSBsb2FkZWQgd2l0aCBuZXcgcGFzc3dvcmRcbiAgICAgIGNvbnN0IGxvYWRlZENyZWRlbnRpYWxzID0gY3JlZGVudGlhbE1hbmFnZXIubG9hZENyZWRlbnRpYWxzKCk7XG4gICAgICBleHBlY3QobG9hZGVkQ3JlZGVudGlhbHMpLnRvRXF1YWwodmFsaWRDcmVkZW50aWFscyk7XG5cbiAgICAgIC8vIFZlcmlmeSBvbGQgcGFzc3dvcmQgbm8gbG9uZ2VyIHdvcmtzXG4gICAgICBjcmVkZW50aWFsTWFuYWdlci5zZXRNYXN0ZXJQYXNzd29yZCh0ZXN0UGFzc3dvcmQpO1xuICAgICAgZXhwZWN0KCgpID0+IGNyZWRlbnRpYWxNYW5hZ2VyLmxvYWRDcmVkZW50aWFscygpKS50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBjaGFuZ2luZyBwYXNzd29yZCB3aXRob3V0IGN1cnJlbnQgcGFzc3dvcmQgc2V0JywgKCkgPT4ge1xuICAgICAgY29uc3QgbmV3Q3JlZGVudGlhbE1hbmFnZXIgPSBuZXcgQ3JlZGVudGlhbE1hbmFnZXIoKTtcbiAgICAgIGV4cGVjdCgoKSA9PiBuZXdDcmVkZW50aWFsTWFuYWdlci5jaGFuZ2VNYXN0ZXJQYXNzd29yZCgnbmV3X3Bhc3N3b3JkJykpLnRvVGhyb3coXG4gICAgICAgICdDdXJyZW50IG1hc3RlciBwYXNzd29yZCBub3Qgc2V0J1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXN0b3JlIG9sZCBwYXNzd29yZCBvbiBmYWlsdXJlJywgKCkgPT4ge1xuICAgICAgY3JlZGVudGlhbE1hbmFnZXIuc2F2ZUNyZWRlbnRpYWxzKHZhbGlkQ3JlZGVudGlhbHMpO1xuXG4gICAgICAvLyBNb2NrIHdyaXRlRmlsZVN5bmMgdG8gZmFpbFxuICAgICAgY29uc3Qgb3JpZ2luYWxXcml0ZUZpbGVTeW5jID0gcmVxdWlyZSgnZnMnKS53cml0ZUZpbGVTeW5jO1xuICAgICAgamVzdC5zcHlPbihyZXF1aXJlKCdmcycpLCAnd3JpdGVGaWxlU3luYycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JpdGUgZmFpbGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbmV3UGFzc3dvcmQgPSAnbmV3X21hc3Rlcl9wYXNzd29yZF80NTYnO1xuICAgICAgZXhwZWN0KCgpID0+IGNyZWRlbnRpYWxNYW5hZ2VyLmNoYW5nZU1hc3RlclBhc3N3b3JkKG5ld1Bhc3N3b3JkKSkudG9UaHJvdygnV3JpdGUgZmFpbGVkJyk7XG5cbiAgICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgZnVuY3Rpb25cbiAgICAgIHJlcXVpcmUoJ2ZzJykud3JpdGVGaWxlU3luYyA9IG9yaWdpbmFsV3JpdGVGaWxlU3luYztcblxuICAgICAgLy8gVmVyaWZ5IG9sZCBwYXNzd29yZCBzdGlsbCB3b3Jrc1xuICAgICAgY29uc3QgbG9hZGVkQ3JlZGVudGlhbHMgPSBjcmVkZW50aWFsTWFuYWdlci5sb2FkQ3JlZGVudGlhbHMoKTtcbiAgICAgIGV4cGVjdChsb2FkZWRDcmVkZW50aWFscykudG9FcXVhbCh2YWxpZENyZWRlbnRpYWxzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBjcmVkZW50aWFsTWFuYWdlci5zZXRNYXN0ZXJQYXNzd29yZCh0ZXN0UGFzc3dvcmQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjcmVkZW50aWFscyB3aXRoIHdoaXRlc3BhY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjcmVkZW50aWFsc1dpdGhXaGl0ZXNwYWNlID0ge1xuICAgICAgICBiaW5hbmNlOiB7XG4gICAgICAgICAgYXBpS2V5OiAnICBiaW5hbmNlX3Rlc3RfYXBpX2tleV8zMl9jaGFyYWN0ZXJzX2xvbmcgICcsXG4gICAgICAgICAgYXBpU2VjcmV0OiAnICBiaW5hbmNlX3Rlc3RfYXBpX3NlY3JldF82NF9jaGFyYWN0ZXJzX2xvbmdfZm9yX3Rlc3RpbmdfcHVycG9zZXMgICdcbiAgICAgICAgfSxcbiAgICAgICAgYnliaXQ6IHtcbiAgICAgICAgICBhcGlLZXk6ICcgIGJ5Yml0X3Rlc3RfYXBpX2tleV8yNF9jaGFycyAgJyxcbiAgICAgICAgICBhcGlTZWNyZXQ6ICcgIGJ5Yml0X3Rlc3RfYXBpX3NlY3JldF80OF9jaGFyYWN0ZXJzX2xvbmdfdGVzdCAgJ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gY3JlZGVudGlhbE1hbmFnZXIuc2F2ZUNyZWRlbnRpYWxzKGNyZWRlbnRpYWxzV2l0aFdoaXRlc3BhY2UpKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB2ZXJ5IGxvbmcgY3JlZGVudGlhbHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsb25nQ3JlZGVudGlhbHMgPSB7XG4gICAgICAgIGJpbmFuY2U6IHtcbiAgICAgICAgICBhcGlLZXk6ICdhJy5yZXBlYXQoMTAwKSxcbiAgICAgICAgICBhcGlTZWNyZXQ6ICdiJy5yZXBlYXQoMjAwKVxuICAgICAgICB9LFxuICAgICAgICBieWJpdDoge1xuICAgICAgICAgIGFwaUtleTogJ2MnLnJlcGVhdCgxMDApLFxuICAgICAgICAgIGFwaVNlY3JldDogJ2QnLnJlcGVhdCgyMDApXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCgoKSA9PiBjcmVkZW50aWFsTWFuYWdlci5zYXZlQ3JlZGVudGlhbHMobG9uZ0NyZWRlbnRpYWxzKSkubm90LnRvVGhyb3coKTtcblxuICAgICAgY29uc3QgbG9hZGVkQ3JlZGVudGlhbHMgPSBjcmVkZW50aWFsTWFuYWdlci5sb2FkQ3JlZGVudGlhbHMoKTtcbiAgICAgIGV4cGVjdChsb2FkZWRDcmVkZW50aWFscykudG9FcXVhbChsb25nQ3JlZGVudGlhbHMpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gY3JlZGVudGlhbHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzcGVjaWFsQ3JlZGVudGlhbHMgPSB7XG4gICAgICAgIGJpbmFuY2U6IHtcbiAgICAgICAgICBhcGlLZXk6ICdiaW5hbmNlX2tleV93aXRoX3NwZWNpYWxfY2hhcnNfIUAjJCVeJiooKScsXG4gICAgICAgICAgYXBpU2VjcmV0OiAnYmluYW5jZV9zZWNyZXRfd2l0aF91bmljb2RlX2NoYXJzX86xzrLOs860zrVfYW5kX2Vtb2ppc1/wn5qA8J+MmSdcbiAgICAgICAgfSxcbiAgICAgICAgYnliaXQ6IHtcbiAgICAgICAgICBhcGlLZXk6ICdieWJpdF9rZXlfd2l0aF9udW1iZXJzXzEyMzQ1Njc4OScsXG4gICAgICAgICAgYXBpU2VjcmV0OiAnYnliaXRfc2VjcmV0X3dpdGhfbWl4ZWRfQ2FzZV9BTkRfc3ltYm9sc18rPVtde318OzosLjw+PydcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KCgpID0+IGNyZWRlbnRpYWxNYW5hZ2VyLnNhdmVDcmVkZW50aWFscyhzcGVjaWFsQ3JlZGVudGlhbHMpKS5ub3QudG9UaHJvdygpO1xuXG4gICAgICBjb25zdCBsb2FkZWRDcmVkZW50aWFscyA9IGNyZWRlbnRpYWxNYW5hZ2VyLmxvYWRDcmVkZW50aWFscygpO1xuICAgICAgZXhwZWN0KGxvYWRlZENyZWRlbnRpYWxzKS50b0VxdWFsKHNwZWNpYWxDcmVkZW50aWFscyk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9