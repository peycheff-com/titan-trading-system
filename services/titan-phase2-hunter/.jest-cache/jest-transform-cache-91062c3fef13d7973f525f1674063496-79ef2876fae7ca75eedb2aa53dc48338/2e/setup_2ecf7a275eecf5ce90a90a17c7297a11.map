{"file":"/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/setup.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/setup.ts"],"sourcesContent":["/**\n * Jest setup file for Titan Phase 2 Hunter tests\n * Runs after the test framework is set up but before each test file\n */\n\n// Extend Jest matchers for better assertions\nimport 'jest-extended';\n\n// Configure Ink testing library for terminal UI components\nimport { configure } from 'ink-testing-library';\n\nconfigure({\n  // Increase timeout for complex UI rendering\n  timeout: 5000\n});\n\n// Mock console methods to reduce noise in tests (but keep errors for debugging)\nconst originalConsole = global.console;\nglobal.console = {\n  ...console,\n  // Keep error and warn for debugging critical issues\n  error: process.env.DEBUG_TESTS ? originalConsole.error : jest.fn(),\n  warn: process.env.DEBUG_TESTS ? originalConsole.warn : jest.fn(),\n  log: jest.fn(),\n  debug: jest.fn(),\n  info: jest.fn(),\n};\n\n// Mock WebSocket for tests\nglobal.WebSocket = jest.fn().mockImplementation(() => ({\n  send: jest.fn(),\n  close: jest.fn(),\n  addEventListener: jest.fn(),\n  removeEventListener: jest.fn(),\n  readyState: 1, // OPEN\n}));\n\n// Mock fetch for API calls\nglobal.fetch = jest.fn();\n\n// Set default test timeout for property-based tests\njest.setTimeout(10000);\n\n// Mock crypto for HMAC signatures in tests\njest.mock('crypto', () => ({\n  createHmac: jest.fn().mockReturnValue({\n    update: jest.fn().mockReturnThis(),\n    digest: jest.fn().mockReturnValue('mocked-signature'),\n  }),\n  randomBytes: jest.fn().mockReturnValue(Buffer.from('mocked-random-16-bytes')),\n  pbkdf2Sync: jest.fn().mockReturnValue(Buffer.from('mocked-derived-key-32-bytes-long')),\n  createCipheriv: jest.fn().mockReturnValue({\n    update: jest.fn().mockReturnValue(Buffer.from('encrypted-data')),\n    final: jest.fn().mockReturnValue(Buffer.from('final-encrypted')),\n  }),\n  createDecipheriv: jest.fn().mockReturnValue({\n    update: jest.fn().mockReturnValue(Buffer.from('decrypted-data')),\n    final: jest.fn().mockReturnValue(Buffer.from('final-decrypted')),\n  }),\n}));\n\n// Mock environment variables\nprocess.env.NODE_ENV = 'test';\nprocess.env.BINANCE_API_KEY = 'test-binance-key';\nprocess.env.BINANCE_API_SECRET = 'test-binance-secret';\nprocess.env.BYBIT_API_KEY = 'test-bybit-key';\nprocess.env.BYBIT_API_SECRET = 'test-bybit-secret';\n\n// Global test utilities\ndeclare global {\n  namespace jest {\n    interface Matchers<R> {\n      toBeWithinRange(floor: number, ceiling: number): R;\n      toBeValidHologramState(): R;\n      toBeValidSignal(): R;\n    }\n  }\n}\n\n// Custom matchers for trading system tests\nexpect.extend({\n  toBeWithinRange(received: number, floor: number, ceiling: number) {\n    const pass = received >= floor && received <= ceiling;\n    if (pass) {\n      return {\n        message: () => `expected ${received} not to be within range ${floor} - ${ceiling}`,\n        pass: true,\n      };\n    } else {\n      return {\n        message: () => `expected ${received} to be within range ${floor} - ${ceiling}`,\n        pass: false,\n      };\n    }\n  },\n\n  toBeValidHologramState(received: any) {\n    const requiredFields = ['dailyBias', 'fourHourLocation', 'fifteenMinTrigger', 'alignmentScore'];\n    const hasAllFields = requiredFields.every(field => received.hasOwnProperty(field));\n    const validScore = received.alignmentScore >= 0 && received.alignmentScore <= 100;\n    \n    const pass = hasAllFields && validScore;\n    if (pass) {\n      return {\n        message: () => `expected ${JSON.stringify(received)} not to be a valid hologram state`,\n        pass: true,\n      };\n    } else {\n      return {\n        message: () => `expected ${JSON.stringify(received)} to be a valid hologram state`,\n        pass: false,\n      };\n    }\n  },\n\n  toBeValidSignal(received: any) {\n    const requiredFields = ['symbol', 'side', 'confidence', 'entry', 'stopLoss', 'takeProfit'];\n    const hasAllFields = requiredFields.every(field => received.hasOwnProperty(field));\n    const validSide = ['Buy', 'Sell'].includes(received.side);\n    const validConfidence = received.confidence >= 0 && received.confidence <= 100;\n    \n    const pass = hasAllFields && validSide && validConfidence;\n    if (pass) {\n      return {\n        message: () => `expected ${JSON.stringify(received)} not to be a valid signal`,\n        pass: true,\n      };\n    } else {\n      return {\n        message: () => `expected ${JSON.stringify(received)} to be a valid signal`,\n        pass: false,\n      };\n    }\n  },\n});"],"version":3}