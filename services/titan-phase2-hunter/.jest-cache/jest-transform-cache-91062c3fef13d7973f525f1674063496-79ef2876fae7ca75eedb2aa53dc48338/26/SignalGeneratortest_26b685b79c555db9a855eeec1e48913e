22e726091ff2cc80bc54c142fff223fe
"use strict";
/**
 * Unit tests for SignalGenerator
 */
Object.defineProperty(exports, "__esModule", { value: true });
const SignalGenerator_1 = require("../../src/execution/SignalGenerator");
// Mock implementations
class MockHologramEngine {
    async analyze(symbol) {
        return {
            symbol,
            timestamp: Date.now(),
            daily: {
                timeframe: '1D',
                trend: 'BULL',
                dealingRange: { high: 52000, low: 48000, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 4000 },
                currentPrice: 49000,
                location: 'DISCOUNT',
                fractals: [],
                bos: [],
                mss: null
            },
            h4: {
                timeframe: '4H',
                trend: 'BULL',
                dealingRange: { high: 50500, low: 49000, midpoint: 49750, premiumThreshold: 49750, discountThreshold: 49750, range: 1500 },
                currentPrice: 49000,
                location: 'DISCOUNT',
                fractals: [],
                bos: [],
                mss: null
            },
            m15: {
                timeframe: '15m',
                trend: 'BULL',
                dealingRange: { high: 49200, low: 48800, midpoint: 49000, premiumThreshold: 49000, discountThreshold: 49000, range: 400 },
                currentPrice: 49000,
                location: 'EQUILIBRIUM',
                fractals: [],
                bos: [],
                mss: { direction: 'BULLISH', price: 49000, barIndex: 10, timestamp: Date.now(), significance: 80 }
            },
            alignmentScore: 85,
            status: 'A+',
            veto: { vetoed: false, reason: null, direction: null },
            rsScore: 0.03
        };
    }
}
class MockSessionProfiler {
    getSessionState() {
        return {
            type: 'LONDON',
            startTime: 7,
            endTime: 10,
            timeRemaining: 2.5
        };
    }
    isKillzone() {
        return true;
    }
}
class MockInefficiencyMapper {
}
class MockCVDValidator {
}
describe('SignalGenerator', () => {
    let signalGenerator;
    let mockHologramEngine;
    let mockSessionProfiler;
    let mockInefficiencyMapper;
    let mockCVDValidator;
    beforeEach(() => {
        mockHologramEngine = new MockHologramEngine();
        mockSessionProfiler = new MockSessionProfiler();
        mockInefficiencyMapper = new MockInefficiencyMapper();
        mockCVDValidator = new MockCVDValidator();
        signalGenerator = new SignalGenerator_1.SignalGenerator(mockHologramEngine, mockSessionProfiler, mockInefficiencyMapper, mockCVDValidator);
    });
    describe('checkHologramStatus', () => {
        it('should return true for A+ status with no veto', () => {
            const hologram = {
                symbol: 'BTCUSDT',
                timestamp: Date.now(),
                daily: {},
                h4: {},
                m15: {},
                alignmentScore: 85,
                status: 'A+',
                veto: { vetoed: false, reason: null, direction: null },
                rsScore: 0.03
            };
            const result = signalGenerator.checkHologramStatus(hologram);
            expect(result).toBe(true);
        });
        it('should return true for B status with sufficient alignment score', () => {
            const hologram = {
                symbol: 'BTCUSDT',
                timestamp: Date.now(),
                daily: {},
                h4: {},
                m15: {},
                alignmentScore: 70,
                status: 'B',
                veto: { vetoed: false, reason: null, direction: null },
                rsScore: 0.03
            };
            const result = signalGenerator.checkHologramStatus(hologram);
            expect(result).toBe(true);
        });
        it('should return false for B status with insufficient alignment score', () => {
            const hologram = {
                symbol: 'BTCUSDT',
                timestamp: Date.now(),
                daily: {},
                h4: {},
                m15: {},
                alignmentScore: 50,
                status: 'B',
                veto: { vetoed: false, reason: null, direction: null },
                rsScore: 0.03
            };
            const result = signalGenerator.checkHologramStatus(hologram);
            expect(result).toBe(false);
        });
        it('should return false for CONFLICT status', () => {
            const hologram = {
                symbol: 'BTCUSDT',
                timestamp: Date.now(),
                daily: {},
                h4: {},
                m15: {},
                alignmentScore: 85,
                status: 'CONFLICT',
                veto: { vetoed: false, reason: null, direction: null },
                rsScore: 0.03
            };
            const result = signalGenerator.checkHologramStatus(hologram);
            expect(result).toBe(false);
        });
        it('should return false when veto is active', () => {
            const hologram = {
                symbol: 'BTCUSDT',
                timestamp: Date.now(),
                daily: {},
                h4: {},
                m15: {},
                alignmentScore: 85,
                status: 'A+',
                veto: { vetoed: true, reason: 'Premium veto', direction: 'LONG' },
                rsScore: 0.03
            };
            const result = signalGenerator.checkHologramStatus(hologram);
            expect(result).toBe(false);
        });
    });
    describe('checkSession', () => {
        it('should return true when in killzone', () => {
            const session = {
                type: 'LONDON',
                startTime: 7,
                endTime: 10,
                timeRemaining: 2.5
            };
            const result = signalGenerator.checkSession(session);
            expect(result).toBe(true);
        });
        it('should return false when not in killzone', () => {
            // Mock the session profiler to return false for killzone
            jest.spyOn(mockSessionProfiler, 'isKillzone').mockReturnValue(false);
            const session = {
                type: 'DEAD_ZONE',
                startTime: 21,
                endTime: 1,
                timeRemaining: 4
            };
            const result = signalGenerator.checkSession(session);
            expect(result).toBe(false);
        });
    });
    describe('checkRSScore', () => {
        it('should return true for LONG direction with positive RS above threshold', () => {
            const result = signalGenerator.checkRSScore(0.03, 'LONG');
            expect(result).toBe(true);
        });
        it('should return false for LONG direction with RS below threshold', () => {
            const result = signalGenerator.checkRSScore(0.005, 'LONG');
            expect(result).toBe(false);
        });
        it('should return true for SHORT direction with negative RS below threshold', () => {
            const result = signalGenerator.checkRSScore(-0.03, 'SHORT');
            expect(result).toBe(true);
        });
        it('should return false for SHORT direction with RS above threshold', () => {
            const result = signalGenerator.checkRSScore(-0.005, 'SHORT');
            expect(result).toBe(false);
        });
    });
    describe('checkPOIProximity', () => {
        it('should return true when price is within proximity of bullish FVG for LONG', () => {
            const currentPrice = 49000;
            const fvg = {
                type: 'BULLISH',
                top: 49100,
                bottom: 48900,
                midpoint: 49000,
                barIndex: 10,
                timestamp: Date.now(),
                mitigated: false,
                fillPercent: 0
            };
            const result = signalGenerator.checkPOIProximity(currentPrice, [fvg], 'LONG');
            expect(result.valid).toBe(true);
            expect(result.poi).toBe(fvg);
        });
        it('should return true when price is within proximity of bullish Order Block for LONG', () => {
            const currentPrice = 49000;
            const ob = {
                type: 'BULLISH',
                high: 49100,
                low: 48950,
                barIndex: 10,
                timestamp: Date.now(),
                mitigated: false,
                confidence: 90
            };
            const result = signalGenerator.checkPOIProximity(currentPrice, [ob], 'LONG');
            expect(result.valid).toBe(true);
            expect(result.poi).toBe(ob);
        });
        it('should return false when price is too far from POI', () => {
            const currentPrice = 49000;
            const fvg = {
                type: 'BULLISH',
                top: 50000,
                bottom: 49800,
                midpoint: 49900,
                barIndex: 10,
                timestamp: Date.now(),
                mitigated: false,
                fillPercent: 0
            };
            const result = signalGenerator.checkPOIProximity(currentPrice, [fvg], 'LONG');
            expect(result.valid).toBe(false);
            expect(result.poi).toBe(null);
        });
        it('should return false when POI is mitigated', () => {
            const currentPrice = 49000;
            const fvg = {
                type: 'BULLISH',
                top: 49100,
                bottom: 48900,
                midpoint: 49000,
                barIndex: 10,
                timestamp: Date.now(),
                mitigated: true,
                fillPercent: 100
            };
            const result = signalGenerator.checkPOIProximity(currentPrice, [fvg], 'LONG');
            expect(result.valid).toBe(false);
            expect(result.poi).toBe(null);
        });
    });
    describe('checkCVDAbsorption', () => {
        it('should return true when CVD confirmation is not required', () => {
            const config = {
                requireCVDConfirmation: false
            };
            const generator = new SignalGenerator_1.SignalGenerator(mockHologramEngine, mockSessionProfiler, mockInefficiencyMapper, mockCVDValidator, config);
            const result = generator.checkCVDAbsorption(null, 'LONG');
            expect(result).toBe(true);
        });
        it('should return true when absorption has sufficient confidence', () => {
            const absorption = {
                price: 49000,
                cvdValue: 1000000,
                timestamp: Date.now(),
                confidence: 85
            };
            const result = signalGenerator.checkCVDAbsorption(absorption, 'LONG');
            expect(result).toBe(true);
        });
        it('should return false when absorption confidence is too low', () => {
            const absorption = {
                price: 49000,
                cvdValue: 1000000,
                timestamp: Date.now(),
                confidence: 50
            };
            const result = signalGenerator.checkCVDAbsorption(absorption, 'LONG');
            expect(result).toBe(false);
        });
        it('should return false when no absorption is provided and CVD is required', () => {
            const result = signalGenerator.checkCVDAbsorption(null, 'LONG');
            expect(result).toBe(false);
        });
    });
    describe('validateSignal', () => {
        it('should return valid signal when all conditions are met', () => {
            const context = {
                hologram: {
                    symbol: 'BTCUSDT',
                    timestamp: Date.now(),
                    daily: {},
                    h4: {},
                    m15: {},
                    alignmentScore: 85,
                    status: 'A+',
                    veto: { vetoed: false, reason: null, direction: null },
                    rsScore: 0.03
                },
                session: {
                    type: 'LONDON',
                    startTime: 7,
                    endTime: 10,
                    timeRemaining: 2.5
                },
                currentPrice: 49000,
                nearbyPOIs: [{
                        type: 'BULLISH',
                        top: 49100,
                        bottom: 48900,
                        midpoint: 49000,
                        barIndex: 10,
                        timestamp: Date.now(),
                        mitigated: false,
                        fillPercent: 0
                    }],
                absorption: {
                    price: 49000,
                    cvdValue: 1000000,
                    timestamp: Date.now(),
                    confidence: 85
                },
                atr: 0.02
            };
            const result = signalGenerator.validateSignal(context, 'LONG');
            expect(result.valid).toBe(true);
            expect(result.reason).toBe('All conditions met');
            expect(result.hologramValid).toBe(true);
            expect(result.sessionValid).toBe(true);
            expect(result.rsValid).toBe(true);
            expect(result.poiValid).toBe(true);
            expect(result.cvdValid).toBe(true);
        });
        it('should return invalid signal when hologram status is insufficient', () => {
            const context = {
                hologram: {
                    symbol: 'BTCUSDT',
                    timestamp: Date.now(),
                    daily: {},
                    h4: {},
                    m15: {},
                    alignmentScore: 85,
                    status: 'CONFLICT',
                    veto: { vetoed: false, reason: null, direction: null },
                    rsScore: 0.03
                },
                session: {
                    type: 'LONDON',
                    startTime: 7,
                    endTime: 10,
                    timeRemaining: 2.5
                },
                currentPrice: 49000,
                nearbyPOIs: [],
                absorption: null,
                atr: 0.02
            };
            const result = signalGenerator.validateSignal(context, 'LONG');
            expect(result.valid).toBe(false);
            expect(result.hologramValid).toBe(false);
            expect(result.reason).toContain('Hologram status invalid');
        });
    });
    describe('configuration management', () => {
        it('should update configuration correctly', () => {
            const newConfig = {
                minAlignmentScore: 70,
                rsThreshold: 0.02
            };
            signalGenerator.updateConfig(newConfig);
            const config = signalGenerator.getConfig();
            expect(config.minAlignmentScore).toBe(70);
            expect(config.rsThreshold).toBe(0.02);
            expect(config.poiProximityPercent).toBe(0.5); // Should retain default
        });
        it('should return current configuration', () => {
            const config = signalGenerator.getConfig();
            expect(config.minAlignmentScore).toBe(60);
            expect(config.rsThreshold).toBe(0.01);
            expect(config.poiProximityPercent).toBe(0.5);
            expect(config.minCVDConfidence).toBe(70);
            expect(config.requireCVDConfirmation).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvdGVzdHMvdW5pdC9TaWduYWxHZW5lcmF0b3IudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBRUgseUVBQTRHO0FBZ0I1Ryx1QkFBdUI7QUFDdkIsTUFBTSxrQkFBa0I7SUFDdEIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFjO1FBQzFCLE9BQU87WUFDTCxNQUFNO1lBQ04sU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDckIsS0FBSyxFQUFFO2dCQUNMLFNBQVMsRUFBRSxJQUFJO2dCQUNmLEtBQUssRUFBRSxNQUFNO2dCQUNiLFlBQVksRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLGdCQUFnQixFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRTtnQkFDMUgsWUFBWSxFQUFFLEtBQUs7Z0JBQ25CLFFBQVEsRUFBRSxVQUFVO2dCQUNwQixRQUFRLEVBQUUsRUFBRTtnQkFDWixHQUFHLEVBQUUsRUFBRTtnQkFDUCxHQUFHLEVBQUUsSUFBSTthQUNWO1lBQ0QsRUFBRSxFQUFFO2dCQUNGLFNBQVMsRUFBRSxJQUFJO2dCQUNmLEtBQUssRUFBRSxNQUFNO2dCQUNiLFlBQVksRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLGdCQUFnQixFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRTtnQkFDMUgsWUFBWSxFQUFFLEtBQUs7Z0JBQ25CLFFBQVEsRUFBRSxVQUFVO2dCQUNwQixRQUFRLEVBQUUsRUFBRTtnQkFDWixHQUFHLEVBQUUsRUFBRTtnQkFDUCxHQUFHLEVBQUUsSUFBSTthQUNWO1lBQ0QsR0FB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QXNCLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9pdmFuL0NvZGUvdHJhZGluZy90aXRhbi9zZXJ2aWNlcy90aXRhbi1waGFzZTItaHVudGVyL3Rlc3RzL3VuaXQvU2lnbmFsR2VuZXJhdG9yLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IHRlc3RzIGZvciBTaWduYWxHZW5lcmF0b3JcbiAqL1xuXG5pbXBvcnQgeyBTaWduYWxHZW5lcmF0b3IsIFNpZ25hbEdlbmVyYXRvckNvbmZpZywgU2lnbmFsQ29udGV4dCB9IGZyb20gJy4uLy4uL3NyYy9leGVjdXRpb24vU2lnbmFsR2VuZXJhdG9yJztcbmltcG9ydCB7IEhvbG9ncmFtRW5naW5lIH0gZnJvbSAnLi4vLi4vc3JjL2VuZ2luZS9Ib2xvZ3JhbUVuZ2luZSc7XG5pbXBvcnQgeyBTZXNzaW9uUHJvZmlsZXIgfSBmcm9tICcuLi8uLi9zcmMvZW5naW5lL1Nlc3Npb25Qcm9maWxlcic7XG5pbXBvcnQgeyBJbmVmZmljaWVuY3lNYXBwZXIgfSBmcm9tICcuLi8uLi9zcmMvZW5naW5lL0luZWZmaWNpZW5jeU1hcHBlcic7XG5pbXBvcnQgeyBDVkRWYWxpZGF0b3IgfSBmcm9tICcuLi8uLi9zcmMvZW5naW5lL0NWRFZhbGlkYXRvcic7XG5pbXBvcnQgeyBcbiAgSG9sb2dyYW1TdGF0ZSwgXG4gIFNlc3Npb25TdGF0ZSwgXG4gIFBPSSwgXG4gIEZWRywgXG4gIE9yZGVyQmxvY2ssIFxuICBMaXF1aWRpdHlQb29sLFxuICBBYnNvcnB0aW9uLFxuICBTaWduYWxEYXRhXG59IGZyb20gJy4uLy4uL3NyYy90eXBlcyc7XG5cbi8vIE1vY2sgaW1wbGVtZW50YXRpb25zXG5jbGFzcyBNb2NrSG9sb2dyYW1FbmdpbmUge1xuICBhc3luYyBhbmFseXplKHN5bWJvbDogc3RyaW5nKTogUHJvbWlzZTxIb2xvZ3JhbVN0YXRlPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN5bWJvbCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGRhaWx5OiB7XG4gICAgICAgIHRpbWVmcmFtZTogJzFEJyxcbiAgICAgICAgdHJlbmQ6ICdCVUxMJyxcbiAgICAgICAgZGVhbGluZ1JhbmdlOiB7IGhpZ2g6IDUyMDAwLCBsb3c6IDQ4MDAwLCBtaWRwb2ludDogNTAwMDAsIHByZW1pdW1UaHJlc2hvbGQ6IDUwMDAwLCBkaXNjb3VudFRocmVzaG9sZDogNTAwMDAsIHJhbmdlOiA0MDAwIH0sXG4gICAgICAgIGN1cnJlbnRQcmljZTogNDkwMDAsXG4gICAgICAgIGxvY2F0aW9uOiAnRElTQ09VTlQnLFxuICAgICAgICBmcmFjdGFsczogW10sXG4gICAgICAgIGJvczogW10sXG4gICAgICAgIG1zczogbnVsbFxuICAgICAgfSxcbiAgICAgIGg0OiB7XG4gICAgICAgIHRpbWVmcmFtZTogJzRIJyxcbiAgICAgICAgdHJlbmQ6ICdCVUxMJyxcbiAgICAgICAgZGVhbGluZ1JhbmdlOiB7IGhpZ2g6IDUwNTAwLCBsb3c6IDQ5MDAwLCBtaWRwb2ludDogNDk3NTAsIHByZW1pdW1UaHJlc2hvbGQ6IDQ5NzUwLCBkaXNjb3VudFRocmVzaG9sZDogNDk3NTAsIHJhbmdlOiAxNTAwIH0sXG4gICAgICAgIGN1cnJlbnRQcmljZTogNDkwMDAsXG4gICAgICAgIGxvY2F0aW9uOiAnRElTQ09VTlQnLFxuICAgICAgICBmcmFjdGFsczogW10sXG4gICAgICAgIGJvczogW10sXG4gICAgICAgIG1zczogbnVsbFxuICAgICAgfSxcbiAgICAgIG0xNToge1xuICAgICAgICB0aW1lZnJhbWU6ICcxNW0nLFxuICAgICAgICB0cmVuZDogJ0JVTEwnLFxuICAgICAgICBkZWFsaW5nUmFuZ2U6IHsgaGlnaDogNDkyMDAsIGxvdzogNDg4MDAsIG1pZHBvaW50OiA0OTAwMCwgcHJlbWl1bVRocmVzaG9sZDogNDkwMDAsIGRpc2NvdW50VGhyZXNob2xkOiA0OTAwMCwgcmFuZ2U6IDQwMCB9LFxuICAgICAgICBjdXJyZW50UHJpY2U6IDQ5MDAwLFxuICAgICAgICBsb2NhdGlvbjogJ0VRVUlMSUJSSVVNJyxcbiAgICAgICAgZnJhY3RhbHM6IFtdLFxuICAgICAgICBib3M6IFtdLFxuICAgICAgICBtc3M6IHsgZGlyZWN0aW9uOiAnQlVMTElTSCcsIHByaWNlOiA0OTAwMCwgYmFySW5kZXg6IDEwLCB0aW1lc3RhbXA6IERhdGUubm93KCksIHNpZ25pZmljYW5jZTogODAgfVxuICAgICAgfSxcbiAgICAgIGFsaWdubWVudFNjb3JlOiA4NSxcbiAgICAgIHN0YXR1czogJ0ErJyxcbiAgICAgIHZldG86IHsgdmV0b2VkOiBmYWxzZSwgcmVhc29uOiBudWxsLCBkaXJlY3Rpb246IG51bGwgfSxcbiAgICAgIHJzU2NvcmU6IDAuMDNcbiAgICB9O1xuICB9XG59XG5cbmNsYXNzIE1vY2tTZXNzaW9uUHJvZmlsZXIge1xuICBnZXRTZXNzaW9uU3RhdGUoKTogU2Vzc2lvblN0YXRlIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ0xPTkRPTicsXG4gICAgICBzdGFydFRpbWU6IDcsXG4gICAgICBlbmRUaW1lOiAxMCxcbiAgICAgIHRpbWVSZW1haW5pbmc6IDIuNVxuICAgIH07XG4gIH1cblxuICBpc0tpbGx6b25lKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmNsYXNzIE1vY2tJbmVmZmljaWVuY3lNYXBwZXIge1xuICAvLyBNb2NrIGltcGxlbWVudGF0aW9uIC0gbm90IHVzZWQgZGlyZWN0bHkgaW4gU2lnbmFsR2VuZXJhdG9yXG59XG5cbmNsYXNzIE1vY2tDVkRWYWxpZGF0b3Ige1xuICAvLyBNb2NrIGltcGxlbWVudGF0aW9uIC0gbm90IHVzZWQgZGlyZWN0bHkgaW4gU2lnbmFsR2VuZXJhdG9yXG59XG5cbmRlc2NyaWJlKCdTaWduYWxHZW5lcmF0b3InLCAoKSA9PiB7XG4gIGxldCBzaWduYWxHZW5lcmF0b3I6IFNpZ25hbEdlbmVyYXRvcjtcbiAgbGV0IG1vY2tIb2xvZ3JhbUVuZ2luZTogTW9ja0hvbG9ncmFtRW5naW5lO1xuICBsZXQgbW9ja1Nlc3Npb25Qcm9maWxlcjogTW9ja1Nlc3Npb25Qcm9maWxlcjtcbiAgbGV0IG1vY2tJbmVmZmljaWVuY3lNYXBwZXI6IE1vY2tJbmVmZmljaWVuY3lNYXBwZXI7XG4gIGxldCBtb2NrQ1ZEVmFsaWRhdG9yOiBNb2NrQ1ZEVmFsaWRhdG9yO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tIb2xvZ3JhbUVuZ2luZSA9IG5ldyBNb2NrSG9sb2dyYW1FbmdpbmUoKTtcbiAgICBtb2NrU2Vzc2lvblByb2ZpbGVyID0gbmV3IE1vY2tTZXNzaW9uUHJvZmlsZXIoKTtcbiAgICBtb2NrSW5lZmZpY2llbmN5TWFwcGVyID0gbmV3IE1vY2tJbmVmZmljaWVuY3lNYXBwZXIoKTtcbiAgICBtb2NrQ1ZEVmFsaWRhdG9yID0gbmV3IE1vY2tDVkRWYWxpZGF0b3IoKTtcblxuICAgIHNpZ25hbEdlbmVyYXRvciA9IG5ldyBTaWduYWxHZW5lcmF0b3IoXG4gICAgICBtb2NrSG9sb2dyYW1FbmdpbmUgYXMgYW55LFxuICAgICAgbW9ja1Nlc3Npb25Qcm9maWxlciBhcyBhbnksXG4gICAgICBtb2NrSW5lZmZpY2llbmN5TWFwcGVyIGFzIGFueSxcbiAgICAgIG1vY2tDVkRWYWxpZGF0b3IgYXMgYW55XG4gICAgKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NoZWNrSG9sb2dyYW1TdGF0dXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSBmb3IgQSsgc3RhdHVzIHdpdGggbm8gdmV0bycsICgpID0+IHtcbiAgICAgIGNvbnN0IGhvbG9ncmFtOiBIb2xvZ3JhbVN0YXRlID0ge1xuICAgICAgICBzeW1ib2w6ICdCVENVU0RUJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBkYWlseToge30gYXMgYW55LFxuICAgICAgICBoNDoge30gYXMgYW55LFxuICAgICAgICBtMTU6IHt9IGFzIGFueSxcbiAgICAgICAgYWxpZ25tZW50U2NvcmU6IDg1LFxuICAgICAgICBzdGF0dXM6ICdBKycsXG4gICAgICAgIHZldG86IHsgdmV0b2VkOiBmYWxzZSwgcmVhc29uOiBudWxsLCBkaXJlY3Rpb246IG51bGwgfSxcbiAgICAgICAgcnNTY29yZTogMC4wM1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gc2lnbmFsR2VuZXJhdG9yLmNoZWNrSG9sb2dyYW1TdGF0dXMoaG9sb2dyYW0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgZm9yIEIgc3RhdHVzIHdpdGggc3VmZmljaWVudCBhbGlnbm1lbnQgc2NvcmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBob2xvZ3JhbTogSG9sb2dyYW1TdGF0ZSA9IHtcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgZGFpbHk6IHt9IGFzIGFueSxcbiAgICAgICAgaDQ6IHt9IGFzIGFueSxcbiAgICAgICAgbTE1OiB7fSBhcyBhbnksXG4gICAgICAgIGFsaWdubWVudFNjb3JlOiA3MCxcbiAgICAgICAgc3RhdHVzOiAnQicsXG4gICAgICAgIHZldG86IHsgdmV0b2VkOiBmYWxzZSwgcmVhc29uOiBudWxsLCBkaXJlY3Rpb246IG51bGwgfSxcbiAgICAgICAgcnNTY29yZTogMC4wM1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gc2lnbmFsR2VuZXJhdG9yLmNoZWNrSG9sb2dyYW1TdGF0dXMoaG9sb2dyYW0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBCIHN0YXR1cyB3aXRoIGluc3VmZmljaWVudCBhbGlnbm1lbnQgc2NvcmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBob2xvZ3JhbTogSG9sb2dyYW1TdGF0ZSA9IHtcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgZGFpbHk6IHt9IGFzIGFueSxcbiAgICAgICAgaDQ6IHt9IGFzIGFueSxcbiAgICAgICAgbTE1OiB7fSBhcyBhbnksXG4gICAgICAgIGFsaWdubWVudFNjb3JlOiA1MCxcbiAgICAgICAgc3RhdHVzOiAnQicsXG4gICAgICAgIHZldG86IHsgdmV0b2VkOiBmYWxzZSwgcmVhc29uOiBudWxsLCBkaXJlY3Rpb246IG51bGwgfSxcbiAgICAgICAgcnNTY29yZTogMC4wM1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gc2lnbmFsR2VuZXJhdG9yLmNoZWNrSG9sb2dyYW1TdGF0dXMoaG9sb2dyYW0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSBmb3IgQ09ORkxJQ1Qgc3RhdHVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgaG9sb2dyYW06IEhvbG9ncmFtU3RhdGUgPSB7XG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIGRhaWx5OiB7fSBhcyBhbnksXG4gICAgICAgIGg0OiB7fSBhcyBhbnksXG4gICAgICAgIG0xNToge30gYXMgYW55LFxuICAgICAgICBhbGlnbm1lbnRTY29yZTogODUsXG4gICAgICAgIHN0YXR1czogJ0NPTkZMSUNUJyxcbiAgICAgICAgdmV0bzogeyB2ZXRvZWQ6IGZhbHNlLCByZWFzb246IG51bGwsIGRpcmVjdGlvbjogbnVsbCB9LFxuICAgICAgICByc1Njb3JlOiAwLjAzXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBzaWduYWxHZW5lcmF0b3IuY2hlY2tIb2xvZ3JhbVN0YXR1cyhob2xvZ3JhbSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gdmV0byBpcyBhY3RpdmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBob2xvZ3JhbTogSG9sb2dyYW1TdGF0ZSA9IHtcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgZGFpbHk6IHt9IGFzIGFueSxcbiAgICAgICAgaDQ6IHt9IGFzIGFueSxcbiAgICAgICAgbTE1OiB7fSBhcyBhbnksXG4gICAgICAgIGFsaWdubWVudFNjb3JlOiA4NSxcbiAgICAgICAgc3RhdHVzOiAnQSsnLFxuICAgICAgICB2ZXRvOiB7IHZldG9lZDogdHJ1ZSwgcmVhc29uOiAnUHJlbWl1bSB2ZXRvJywgZGlyZWN0aW9uOiAnTE9ORycgfSxcbiAgICAgICAgcnNTY29yZTogMC4wM1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gc2lnbmFsR2VuZXJhdG9yLmNoZWNrSG9sb2dyYW1TdGF0dXMoaG9sb2dyYW0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjaGVja1Nlc3Npb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSB3aGVuIGluIGtpbGx6b25lJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2Vzc2lvbjogU2Vzc2lvblN0YXRlID0ge1xuICAgICAgICB0eXBlOiAnTE9ORE9OJyxcbiAgICAgICAgc3RhcnRUaW1lOiA3LFxuICAgICAgICBlbmRUaW1lOiAxMCxcbiAgICAgICAgdGltZVJlbWFpbmluZzogMi41XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBzaWduYWxHZW5lcmF0b3IuY2hlY2tTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gbm90IGluIGtpbGx6b25lJywgKCkgPT4ge1xuICAgICAgLy8gTW9jayB0aGUgc2Vzc2lvbiBwcm9maWxlciB0byByZXR1cm4gZmFsc2UgZm9yIGtpbGx6b25lXG4gICAgICBqZXN0LnNweU9uKG1vY2tTZXNzaW9uUHJvZmlsZXIsICdpc0tpbGx6b25lJykubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcblxuICAgICAgY29uc3Qgc2Vzc2lvbjogU2Vzc2lvblN0YXRlID0ge1xuICAgICAgICB0eXBlOiAnREVBRF9aT05FJyxcbiAgICAgICAgc3RhcnRUaW1lOiAyMSxcbiAgICAgICAgZW5kVGltZTogMSxcbiAgICAgICAgdGltZVJlbWFpbmluZzogNFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gc2lnbmFsR2VuZXJhdG9yLmNoZWNrU2Vzc2lvbihzZXNzaW9uKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY2hlY2tSU1Njb3JlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgZm9yIExPTkcgZGlyZWN0aW9uIHdpdGggcG9zaXRpdmUgUlMgYWJvdmUgdGhyZXNob2xkJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gc2lnbmFsR2VuZXJhdG9yLmNoZWNrUlNTY29yZSgwLjAzLCAnTE9ORycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBMT05HIGRpcmVjdGlvbiB3aXRoIFJTIGJlbG93IHRocmVzaG9sZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNpZ25hbEdlbmVyYXRvci5jaGVja1JTU2NvcmUoMC4wMDUsICdMT05HJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgZm9yIFNIT1JUIGRpcmVjdGlvbiB3aXRoIG5lZ2F0aXZlIFJTIGJlbG93IHRocmVzaG9sZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNpZ25hbEdlbmVyYXRvci5jaGVja1JTU2NvcmUoLTAuMDMsICdTSE9SVCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBTSE9SVCBkaXJlY3Rpb24gd2l0aCBSUyBhYm92ZSB0aHJlc2hvbGQnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBzaWduYWxHZW5lcmF0b3IuY2hlY2tSU1Njb3JlKC0wLjAwNSwgJ1NIT1JUJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NoZWNrUE9JUHJveGltaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgd2hlbiBwcmljZSBpcyB3aXRoaW4gcHJveGltaXR5IG9mIGJ1bGxpc2ggRlZHIGZvciBMT05HJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFByaWNlID0gNDkwMDA7XG4gICAgICBjb25zdCBmdmc6IEZWRyA9IHtcbiAgICAgICAgdHlwZTogJ0JVTExJU0gnLFxuICAgICAgICB0b3A6IDQ5MTAwLFxuICAgICAgICBib3R0b206IDQ4OTAwLFxuICAgICAgICBtaWRwb2ludDogNDkwMDAsXG4gICAgICAgIGJhckluZGV4OiAxMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBtaXRpZ2F0ZWQ6IGZhbHNlLFxuICAgICAgICBmaWxsUGVyY2VudDogMFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gc2lnbmFsR2VuZXJhdG9yLmNoZWNrUE9JUHJveGltaXR5KGN1cnJlbnRQcmljZSwgW2Z2Z10sICdMT05HJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5wb2kpLnRvQmUoZnZnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgd2hlbiBwcmljZSBpcyB3aXRoaW4gcHJveGltaXR5IG9mIGJ1bGxpc2ggT3JkZXIgQmxvY2sgZm9yIExPTkcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50UHJpY2UgPSA0OTAwMDtcbiAgICAgIGNvbnN0IG9iOiBPcmRlckJsb2NrID0ge1xuICAgICAgICB0eXBlOiAnQlVMTElTSCcsXG4gICAgICAgIGhpZ2g6IDQ5MTAwLFxuICAgICAgICBsb3c6IDQ4OTUwLFxuICAgICAgICBiYXJJbmRleDogMTAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgbWl0aWdhdGVkOiBmYWxzZSxcbiAgICAgICAgY29uZmlkZW5jZTogOTBcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNpZ25hbEdlbmVyYXRvci5jaGVja1BPSVByb3hpbWl0eShjdXJyZW50UHJpY2UsIFtvYl0sICdMT05HJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5wb2kpLnRvQmUob2IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBwcmljZSBpcyB0b28gZmFyIGZyb20gUE9JJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFByaWNlID0gNDkwMDA7XG4gICAgICBjb25zdCBmdmc6IEZWRyA9IHtcbiAgICAgICAgdHlwZTogJ0JVTExJU0gnLFxuICAgICAgICB0b3A6IDUwMDAwLFxuICAgICAgICBib3R0b206IDQ5ODAwLFxuICAgICAgICBtaWRwb2ludDogNDk5MDAsXG4gICAgICAgIGJhckluZGV4OiAxMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBtaXRpZ2F0ZWQ6IGZhbHNlLFxuICAgICAgICBmaWxsUGVyY2VudDogMFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gc2lnbmFsR2VuZXJhdG9yLmNoZWNrUE9JUHJveGltaXR5KGN1cnJlbnRQcmljZSwgW2Z2Z10sICdMT05HJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucG9pKS50b0JlKG51bGwpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBQT0kgaXMgbWl0aWdhdGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFByaWNlID0gNDkwMDA7XG4gICAgICBjb25zdCBmdmc6IEZWRyA9IHtcbiAgICAgICAgdHlwZTogJ0JVTExJU0gnLFxuICAgICAgICB0b3A6IDQ5MTAwLFxuICAgICAgICBib3R0b206IDQ4OTAwLFxuICAgICAgICBtaWRwb2ludDogNDkwMDAsXG4gICAgICAgIGJhckluZGV4OiAxMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBtaXRpZ2F0ZWQ6IHRydWUsXG4gICAgICAgIGZpbGxQZXJjZW50OiAxMDBcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNpZ25hbEdlbmVyYXRvci5jaGVja1BPSVByb3hpbWl0eShjdXJyZW50UHJpY2UsIFtmdmddLCAnTE9ORycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnBvaSkudG9CZShudWxsKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NoZWNrQ1ZEQWJzb3JwdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIHdoZW4gQ1ZEIGNvbmZpcm1hdGlvbiBpcyBub3QgcmVxdWlyZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25maWc6IFBhcnRpYWw8U2lnbmFsR2VuZXJhdG9yQ29uZmlnPiA9IHtcbiAgICAgICAgcmVxdWlyZUNWRENvbmZpcm1hdGlvbjogZmFsc2VcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IGdlbmVyYXRvciA9IG5ldyBTaWduYWxHZW5lcmF0b3IoXG4gICAgICAgIG1vY2tIb2xvZ3JhbUVuZ2luZSBhcyBhbnksXG4gICAgICAgIG1vY2tTZXNzaW9uUHJvZmlsZXIgYXMgYW55LFxuICAgICAgICBtb2NrSW5lZmZpY2llbmN5TWFwcGVyIGFzIGFueSxcbiAgICAgICAgbW9ja0NWRFZhbGlkYXRvciBhcyBhbnksXG4gICAgICAgIGNvbmZpZ1xuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gZ2VuZXJhdG9yLmNoZWNrQ1ZEQWJzb3JwdGlvbihudWxsLCAnTE9ORycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgd2hlbiBhYnNvcnB0aW9uIGhhcyBzdWZmaWNpZW50IGNvbmZpZGVuY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBhYnNvcnB0aW9uOiBBYnNvcnB0aW9uID0ge1xuICAgICAgICBwcmljZTogNDkwMDAsXG4gICAgICAgIGN2ZFZhbHVlOiAxMDAwMDAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIGNvbmZpZGVuY2U6IDg1XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBzaWduYWxHZW5lcmF0b3IuY2hlY2tDVkRBYnNvcnB0aW9uKGFic29ycHRpb24sICdMT05HJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBhYnNvcnB0aW9uIGNvbmZpZGVuY2UgaXMgdG9vIGxvdycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFic29ycHRpb246IEFic29ycHRpb24gPSB7XG4gICAgICAgIHByaWNlOiA0OTAwMCxcbiAgICAgICAgY3ZkVmFsdWU6IDEwMDAwMDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgY29uZmlkZW5jZTogNTBcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNpZ25hbEdlbmVyYXRvci5jaGVja0NWREFic29ycHRpb24oYWJzb3JwdGlvbiwgJ0xPTkcnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBubyBhYnNvcnB0aW9uIGlzIHByb3ZpZGVkIGFuZCBDVkQgaXMgcmVxdWlyZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBzaWduYWxHZW5lcmF0b3IuY2hlY2tDVkRBYnNvcnB0aW9uKG51bGwsICdMT05HJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlU2lnbmFsJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHZhbGlkIHNpZ25hbCB3aGVuIGFsbCBjb25kaXRpb25zIGFyZSBtZXQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0OiBTaWduYWxDb250ZXh0ID0ge1xuICAgICAgICBob2xvZ3JhbToge1xuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICBkYWlseToge30gYXMgYW55LFxuICAgICAgICAgIGg0OiB7fSBhcyBhbnksXG4gICAgICAgICAgbTE1OiB7fSBhcyBhbnksXG4gICAgICAgICAgYWxpZ25tZW50U2NvcmU6IDg1LFxuICAgICAgICAgIHN0YXR1czogJ0ErJyxcbiAgICAgICAgICB2ZXRvOiB7IHZldG9lZDogZmFsc2UsIHJlYXNvbjogbnVsbCwgZGlyZWN0aW9uOiBudWxsIH0sXG4gICAgICAgICAgcnNTY29yZTogMC4wM1xuICAgICAgICB9LFxuICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgdHlwZTogJ0xPTkRPTicsXG4gICAgICAgICAgc3RhcnRUaW1lOiA3LFxuICAgICAgICAgIGVuZFRpbWU6IDEwLFxuICAgICAgICAgIHRpbWVSZW1haW5pbmc6IDIuNVxuICAgICAgICB9LFxuICAgICAgICBjdXJyZW50UHJpY2U6IDQ5MDAwLFxuICAgICAgICBuZWFyYnlQT0lzOiBbe1xuICAgICAgICAgIHR5cGU6ICdCVUxMSVNIJyxcbiAgICAgICAgICB0b3A6IDQ5MTAwLFxuICAgICAgICAgIGJvdHRvbTogNDg5MDAsXG4gICAgICAgICAgbWlkcG9pbnQ6IDQ5MDAwLFxuICAgICAgICAgIGJhckluZGV4OiAxMCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgbWl0aWdhdGVkOiBmYWxzZSxcbiAgICAgICAgICBmaWxsUGVyY2VudDogMFxuICAgICAgICB9IGFzIEZWR10sXG4gICAgICAgIGFic29ycHRpb246IHtcbiAgICAgICAgICBwcmljZTogNDkwMDAsXG4gICAgICAgICAgY3ZkVmFsdWU6IDEwMDAwMDAsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgIGNvbmZpZGVuY2U6IDg1XG4gICAgICAgIH0sXG4gICAgICAgIGF0cjogMC4wMlxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gc2lnbmFsR2VuZXJhdG9yLnZhbGlkYXRlU2lnbmFsKGNvbnRleHQsICdMT05HJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZWFzb24pLnRvQmUoJ0FsbCBjb25kaXRpb25zIG1ldCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5ob2xvZ3JhbVZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zZXNzaW9uVmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnJzVmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnBvaVZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdmRWYWxpZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGludmFsaWQgc2lnbmFsIHdoZW4gaG9sb2dyYW0gc3RhdHVzIGlzIGluc3VmZmljaWVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRleHQ6IFNpZ25hbENvbnRleHQgPSB7XG4gICAgICAgIGhvbG9ncmFtOiB7XG4gICAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgIGRhaWx5OiB7fSBhcyBhbnksXG4gICAgICAgICAgaDQ6IHt9IGFzIGFueSxcbiAgICAgICAgICBtMTU6IHt9IGFzIGFueSxcbiAgICAgICAgICBhbGlnbm1lbnRTY29yZTogODUsXG4gICAgICAgICAgc3RhdHVzOiAnQ09ORkxJQ1QnLFxuICAgICAgICAgIHZldG86IHsgdmV0b2VkOiBmYWxzZSwgcmVhc29uOiBudWxsLCBkaXJlY3Rpb246IG51bGwgfSxcbiAgICAgICAgICByc1Njb3JlOiAwLjAzXG4gICAgICAgIH0sXG4gICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICB0eXBlOiAnTE9ORE9OJyxcbiAgICAgICAgICBzdGFydFRpbWU6IDcsXG4gICAgICAgICAgZW5kVGltZTogMTAsXG4gICAgICAgICAgdGltZVJlbWFpbmluZzogMi41XG4gICAgICAgIH0sXG4gICAgICAgIGN1cnJlbnRQcmljZTogNDkwMDAsXG4gICAgICAgIG5lYXJieVBPSXM6IFtdLFxuICAgICAgICBhYnNvcnB0aW9uOiBudWxsLFxuICAgICAgICBhdHI6IDAuMDJcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNpZ25hbEdlbmVyYXRvci52YWxpZGF0ZVNpZ25hbChjb250ZXh0LCAnTE9ORycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmhvbG9ncmFtVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZWFzb24pLnRvQ29udGFpbignSG9sb2dyYW0gc3RhdHVzIGludmFsaWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NvbmZpZ3VyYXRpb24gbWFuYWdlbWVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBjb25maWd1cmF0aW9uIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld0NvbmZpZzogUGFydGlhbDxTaWduYWxHZW5lcmF0b3JDb25maWc+ID0ge1xuICAgICAgICBtaW5BbGlnbm1lbnRTY29yZTogNzAsXG4gICAgICAgIHJzVGhyZXNob2xkOiAwLjAyXG4gICAgICB9O1xuXG4gICAgICBzaWduYWxHZW5lcmF0b3IudXBkYXRlQ29uZmlnKG5ld0NvbmZpZyk7XG4gICAgICBjb25zdCBjb25maWcgPSBzaWduYWxHZW5lcmF0b3IuZ2V0Q29uZmlnKCk7XG5cbiAgICAgIGV4cGVjdChjb25maWcubWluQWxpZ25tZW50U2NvcmUpLnRvQmUoNzApO1xuICAgICAgZXhwZWN0KGNvbmZpZy5yc1RocmVzaG9sZCkudG9CZSgwLjAyKTtcbiAgICAgIGV4cGVjdChjb25maWcucG9pUHJveGltaXR5UGVyY2VudCkudG9CZSgwLjUpOyAvLyBTaG91bGQgcmV0YWluIGRlZmF1bHRcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGN1cnJlbnQgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHNpZ25hbEdlbmVyYXRvci5nZXRDb25maWcoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNvbmZpZy5taW5BbGlnbm1lbnRTY29yZSkudG9CZSg2MCk7XG4gICAgICBleHBlY3QoY29uZmlnLnJzVGhyZXNob2xkKS50b0JlKDAuMDEpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5wb2lQcm94aW1pdHlQZXJjZW50KS50b0JlKDAuNSk7XG4gICAgICBleHBlY3QoY29uZmlnLm1pbkNWRENvbmZpZGVuY2UpLnRvQmUoNzApO1xuICAgICAgZXhwZWN0KGNvbmZpZy5yZXF1aXJlQ1ZEQ29uZmlybWF0aW9uKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==