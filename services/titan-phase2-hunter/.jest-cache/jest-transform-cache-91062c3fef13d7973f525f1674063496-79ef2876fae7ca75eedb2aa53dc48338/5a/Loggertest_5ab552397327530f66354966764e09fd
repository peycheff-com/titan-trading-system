6c984264aa5f51965bfb567011e53567
"use strict";
/**
 * Unit tests for Logger
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Mock fs module
jest.mock('fs');
jest.mock('zlib');
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
const zlib = __importStar(require("zlib"));
const mockFs = fs;
const mockZlib = zlib;
describe('Logger', () => {
    let Logger;
    let logger;
    let testLogDir;
    let mockWriteStream;
    beforeEach(async () => {
        // Reset all mocks
        jest.clearAllMocks();
        testLogDir = path.join(__dirname, 'test-logs');
        // Mock write stream
        mockWriteStream = {
            write: jest.fn(),
            end: jest.fn((callback) => callback && callback()),
            on: jest.fn()
        };
        // Mock fs methods
        mockFs.existsSync.mockReturnValue(true);
        mockFs.mkdirSync.mockReturnValue(undefined);
        mockFs.createWriteStream.mockReturnValue(mockWriteStream);
        mockFs.appendFileSync.mockReturnValue(undefined);
        mockFs.renameSync.mockReturnValue(undefined);
        mockFs.unlinkSync.mockReturnValue(undefined);
        mockFs.readFileSync.mockReturnValue(Buffer.from('test log content'));
        // Import Logger class after mocks are set up
        const LoggerModule = await Promise.resolve().then(() => __importStar(require('../../src/logging/Logger')));
        Logger = LoggerModule.Logger;
        logger = new Logger({
            logDir: testLogDir,
            logFileName: 'test-trades.jsonl',
            maxFileSizeBytes: 1024, // 1KB for testing
            compressionAgeMs: 1000, // 1 second for testing
            enableConsoleOutput: false
        });
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    describe('constructor', () => {
        it('should create log directory if it does not exist', () => {
            mockFs.existsSync.mockReturnValue(false);
            new Logger({ logDir: testLogDir });
            expect(mockFs.mkdirSync).toHaveBeenCalledWith(testLogDir, { recursive: true });
        });
        it('should initialize write stream', () => {
            expect(mockFs.createWriteStream).toHaveBeenCalledWith(path.join(testLogDir, 'test-trades.jsonl'), { flags: 'a' });
        });
    });
    describe('logSignal', () => {
        it('should log signal with comprehensive data', () => {
            const signal = {
                symbol: 'BTCUSDT',
                direction: 'LONG',
                hologramStatus: 'A+',
                alignmentScore: 85,
                rsScore: 0.05,
                sessionType: 'LONDON',
                poiType: 'ORDER_BLOCK',
                cvdConfirmation: true,
                confidence: 90,
                entryPrice: 50000,
                stopLoss: 49000,
                takeProfit: 52500,
                positionSize: 0.1,
                leverage: 5,
                timestamp: Date.now()
            };
            const hologramState = {
                symbol: 'BTCUSDT',
                timestamp: Date.now(),
                daily: {
                    timeframe: '1D',
                    trend: 'BULL',
                    dealingRange: { high: 51000, low: 49000, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 2000 },
                    currentPrice: 50000,
                    location: 'DISCOUNT',
                    fractals: [],
                    bos: [],
                    mss: null
                },
                h4: {
                    timeframe: '4H',
                    trend: 'BULL',
                    dealingRange: { high: 50500, low: 49500, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 1000 },
                    currentPrice: 50000,
                    location: 'DISCOUNT',
                    fractals: [],
                    bos: [],
                    mss: null
                },
                m15: {
                    timeframe: '15m',
                    trend: 'BULL',
                    dealingRange: { high: 50200, low: 49800, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 400 },
                    currentPrice: 50000,
                    location: 'EQUILIBRIUM',
                    fractals: [],
                    bos: [],
                    mss: { direction: 'BULLISH', price: 50000, barIndex: 10, timestamp: Date.now(), significance: 80 }
                },
                alignmentScore: 85,
                status: 'A+',
                veto: { vetoed: false, reason: null, direction: null },
                rsScore: 0.05
            };
            logger.logSignal(signal, hologramState, 'LONDON', 'ORDER_BLOCK', true);
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"type":"signal"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"symbol":"BTCUSDT"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"strategyType":"holographic"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"confidence":90'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"sessionType":"LONDON"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"poiType":"ORDER_BLOCK"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"cvdStatus":true'));
        });
    });
    describe('logExecution', () => {
        it('should log execution with fill details', () => {
            const orderResult = {
                orderId: 'order123',
                symbol: 'BTCUSDT',
                side: 'Buy',
                qty: 0.1,
                price: 50050,
                status: 'FILLED',
                timestamp: Date.now()
            };
            logger.logExecution(orderResult, 0.001, 'signal123', 2.5);
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"type":"execution"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"orderId":"order123"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"fillPrice":50050'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"slippage":0.001'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"signalId":"signal123"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"fees":2.5'));
        });
    });
    describe('logPositionClose', () => {
        it('should log position close with P&L details', () => {
            logger.logPositionClose('pos123', 'BTCUSDT', 'LONG', 50000, 52500, 5.0, 'TAKE_PROFIT', 3600000, // 1 hour
            2.5);
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"type":"close"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"positionId":"pos123"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"exitPrice":52500'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"profitPercentage":5'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"closeReason":"TAKE_PROFIT"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"holdTime":3600000'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"rValue":2.5'));
        });
    });
    describe('logError', () => {
        it('should log error with context', () => {
            logger.logError('ERROR', 'Test error message', {
                symbol: 'BTCUSDT',
                component: 'HologramEngine',
                function: 'analyze',
                data: { test: 'data' }
            });
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"type":"error"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"level":"ERROR"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"message":"Test error message"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"phase":"phase2"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"symbol":"BTCUSDT"'));
            expect(mockWriteStream.write).toHaveBeenCalledWith(expect.stringContaining('"component":"HologramEngine"'));
        });
    });
    describe('JSONL format', () => {
        it('should write each log entry as a single JSON line', () => {
            const signal = {
                symbol: 'BTCUSDT',
                direction: 'LONG',
                hologramStatus: 'A+',
                alignmentScore: 85,
                rsScore: 0.05,
                sessionType: 'LONDON',
                poiType: 'ORDER_BLOCK',
                cvdConfirmation: true,
                confidence: 90,
                entryPrice: 50000,
                stopLoss: 49000,
                takeProfit: 52500,
                positionSize: 0.1,
                leverage: 5,
                timestamp: Date.now()
            };
            const hologramState = {
                symbol: 'BTCUSDT',
                timestamp: Date.now(),
                daily: {
                    timeframe: '1D',
                    trend: 'BULL',
                    dealingRange: { high: 51000, low: 49000, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 2000 },
                    currentPrice: 50000,
                    location: 'DISCOUNT',
                    fractals: [],
                    bos: [],
                    mss: null
                },
                h4: {
                    timeframe: '4H',
                    trend: 'BULL',
                    dealingRange: { high: 50500, low: 49500, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 1000 },
                    currentPrice: 50000,
                    location: 'DISCOUNT',
                    fractals: [],
                    bos: [],
                    mss: null
                },
                m15: {
                    timeframe: '15m',
                    trend: 'BULL',
                    dealingRange: { high: 50200, low: 49800, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 400 },
                    currentPrice: 50000,
                    location: 'EQUILIBRIUM',
                    fractals: [],
                    bos: [],
                    mss: null
                },
                alignmentScore: 85,
                status: 'A+',
                veto: { vetoed: false, reason: null, direction: null },
                rsScore: 0.05
            };
            logger.logSignal(signal, hologramState, 'LONDON', 'ORDER_BLOCK', true);
            const writtenData = mockWriteStream.write.mock.calls[0][0];
            // Should be valid JSON
            expect(() => JSON.parse(writtenData.replace('\n', ''))).not.toThrow();
            // Should end with newline
            expect(writtenData).toMatch(/\n$/);
        });
    });
    describe('updateConfig', () => {
        it('should update configuration', () => {
            const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
            logger.updateConfig({
                maxFileSizeBytes: 2048,
                enableConsoleOutput: true
            });
            expect(consoleSpy).toHaveBeenCalledWith('ðŸ“Š Logger: Configuration updated');
            consoleSpy.mockRestore();
        });
    });
    describe('close', () => {
        it('should close write stream', async () => {
            await logger.close();
            expect(mockWriteStream.end).toHaveBeenCalled();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvdGVzdHMvdW5pdC9Mb2dnZXIudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0gsaUJBQWlCO0FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQVBsQix1Q0FBeUI7QUFDekIsMkNBQTZCO0FBQzdCLDJDQUE2QjtBQU83QixNQUFNLE1BQU0sR0FBRyxFQUE0QixDQUFDO0FBQzVDLE1BQU0sUUFBUSxHQUFHLElBQWdDLENBQUM7QUFFbEQsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7SUFDdEIsSUFBSSxNQUFXLENBQUM7SUFDaEIsSUFBSSxNQUFXLENBQUM7SUFDaEIsSUFBSSxVQUFrQixDQUFDO0lBQ3ZCLElBQUksZUFBb0IsQ0FBQztJQUV6QixVQUFVLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDcEIsa0JBQWtCO1FBQ2xCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUVyQixVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFFL0Msb0JBQW9CO1FBQ3BCLGVBQWUsR0FBRztZQUNoQixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNoQixHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsUUFBUSxJQUFJLFFBQVEsRUFBRSxDQUFDO1lBQ2xELEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ2QsQ0FBQztRQUVGLGtCQUFrQjtRQUNsQixNQUFNLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4QyxNQUFNLENBQUMsU0FBUyxDQUFDLGVBQWUs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O1FBQ3JCLEVBQUUsQ0FBQywyQkFBMkIsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN6QyxNQUFNLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUVyQixNQUFNLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9pdmFuL0NvZGUvdHJhZGluZy90aXRhbi9zZXJ2aWNlcy90aXRhbi1waGFzZTItaHVudGVyL3Rlc3RzL3VuaXQvTG9nZ2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IHRlc3RzIGZvciBMb2dnZXJcbiAqL1xuXG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0ICogYXMgemxpYiBmcm9tICd6bGliJztcbmltcG9ydCB7IFNpZ25hbERhdGEsIEhvbG9ncmFtU3RhdGUsIE9yZGVyUmVzdWx0IH0gZnJvbSAnLi4vLi4vc3JjL3R5cGVzJztcblxuLy8gTW9jayBmcyBtb2R1bGVcbmplc3QubW9jaygnZnMnKTtcbmplc3QubW9jaygnemxpYicpO1xuXG5jb25zdCBtb2NrRnMgPSBmcyBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgZnM+O1xuY29uc3QgbW9ja1psaWIgPSB6bGliIGFzIGplc3QuTW9ja2VkPHR5cGVvZiB6bGliPjtcblxuZGVzY3JpYmUoJ0xvZ2dlcicsICgpID0+IHtcbiAgbGV0IExvZ2dlcjogYW55O1xuICBsZXQgbG9nZ2VyOiBhbnk7XG4gIGxldCB0ZXN0TG9nRGlyOiBzdHJpbmc7XG4gIGxldCBtb2NrV3JpdGVTdHJlYW06IGFueTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAvLyBSZXNldCBhbGwgbW9ja3NcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBcbiAgICB0ZXN0TG9nRGlyID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJ3Rlc3QtbG9ncycpO1xuICAgIFxuICAgIC8vIE1vY2sgd3JpdGUgc3RyZWFtXG4gICAgbW9ja1dyaXRlU3RyZWFtID0ge1xuICAgICAgd3JpdGU6IGplc3QuZm4oKSxcbiAgICAgIGVuZDogamVzdC5mbigoY2FsbGJhY2spID0+IGNhbGxiYWNrICYmIGNhbGxiYWNrKCkpLFxuICAgICAgb246IGplc3QuZm4oKVxuICAgIH07XG5cbiAgICAvLyBNb2NrIGZzIG1ldGhvZHNcbiAgICBtb2NrRnMuZXhpc3RzU3luYy5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG4gICAgbW9ja0ZzLm1rZGlyU3luYy5tb2NrUmV0dXJuVmFsdWUodW5kZWZpbmVkKTtcbiAgICBtb2NrRnMuY3JlYXRlV3JpdGVTdHJlYW0ubW9ja1JldHVyblZhbHVlKG1vY2tXcml0ZVN0cmVhbSBhcyBhbnkpO1xuICAgIG1vY2tGcy5hcHBlbmRGaWxlU3luYy5tb2NrUmV0dXJuVmFsdWUodW5kZWZpbmVkKTtcbiAgICBtb2NrRnMucmVuYW1lU3luYy5tb2NrUmV0dXJuVmFsdWUodW5kZWZpbmVkKTtcbiAgICBtb2NrRnMudW5saW5rU3luYy5tb2NrUmV0dXJuVmFsdWUodW5kZWZpbmVkKTtcbiAgICBtb2NrRnMucmVhZEZpbGVTeW5jLm1vY2tSZXR1cm5WYWx1ZShCdWZmZXIuZnJvbSgndGVzdCBsb2cgY29udGVudCcpKTtcblxuICAgIC8vIEltcG9ydCBMb2dnZXIgY2xhc3MgYWZ0ZXIgbW9ja3MgYXJlIHNldCB1cFxuICAgIGNvbnN0IExvZ2dlck1vZHVsZSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vc3JjL2xvZ2dpbmcvTG9nZ2VyJyk7XG4gICAgTG9nZ2VyID0gTG9nZ2VyTW9kdWxlLkxvZ2dlcjtcblxuICAgIGxvZ2dlciA9IG5ldyBMb2dnZXIoe1xuICAgICAgbG9nRGlyOiB0ZXN0TG9nRGlyLFxuICAgICAgbG9nRmlsZU5hbWU6ICd0ZXN0LXRyYWRlcy5qc29ubCcsXG4gICAgICBtYXhGaWxlU2l6ZUJ5dGVzOiAxMDI0LCAvLyAxS0IgZm9yIHRlc3RpbmdcbiAgICAgIGNvbXByZXNzaW9uQWdlTXM6IDEwMDAsIC8vIDEgc2Vjb25kIGZvciB0ZXN0aW5nXG4gICAgICBlbmFibGVDb25zb2xlT3V0cHV0OiBmYWxzZVxuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjb25zdHJ1Y3RvcicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBsb2cgZGlyZWN0b3J5IGlmIGl0IGRvZXMgbm90IGV4aXN0JywgKCkgPT4ge1xuICAgICAgbW9ja0ZzLmV4aXN0c1N5bmMubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcbiAgICAgIFxuICAgICAgbmV3IExvZ2dlcih7IGxvZ0RpcjogdGVzdExvZ0RpciB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1vY2tGcy5ta2RpclN5bmMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRlc3RMb2dEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHdyaXRlIHN0cmVhbScsICgpID0+IHtcbiAgICAgIGV4cGVjdChtb2NrRnMuY3JlYXRlV3JpdGVTdHJlYW0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBwYXRoLmpvaW4odGVzdExvZ0RpciwgJ3Rlc3QtdHJhZGVzLmpzb25sJyksXG4gICAgICAgIHsgZmxhZ3M6ICdhJyB9XG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9nU2lnbmFsJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbG9nIHNpZ25hbCB3aXRoIGNvbXByZWhlbnNpdmUgZGF0YScsICgpID0+IHtcbiAgICAgIGNvbnN0IHNpZ25hbDogU2lnbmFsRGF0YSA9IHtcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIGRpcmVjdGlvbjogJ0xPTkcnLFxuICAgICAgICBob2xvZ3JhbVN0YXR1czogJ0ErJyxcbiAgICAgICAgYWxpZ25tZW50U2NvcmU6IDg1LFxuICAgICAgICByc1Njb3JlOiAwLjA1LFxuICAgICAgICBzZXNzaW9uVHlwZTogJ0xPTkRPTicsXG4gICAgICAgIHBvaVR5cGU6ICdPUkRFUl9CTE9DSycsXG4gICAgICAgIGN2ZENvbmZpcm1hdGlvbjogdHJ1ZSxcbiAgICAgICAgY29uZmlkZW5jZTogOTAsXG4gICAgICAgIGVudHJ5UHJpY2U6IDUwMDAwLFxuICAgICAgICBzdG9wTG9zczogNDkwMDAsXG4gICAgICAgIHRha2VQcm9maXQ6IDUyNTAwLFxuICAgICAgICBwb3NpdGlvblNpemU6IDAuMSxcbiAgICAgICAgbGV2ZXJhZ2U6IDUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfTtcblxuICAgICAgY29uc3QgaG9sb2dyYW1TdGF0ZTogSG9sb2dyYW1TdGF0ZSA9IHtcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgZGFpbHk6IHtcbiAgICAgICAgICB0aW1lZnJhbWU6ICcxRCcsXG4gICAgICAgICAgdHJlbmQ6ICdCVUxMJyxcbiAgICAgICAgICBkZWFsaW5nUmFuZ2U6IHsgaGlnaDogNTEwMDAsIGxvdzogNDkwMDAsIG1pZHBvaW50OiA1MDAwMCwgcHJlbWl1bVRocmVzaG9sZDogNTAwMDAsIGRpc2NvdW50VGhyZXNob2xkOiA1MDAwMCwgcmFuZ2U6IDIwMDAgfSxcbiAgICAgICAgICBjdXJyZW50UHJpY2U6IDUwMDAwLFxuICAgICAgICAgIGxvY2F0aW9uOiAnRElTQ09VTlQnLFxuICAgICAgICAgIGZyYWN0YWxzOiBbXSxcbiAgICAgICAgICBib3M6IFtdLFxuICAgICAgICAgIG1zczogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBoNDoge1xuICAgICAgICAgIHRpbWVmcmFtZTogJzRIJyxcbiAgICAgICAgICB0cmVuZDogJ0JVTEwnLFxuICAgICAgICAgIGRlYWxpbmdSYW5nZTogeyBoaWdoOiA1MDUwMCwgbG93OiA0OTUwMCwgbWlkcG9pbnQ6IDUwMDAwLCBwcmVtaXVtVGhyZXNob2xkOiA1MDAwMCwgZGlzY291bnRUaHJlc2hvbGQ6IDUwMDAwLCByYW5nZTogMTAwMCB9LFxuICAgICAgICAgIGN1cnJlbnRQcmljZTogNTAwMDAsXG4gICAgICAgICAgbG9jYXRpb246ICdESVNDT1VOVCcsXG4gICAgICAgICAgZnJhY3RhbHM6IFtdLFxuICAgICAgICAgIGJvczogW10sXG4gICAgICAgICAgbXNzOiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIG0xNToge1xuICAgICAgICAgIHRpbWVmcmFtZTogJzE1bScsXG4gICAgICAgICAgdHJlbmQ6ICdCVUxMJyxcbiAgICAgICAgICBkZWFsaW5nUmFuZ2U6IHsgaGlnaDogNTAyMDAsIGxvdzogNDk4MDAsIG1pZHBvaW50OiA1MDAwMCwgcHJlbWl1bVRocmVzaG9sZDogNTAwMDAsIGRpc2NvdW50VGhyZXNob2xkOiA1MDAwMCwgcmFuZ2U6IDQwMCB9LFxuICAgICAgICAgIGN1cnJlbnRQcmljZTogNTAwMDAsXG4gICAgICAgICAgbG9jYXRpb246ICdFUVVJTElCUklVTScsXG4gICAgICAgICAgZnJhY3RhbHM6IFtdLFxuICAgICAgICAgIGJvczogW10sXG4gICAgICAgICAgbXNzOiB7IGRpcmVjdGlvbjogJ0JVTExJU0gnLCBwcmljZTogNTAwMDAsIGJhckluZGV4OiAxMCwgdGltZXN0YW1wOiBEYXRlLm5vdygpLCBzaWduaWZpY2FuY2U6IDgwIH1cbiAgICAgICAgfSxcbiAgICAgICAgYWxpZ25tZW50U2NvcmU6IDg1LFxuICAgICAgICBzdGF0dXM6ICdBKycsXG4gICAgICAgIHZldG86IHsgdmV0b2VkOiBmYWxzZSwgcmVhc29uOiBudWxsLCBkaXJlY3Rpb246IG51bGwgfSxcbiAgICAgICAgcnNTY29yZTogMC4wNVxuICAgICAgfTtcblxuICAgICAgbG9nZ2VyLmxvZ1NpZ25hbChzaWduYWwsIGhvbG9ncmFtU3RhdGUsICdMT05ET04nLCAnT1JERVJfQkxPQ0snLCB0cnVlKTtcblxuICAgICAgZXhwZWN0KG1vY2tXcml0ZVN0cmVhbS53cml0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcInR5cGVcIjpcInNpZ25hbFwiJylcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1dyaXRlU3RyZWFtLndyaXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wic3ltYm9sXCI6XCJCVENVU0RUXCInKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrV3JpdGVTdHJlYW0ud3JpdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJzdHJhdGVneVR5cGVcIjpcImhvbG9ncmFwaGljXCInKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrV3JpdGVTdHJlYW0ud3JpdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJjb25maWRlbmNlXCI6OTAnKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrV3JpdGVTdHJlYW0ud3JpdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJzZXNzaW9uVHlwZVwiOlwiTE9ORE9OXCInKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrV3JpdGVTdHJlYW0ud3JpdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJwb2lUeXBlXCI6XCJPUkRFUl9CTE9DS1wiJylcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1dyaXRlU3RyZWFtLndyaXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wiY3ZkU3RhdHVzXCI6dHJ1ZScpXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9nRXhlY3V0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbG9nIGV4ZWN1dGlvbiB3aXRoIGZpbGwgZGV0YWlscycsICgpID0+IHtcbiAgICAgIGNvbnN0IG9yZGVyUmVzdWx0OiBPcmRlclJlc3VsdCA9IHtcbiAgICAgICAgb3JkZXJJZDogJ29yZGVyMTIzJyxcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHNpZGU6ICdCdXknLFxuICAgICAgICBxdHk6IDAuMSxcbiAgICAgICAgcHJpY2U6IDUwMDUwLFxuICAgICAgICBzdGF0dXM6ICdGSUxMRUQnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIGxvZ2dlci5sb2dFeGVjdXRpb24ob3JkZXJSZXN1bHQsIDAuMDAxLCAnc2lnbmFsMTIzJywgMi41KTtcblxuICAgICAgZXhwZWN0KG1vY2tXcml0ZVN0cmVhbS53cml0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcInR5cGVcIjpcImV4ZWN1dGlvblwiJylcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1dyaXRlU3RyZWFtLndyaXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wib3JkZXJJZFwiOlwib3JkZXIxMjNcIicpXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tXcml0ZVN0cmVhbS53cml0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcImZpbGxQcmljZVwiOjUwMDUwJylcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1dyaXRlU3RyZWFtLndyaXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wic2xpcHBhZ2VcIjowLjAwMScpXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tXcml0ZVN0cmVhbS53cml0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcInNpZ25hbElkXCI6XCJzaWduYWwxMjNcIicpXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tXcml0ZVN0cmVhbS53cml0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcImZlZXNcIjoyLjUnKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvZ1Bvc2l0aW9uQ2xvc2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBsb2cgcG9zaXRpb24gY2xvc2Ugd2l0aCBQJkwgZGV0YWlscycsICgpID0+IHtcbiAgICAgIGxvZ2dlci5sb2dQb3NpdGlvbkNsb3NlKFxuICAgICAgICAncG9zMTIzJyxcbiAgICAgICAgJ0JUQ1VTRFQnLFxuICAgICAgICAnTE9ORycsXG4gICAgICAgIDUwMDAwLFxuICAgICAgICA1MjUwMCxcbiAgICAgICAgNS4wLFxuICAgICAgICAnVEFLRV9QUk9GSVQnLFxuICAgICAgICAzNjAwMDAwLCAvLyAxIGhvdXJcbiAgICAgICAgMi41XG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja1dyaXRlU3RyZWFtLndyaXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1widHlwZVwiOlwiY2xvc2VcIicpXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tXcml0ZVN0cmVhbS53cml0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcInBvc2l0aW9uSWRcIjpcInBvczEyM1wiJylcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1dyaXRlU3RyZWFtLndyaXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wiZXhpdFByaWNlXCI6NTI1MDAnKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrV3JpdGVTdHJlYW0ud3JpdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJwcm9maXRQZXJjZW50YWdlXCI6NScpXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tXcml0ZVN0cmVhbS53cml0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcImNsb3NlUmVhc29uXCI6XCJUQUtFX1BST0ZJVFwiJylcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1dyaXRlU3RyZWFtLndyaXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wiaG9sZFRpbWVcIjozNjAwMDAwJylcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1dyaXRlU3RyZWFtLndyaXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wiclZhbHVlXCI6Mi41JylcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2dFcnJvcicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGxvZyBlcnJvciB3aXRoIGNvbnRleHQnLCAoKSA9PiB7XG4gICAgICBsb2dnZXIubG9nRXJyb3IoJ0VSUk9SJywgJ1Rlc3QgZXJyb3IgbWVzc2FnZScsIHtcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIGNvbXBvbmVudDogJ0hvbG9ncmFtRW5naW5lJyxcbiAgICAgICAgZnVuY3Rpb246ICdhbmFseXplJyxcbiAgICAgICAgZGF0YTogeyB0ZXN0OiAnZGF0YScgfVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrV3JpdGVTdHJlYW0ud3JpdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJ0eXBlXCI6XCJlcnJvclwiJylcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1dyaXRlU3RyZWFtLndyaXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wibGV2ZWxcIjpcIkVSUk9SXCInKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrV3JpdGVTdHJlYW0ud3JpdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJtZXNzYWdlXCI6XCJUZXN0IGVycm9yIG1lc3NhZ2VcIicpXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tXcml0ZVN0cmVhbS53cml0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcInBoYXNlXCI6XCJwaGFzZTJcIicpXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tXcml0ZVN0cmVhbS53cml0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcInN5bWJvbFwiOlwiQlRDVVNEVFwiJylcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1dyaXRlU3RyZWFtLndyaXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wiY29tcG9uZW50XCI6XCJIb2xvZ3JhbUVuZ2luZVwiJylcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdKU09OTCBmb3JtYXQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB3cml0ZSBlYWNoIGxvZyBlbnRyeSBhcyBhIHNpbmdsZSBKU09OIGxpbmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzaWduYWw6IFNpZ25hbERhdGEgPSB7XG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICBkaXJlY3Rpb246ICdMT05HJyxcbiAgICAgICAgaG9sb2dyYW1TdGF0dXM6ICdBKycsXG4gICAgICAgIGFsaWdubWVudFNjb3JlOiA4NSxcbiAgICAgICAgcnNTY29yZTogMC4wNSxcbiAgICAgICAgc2Vzc2lvblR5cGU6ICdMT05ET04nLFxuICAgICAgICBwb2lUeXBlOiAnT1JERVJfQkxPQ0snLFxuICAgICAgICBjdmRDb25maXJtYXRpb246IHRydWUsXG4gICAgICAgIGNvbmZpZGVuY2U6IDkwLFxuICAgICAgICBlbnRyeVByaWNlOiA1MDAwMCxcbiAgICAgICAgc3RvcExvc3M6IDQ5MDAwLFxuICAgICAgICB0YWtlUHJvZml0OiA1MjUwMCxcbiAgICAgICAgcG9zaXRpb25TaXplOiAwLjEsXG4gICAgICAgIGxldmVyYWdlOiA1LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGhvbG9ncmFtU3RhdGU6IEhvbG9ncmFtU3RhdGUgPSB7XG4gICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIGRhaWx5OiB7XG4gICAgICAgICAgdGltZWZyYW1lOiAnMUQnLFxuICAgICAgICAgIHRyZW5kOiAnQlVMTCcsXG4gICAgICAgICAgZGVhbGluZ1JhbmdlOiB7IGhpZ2g6IDUxMDAwLCBsb3c6IDQ5MDAwLCBtaWRwb2ludDogNTAwMDAsIHByZW1pdW1UaHJlc2hvbGQ6IDUwMDAwLCBkaXNjb3VudFRocmVzaG9sZDogNTAwMDAsIHJhbmdlOiAyMDAwIH0sXG4gICAgICAgICAgY3VycmVudFByaWNlOiA1MDAwMCxcbiAgICAgICAgICBsb2NhdGlvbjogJ0RJU0NPVU5UJyxcbiAgICAgICAgICBmcmFjdGFsczogW10sXG4gICAgICAgICAgYm9zOiBbXSxcbiAgICAgICAgICBtc3M6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgaDQ6IHtcbiAgICAgICAgICB0aW1lZnJhbWU6ICc0SCcsXG4gICAgICAgICAgdHJlbmQ6ICdCVUxMJyxcbiAgICAgICAgICBkZWFsaW5nUmFuZ2U6IHsgaGlnaDogNTA1MDAsIGxvdzogNDk1MDAsIG1pZHBvaW50OiA1MDAwMCwgcHJlbWl1bVRocmVzaG9sZDogNTAwMDAsIGRpc2NvdW50VGhyZXNob2xkOiA1MDAwMCwgcmFuZ2U6IDEwMDAgfSxcbiAgICAgICAgICBjdXJyZW50UHJpY2U6IDUwMDAwLFxuICAgICAgICAgIGxvY2F0aW9uOiAnRElTQ09VTlQnLFxuICAgICAgICAgIGZyYWN0YWxzOiBbXSxcbiAgICAgICAgICBib3M6IFtdLFxuICAgICAgICAgIG1zczogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBtMTU6IHtcbiAgICAgICAgICB0aW1lZnJhbWU6ICcxNW0nLFxuICAgICAgICAgIHRyZW5kOiAnQlVMTCcsXG4gICAgICAgICAgZGVhbGluZ1JhbmdlOiB7IGhpZ2g6IDUwMjAwLCBsb3c6IDQ5ODAwLCBtaWRwb2ludDogNTAwMDAsIHByZW1pdW1UaHJlc2hvbGQ6IDUwMDAwLCBkaXNjb3VudFRocmVzaG9sZDogNTAwMDAsIHJhbmdlOiA0MDAgfSxcbiAgICAgICAgICBjdXJyZW50UHJpY2U6IDUwMDAwLFxuICAgICAgICAgIGxvY2F0aW9uOiAnRVFVSUxJQlJJVU0nLFxuICAgICAgICAgIGZyYWN0YWxzOiBbXSxcbiAgICAgICAgICBib3M6IFtdLFxuICAgICAgICAgIG1zczogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBhbGlnbm1lbnRTY29yZTogODUsXG4gICAgICAgIHN0YXR1czogJ0ErJyxcbiAgICAgICAgdmV0bzogeyB2ZXRvZWQ6IGZhbHNlLCByZWFzb246IG51bGwsIGRpcmVjdGlvbjogbnVsbCB9LFxuICAgICAgICByc1Njb3JlOiAwLjA1XG4gICAgICB9O1xuXG4gICAgICBsb2dnZXIubG9nU2lnbmFsKHNpZ25hbCwgaG9sb2dyYW1TdGF0ZSwgJ0xPTkRPTicsICdPUkRFUl9CTE9DSycsIHRydWUpO1xuXG4gICAgICBjb25zdCB3cml0dGVuRGF0YSA9IG1vY2tXcml0ZVN0cmVhbS53cml0ZS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgYmUgdmFsaWQgSlNPTlxuICAgICAgZXhwZWN0KCgpID0+IEpTT04ucGFyc2Uod3JpdHRlbkRhdGEucmVwbGFjZSgnXFxuJywgJycpKSkubm90LnRvVGhyb3coKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGVuZCB3aXRoIG5ld2xpbmVcbiAgICAgIGV4cGVjdCh3cml0dGVuRGF0YSkudG9NYXRjaCgvXFxuJC8pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndXBkYXRlQ29uZmlnJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXBkYXRlIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gICAgICBcbiAgICAgIGxvZ2dlci51cGRhdGVDb25maWcoe1xuICAgICAgICBtYXhGaWxlU2l6ZUJ5dGVzOiAyMDQ4LFxuICAgICAgICBlbmFibGVDb25zb2xlT3V0cHV0OiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfwn5OKIExvZ2dlcjogQ29uZmlndXJhdGlvbiB1cGRhdGVkJyk7XG4gICAgICBcbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Nsb3NlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2xvc2Ugd3JpdGUgc3RyZWFtJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbG9nZ2VyLmNsb3NlKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrV3JpdGVTdHJlYW0uZW5kKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9