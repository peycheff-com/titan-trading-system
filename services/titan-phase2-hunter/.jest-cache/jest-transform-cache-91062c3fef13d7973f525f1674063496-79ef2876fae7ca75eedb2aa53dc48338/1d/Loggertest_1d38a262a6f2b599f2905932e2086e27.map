{"file":"/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/unit/Logger.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/unit/Logger.test.ts"],"sourcesContent":["/**\n * Unit tests for Logger\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as zlib from 'zlib';\nimport { Logger } from '../../src/logging/Logger';\nimport { SignalData, HologramState, OrderResult } from '../../src/types';\n\n// Mock fs module\njest.mock('fs');\njest.mock('zlib');\n\nconst mockFs = fs as jest.Mocked<typeof fs>;\nconst mockZlib = zlib as jest.Mocked<typeof zlib>;\n\ndescribe('Logger', () => {\n  let logger: Logger;\n  let testLogDir: string;\n  let mockWriteStream: any;\n\n  beforeEach(() => {\n    // Reset all mocks\n    jest.clearAllMocks();\n    \n    testLogDir = path.join(__dirname, 'test-logs');\n    \n    // Mock write stream\n    mockWriteStream = {\n      write: jest.fn(),\n      end: jest.fn((callback) => callback && callback()),\n      on: jest.fn()\n    };\n\n    // Mock fs methods\n    mockFs.existsSync.mockReturnValue(true);\n    mockFs.mkdirSync.mockReturnValue(undefined);\n    mockFs.createWriteStream.mockReturnValue(mockWriteStream as any);\n    mockFs.appendFileSync.mockReturnValue(undefined);\n    mockFs.renameSync.mockReturnValue(undefined);\n    mockFs.unlinkSync.mockReturnValue(undefined);\n    mockFs.readFileSync.mockReturnValue(Buffer.from('test log content'));\n    \n    // Mock promisified functions\n    const mockStat = jest.fn();\n    const mockReaddir = jest.fn();\n    const mockWriteFile = jest.fn();\n    \n    // Mock require for promisify\n    jest.doMock('util', () => ({\n      promisify: jest.fn((fn) => {\n        if (fn === fs.stat) return mockStat;\n        if (fn === fs.readdir) return mockReaddir;\n        if (fn === fs.writeFile) return mockWriteFile;\n        if (fn === zlib.gzip) return jest.fn().mockResolvedValue(Buffer.from('compressed'));\n        return jest.fn();\n      })\n    }));\n\n    logger = new Logger({\n      logDir: testLogDir,\n      logFileName: 'test-trades.jsonl',\n      maxFileSizeBytes: 1024, // 1KB for testing\n      compressionAgeMs: 1000, // 1 second for testing\n      enableConsoleOutput: false\n    });\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('constructor', () => {\n    it('should create log directory if it does not exist', () => {\n      mockFs.existsSync.mockReturnValue(false);\n      \n      new Logger({ logDir: testLogDir });\n      \n      expect(mockFs.mkdirSync).toHaveBeenCalledWith(testLogDir, { recursive: true });\n    });\n\n    it('should initialize write stream', () => {\n      expect(mockFs.createWriteStream).toHaveBeenCalledWith(\n        path.join(testLogDir, 'test-trades.jsonl'),\n        { flags: 'a' }\n      );\n    });\n  });\n\n  describe('logSignal', () => {\n    it('should log signal with comprehensive data', () => {\n      const signal: SignalData = {\n        symbol: 'BTCUSDT',\n        direction: 'LONG',\n        hologramStatus: 'A+',\n        alignmentScore: 85,\n        rsScore: 0.05,\n        sessionType: 'LONDON',\n        poiType: 'ORDER_BLOCK',\n        cvdConfirmation: true,\n        confidence: 90,\n        entryPrice: 50000,\n        stopLoss: 49000,\n        takeProfit: 52500,\n        positionSize: 0.1,\n        leverage: 5,\n        timestamp: Date.now()\n      };\n\n      const hologramState: HologramState = {\n        symbol: 'BTCUSDT',\n        timestamp: Date.now(),\n        daily: {\n          timeframe: '1D',\n          trend: 'BULL',\n          dealingRange: { high: 51000, low: 49000, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 2000 },\n          currentPrice: 50000,\n          location: 'DISCOUNT',\n          fractals: [],\n          bos: [],\n          mss: null\n        },\n        h4: {\n          timeframe: '4H',\n          trend: 'BULL',\n          dealingRange: { high: 50500, low: 49500, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 1000 },\n          currentPrice: 50000,\n          location: 'DISCOUNT',\n          fractals: [],\n          bos: [],\n          mss: null\n        },\n        m15: {\n          timeframe: '15m',\n          trend: 'BULL',\n          dealingRange: { high: 50200, low: 49800, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 400 },\n          currentPrice: 50000,\n          location: 'EQUILIBRIUM',\n          fractals: [],\n          bos: [],\n          mss: { direction: 'BULLISH', price: 50000, barIndex: 10, timestamp: Date.now(), significance: 80 }\n        },\n        alignmentScore: 85,\n        status: 'A+',\n        veto: { vetoed: false, reason: null, direction: null },\n        rsScore: 0.05\n      };\n\n      logger.logSignal(signal, hologramState, 'LONDON', 'ORDER_BLOCK', true);\n\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"type\":\"signal\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"symbol\":\"BTCUSDT\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"strategyType\":\"holographic\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"confidence\":90')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"sessionType\":\"LONDON\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"poiType\":\"ORDER_BLOCK\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"cvdStatus\":true')\n      );\n    });\n  });\n\n  describe('logExecution', () => {\n    it('should log execution with fill details', () => {\n      const orderResult: OrderResult = {\n        orderId: 'order123',\n        symbol: 'BTCUSDT',\n        side: 'Buy',\n        qty: 0.1,\n        price: 50050,\n        status: 'FILLED',\n        timestamp: Date.now()\n      };\n\n      logger.logExecution(orderResult, 0.001, 'signal123', 2.5);\n\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"type\":\"execution\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"orderId\":\"order123\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"fillPrice\":50050')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"slippage\":0.001')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"signalId\":\"signal123\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"fees\":2.5')\n      );\n    });\n  });\n\n  describe('logPositionClose', () => {\n    it('should log position close with P&L details', () => {\n      logger.logPositionClose(\n        'pos123',\n        'BTCUSDT',\n        'LONG',\n        50000,\n        52500,\n        5.0,\n        'TAKE_PROFIT',\n        3600000, // 1 hour\n        2.5\n      );\n\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"type\":\"close\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"positionId\":\"pos123\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"exitPrice\":52500')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"profitPercentage\":5')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"closeReason\":\"TAKE_PROFIT\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"holdTime\":3600000')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"rValue\":2.5')\n      );\n    });\n  });\n\n  describe('logError', () => {\n    it('should log error with context', () => {\n      logger.logError('ERROR', 'Test error message', {\n        symbol: 'BTCUSDT',\n        component: 'HologramEngine',\n        function: 'analyze',\n        data: { test: 'data' }\n      });\n\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"type\":\"error\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"level\":\"ERROR\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"message\":\"Test error message\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"phase\":\"phase2\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"symbol\":\"BTCUSDT\"')\n      );\n      expect(mockWriteStream.write).toHaveBeenCalledWith(\n        expect.stringContaining('\"component\":\"HologramEngine\"')\n      );\n    });\n  });\n\n  describe('JSONL format', () => {\n    it('should write each log entry as a single JSON line', () => {\n      const signal: SignalData = {\n        symbol: 'BTCUSDT',\n        direction: 'LONG',\n        hologramStatus: 'A+',\n        alignmentScore: 85,\n        rsScore: 0.05,\n        sessionType: 'LONDON',\n        poiType: 'ORDER_BLOCK',\n        cvdConfirmation: true,\n        confidence: 90,\n        entryPrice: 50000,\n        stopLoss: 49000,\n        takeProfit: 52500,\n        positionSize: 0.1,\n        leverage: 5,\n        timestamp: Date.now()\n      };\n\n      const hologramState: HologramState = {\n        symbol: 'BTCUSDT',\n        timestamp: Date.now(),\n        daily: {\n          timeframe: '1D',\n          trend: 'BULL',\n          dealingRange: { high: 51000, low: 49000, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 2000 },\n          currentPrice: 50000,\n          location: 'DISCOUNT',\n          fractals: [],\n          bos: [],\n          mss: null\n        },\n        h4: {\n          timeframe: '4H',\n          trend: 'BULL',\n          dealingRange: { high: 50500, low: 49500, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 1000 },\n          currentPrice: 50000,\n          location: 'DISCOUNT',\n          fractals: [],\n          bos: [],\n          mss: null\n        },\n        m15: {\n          timeframe: '15m',\n          trend: 'BULL',\n          dealingRange: { high: 50200, low: 49800, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 400 },\n          currentPrice: 50000,\n          location: 'EQUILIBRIUM',\n          fractals: [],\n          bos: [],\n          mss: null\n        },\n        alignmentScore: 85,\n        status: 'A+',\n        veto: { vetoed: false, reason: null, direction: null },\n        rsScore: 0.05\n      };\n\n      logger.logSignal(signal, hologramState, 'LONDON', 'ORDER_BLOCK', true);\n\n      const writtenData = mockWriteStream.write.mock.calls[0][0];\n      \n      // Should be valid JSON\n      expect(() => JSON.parse(writtenData.replace('\\n', ''))).not.toThrow();\n      \n      // Should end with newline\n      expect(writtenData).toMatch(/\\n$/);\n    });\n  });\n\n  describe('updateConfig', () => {\n    it('should update configuration', () => {\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\n      \n      logger.updateConfig({\n        maxFileSizeBytes: 2048,\n        enableConsoleOutput: true\n      });\n\n      expect(consoleSpy).toHaveBeenCalledWith('ðŸ“Š Logger: Configuration updated');\n      \n      consoleSpy.mockRestore();\n    });\n  });\n\n  describe('close', () => {\n    it('should close write stream', async () => {\n      await logger.close();\n      \n      expect(mockWriteStream.end).toHaveBeenCalled();\n    });\n  });\n});"],"version":3}