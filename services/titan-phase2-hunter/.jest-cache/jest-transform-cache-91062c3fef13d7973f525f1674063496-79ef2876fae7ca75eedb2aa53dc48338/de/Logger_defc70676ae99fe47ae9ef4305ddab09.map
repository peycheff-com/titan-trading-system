{"file":"/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/src/logging/Logger.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/src/logging/Logger.ts"],"sourcesContent":["/**\n * Logger for Titan Phase 2 - The Hunter\n * \n * Implements JSONL (JSON Lines) logging for signals, executions, and errors\n * with automatic log rotation and compression.\n * \n * Requirements: 16.1-16.7 (Signal Execution Logging)\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as zlib from 'zlib';\nimport { promisify } from 'util';\nimport { \n  SignalData, \n  ExecutionData, \n  HologramState, \n  SessionType, \n  OrderResult \n} from '../types';\n\nconst gzip = promisify(zlib.gzip);\nconst writeFile = promisify(fs.writeFile);\nconst stat = promisify(fs.stat);\nconst readdir = promisify(fs.readdir);\n\n/**\n * Signal log entry structure\n */\nexport interface SignalLogEntry {\n  timestamp: number;\n  type: 'signal';\n  symbol: string;\n  strategyType: 'holographic';\n  confidence: number;\n  leverage: number;\n  entryPrice: number;\n  stopPrice: number;\n  targetPrice: number;\n  alignmentState: {\n    status: string;\n    score: number;\n    daily: string;\n    h4: string;\n    m15: string;\n  };\n  rsScore: number;\n  sessionType: SessionType;\n  poiType: 'FVG' | 'ORDER_BLOCK' | 'LIQUIDITY_POOL';\n  cvdStatus: boolean;\n  direction: 'LONG' | 'SHORT';\n  positionSize: number;\n}\n\n/**\n * Execution log entry structure\n */\nexport interface ExecutionLogEntry {\n  timestamp: number;\n  type: 'execution';\n  signalId?: string;\n  orderId: string;\n  symbol: string;\n  side: 'Buy' | 'Sell';\n  qty: number;\n  fillPrice: number;\n  fillTimestamp: number;\n  orderType: 'MARKET' | 'LIMIT' | 'POST_ONLY';\n  slippage: number;\n  fees?: number;\n}\n\n/**\n * Position close log entry structure\n */\nexport interface CloseLogEntry {\n  timestamp: number;\n  type: 'close';\n  positionId: string;\n  symbol: string;\n  side: 'LONG' | 'SHORT';\n  exitPrice: number;\n  exitTimestamp: number;\n  profitPercentage: number;\n  closeReason: 'STOP_LOSS' | 'TAKE_PROFIT' | 'TRAILING_STOP' | 'MANUAL' | 'EMERGENCY';\n  holdTime: number; // milliseconds\n  entryPrice: number;\n  rValue: number; // R multiple\n}\n\n/**\n * Error log entry structure\n */\nexport interface ErrorLogEntry {\n  timestamp: number;\n  type: 'error';\n  level: 'WARNING' | 'ERROR' | 'CRITICAL';\n  message: string;\n  context: {\n    symbol?: string;\n    phase: 'phase2';\n    component?: string;\n    function?: string;\n    stack?: string;\n    data?: any;\n  };\n}\n\nexport type LogEntry = SignalLogEntry | ExecutionLogEntry | CloseLogEntry | ErrorLogEntry;\n\n/**\n * Logger configuration\n */\nexport interface LoggerConfig {\n  logDir: string;\n  logFileName: string;\n  maxFileSizeBytes: number; // 10MB default\n  compressionAgeMs: number; // 30 days default\n  enableConsoleOutput: boolean;\n}\n\n/**\n * JSONL Logger for Titan Phase 2\n * \n * Logs all signals, executions, and errors to trades.jsonl file\n * with automatic rotation and compression.\n */\nexport class Logger {\n  private config: LoggerConfig;\n  private logFilePath: string;\n  private writeStream: fs.WriteStream | null = null;\n\n  constructor(config?: Partial<LoggerConfig>) {\n    this.config = {\n      logDir: path.join(process.cwd(), 'logs'),\n      logFileName: 'trades.jsonl',\n      maxFileSizeBytes: 10 * 1024 * 1024, // 10MB\n      compressionAgeMs: 30 * 24 * 60 * 60 * 1000, // 30 days\n      enableConsoleOutput: false,\n      ...config\n    };\n\n    this.logFilePath = path.join(this.config.logDir, this.config.logFileName);\n    this.ensureLogDirectory();\n    this.initializeWriteStream();\n  }\n\n  /**\n   * Ensure log directory exists\n   */\n  private ensureLogDirectory(): void {\n    if (!fs.existsSync(this.config.logDir)) {\n      fs.mkdirSync(this.config.logDir, { recursive: true });\n    }\n  }\n\n  /**\n   * Initialize write stream for log file\n   */\n  private initializeWriteStream(): void {\n    this.writeStream = fs.createWriteStream(this.logFilePath, { flags: 'a' });\n    \n    this.writeStream.on('error', (error) => {\n      console.error('Logger write stream error:', error);\n    });\n  }\n\n  /**\n   * Log a signal with comprehensive hologram state\n   * \n   * Requirement 16.2: Include timestamp, symbol, strategy type, confidence, \n   * leverage, entry price, stop price, target price, alignment state, \n   * RS score, session type, POI type, and CVD status\n   */\n  public logSignal(\n    signal: SignalData,\n    hologramState: HologramState,\n    sessionType: SessionType,\n    poiType: 'FVG' | 'ORDER_BLOCK' | 'LIQUIDITY_POOL',\n    cvdConfirmation: boolean\n  ): void {\n    const logEntry: SignalLogEntry = {\n      timestamp: Date.now(),\n      type: 'signal',\n      symbol: signal.symbol,\n      strategyType: 'holographic',\n      confidence: signal.confidence,\n      leverage: signal.leverage,\n      entryPrice: signal.entryPrice,\n      stopPrice: signal.stopLoss,\n      targetPrice: signal.takeProfit,\n      alignmentState: {\n        status: hologramState.status,\n        score: hologramState.alignmentScore,\n        daily: `${hologramState.daily.trend}_${hologramState.daily.location}`,\n        h4: `${hologramState.h4.trend}_${hologramState.h4.location}`,\n        m15: `${hologramState.m15.trend}_${hologramState.m15.mss ? 'MSS' : 'NO_MSS'}`\n      },\n      rsScore: hologramState.rsScore,\n      sessionType,\n      poiType,\n      cvdStatus: cvdConfirmation,\n      direction: signal.direction,\n      positionSize: signal.positionSize\n    };\n\n    this.writeLogEntry(logEntry);\n\n    if (this.config.enableConsoleOutput) {\n      console.log(`üìä SIGNAL: ${signal.symbol} ${signal.direction} @ ${signal.entryPrice} (${hologramState.status}, RS:${hologramState.rsScore.toFixed(3)})`);\n    }\n  }\n\n  /**\n   * Log order execution with fill details\n   * \n   * Requirement 16.3: Include fill price, fill timestamp, order type, and slippage\n   */\n  public logExecution(\n    orderResult: OrderResult,\n    slippage: number,\n    signalId?: string,\n    fees?: number\n  ): void {\n    const logEntry: ExecutionLogEntry = {\n      timestamp: Date.now(),\n      type: 'execution',\n      signalId,\n      orderId: orderResult.orderId,\n      symbol: orderResult.symbol,\n      side: orderResult.side,\n      qty: orderResult.qty,\n      fillPrice: orderResult.price,\n      fillTimestamp: orderResult.timestamp,\n      orderType: 'LIMIT', // Phase 2 uses Post-Only Limit Orders\n      slippage,\n      fees\n    };\n\n    this.writeLogEntry(logEntry);\n\n    if (this.config.enableConsoleOutput) {\n      console.log(`‚úÖ FILL: ${orderResult.symbol} ${orderResult.side} ${orderResult.qty} @ ${orderResult.price} (slippage: ${(slippage * 100).toFixed(3)}%)`);\n    }\n  }\n\n  /**\n   * Log position close with P&L details\n   * \n   * Requirement 16.4: Include exit price, exit timestamp, profit percentage, \n   * close reason, and hold time\n   */\n  public logPositionClose(\n    positionId: string,\n    symbol: string,\n    side: 'LONG' | 'SHORT',\n    entryPrice: number,\n    exitPrice: number,\n    profitPercentage: number,\n    closeReason: 'STOP_LOSS' | 'TAKE_PROFIT' | 'TRAILING_STOP' | 'MANUAL' | 'EMERGENCY',\n    holdTime: number,\n    rValue: number\n  ): void {\n    const logEntry: CloseLogEntry = {\n      timestamp: Date.now(),\n      type: 'close',\n      positionId,\n      symbol,\n      side,\n      exitPrice,\n      exitTimestamp: Date.now(),\n      profitPercentage,\n      closeReason,\n      holdTime,\n      entryPrice,\n      rValue\n    };\n\n    this.writeLogEntry(logEntry);\n\n    if (this.config.enableConsoleOutput) {\n      const pnlColor = profitPercentage >= 0 ? '\\x1b[32m' : '\\x1b[31m';\n      console.log(`${pnlColor}üí∞ CLOSE: ${symbol} ${side} ${profitPercentage.toFixed(2)}% (${rValue.toFixed(2)}R) - ${closeReason}\\x1b[0m`);\n    }\n  }\n\n  /**\n   * Log error with context\n   */\n  public logError(\n    level: 'WARNING' | 'ERROR' | 'CRITICAL',\n    message: string,\n    context: {\n      symbol?: string;\n      component?: string;\n      function?: string;\n      stack?: string;\n      data?: any;\n    } = {}\n  ): void {\n    const logEntry: ErrorLogEntry = {\n      timestamp: Date.now(),\n      type: 'error',\n      level,\n      message,\n      context: {\n        ...context,\n        phase: 'phase2'\n      }\n    };\n\n    this.writeLogEntry(logEntry);\n\n    if (this.config.enableConsoleOutput) {\n      const levelColor = level === 'CRITICAL' ? '\\x1b[31m' : level === 'ERROR' ? '\\x1b[33m' : '\\x1b[36m';\n      console.log(`${levelColor}‚ùå ${level}: ${message}\\x1b[0m`);\n    }\n  }\n\n  /**\n   * Write log entry to JSONL file\n   * \n   * Requirement 16.1: Append signal data to trades.jsonl file as single JSON object per line\n   */\n  private writeLogEntry(entry: LogEntry): void {\n    try {\n      const jsonLine = JSON.stringify(entry) + '\\n';\n      \n      if (this.writeStream) {\n        this.writeStream.write(jsonLine);\n      } else {\n        // Fallback to synchronous write if stream is not available\n        fs.appendFileSync(this.logFilePath, jsonLine);\n      }\n\n      // Check if log rotation is needed\n      this.checkLogRotation();\n    } catch (error) {\n      console.error('Failed to write log entry:', error);\n    }\n  }\n\n  /**\n   * Check if log file needs rotation\n   * \n   * Requirement 16.5: Rotate log file when size exceeds 10MB\n   */\n  private async checkLogRotation(): Promise<void> {\n    try {\n      const stats = await stat(this.logFilePath);\n      \n      if (stats.size >= this.config.maxFileSizeBytes) {\n        await this.rotateLogFile();\n      }\n    } catch (error) {\n      // File might not exist yet, ignore\n    }\n  }\n\n  /**\n   * Rotate log file with timestamp suffix\n   * \n   * Requirement 16.5: Rotate log file with timestamp suffix\n   */\n  private async rotateLogFile(): Promise<void> {\n    try {\n      // Close current write stream\n      if (this.writeStream) {\n        this.writeStream.end();\n        this.writeStream = null;\n      }\n\n      // Create rotated filename with timestamp\n      const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n      const rotatedFileName = this.config.logFileName.replace('.jsonl', `-${timestamp}.jsonl`);\n      const rotatedFilePath = path.join(this.config.logDir, rotatedFileName);\n\n      // Rename current log file\n      fs.renameSync(this.logFilePath, rotatedFilePath);\n\n      // Create new write stream\n      this.initializeWriteStream();\n\n      console.log(`üìÅ Log rotated: ${rotatedFileName}`);\n\n      // Schedule compression check\n      this.scheduleCompressionCheck();\n    } catch (error) {\n      console.error('Failed to rotate log file:', error);\n      // Reinitialize write stream on error\n      this.initializeWriteStream();\n    }\n  }\n\n  /**\n   * Schedule compression check for old log files\n   * \n   * Requirement 16.6: Compress log files older than 30 days\n   */\n  private scheduleCompressionCheck(): void {\n    // Run compression check asynchronously\n    setImmediate(() => {\n      this.compressOldLogs().catch(error => {\n        console.error('Failed to compress old logs:', error);\n      });\n    });\n  }\n\n  /**\n   * Compress log files older than configured age\n   * \n   * Requirement 16.6: Compress log file to gzip format when age exceeds 30 days\n   */\n  private async compressOldLogs(): Promise<void> {\n    try {\n      const files = await readdir(this.config.logDir);\n      const now = Date.now();\n\n      for (const file of files) {\n        // Skip current log file and already compressed files\n        if (file === this.config.logFileName || file.endsWith('.gz')) {\n          continue;\n        }\n\n        // Only process .jsonl files\n        if (!file.endsWith('.jsonl')) {\n          continue;\n        }\n\n        const filePath = path.join(this.config.logDir, file);\n        const stats = await stat(filePath);\n        const fileAge = now - stats.mtime.getTime();\n\n        // Compress if older than configured age\n        if (fileAge > this.config.compressionAgeMs) {\n          await this.compressLogFile(filePath);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to check old logs for compression:', error);\n    }\n  }\n\n  /**\n   * Compress a single log file to gzip format\n   */\n  private async compressLogFile(filePath: string): Promise<void> {\n    try {\n      const fileContent = fs.readFileSync(filePath);\n      const compressed = await gzip(fileContent);\n      const compressedPath = filePath + '.gz';\n\n      await writeFile(compressedPath, compressed);\n      fs.unlinkSync(filePath); // Remove original file\n\n      console.log(`üóúÔ∏è Compressed: ${path.basename(filePath)} ‚Üí ${path.basename(compressedPath)}`);\n    } catch (error) {\n      console.error(`Failed to compress ${filePath}:`, error);\n    }\n  }\n\n  /**\n   * Get log file statistics\n   */\n  public async getLogStats(): Promise<{\n    currentSize: number;\n    totalFiles: number;\n    compressedFiles: number;\n    oldestFile: string | null;\n    newestFile: string | null;\n  }> {\n    try {\n      const files = await readdir(this.config.logDir);\n      const logFiles = files.filter(f => f.endsWith('.jsonl') || f.endsWith('.jsonl.gz'));\n      \n      let currentSize = 0;\n      let oldestFile: string | null = null;\n      let newestFile: string | null = null;\n      let oldestTime = Infinity;\n      let newestTime = 0;\n\n      // Get current log file size\n      try {\n        const currentStats = await stat(this.logFilePath);\n        currentSize = currentStats.size;\n      } catch {\n        // File might not exist yet\n      }\n\n      // Find oldest and newest files\n      for (const file of logFiles) {\n        const filePath = path.join(this.config.logDir, file);\n        const stats = await stat(filePath);\n        \n        if (stats.mtime.getTime() < oldestTime) {\n          oldestTime = stats.mtime.getTime();\n          oldestFile = file;\n        }\n        \n        if (stats.mtime.getTime() > newestTime) {\n          newestTime = stats.mtime.getTime();\n          newestFile = file;\n        }\n      }\n\n      return {\n        currentSize,\n        totalFiles: logFiles.length,\n        compressedFiles: files.filter(f => f.endsWith('.gz')).length,\n        oldestFile,\n        newestFile\n      };\n    } catch (error) {\n      console.error('Failed to get log stats:', error);\n      return {\n        currentSize: 0,\n        totalFiles: 0,\n        compressedFiles: 0,\n        oldestFile: null,\n        newestFile: null\n      };\n    }\n  }\n\n  /**\n   * Flush and close logger\n   */\n  public async close(): Promise<void> {\n    if (this.writeStream) {\n      return new Promise((resolve) => {\n        this.writeStream!.end(() => {\n          this.writeStream = null;\n          resolve();\n        });\n      });\n    }\n  }\n\n  /**\n   * Update logger configuration\n   */\n  public updateConfig(newConfig: Partial<LoggerConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    console.log('üìä Logger: Configuration updated');\n  }\n}\n\n/**\n * Default logger instance for Phase 2\n * Lazy initialization to avoid issues with mocking in tests\n */\nlet _logger: Logger | null = null;\n\nexport const getLogger = (): Logger => {\n  if (!_logger) {\n    _logger = new Logger({\n      enableConsoleOutput: process.env.NODE_ENV !== 'production'\n    });\n  }\n  return _logger;\n};\n\nexport const logger = getLogger();\n\n/**\n * Convenience functions for common logging operations\n */\nexport const logSignal = (\n  signal: SignalData,\n  hologramState: HologramState,\n  sessionType: SessionType,\n  poiType: 'FVG' | 'ORDER_BLOCK' | 'LIQUIDITY_POOL',\n  cvdConfirmation: boolean\n) => getLogger().logSignal(signal, hologramState, sessionType, poiType, cvdConfirmation);\n\nexport const logExecution = (\n  orderResult: OrderResult,\n  slippage: number,\n  signalId?: string,\n  fees?: number\n) => getLogger().logExecution(orderResult, slippage, signalId, fees);\n\nexport const logPositionClose = (\n  positionId: string,\n  symbol: string,\n  side: 'LONG' | 'SHORT',\n  entryPrice: number,\n  exitPrice: number,\n  profitPercentage: number,\n  closeReason: 'STOP_LOSS' | 'TAKE_PROFIT' | 'TRAILING_STOP' | 'MANUAL' | 'EMERGENCY',\n  holdTime: number,\n  rValue: number\n) => getLogger().logPositionClose(positionId, symbol, side, entryPrice, exitPrice, profitPercentage, closeReason, holdTime, rValue);\n\nexport const logError = (\n  level: 'WARNING' | 'ERROR' | 'CRITICAL',\n  message: string,\n  context?: {\n    symbol?: string;\n    component?: string;\n    function?: string;\n    stack?: string;\n    data?: any;\n  }\n) => getLogger().logError(level, message, context);"],"version":3}