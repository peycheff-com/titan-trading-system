38b5635f0389a2e28626256b935e38cb
"use strict";
/**
 * Bybit Perpetuals Client for Execution Target
 *
 * Provides REST API methods for order execution, data fetching, and account management.
 * Includes HMAC signature generation, caching, and retry logic.
 *
 * Requirements: 7.1-7.7 (Execution), 11.1-11.7 (Multi-Timeframe Data)
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.BybitPerpsClient = void 0;
const crypto_1 = require("crypto");
class BybitPerpsClient {
    baseUrl = 'https://api.bybit.com';
    apiKey;
    apiSecret;
    cache = new Map();
    CACHE_TTL = 5 * 60 * 1000; // 5 minutes
    REQUEST_TIMEOUT = 10000; // 10 seconds
    RETRY_ATTEMPTS = 3;
    RETRY_DELAY = 1000; // 1 second
    constructor(apiKey, apiSecret) {
        this.apiKey = apiKey;
        this.apiSecret = apiSecret;
    }
    /**
     * Fetch top symbols by 24h volume (top 100)
     * @returns Promise with array of symbol names
     */
    async fetchTopSymbols() {
        const cacheKey = 'top_symbols';
        const cached = this.getFromCache(cacheKey);
        if (cached)
            return cached;
        try {
            const response = await this.makeRequest('GET', '/v5/market/tickers', {
                category: 'linear'
            });
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            // Sort by 24h volume and take top 100
            const tickers = response.result.list;
            const sortedSymbols = tickers
                .filter(ticker => ticker.symbol.endsWith('USDT'))
                .sort((a, b) => parseFloat(b.turnover24h) - parseFloat(a.turnover24h))
                .slice(0, 100)
                .map(ticker => ticker.symbol);
            this.setCache(cacheKey, sortedSymbols, this.CACHE_TTL);
            return sortedSymbols;
        }
        catch (error) {
            throw new Error(`Failed to fetch top symbols: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Fetch OHLCV data with caching (5-minute TTL)
     * @param symbol - Trading symbol (e.g., 'BTCUSDT')
     * @param interval - Timeframe ('1', '5', '15', '30', '60', '240', '1440')
     * @param limit - Number of candles (max 1000)
     * @returns Promise with OHLCV array
     */
    async fetchOHLCV(symbol, interval, limit = 200) {
        const cacheKey = `ohlcv_${symbol}_${interval}_${limit}`;
        const cached = this.getFromCache(cacheKey);
        if (cached)
            return cached;
        try {
            // Convert interval to Bybit format
            const bybitInterval = this.convertInterval(interval);
            const response = await this.makeRequest('GET', '/v5/market/kline', {
                category: 'linear',
                symbol: symbol.toUpperCase(),
                interval: bybitInterval,
                limit: Math.min(limit, 1000).toString()
            });
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            const klineData = response.result;
            const ohlcv = klineData.list.map(candle => ({
                timestamp: parseInt(candle[0]),
                open: parseFloat(candle[1]),
                high: parseFloat(candle[2]),
                low: parseFloat(candle[3]),
                close: parseFloat(candle[4]),
                volume: parseFloat(candle[5])
            }));
            // Sort by timestamp (oldest first)
            ohlcv.sort((a, b) => a.timestamp - b.timestamp);
            this.setCache(cacheKey, ohlcv, this.CACHE_TTL);
            return ohlcv;
        }
        catch (error) {
            throw new Error(`Failed to fetch OHLCV for ${symbol}: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Get current price for a symbol
     * @param symbol - Trading symbol (e.g., 'BTCUSDT')
     * @returns Promise with current price
     */
    async getCurrentPrice(symbol) {
        try {
            const response = await this.makeRequest('GET', '/v5/market/tickers', {
                category: 'linear',
                symbol: symbol.toUpperCase()
            });
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            const ticker = response.result.list[0];
            if (!ticker) {
                throw new Error(`No ticker data found for ${symbol}`);
            }
            return parseFloat(ticker.lastPrice);
        }
        catch (error) {
            throw new Error(`Failed to get current price for ${symbol}: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Get account equity
     * @returns Promise with total equity in USDT
     */
    async getEquity() {
        try {
            const response = await this.makeRequest('GET', '/v5/account/wallet-balance', {
                accountType: 'UNIFIED'
            }, true);
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            const account = response.result.list[0];
            if (!account) {
                throw new Error('No account data found');
            }
            return parseFloat(account.totalEquity);
        }
        catch (error) {
            throw new Error(`Failed to get equity: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Place order with HMAC signature and Post-Only support
     * @param params - Order parameters
     * @returns Promise with order result
     */
    async placeOrder(params) {
        try {
            const orderParams = {
                category: 'linear',
                symbol: params.symbol.toUpperCase(),
                side: params.side,
                orderType: params.type === 'POST_ONLY' ? 'Limit' : params.type === 'LIMIT' ? 'Limit' : 'Market',
                qty: params.qty.toString(),
                timeInForce: params.type === 'POST_ONLY' ? 'PostOnly' : 'GTC'
            };
            // Add price for limit orders
            if (params.type === 'LIMIT' || params.type === 'POST_ONLY') {
                if (!params.price) {
                    throw new Error('Price is required for limit orders');
                }
                orderParams.price = params.price.toString();
            }
            // Add stop loss and take profit if provided
            if (params.stopLoss) {
                orderParams.stopLoss = params.stopLoss.toString();
            }
            if (params.takeProfit) {
                orderParams.takeProfit = params.takeProfit.toString();
            }
            const response = await this.makeRequest('POST', '/v5/order/create', orderParams, true);
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            const orderData = response.result;
            return {
                orderId: orderData.orderId,
                symbol: orderData.symbol,
                side: orderData.side,
                qty: parseFloat(orderData.qty),
                price: parseFloat(orderData.price || orderData.avgPrice || '0'),
                status: this.mapOrderStatus(orderData.orderStatus),
                timestamp: parseInt(orderData.createTime)
            };
        }
        catch (error) {
            throw new Error(`Failed to place order: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Place order with retry logic (2-second timeout)
     * @param params - Order parameters
     * @param maxRetries - Maximum retry attempts (default: 2)
     * @returns Promise with order result
     */
    async placeOrderWithRetry(params, maxRetries = 2) {
        let lastError;
        for (let attempt = 0; attempt <= maxRetries; attempt++) {
            try {
                // Set timeout for each attempt
                const timeoutPromise = new Promise((_, reject) => {
                    setTimeout(() => reject(new Error('Order timeout after 2 seconds')), 2000);
                });
                const orderPromise = this.placeOrder(params);
                const result = await Promise.race([orderPromise, timeoutPromise]);
                return result;
            }
            catch (error) {
                lastError = error instanceof Error ? error : new Error('Unknown error');
                if (attempt < maxRetries) {
                    console.warn(`⚠️ Order attempt ${attempt + 1} failed, retrying: ${lastError.message}`);
                    await this.sleep(this.RETRY_DELAY);
                }
            }
        }
        throw new Error(`Order failed after ${maxRetries + 1} attempts: ${lastError.message}`);
    }
    /**
     * Set leverage for a symbol
     * @param symbol - Trading symbol
     * @param leverage - Leverage value (1-100)
     * @returns Promise with success status
     */
    async setLeverage(symbol, leverage) {
        try {
            const response = await this.makeRequest('POST', '/v5/position/set-leverage', {
                category: 'linear',
                symbol: symbol.toUpperCase(),
                buyLeverage: leverage.toString(),
                sellLeverage: leverage.toString()
            }, true);
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            return true;
        }
        catch (error) {
            throw new Error(`Failed to set leverage for ${symbol}: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Set stop loss for a position
     * @param symbol - Trading symbol
     * @param stopLoss - Stop loss price
     * @param positionIdx - Position index (0 for one-way mode)
     * @returns Promise with success status
     */
    async setStopLoss(symbol, stopLoss, positionIdx = 0) {
        try {
            const response = await this.makeRequest('POST', '/v5/position/trading-stop', {
                category: 'linear',
                symbol: symbol.toUpperCase(),
                stopLoss: stopLoss.toString(),
                positionIdx: positionIdx.toString()
            }, true);
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            return true;
        }
        catch (error) {
            throw new Error(`Failed to set stop loss for ${symbol}: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Set take profit for a position
     * @param symbol - Trading symbol
     * @param takeProfit - Take profit price
     * @param positionIdx - Position index (0 for one-way mode)
     * @returns Promise with success status
     */
    async setTakeProfit(symbol, takeProfit, positionIdx = 0) {
        try {
            const response = await this.makeRequest('POST', '/v5/position/trading-stop', {
                category: 'linear',
                symbol: symbol.toUpperCase(),
                takeProfit: takeProfit.toString(),
                positionIdx: positionIdx.toString()
            }, true);
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            return true;
        }
        catch (error) {
            throw new Error(`Failed to set take profit for ${symbol}: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Get order status
     * @param orderId - Order ID
     * @param symbol - Trading symbol
     * @returns Promise with order status
     */
    async getOrderStatus(orderId, symbol) {
        try {
            const response = await this.makeRequest('GET', '/v5/order/realtime', {
                category: 'linear',
                orderId: orderId,
                symbol: symbol.toUpperCase()
            }, true);
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            const orders = response.result.list;
            if (orders.length === 0) {
                throw new Error(`Order ${orderId} not found`);
            }
            return this.mapOrderStatus(orders[0].orderStatus);
        }
        catch (error) {
            throw new Error(`Failed to get order status: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Cancel order
     * @param orderId - Order ID
     * @param symbol - Trading symbol
     * @returns Promise with success status
     */
    async cancelOrder(orderId, symbol) {
        try {
            const response = await this.makeRequest('POST', '/v5/order/cancel', {
                category: 'linear',
                orderId: orderId,
                symbol: symbol.toUpperCase()
            }, true);
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            return true;
        }
        catch (error) {
            throw new Error(`Failed to cancel order: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Get position info
     * @param symbol - Trading symbol
     * @returns Promise with position info
     */
    async getPositionInfo(symbol) {
        try {
            const response = await this.makeRequest('GET', '/v5/position/list', {
                category: 'linear',
                symbol: symbol.toUpperCase()
            }, true);
            if (response.retCode !== 0) {
                throw new Error(`Bybit API error: ${response.retMsg}`);
            }
            const positions = response.result.list;
            return positions.length > 0 ? positions[0] : null;
        }
        catch (error) {
            throw new Error(`Failed to get position info: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Make authenticated or public API request
     * @param method - HTTP method
     * @param endpoint - API endpoint
     * @param params - Request parameters
     * @param signed - Whether to sign the request
     * @returns Promise with API response
     */
    async makeRequest(method, endpoint, params = {}, signed = false) {
        const timestamp = Date.now().toString();
        let url = `${this.baseUrl}${endpoint}`;
        let body = '';
        // Prepare headers
        const headers = {
            'Content-Type': 'application/json',
            'X-BAPI-TIMESTAMP': timestamp,
            'X-BAPI-RECV-WINDOW': '5000'
        };
        if (signed) {
            headers['X-BAPI-API-KEY'] = this.apiKey;
        }
        // Prepare request data
        if (method === 'GET') {
            const queryString = new URLSearchParams(params).toString();
            if (queryString) {
                url += `?${queryString}`;
            }
        }
        else {
            body = JSON.stringify(params);
        }
        // Generate signature for authenticated requests
        if (signed) {
            const signaturePayload = timestamp + this.apiKey + '5000' + (method === 'GET' ? new URLSearchParams(params).toString() : body);
            headers['X-BAPI-SIGN'] = (0, crypto_1.createHmac)('sha256', this.apiSecret).update(signaturePayload).digest('hex');
        }
        try {
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), this.REQUEST_TIMEOUT);
            const response = await fetch(url, {
                method,
                headers,
                body: method === 'POST' ? body : undefined,
                signal: controller.signal
            });
            clearTimeout(timeoutId);
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            return await response.json();
        }
        catch (error) {
            if (error instanceof Error && error.name === 'AbortError') {
                throw new Error('Request timeout');
            }
            throw new Error(`Request failed: ${error instanceof Error ? error.message : 'Unknown error'}`);
        }
    }
    /**
     * Convert interval to Bybit format
     * @param interval - Standard interval
     * @returns Bybit interval format
     */
    convertInterval(interval) {
        const intervalMap = {
            '1m': '1',
            '5m': '5',
            '15m': '15',
            '30m': '30',
            '1h': '60',
            '4h': '240',
            '1d': 'D',
            '1D': 'D',
            '1w': 'W',
            '1W': 'W'
        };
        return intervalMap[interval] || interval;
    }
    /**
     * Map Bybit order status to standard format
     * @param bybitStatus - Bybit order status
     * @returns Standard order status
     */
    mapOrderStatus(bybitStatus) {
        const statusMap = {
            'New': 'NEW',
            'PartiallyFilled': 'PARTIALLY_FILLED',
            'Filled': 'FILLED',
            'Cancelled': 'CANCELLED',
            'Rejected': 'REJECTED',
            'PartiallyFilledCanceled': 'CANCELLED',
            'Deactivated': 'CANCELLED'
        };
        return statusMap[bybitStatus] || 'NEW';
    }
    /**
     * Get data from cache if valid
     * @param key - Cache key
     * @returns Cached data or null
     */
    getFromCache(key) {
        const entry = this.cache.get(key);
        if (!entry)
            return null;
        const now = Date.now();
        if (now - entry.timestamp > entry.ttl) {
            this.cache.delete(key);
            return null;
        }
        return entry.data;
    }
    /**
     * Set data in cache
     * @param key - Cache key
     * @param data - Data to cache
     * @param ttl - Time to live in milliseconds
     */
    setCache(key, data, ttl) {
        this.cache.set(key, {
            data,
            timestamp: Date.now(),
            ttl
        });
    }
    /**
     * Sleep for specified milliseconds
     * @param ms - Milliseconds to sleep
     * @returns Promise that resolves after delay
     */
    sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
    /**
     * Clear cache
     */
    clearCache() {
        this.cache.clear();
    }
    /**
     * Get cache size
     * @returns Number of cached entries
     */
    getCacheSize() {
        return this.cache.size;
    }
}
exports.BybitPerpsClient = BybitPerpsClient;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvc3JjL2V4Y2hhbmdlcy9CeWJpdFBlcnBzQ2xpZW50LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7OztHQU9HOzs7QUFFSCxtQ0FBb0M7QUF5SHBDLE1BQWEsZ0JBQWdCO0lBQ25CLE9BQU8sR0FBRyx1QkFBdUIsQ0FBQztJQUNsQyxNQUFNLENBQVM7SUFDZixTQUFTLENBQVM7SUFDbEIsS0FBSyxHQUFHLElBQUksR0FBRyxFQUEyQixDQUFDO0lBQ2xDLFNBQVMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLFlBQVk7SUFDdkMsZUFBZSxHQUFHLEtBQUssQ0FBQyxDQUFDLGFBQWE7SUFDdEMsY0FBYyxHQUFHLENBQUMsQ0FBQztJQUNuQixXQUFXLEdBQUcsSUFBSSxDQUFDLENBQUMsV0FBVztJQUVoRCxZQUFZLE1BQWMsRUFBRSxTQUFpQjtRQUMzQyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUM3QixDQUFDO0lBRUQ7OztPQUdHO0lBQ0ksS0FBSyxDQUFDLGVBQWU7UUFDMUIsTUFBTSxRQUFRLEdBQUcsYUFBYSxDQUFDO1FBQy9CLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQVcsUUFBUSxDQUFDLENBQUM7UUFDckQsSUFBSSxNQUFNO1lBQUUsT0FBTyxNQUFNLENBQUM7UUFFMUIsSUFBSSxDQUFDO1lBQ0gsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxvQkFBb0IsRUFBRTtnQkFDbkUsUUFBUSxFQUFFLFFBQVE7YUFDbkIsQ0FBQyxDQUFDO1lBRUgsSUFBSSxRQUFRLENBQUMsT0FBTyxLQUFLLENBQUMsRUFBRSxDQUFDO2dCQUMzQixNQUFNLElBQUksS0FBSyxDQUFDLG9CQUFvQixRQUFRLENBQUMsTUFBTSxFQUFF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QUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsS0FBSztZQUFFLE9BQU8sSUFBSSxDQUFDO1FBRXhCLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN2QixJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUN0QyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN2QixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxPQUFPLEtBQUssQ0FBQyxJQUFTLENBQUM7SUFDekIsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ssUUFBUSxDQUFJLEdBQVcsRUFBRSxJQUFPLEVBQUUsR0FBVztRQUNuRCxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUU7WUFDbEIsSUFBSTtZQUNKLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ3JCLEdBQUc7U0FDSixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNLLEtBQUssQ0FBQyxFQUFVO1FBQ3RCLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVEOztPQUVHO0lBQ0ksVUFBVTtRQUNmLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVEOzs7T0FHRztJQUNJLFlBQVk7UUFDakIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztJQUN6QixDQUFDO0NBQ0Y7QUFyaUJELDRDQXFpQkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvc3JjL2V4Y2hhbmdlcy9CeWJpdFBlcnBzQ2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQnliaXQgUGVycGV0dWFscyBDbGllbnQgZm9yIEV4ZWN1dGlvbiBUYXJnZXRcbiAqIFxuICogUHJvdmlkZXMgUkVTVCBBUEkgbWV0aG9kcyBmb3Igb3JkZXIgZXhlY3V0aW9uLCBkYXRhIGZldGNoaW5nLCBhbmQgYWNjb3VudCBtYW5hZ2VtZW50LlxuICogSW5jbHVkZXMgSE1BQyBzaWduYXR1cmUgZ2VuZXJhdGlvbiwgY2FjaGluZywgYW5kIHJldHJ5IGxvZ2ljLlxuICogXG4gKiBSZXF1aXJlbWVudHM6IDcuMS03LjcgKEV4ZWN1dGlvbiksIDExLjEtMTEuNyAoTXVsdGktVGltZWZyYW1lIERhdGEpXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlSG1hYyB9IGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgeyBPSExDViwgT3JkZXJQYXJhbXMsIE9yZGVyUmVzdWx0LCBPcmRlclN0YXR1cyB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBCeWJpdFN5bWJvbEluZm8ge1xuICBzeW1ib2w6IHN0cmluZztcbiAgYmFzZUNvaW46IHN0cmluZztcbiAgcXVvdGVDb2luOiBzdHJpbmc7XG4gIHN0YXR1czogc3RyaW5nO1xuICBtYXJnaW5UcmFkaW5nOiBzdHJpbmc7XG4gIGxvdFNpemVGaWx0ZXI6IHtcbiAgICBiYXNlUHJlY2lzaW9uOiBzdHJpbmc7XG4gICAgcXVvdGVQcmVjaXNpb246IHN0cmluZztcbiAgICBtaW5PcmRlclF0eTogc3RyaW5nO1xuICAgIG1heE9yZGVyUXR5OiBzdHJpbmc7XG4gICAgbWluT3JkZXJBbXQ6IHN0cmluZztcbiAgICBtYXhPcmRlckFtdDogc3RyaW5nO1xuICB9O1xuICBwcmljZUZpbHRlcjoge1xuICAgIG1pblByaWNlOiBzdHJpbmc7XG4gICAgbWF4UHJpY2U6IHN0cmluZztcbiAgICB0aWNrU2l6ZTogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJ5Yml0VGlja2VySW5mbyB7XG4gIHN5bWJvbDogc3RyaW5nO1xuICBiaWQxUHJpY2U6IHN0cmluZztcbiAgYmlkMVNpemU6IHN0cmluZztcbiAgYXNrMVByaWNlOiBzdHJpbmc7XG4gIGFzazFTaXplOiBzdHJpbmc7XG4gIGxhc3RQcmljZTogc3RyaW5nO1xuICBwcmV2UHJpY2UyNGg6IHN0cmluZztcbiAgcHJpY2UyNGhQY250OiBzdHJpbmc7XG4gIGhpZ2hQcmljZTI0aDogc3RyaW5nO1xuICBsb3dQcmljZTI0aDogc3RyaW5nO1xuICB0dXJub3ZlcjI0aDogc3RyaW5nO1xuICB2b2x1bWUyNGg6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCeWJpdEtsaW5lRGF0YSB7XG4gIHN5bWJvbDogc3RyaW5nO1xuICBjYXRlZ29yeTogc3RyaW5nO1xuICBsaXN0OiBzdHJpbmdbXVtdOyAvLyBbc3RhcnRUaW1lLCBvcGVuUHJpY2UsIGhpZ2hQcmljZSwgbG93UHJpY2UsIGNsb3NlUHJpY2UsIHZvbHVtZSwgdHVybm92ZXJdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnliaXRPcmRlclJlc3BvbnNlIHtcbiAgb3JkZXJJZDogc3RyaW5nO1xuICBvcmRlckxpbmtJZDogc3RyaW5nO1xuICBzeW1ib2w6IHN0cmluZztcbiAgY3JlYXRlVGltZTogc3RyaW5nO1xuICB1cGRhdGVUaW1lOiBzdHJpbmc7XG4gIHNpZGU6IHN0cmluZztcbiAgb3JkZXJUeXBlOiBzdHJpbmc7XG4gIHF0eTogc3RyaW5nO1xuICBwcmljZTogc3RyaW5nO1xuICBvcmRlclN0YXR1czogc3RyaW5nO1xuICB0aW1lSW5Gb3JjZTogc3RyaW5nO1xuICBhdmdQcmljZTogc3RyaW5nO1xuICBsZWF2ZXNRdHk6IHN0cmluZztcbiAgbGVhdmVzVmFsdWU6IHN0cmluZztcbiAgY3VtRXhlY1F0eTogc3RyaW5nO1xuICBjdW1FeGVjVmFsdWU6IHN0cmluZztcbiAgY3VtRXhlY0ZlZTogc3RyaW5nO1xuICByZWplY3RSZWFzb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCeWJpdEFjY291bnRJbmZvIHtcbiAgdG90YWxFcXVpdHk6IHN0cmluZztcbiAgdG90YWxXYWxsZXRCYWxhbmNlOiBzdHJpbmc7XG4gIHRvdGFsTWFyZ2luQmFsYW5jZTogc3RyaW5nO1xuICB0b3RhbEF2YWlsYWJsZUJhbGFuY2U6IHN0cmluZztcbiAgdG90YWxQZXJwVVBMOiBzdHJpbmc7XG4gIHRvdGFsSW5pdGlhbE1hcmdpbjogc3RyaW5nO1xuICB0b3RhbE1haW50ZW5hbmNlTWFyZ2luOiBzdHJpbmc7XG4gIGNvaW46IEFycmF5PHtcbiAgICBjb2luOiBzdHJpbmc7XG4gICAgZXF1aXR5OiBzdHJpbmc7XG4gICAgdXNkVmFsdWU6IHN0cmluZztcbiAgICB3YWxsZXRCYWxhbmNlOiBzdHJpbmc7XG4gICAgYXZhaWxhYmxlVG9XaXRoZHJhdzogc3RyaW5nO1xuICAgIGF2YWlsYWJsZVRvQm9ycm93OiBzdHJpbmc7XG4gICAgYm9ycm93QW1vdW50OiBzdHJpbmc7XG4gICAgYWNjcnVlZEludGVyZXN0OiBzdHJpbmc7XG4gICAgdG90YWxPcmRlcklNOiBzdHJpbmc7XG4gICAgdG90YWxQb3NpdGlvbklNOiBzdHJpbmc7XG4gICAgdG90YWxQb3NpdGlvbk1NOiBzdHJpbmc7XG4gICAgdW5yZWFsaXNlZFBubDogc3RyaW5nO1xuICAgIGN1bVJlYWxpc2VkUG5sOiBzdHJpbmc7XG4gIH0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJ5Yml0UG9zaXRpb25JbmZvIHtcbiAgc3ltYm9sOiBzdHJpbmc7XG4gIGxldmVyYWdlOiBzdHJpbmc7XG4gIGF2Z1ByaWNlOiBzdHJpbmc7XG4gIGxpcVByaWNlOiBzdHJpbmc7XG4gIHJpc2tMaW1pdFZhbHVlOiBzdHJpbmc7XG4gIHRha2VQcm9maXQ6IHN0cmluZztcbiAgc3RvcExvc3M6IHN0cmluZztcbiAgdHJhaWxpbmdTdG9wOiBzdHJpbmc7XG4gIHVucmVhbGlzZWRQbmw6IHN0cmluZztcbiAgY3VtUmVhbGlzZWRQbmw6IHN0cmluZztcbiAgcG9zaXRpb25NTTogc3RyaW5nO1xuICBwb3NpdGlvbklNOiBzdHJpbmc7XG4gIHBvc2l0aW9uVmFsdWU6IHN0cmluZztcbiAgcG9zaXRpb25CYWxhbmNlOiBzdHJpbmc7XG4gIHNpemU6IHN0cmluZztcbiAgc2lkZTogc3RyaW5nO1xuICBwb3NpdGlvblN0YXR1czogc3RyaW5nO1xuICBtYXJrUHJpY2U6IHN0cmluZztcbiAgYnVzdFByaWNlOiBzdHJpbmc7XG4gIHBvc2l0aW9uSWR4OiBudW1iZXI7XG4gIHRyYWRlTW9kZTogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgQ2FjaGVFbnRyeTxUPiB7XG4gIGRhdGE6IFQ7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICB0dGw6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIEJ5Yml0UGVycHNDbGllbnQge1xuICBwcml2YXRlIGJhc2VVcmwgPSAnaHR0cHM6Ly9hcGkuYnliaXQuY29tJztcbiAgcHJpdmF0ZSBhcGlLZXk6IHN0cmluZztcbiAgcHJpdmF0ZSBhcGlTZWNyZXQ6IHN0cmluZztcbiAgcHJpdmF0ZSBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBDYWNoZUVudHJ5PGFueT4+KCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgQ0FDSEVfVFRMID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGVzXG4gIHByaXZhdGUgcmVhZG9ubHkgUkVRVUVTVF9USU1FT1VUID0gMTAwMDA7IC8vIDEwIHNlY29uZHNcbiAgcHJpdmF0ZSByZWFkb25seSBSRVRSWV9BVFRFTVBUUyA9IDM7XG4gIHByaXZhdGUgcmVhZG9ubHkgUkVUUllfREVMQVkgPSAxMDAwOyAvLyAxIHNlY29uZFxuXG4gIGNvbnN0cnVjdG9yKGFwaUtleTogc3RyaW5nLCBhcGlTZWNyZXQ6IHN0cmluZykge1xuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgIHRoaXMuYXBpU2VjcmV0ID0gYXBpU2VjcmV0O1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIHRvcCBzeW1ib2xzIGJ5IDI0aCB2b2x1bWUgKHRvcCAxMDApXG4gICAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCBhcnJheSBvZiBzeW1ib2wgbmFtZXNcbiAgICovXG4gIHB1YmxpYyBhc3luYyBmZXRjaFRvcFN5bWJvbHMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gJ3RvcF9zeW1ib2xzJztcbiAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmdldEZyb21DYWNoZTxzdHJpbmdbXT4oY2FjaGVLZXkpO1xuICAgIGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWQ7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCdHRVQnLCAnL3Y1L21hcmtldC90aWNrZXJzJywge1xuICAgICAgICBjYXRlZ29yeTogJ2xpbmVhcidcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2UucmV0Q29kZSAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJ5Yml0IEFQSSBlcnJvcjogJHtyZXNwb25zZS5yZXRNc2d9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNvcnQgYnkgMjRoIHZvbHVtZSBhbmQgdGFrZSB0b3AgMTAwXG4gICAgICBjb25zdCB0aWNrZXJzID0gcmVzcG9uc2UucmVzdWx0Lmxpc3QgYXMgQnliaXRUaWNrZXJJbmZvW107XG4gICAgICBjb25zdCBzb3J0ZWRTeW1ib2xzID0gdGlja2Vyc1xuICAgICAgICAuZmlsdGVyKHRpY2tlciA9PiB0aWNrZXIuc3ltYm9sLmVuZHNXaXRoKCdVU0RUJykpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBwYXJzZUZsb2F0KGIudHVybm92ZXIyNGgpIC0gcGFyc2VGbG9hdChhLnR1cm5vdmVyMjRoKSlcbiAgICAgICAgLnNsaWNlKDAsIDEwMClcbiAgICAgICAgLm1hcCh0aWNrZXIgPT4gdGlja2VyLnN5bWJvbCk7XG5cbiAgICAgIHRoaXMuc2V0Q2FjaGUoY2FjaGVLZXksIHNvcnRlZFN5bWJvbHMsIHRoaXMuQ0FDSEVfVFRMKTtcbiAgICAgIHJldHVybiBzb3J0ZWRTeW1ib2xzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCB0b3Agc3ltYm9sczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggT0hMQ1YgZGF0YSB3aXRoIGNhY2hpbmcgKDUtbWludXRlIFRUTClcbiAgICogQHBhcmFtIHN5bWJvbCAtIFRyYWRpbmcgc3ltYm9sIChlLmcuLCAnQlRDVVNEVCcpXG4gICAqIEBwYXJhbSBpbnRlcnZhbCAtIFRpbWVmcmFtZSAoJzEnLCAnNScsICcxNScsICczMCcsICc2MCcsICcyNDAnLCAnMTQ0MCcpXG4gICAqIEBwYXJhbSBsaW1pdCAtIE51bWJlciBvZiBjYW5kbGVzIChtYXggMTAwMClcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIE9ITENWIGFycmF5XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZmV0Y2hPSExDVihzeW1ib2w6IHN0cmluZywgaW50ZXJ2YWw6IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDIwMCk6IFByb21pc2U8T0hMQ1ZbXT4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gYG9obGN2XyR7c3ltYm9sfV8ke2ludGVydmFsfV8ke2xpbWl0fWA7XG4gICAgY29uc3QgY2FjaGVkID0gdGhpcy5nZXRGcm9tQ2FjaGU8T0hMQ1ZbXT4oY2FjaGVLZXkpO1xuICAgIGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWQ7XG5cbiAgICB0cnkge1xuICAgICAgLy8gQ29udmVydCBpbnRlcnZhbCB0byBCeWJpdCBmb3JtYXRcbiAgICAgIGNvbnN0IGJ5Yml0SW50ZXJ2YWwgPSB0aGlzLmNvbnZlcnRJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnR0VUJywgJy92NS9tYXJrZXQva2xpbmUnLCB7XG4gICAgICAgIGNhdGVnb3J5OiAnbGluZWFyJyxcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wudG9VcHBlckNhc2UoKSxcbiAgICAgICAgaW50ZXJ2YWw6IGJ5Yml0SW50ZXJ2YWwsXG4gICAgICAgIGxpbWl0OiBNYXRoLm1pbihsaW1pdCwgMTAwMCkudG9TdHJpbmcoKVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5yZXRDb2RlICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQnliaXQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnJldE1zZ31gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qga2xpbmVEYXRhID0gcmVzcG9uc2UucmVzdWx0IGFzIEJ5Yml0S2xpbmVEYXRhO1xuICAgICAgY29uc3Qgb2hsY3Y6IE9ITENWW10gPSBrbGluZURhdGEubGlzdC5tYXAoY2FuZGxlID0+ICh7XG4gICAgICAgIHRpbWVzdGFtcDogcGFyc2VJbnQoY2FuZGxlWzBdKSxcbiAgICAgICAgb3BlbjogcGFyc2VGbG9hdChjYW5kbGVbMV0pLFxuICAgICAgICBoaWdoOiBwYXJzZUZsb2F0KGNhbmRsZVsyXSksXG4gICAgICAgIGxvdzogcGFyc2VGbG9hdChjYW5kbGVbM10pLFxuICAgICAgICBjbG9zZTogcGFyc2VGbG9hdChjYW5kbGVbNF0pLFxuICAgICAgICB2b2x1bWU6IHBhcnNlRmxvYXQoY2FuZGxlWzVdKVxuICAgICAgfSkpO1xuXG4gICAgICAvLyBTb3J0IGJ5IHRpbWVzdGFtcCAob2xkZXN0IGZpcnN0KVxuICAgICAgb2hsY3Yuc29ydCgoYSwgYikgPT4gYS50aW1lc3RhbXAgLSBiLnRpbWVzdGFtcCk7XG5cbiAgICAgIHRoaXMuc2V0Q2FjaGUoY2FjaGVLZXksIG9obGN2LCB0aGlzLkNBQ0hFX1RUTCk7XG4gICAgICByZXR1cm4gb2hsY3Y7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIE9ITENWIGZvciAke3N5bWJvbH06ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHByaWNlIGZvciBhIHN5bWJvbFxuICAgKiBAcGFyYW0gc3ltYm9sIC0gVHJhZGluZyBzeW1ib2wgKGUuZy4sICdCVENVU0RUJylcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIGN1cnJlbnQgcHJpY2VcbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRDdXJyZW50UHJpY2Uoc3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJ0dFVCcsICcvdjUvbWFya2V0L3RpY2tlcnMnLCB7XG4gICAgICAgIGNhdGVnb3J5OiAnbGluZWFyJyxcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wudG9VcHBlckNhc2UoKVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5yZXRDb2RlICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQnliaXQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnJldE1zZ31gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGlja2VyID0gcmVzcG9uc2UucmVzdWx0Lmxpc3RbMF0gYXMgQnliaXRUaWNrZXJJbmZvO1xuICAgICAgaWYgKCF0aWNrZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyB0aWNrZXIgZGF0YSBmb3VuZCBmb3IgJHtzeW1ib2x9YCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KHRpY2tlci5sYXN0UHJpY2UpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgY3VycmVudCBwcmljZSBmb3IgJHtzeW1ib2x9OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWNjb3VudCBlcXVpdHlcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIHRvdGFsIGVxdWl0eSBpbiBVU0RUXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0RXF1aXR5KCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnR0VUJywgJy92NS9hY2NvdW50L3dhbGxldC1iYWxhbmNlJywge1xuICAgICAgICBhY2NvdW50VHlwZTogJ1VOSUZJRUQnXG4gICAgICB9LCB0cnVlKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnJldENvZGUgIT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCeWJpdCBBUEkgZXJyb3I6ICR7cmVzcG9uc2UucmV0TXNnfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhY2NvdW50ID0gcmVzcG9uc2UucmVzdWx0Lmxpc3RbMF0gYXMgQnliaXRBY2NvdW50SW5mbztcbiAgICAgIGlmICghYWNjb3VudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjY291bnQgZGF0YSBmb3VuZCcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChhY2NvdW50LnRvdGFsRXF1aXR5KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IGVxdWl0eTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGxhY2Ugb3JkZXIgd2l0aCBITUFDIHNpZ25hdHVyZSBhbmQgUG9zdC1Pbmx5IHN1cHBvcnRcbiAgICogQHBhcmFtIHBhcmFtcyAtIE9yZGVyIHBhcmFtZXRlcnNcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIG9yZGVyIHJlc3VsdFxuICAgKi9cbiAgcHVibGljIGFzeW5jIHBsYWNlT3JkZXIocGFyYW1zOiBPcmRlclBhcmFtcyk6IFByb21pc2U8T3JkZXJSZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3JkZXJQYXJhbXM6IGFueSA9IHtcbiAgICAgICAgY2F0ZWdvcnk6ICdsaW5lYXInLFxuICAgICAgICBzeW1ib2w6IHBhcmFtcy5zeW1ib2wudG9VcHBlckNhc2UoKSxcbiAgICAgICAgc2lkZTogcGFyYW1zLnNpZGUsXG4gICAgICAgIG9yZGVyVHlwZTogcGFyYW1zLnR5cGUgPT09ICdQT1NUX09OTFknID8gJ0xpbWl0JyA6IHBhcmFtcy50eXBlID09PSAnTElNSVQnID8gJ0xpbWl0JyA6ICdNYXJrZXQnLFxuICAgICAgICBxdHk6IHBhcmFtcy5xdHkudG9TdHJpbmcoKSxcbiAgICAgICAgdGltZUluRm9yY2U6IHBhcmFtcy50eXBlID09PSAnUE9TVF9PTkxZJyA/ICdQb3N0T25seScgOiAnR1RDJ1xuICAgICAgfTtcblxuICAgICAgLy8gQWRkIHByaWNlIGZvciBsaW1pdCBvcmRlcnNcbiAgICAgIGlmIChwYXJhbXMudHlwZSA9PT0gJ0xJTUlUJyB8fCBwYXJhbXMudHlwZSA9PT0gJ1BPU1RfT05MWScpIHtcbiAgICAgICAgaWYgKCFwYXJhbXMucHJpY2UpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ByaWNlIGlzIHJlcXVpcmVkIGZvciBsaW1pdCBvcmRlcnMnKTtcbiAgICAgICAgfVxuICAgICAgICBvcmRlclBhcmFtcy5wcmljZSA9IHBhcmFtcy5wcmljZS50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgc3RvcCBsb3NzIGFuZCB0YWtlIHByb2ZpdCBpZiBwcm92aWRlZFxuICAgICAgaWYgKHBhcmFtcy5zdG9wTG9zcykge1xuICAgICAgICBvcmRlclBhcmFtcy5zdG9wTG9zcyA9IHBhcmFtcy5zdG9wTG9zcy50b1N0cmluZygpO1xuICAgICAgfVxuICAgICAgaWYgKHBhcmFtcy50YWtlUHJvZml0KSB7XG4gICAgICAgIG9yZGVyUGFyYW1zLnRha2VQcm9maXQgPSBwYXJhbXMudGFrZVByb2ZpdC50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJ1BPU1QnLCAnL3Y1L29yZGVyL2NyZWF0ZScsIG9yZGVyUGFyYW1zLCB0cnVlKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnJldENvZGUgIT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCeWJpdCBBUEkgZXJyb3I6ICR7cmVzcG9uc2UucmV0TXNnfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvcmRlckRhdGEgPSByZXNwb25zZS5yZXN1bHQgYXMgQnliaXRPcmRlclJlc3BvbnNlO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBvcmRlcklkOiBvcmRlckRhdGEub3JkZXJJZCxcbiAgICAgICAgc3ltYm9sOiBvcmRlckRhdGEuc3ltYm9sLFxuICAgICAgICBzaWRlOiBvcmRlckRhdGEuc2lkZSBhcyAnQnV5JyB8ICdTZWxsJyxcbiAgICAgICAgcXR5OiBwYXJzZUZsb2F0KG9yZGVyRGF0YS5xdHkpLFxuICAgICAgICBwcmljZTogcGFyc2VGbG9hdChvcmRlckRhdGEucHJpY2UgfHwgb3JkZXJEYXRhLmF2Z1ByaWNlIHx8ICcwJyksXG4gICAgICAgIHN0YXR1czogdGhpcy5tYXBPcmRlclN0YXR1cyhvcmRlckRhdGEub3JkZXJTdGF0dXMpLFxuICAgICAgICB0aW1lc3RhbXA6IHBhcnNlSW50KG9yZGVyRGF0YS5jcmVhdGVUaW1lKVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcGxhY2Ugb3JkZXI6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBsYWNlIG9yZGVyIHdpdGggcmV0cnkgbG9naWMgKDItc2Vjb25kIHRpbWVvdXQpXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBPcmRlciBwYXJhbWV0ZXJzXG4gICAqIEBwYXJhbSBtYXhSZXRyaWVzIC0gTWF4aW11bSByZXRyeSBhdHRlbXB0cyAoZGVmYXVsdDogMilcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIG9yZGVyIHJlc3VsdFxuICAgKi9cbiAgcHVibGljIGFzeW5jIHBsYWNlT3JkZXJXaXRoUmV0cnkocGFyYW1zOiBPcmRlclBhcmFtcywgbWF4UmV0cmllczogbnVtYmVyID0gMik6IFByb21pc2U8T3JkZXJSZXN1bHQ+IHtcbiAgICBsZXQgbGFzdEVycm9yOiBFcnJvcjtcblxuICAgIGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gU2V0IHRpbWVvdXQgZm9yIGVhY2ggYXR0ZW1wdFxuICAgICAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlPG5ldmVyPigoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZWplY3QobmV3IEVycm9yKCdPcmRlciB0aW1lb3V0IGFmdGVyIDIgc2Vjb25kcycpKSwgMjAwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG9yZGVyUHJvbWlzZSA9IHRoaXMucGxhY2VPcmRlcihwYXJhbXMpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9taXNlLnJhY2UoW29yZGVyUHJvbWlzZSwgdGltZW91dFByb21pc2VdKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhdHRlbXB0IDwgbWF4UmV0cmllcykge1xuICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIE9yZGVyIGF0dGVtcHQgJHthdHRlbXB0ICsgMX0gZmFpbGVkLCByZXRyeWluZzogJHtsYXN0RXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKHRoaXMuUkVUUllfREVMQVkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKGBPcmRlciBmYWlsZWQgYWZ0ZXIgJHttYXhSZXRyaWVzICsgMX0gYXR0ZW1wdHM6ICR7bGFzdEVycm9yIS5tZXNzYWdlfWApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBsZXZlcmFnZSBmb3IgYSBzeW1ib2xcbiAgICogQHBhcmFtIHN5bWJvbCAtIFRyYWRpbmcgc3ltYm9sXG4gICAqIEBwYXJhbSBsZXZlcmFnZSAtIExldmVyYWdlIHZhbHVlICgxLTEwMClcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIHN1Y2Nlc3Mgc3RhdHVzXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgc2V0TGV2ZXJhZ2Uoc3ltYm9sOiBzdHJpbmcsIGxldmVyYWdlOiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCdQT1NUJywgJy92NS9wb3NpdGlvbi9zZXQtbGV2ZXJhZ2UnLCB7XG4gICAgICAgIGNhdGVnb3J5OiAnbGluZWFyJyxcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wudG9VcHBlckNhc2UoKSxcbiAgICAgICAgYnV5TGV2ZXJhZ2U6IGxldmVyYWdlLnRvU3RyaW5nKCksXG4gICAgICAgIHNlbGxMZXZlcmFnZTogbGV2ZXJhZ2UudG9TdHJpbmcoKVxuICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5yZXRDb2RlICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQnliaXQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnJldE1zZ31gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNldCBsZXZlcmFnZSBmb3IgJHtzeW1ib2x9OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgc3RvcCBsb3NzIGZvciBhIHBvc2l0aW9uXG4gICAqIEBwYXJhbSBzeW1ib2wgLSBUcmFkaW5nIHN5bWJvbFxuICAgKiBAcGFyYW0gc3RvcExvc3MgLSBTdG9wIGxvc3MgcHJpY2VcbiAgICogQHBhcmFtIHBvc2l0aW9uSWR4IC0gUG9zaXRpb24gaW5kZXggKDAgZm9yIG9uZS13YXkgbW9kZSlcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIHN1Y2Nlc3Mgc3RhdHVzXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgc2V0U3RvcExvc3Moc3ltYm9sOiBzdHJpbmcsIHN0b3BMb3NzOiBudW1iZXIsIHBvc2l0aW9uSWR4OiBudW1iZXIgPSAwKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnUE9TVCcsICcvdjUvcG9zaXRpb24vdHJhZGluZy1zdG9wJywge1xuICAgICAgICBjYXRlZ29yeTogJ2xpbmVhcicsXG4gICAgICAgIHN5bWJvbDogc3ltYm9sLnRvVXBwZXJDYXNlKCksXG4gICAgICAgIHN0b3BMb3NzOiBzdG9wTG9zcy50b1N0cmluZygpLFxuICAgICAgICBwb3NpdGlvbklkeDogcG9zaXRpb25JZHgudG9TdHJpbmcoKVxuICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5yZXRDb2RlICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQnliaXQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnJldE1zZ31gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNldCBzdG9wIGxvc3MgZm9yICR7c3ltYm9sfTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRha2UgcHJvZml0IGZvciBhIHBvc2l0aW9uXG4gICAqIEBwYXJhbSBzeW1ib2wgLSBUcmFkaW5nIHN5bWJvbFxuICAgKiBAcGFyYW0gdGFrZVByb2ZpdCAtIFRha2UgcHJvZml0IHByaWNlXG4gICAqIEBwYXJhbSBwb3NpdGlvbklkeCAtIFBvc2l0aW9uIGluZGV4ICgwIGZvciBvbmUtd2F5IG1vZGUpXG4gICAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCBzdWNjZXNzIHN0YXR1c1xuICAgKi9cbiAgcHVibGljIGFzeW5jIHNldFRha2VQcm9maXQoc3ltYm9sOiBzdHJpbmcsIHRha2VQcm9maXQ6IG51bWJlciwgcG9zaXRpb25JZHg6IG51bWJlciA9IDApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCdQT1NUJywgJy92NS9wb3NpdGlvbi90cmFkaW5nLXN0b3AnLCB7XG4gICAgICAgIGNhdGVnb3J5OiAnbGluZWFyJyxcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wudG9VcHBlckNhc2UoKSxcbiAgICAgICAgdGFrZVByb2ZpdDogdGFrZVByb2ZpdC50b1N0cmluZygpLFxuICAgICAgICBwb3NpdGlvbklkeDogcG9zaXRpb25JZHgudG9TdHJpbmcoKVxuICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5yZXRDb2RlICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQnliaXQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnJldE1zZ31gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNldCB0YWtlIHByb2ZpdCBmb3IgJHtzeW1ib2x9OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgb3JkZXIgc3RhdHVzXG4gICAqIEBwYXJhbSBvcmRlcklkIC0gT3JkZXIgSURcbiAgICogQHBhcmFtIHN5bWJvbCAtIFRyYWRpbmcgc3ltYm9sXG4gICAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCBvcmRlciBzdGF0dXNcbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRPcmRlclN0YXR1cyhvcmRlcklkOiBzdHJpbmcsIHN5bWJvbDogc3RyaW5nKTogUHJvbWlzZTxPcmRlclN0YXR1cz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJ0dFVCcsICcvdjUvb3JkZXIvcmVhbHRpbWUnLCB7XG4gICAgICAgIGNhdGVnb3J5OiAnbGluZWFyJyxcbiAgICAgICAgb3JkZXJJZDogb3JkZXJJZCxcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wudG9VcHBlckNhc2UoKVxuICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5yZXRDb2RlICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQnliaXQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnJldE1zZ31gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb3JkZXJzID0gcmVzcG9uc2UucmVzdWx0Lmxpc3QgYXMgQnliaXRPcmRlclJlc3BvbnNlW107XG4gICAgICBpZiAob3JkZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9yZGVyICR7b3JkZXJJZH0gbm90IGZvdW5kYCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLm1hcE9yZGVyU3RhdHVzKG9yZGVyc1swXS5vcmRlclN0YXR1cyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBvcmRlciBzdGF0dXM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbCBvcmRlclxuICAgKiBAcGFyYW0gb3JkZXJJZCAtIE9yZGVyIElEXG4gICAqIEBwYXJhbSBzeW1ib2wgLSBUcmFkaW5nIHN5bWJvbFxuICAgKiBAcmV0dXJucyBQcm9taXNlIHdpdGggc3VjY2VzcyBzdGF0dXNcbiAgICovXG4gIHB1YmxpYyBhc3luYyBjYW5jZWxPcmRlcihvcmRlcklkOiBzdHJpbmcsIHN5bWJvbDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnUE9TVCcsICcvdjUvb3JkZXIvY2FuY2VsJywge1xuICAgICAgICBjYXRlZ29yeTogJ2xpbmVhcicsXG4gICAgICAgIG9yZGVySWQ6IG9yZGVySWQsXG4gICAgICAgIHN5bWJvbDogc3ltYm9sLnRvVXBwZXJDYXNlKClcbiAgICAgIH0sIHRydWUpO1xuXG4gICAgICBpZiAocmVzcG9uc2UucmV0Q29kZSAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJ5Yml0IEFQSSBlcnJvcjogJHtyZXNwb25zZS5yZXRNc2d9YCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjYW5jZWwgb3JkZXI6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwb3NpdGlvbiBpbmZvXG4gICAqIEBwYXJhbSBzeW1ib2wgLSBUcmFkaW5nIHN5bWJvbFxuICAgKiBAcmV0dXJucyBQcm9taXNlIHdpdGggcG9zaXRpb24gaW5mb1xuICAgKi9cbiAgcHVibGljIGFzeW5jIGdldFBvc2l0aW9uSW5mbyhzeW1ib2w6IHN0cmluZyk6IFByb21pc2U8QnliaXRQb3NpdGlvbkluZm8gfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnR0VUJywgJy92NS9wb3NpdGlvbi9saXN0Jywge1xuICAgICAgICBjYXRlZ29yeTogJ2xpbmVhcicsXG4gICAgICAgIHN5bWJvbDogc3ltYm9sLnRvVXBwZXJDYXNlKClcbiAgICAgIH0sIHRydWUpO1xuXG4gICAgICBpZiAocmVzcG9uc2UucmV0Q29kZSAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJ5Yml0IEFQSSBlcnJvcjogJHtyZXNwb25zZS5yZXRNc2d9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IHJlc3BvbnNlLnJlc3VsdC5saXN0IGFzIEJ5Yml0UG9zaXRpb25JbmZvW107XG4gICAgICByZXR1cm4gcG9zaXRpb25zLmxlbmd0aCA+IDAgPyBwb3NpdGlvbnNbMF0gOiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgcG9zaXRpb24gaW5mbzogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWFrZSBhdXRoZW50aWNhdGVkIG9yIHB1YmxpYyBBUEkgcmVxdWVzdFxuICAgKiBAcGFyYW0gbWV0aG9kIC0gSFRUUCBtZXRob2RcbiAgICogQHBhcmFtIGVuZHBvaW50IC0gQVBJIGVuZHBvaW50XG4gICAqIEBwYXJhbSBwYXJhbXMgLSBSZXF1ZXN0IHBhcmFtZXRlcnNcbiAgICogQHBhcmFtIHNpZ25lZCAtIFdoZXRoZXIgdG8gc2lnbiB0aGUgcmVxdWVzdFxuICAgKiBAcmV0dXJucyBQcm9taXNlIHdpdGggQVBJIHJlc3BvbnNlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0KG1ldGhvZDogJ0dFVCcgfCAnUE9TVCcsIGVuZHBvaW50OiBzdHJpbmcsIHBhcmFtczogYW55ID0ge30sIHNpZ25lZDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XG4gICAgbGV0IHVybCA9IGAke3RoaXMuYmFzZVVybH0ke2VuZHBvaW50fWA7XG4gICAgbGV0IGJvZHkgPSAnJztcblxuICAgIC8vIFByZXBhcmUgaGVhZGVyc1xuICAgIGNvbnN0IGhlYWRlcnM6IGFueSA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnWC1CQVBJLVRJTUVTVEFNUCc6IHRpbWVzdGFtcCxcbiAgICAgICdYLUJBUEktUkVDVi1XSU5ET1cnOiAnNTAwMCdcbiAgICB9O1xuXG4gICAgaWYgKHNpZ25lZCkge1xuICAgICAgaGVhZGVyc1snWC1CQVBJLUFQSS1LRVknXSA9IHRoaXMuYXBpS2V5O1xuICAgIH1cblxuICAgIC8vIFByZXBhcmUgcmVxdWVzdCBkYXRhXG4gICAgaWYgKG1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbXMpLnRvU3RyaW5nKCk7XG4gICAgICBpZiAocXVlcnlTdHJpbmcpIHtcbiAgICAgICAgdXJsICs9IGA/JHtxdWVyeVN0cmluZ31gO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkocGFyYW1zKTtcbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSBzaWduYXR1cmUgZm9yIGF1dGhlbnRpY2F0ZWQgcmVxdWVzdHNcbiAgICBpZiAoc2lnbmVkKSB7XG4gICAgICBjb25zdCBzaWduYXR1cmVQYXlsb2FkID0gdGltZXN0YW1wICsgdGhpcy5hcGlLZXkgKyAnNTAwMCcgKyAobWV0aG9kID09PSAnR0VUJyA/IG5ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1zKS50b1N0cmluZygpIDogYm9keSk7XG4gICAgICBoZWFkZXJzWydYLUJBUEktU0lHTiddID0gY3JlYXRlSG1hYygnc2hhMjU2JywgdGhpcy5hcGlTZWNyZXQpLnVwZGF0ZShzaWduYXR1cmVQYXlsb2FkKS5kaWdlc3QoJ2hleCcpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIHRoaXMuUkVRVUVTVF9USU1FT1VUKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBib2R5OiBtZXRob2QgPT09ICdQT1NUJyA/IGJvZHkgOiB1bmRlZmluZWQsXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICAgIH0pO1xuXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVlc3QgdGltZW91dCcpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXF1ZXN0IGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBpbnRlcnZhbCB0byBCeWJpdCBmb3JtYXRcbiAgICogQHBhcmFtIGludGVydmFsIC0gU3RhbmRhcmQgaW50ZXJ2YWxcbiAgICogQHJldHVybnMgQnliaXQgaW50ZXJ2YWwgZm9ybWF0XG4gICAqL1xuICBwcml2YXRlIGNvbnZlcnRJbnRlcnZhbChpbnRlcnZhbDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBpbnRlcnZhbE1hcDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICAgICcxbSc6ICcxJyxcbiAgICAgICc1bSc6ICc1JyxcbiAgICAgICcxNW0nOiAnMTUnLFxuICAgICAgJzMwbSc6ICczMCcsXG4gICAgICAnMWgnOiAnNjAnLFxuICAgICAgJzRoJzogJzI0MCcsXG4gICAgICAnMWQnOiAnRCcsXG4gICAgICAnMUQnOiAnRCcsXG4gICAgICAnMXcnOiAnVycsXG4gICAgICAnMVcnOiAnVydcbiAgICB9O1xuXG4gICAgcmV0dXJuIGludGVydmFsTWFwW2ludGVydmFsXSB8fCBpbnRlcnZhbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXAgQnliaXQgb3JkZXIgc3RhdHVzIHRvIHN0YW5kYXJkIGZvcm1hdFxuICAgKiBAcGFyYW0gYnliaXRTdGF0dXMgLSBCeWJpdCBvcmRlciBzdGF0dXNcbiAgICogQHJldHVybnMgU3RhbmRhcmQgb3JkZXIgc3RhdHVzXG4gICAqL1xuICBwcml2YXRlIG1hcE9yZGVyU3RhdHVzKGJ5Yml0U3RhdHVzOiBzdHJpbmcpOiBPcmRlclN0YXR1cyB7XG4gICAgY29uc3Qgc3RhdHVzTWFwOiB7IFtrZXk6IHN0cmluZ106IE9yZGVyU3RhdHVzIH0gPSB7XG4gICAgICAnTmV3JzogJ05FVycsXG4gICAgICAnUGFydGlhbGx5RmlsbGVkJzogJ1BBUlRJQUxMWV9GSUxMRUQnLFxuICAgICAgJ0ZpbGxlZCc6ICdGSUxMRUQnLFxuICAgICAgJ0NhbmNlbGxlZCc6ICdDQU5DRUxMRUQnLFxuICAgICAgJ1JlamVjdGVkJzogJ1JFSkVDVEVEJyxcbiAgICAgICdQYXJ0aWFsbHlGaWxsZWRDYW5jZWxlZCc6ICdDQU5DRUxMRUQnLFxuICAgICAgJ0RlYWN0aXZhdGVkJzogJ0NBTkNFTExFRCdcbiAgICB9O1xuXG4gICAgcmV0dXJuIHN0YXR1c01hcFtieWJpdFN0YXR1c10gfHwgJ05FVyc7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRhdGEgZnJvbSBjYWNoZSBpZiB2YWxpZFxuICAgKiBAcGFyYW0ga2V5IC0gQ2FjaGUga2V5XG4gICAqIEByZXR1cm5zIENhY2hlZCBkYXRhIG9yIG51bGxcbiAgICovXG4gIHByaXZhdGUgZ2V0RnJvbUNhY2hlPFQ+KGtleTogc3RyaW5nKTogVCB8IG51bGwge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcbiAgICBpZiAoIWVudHJ5KSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKG5vdyAtIGVudHJ5LnRpbWVzdGFtcCA+IGVudHJ5LnR0bCkge1xuICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBlbnRyeS5kYXRhIGFzIFQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGRhdGEgaW4gY2FjaGVcbiAgICogQHBhcmFtIGtleSAtIENhY2hlIGtleVxuICAgKiBAcGFyYW0gZGF0YSAtIERhdGEgdG8gY2FjaGVcbiAgICogQHBhcmFtIHR0bCAtIFRpbWUgdG8gbGl2ZSBpbiBtaWxsaXNlY29uZHNcbiAgICovXG4gIHByaXZhdGUgc2V0Q2FjaGU8VD4oa2V5OiBzdHJpbmcsIGRhdGE6IFQsIHR0bDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5jYWNoZS5zZXQoa2V5LCB7XG4gICAgICBkYXRhLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgdHRsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2xlZXAgZm9yIHNwZWNpZmllZCBtaWxsaXNlY29uZHNcbiAgICogQHBhcmFtIG1zIC0gTWlsbGlzZWNvbmRzIHRvIHNsZWVwXG4gICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBkZWxheVxuICAgKi9cbiAgcHJpdmF0ZSBzbGVlcChtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGNhY2hlXG4gICAqL1xuICBwdWJsaWMgY2xlYXJDYWNoZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNhY2hlLmNsZWFyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNhY2hlIHNpemVcbiAgICogQHJldHVybnMgTnVtYmVyIG9mIGNhY2hlZCBlbnRyaWVzXG4gICAqL1xuICBwdWJsaWMgZ2V0Q2FjaGVTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuc2l6ZTtcbiAgfVxufSJdLCJ2ZXJzaW9uIjozfQ==