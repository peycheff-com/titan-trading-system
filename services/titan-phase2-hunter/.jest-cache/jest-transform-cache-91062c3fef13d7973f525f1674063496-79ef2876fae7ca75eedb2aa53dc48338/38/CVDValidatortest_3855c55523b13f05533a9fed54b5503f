7844308b27d6f2fe11dbd08281a8ac44
"use strict";
/**
 * Unit Tests for CVDValidator
 *
 * Tests all CVD calculation, absorption detection, and distribution detection functions
 * using known trade patterns and edge cases.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const CVDValidator_1 = require("../../src/engine/CVDValidator");
describe('CVDValidator', () => {
    let cvdValidator;
    beforeEach(() => {
        cvdValidator = new CVDValidator_1.CVDValidator();
    });
    // Helper function to create test CVD trade data
    const createTrade = (symbol, price, qty, time, isBuyerMaker) => ({
        symbol,
        price,
        qty,
        time,
        isBuyerMaker
    });
    describe('calcCVD', () => {
        it('should calculate positive CVD for net buying pressure', () => {
            const trades = [
                createTrade('BTCUSDT', 50000, 0.1, Date.now() - 60000, false), // Buy: +5000
                createTrade('BTCUSDT', 50100, 0.05, Date.now() - 30000, false), // Buy: +2505
                createTrade('BTCUSDT', 49900, 0.02, Date.now() - 10000, true) // Sell: -998
            ];
            const cvd = cvdValidator.calcCVD(trades);
            expect(cvd).toBeCloseTo(6507, 0); // 5000 + 2505 - 998
        });
        it('should calculate negative CVD for net selling pressure', () => {
            const trades = [
                createTrade('BTCUSDT', 50000, 0.1, Date.now() - 60000, true), // Sell: -5000
                createTrade('BTCUSDT', 49900, 0.05, Date.now() - 30000, true), // Sell: -2495
                createTrade('BTCUSDT', 50100, 0.02, Date.now() - 10000, false) // Buy: +1002
            ];
            const cvd = cvdValidator.calcCVD(trades);
            expect(cvd).toBeCloseTo(-6493, 0); // -5000 - 2495 + 1002
        });
        it('should filter trades by time window', () => {
            const now = Date.now();
            const trades = [
                createTrade('BTCUSDT', 50000, 0.1, now - 600000, false), // 10 min ago (excluded)
                createTrade('BTCUSDT', 50100, 0.05, now - 240000, false), // 4 min ago (included)
                createTrade('BTCUSDT', 49900, 0.02, now - 60000, true) // 1 min ago (included)
            ];
            const cvd = cvdValidator.calcCVD(trades, 300000); // 5 minute window
            expect(cvd).toBeCloseTo(1507, 0); // 2505 - 998 (first trade excluded)
        });
        it('should return zero CVD for empty trades', () => {
            const cvd = cvdValidator.calcCVD([]);
            expect(cvd).toBe(0);
        });
        it('should handle equal buy and sell volumes', () => {
            const trades = [
                createTrade('BTCUSDT', 50000, 0.1, Date.now() - 60000, false), // Buy: +5000
                createTrade('BTCUSDT', 50000, 0.1, Date.now() - 30000, true) // Sell: -5000
            ];
            const cvd = cvdValidator.calcCVD(trades);
            expect(cvd).toBe(0);
        });
    });
    describe('detectAbsorption', () => {
        it('should detect absorption pattern (price LL, CVD HL)', () => {
            const prices = [100, 95, 90]; // Lower Low pattern
            const cvdValues = [-1000, -1500, -1200]; // Higher Low pattern
            const absorption = cvdValidator.detectAbsorption(prices, cvdValues);
            expect(absorption).not.toBeNull();
            expect(absorption.price).toBe(90);
            expect(absorption.cvdValue).toBe(-1200);
            expect(absorption.confidence).toBeGreaterThan(0);
            expect(absorption.timestamp).toBeCloseTo(Date.now(), -2);
        });
        it('should not detect absorption when price pattern is wrong', () => {
            const prices = [90, 95, 100]; // Higher High pattern (wrong)
            const cvdValues = [-1000, -1500, -1200]; // Higher Low pattern
            const absorption = cvdValidator.detectAbsorption(prices, cvdValues);
            expect(absorption).toBeNull();
        });
        it('should not detect absorption when CVD pattern is wrong', () => {
            const prices = [100, 95, 90]; // Lower Low pattern
            const cvdValues = [-1000, -1200, -1500]; // Lower Low pattern (wrong)
            const absorption = cvdValidator.detectAbsorption(prices, cvdValues);
            expect(absorption).toBeNull();
        });
        it('should return null for insufficient data points', () => {
            const prices = [100, 95];
            const cvdValues = [-1000, -1200];
            const absorption = cvdValidator.detectAbsorption(prices, cvdValues);
            expect(absorption).toBeNull();
        });
        it('should calculate absorption strength correctly', () => {
            const prices = [100, 95, 85]; // 15% price drop
            const cvdValues = [-1000, -1500, -1000]; // 33% CVD rise
            const absorption = cvdValidator.detectAbsorption(prices, cvdValues);
            expect(absorption).not.toBeNull();
            expect(absorption.confidence).toBeGreaterThan(20); // Should reflect significant divergence
            expect(absorption.confidence).toBeLessThanOrEqual(100);
        });
    });
    describe('detectDistribution', () => {
        it('should detect distribution pattern (price HH, CVD LH)', () => {
            const prices = [90, 95, 100]; // Higher High pattern
            const cvdValues = [1000, 1500, 1200]; // Lower High pattern
            const distribution = cvdValidator.detectDistribution(prices, cvdValues);
            expect(distribution).not.toBeNull();
            expect(distribution.price).toBe(100);
            expect(distribution.cvdValue).toBe(1200);
            expect(distribution.confidence).toBeGreaterThan(0);
            expect(distribution.timestamp).toBeCloseTo(Date.now(), -2);
        });
        it('should not detect distribution when price pattern is wrong', () => {
            const prices = [100, 95, 90]; // Lower Low pattern (wrong)
            const cvdValues = [1000, 1500, 1200]; // Lower High pattern
            const distribution = cvdValidator.detectDistribution(prices, cvdValues);
            expect(distribution).toBeNull();
        });
        it('should not detect distribution when CVD pattern is wrong', () => {
            const prices = [90, 95, 100]; // Higher High pattern
            const cvdValues = [1000, 1200, 1500]; // Higher High pattern (wrong)
            const distribution = cvdValidator.detectDistribution(prices, cvdValues);
            expect(distribution).toBeNull();
        });
        it('should return null for insufficient data points', () => {
            const prices = [90, 95];
            const cvdValues = [1000, 1200];
            const distribution = cvdValidator.detectDistribution(prices, cvdValues);
            expect(distribution).toBeNull();
        });
        it('should calculate distribution strength correctly', () => {
            const prices = [85, 95, 100]; // 17.6% price rise
            const cvdValues = [1500, 2000, 1500]; // 25% CVD drop
            const distribution = cvdValidator.detectDistribution(prices, cvdValues);
            expect(distribution).not.toBeNull();
            expect(distribution.confidence).toBeGreaterThan(20); // Should reflect significant divergence
            expect(distribution.confidence).toBeLessThanOrEqual(100);
        });
    });
    describe('validateWithCVD', () => {
        it('should increase confidence for bullish POI with absorption', () => {
            const bullishFVG = {
                type: 'BULLISH',
                top: 105,
                bottom: 95,
                midpoint: 100,
                barIndex: 5,
                timestamp: Date.now(),
                mitigated: false,
                fillPercent: 0
            };
            const absorption = {
                price: 98,
                cvdValue: -1200,
                timestamp: Date.now(),
                confidence: 80
            };
            const confidenceAdjustment = cvdValidator.validateWithCVD(bullishFVG, absorption);
            expect(confidenceAdjustment).toBe(30);
        });
        it('should decrease confidence for bullish POI with distribution', () => {
            const bullishOB = {
                type: 'BULLISH',
                high: 105,
                low: 95,
                barIndex: 5,
                timestamp: Date.now(),
                mitigated: false,
                confidence: 90
            };
            const distribution = {
                price: 102,
                cvdValue: 1200,
                timestamp: Date.now(),
                confidence: 75
            };
            const confidenceAdjustment = cvdValidator.validateWithCVD(bullishOB, null, distribution);
            expect(confidenceAdjustment).toBe(-20);
        });
        it('should increase confidence for bearish POI with distribution', () => {
            const bearishFVG = {
                type: 'BEARISH',
                top: 105,
                bottom: 95,
                midpoint: 100,
                barIndex: 5,
                timestamp: Date.now(),
                mitigated: false,
                fillPercent: 0
            };
            const distribution = {
                price: 102,
                cvdValue: 1200,
                timestamp: Date.now(),
                confidence: 85
            };
            const confidenceAdjustment = cvdValidator.validateWithCVD(bearishFVG, null, distribution);
            expect(confidenceAdjustment).toBe(30);
        });
        it('should decrease confidence for bearish POI with absorption', () => {
            const bearishOB = {
                type: 'BEARISH',
                high: 105,
                low: 95,
                barIndex: 5,
                timestamp: Date.now(),
                mitigated: false,
                confidence: 85
            };
            const absorption = {
                price: 98,
                cvdValue: -1200,
                timestamp: Date.now(),
                confidence: 80
            };
            const confidenceAdjustment = cvdValidator.validateWithCVD(bearishOB, absorption);
            expect(confidenceAdjustment).toBe(-20);
        });
        it('should add confidence for liquidity pool with any CVD divergence', () => {
            const liquidityPool = {
                type: 'HIGH',
                price: 105,
                strength: 75,
                barIndex: 5,
                timestamp: Date.now(),
                swept: false
            };
            const absorption = {
                price: 98,
                cvdValue: -1200,
                timestamp: Date.now(),
                confidence: 80
            };
            const confidenceAdjustment = cvdValidator.validateWithCVD(liquidityPool, absorption);
            expect(confidenceAdjustment).toBe(15);
        });
        it('should return zero adjustment when no CVD signals provided', () => {
            const bullishFVG = {
                type: 'BULLISH',
                top: 105,
                bottom: 95,
                midpoint: 100,
                barIndex: 5,
                timestamp: Date.now(),
                mitigated: false,
                fillPercent: 0
            };
            const confidenceAdjustment = cvdValidator.validateWithCVD(bullishFVG);
            expect(confidenceAdjustment).toBe(0);
        });
    });
    describe('recordTrade', () => {
        it('should record trade and maintain history', () => {
            const trade = createTrade('BTCUSDT', 50000, 0.1, Date.now(), false);
            cvdValidator.recordTrade(trade);
            const history = cvdValidator.getTradeHistory('BTCUSDT');
            expect(history).toHaveLength(1);
            expect(history[0]).toEqual(trade);
        });
        it('should maintain separate history for different symbols', () => {
            const btcTrade = createTrade('BTCUSDT', 50000, 0.1, Date.now(), false);
            const ethTrade = createTrade('ETHUSDT', 3000, 1.0, Date.now(), true);
            cvdValidator.recordTrade(btcTrade);
            cvdValidator.recordTrade(ethTrade);
            const btcHistory = cvdValidator.getTradeHistory('BTCUSDT');
            const ethHistory = cvdValidator.getTradeHistory('ETHUSDT');
            expect(btcHistory).toHaveLength(1);
            expect(ethHistory).toHaveLength(1);
            expect(btcHistory[0].symbol).toBe('BTCUSDT');
            expect(ethHistory[0].symbol).toBe('ETHUSDT');
        });
        it('should filter old trades from history', () => {
            const now = Date.now();
            const oldTrade = createTrade('BTCUSDT', 50000, 0.1, now - 700000, false); // 11+ min ago
            const recentTrade = createTrade('BTCUSDT', 50100, 0.05, now - 60000, true); // 1 min ago
            cvdValidator.recordTrade(oldTrade);
            cvdValidator.recordTrade(recentTrade);
            const history = cvdValidator.getTradeHistory('BTCUSDT');
            expect(history).toHaveLength(1);
            expect(history[0]).toEqual(recentTrade);
        });
        it('should accumulate multiple trades for same symbol', () => {
            const trade1 = createTrade('BTCUSDT', 50000, 0.1, Date.now() - 60000, false);
            const trade2 = createTrade('BTCUSDT', 50100, 0.05, Date.now() - 30000, true);
            const trade3 = createTrade('BTCUSDT', 49900, 0.02, Date.now() - 10000, false);
            cvdValidator.recordTrade(trade1);
            cvdValidator.recordTrade(trade2);
            cvdValidator.recordTrade(trade3);
            const history = cvdValidator.getTradeHistory('BTCUSDT');
            expect(history).toHaveLength(3);
        });
    });
    describe('getCurrentCVD', () => {
        it('should return current CVD for symbol', () => {
            const trades = [
                createTrade('BTCUSDT', 50000, 0.1, Date.now() - 60000, false), // Buy: +5000
                createTrade('BTCUSDT', 50100, 0.05, Date.now() - 30000, true) // Sell: -2505
            ];
            trades.forEach(trade => cvdValidator.recordTrade(trade));
            const cvd = cvdValidator.getCurrentCVD('BTCUSDT');
            expect(cvd).toBeCloseTo(2495, 0); // 5000 - 2505
        });
        it('should return zero for symbol with no trades', () => {
            const cvd = cvdValidator.getCurrentCVD('NONEXISTENT');
            expect(cvd).toBe(0);
        });
        it('should respect custom time window', () => {
            const now = Date.now();
            const trades = [
                createTrade('BTCUSDT', 50000, 0.1, now - 600000, false), // 10 min ago
                createTrade('BTCUSDT', 50100, 0.05, now - 60000, true) // 1 min ago
            ];
            trades.forEach(trade => cvdValidator.recordTrade(trade));
            const cvd5min = cvdValidator.getCurrentCVD('BTCUSDT', 300000); // 5 min window
            const cvd15min = cvdValidator.getCurrentCVD('BTCUSDT', 900000); // 15 min window
            expect(cvd5min).toBeCloseTo(-2505, 0); // Only recent trade
            expect(cvd15min).toBeCloseTo(2495, 0); // Both trades
        });
    });
    describe('utility methods', () => {
        it('should clear history for specific symbol', () => {
            const btcTrade = createTrade('BTCUSDT', 50000, 0.1, Date.now(), false);
            const ethTrade = createTrade('ETHUSDT', 3000, 1.0, Date.now(), true);
            cvdValidator.recordTrade(btcTrade);
            cvdValidator.recordTrade(ethTrade);
            cvdValidator.clearHistory('BTCUSDT');
            expect(cvdValidator.getTradeHistory('BTCUSDT')).toHaveLength(0);
            expect(cvdValidator.getTradeHistory('ETHUSDT')).toHaveLength(1);
        });
        it('should provide history statistics', () => {
            const trades = [
                createTrade('BTCUSDT', 50000, 0.1, Date.now(), false),
                createTrade('BTCUSDT', 50100, 0.05, Date.now(), true),
                createTrade('ETHUSDT', 3000, 1.0, Date.now(), false)
            ];
            trades.forEach(trade => cvdValidator.recordTrade(trade));
            const stats = cvdValidator.getHistoryStats();
            expect(stats.totalSymbols).toBe(2);
            expect(stats.totalTrades).toBe(3);
            expect(stats.memoryUsage).toContain('KB');
        });
        it('should handle empty history gracefully', () => {
            const stats = cvdValidator.getHistoryStats();
            expect(stats.totalSymbols).toBe(0);
            expect(stats.totalTrades).toBe(0);
            expect(stats.memoryUsage).toBe('0.0 KB');
        });
    });
    describe('edge cases', () => {
        it('should handle zero quantity trades', () => {
            const trade = createTrade('BTCUSDT', 50000, 0, Date.now(), false);
            cvdValidator.recordTrade(trade);
            const cvd = cvdValidator.getCurrentCVD('BTCUSDT');
            expect(cvd).toBe(0);
        });
        it('should handle very small CVD values in divergence detection', () => {
            const prices = [100, 95, 90];
            const cvdValues = [0.001, 0.0005, 0.0008]; // Very small values
            const absorption = cvdValidator.detectAbsorption(prices, cvdValues);
            expect(absorption).not.toBeNull(); // Should still detect pattern
            expect(absorption.confidence).toBeGreaterThan(0);
        });
        it('should handle identical price values', () => {
            const prices = [100, 100, 100];
            const cvdValues = [-1000, -1500, -1200];
            const absorption = cvdValidator.detectAbsorption(prices, cvdValues);
            expect(absorption).toBeNull(); // No price movement = no pattern
        });
        it('should handle identical CVD values', () => {
            const prices = [100, 95, 90];
            const cvdValues = [-1000, -1000, -1000];
            const absorption = cvdValidator.detectAbsorption(prices, cvdValues);
            expect(absorption).toBeNull(); // No CVD movement = no pattern
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvdGVzdHMvdW5pdC9DVkRWYWxpZGF0b3IudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7O0dBS0c7O0FBRUgsZ0VBQXVFO0FBR3ZFLFFBQVEsQ0FBQyxjQUFjLEVBQUUsR0FBRyxFQUFFO0lBQzVCLElBQUksWUFBMEIsQ0FBQztJQUUvQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsWUFBWSxHQUFHLElBQUksMkJBQVksRUFBRSxDQUFDO0lBQ3BDLENBQUMsQ0FBQyxDQUFDO0lBRUgsZ0RBQWdEO0lBQ2hELE1BQU0sV0FBVyxHQUFHLENBQ2xCLE1BQWMsRUFDZCxLQUFhLEVBQ2IsR0FBVyxFQUNYLElBQVksRUFDWixZQUFxQixFQUNYLEVBQUUsQ0FBQyxDQUFDO1FBQ2QsTUFBTTtRQUNOLEtBQUs7UUFDTCxHQUFHO1FBQ0gsSUFBSTtRQUNKLFlBQVk7S0FDYixDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRTtRQUN2QixFQUFFLENBQUMsdURBQXVELEVBQUUsR0FBRyxFQUFFO1lBQy9ELE1BQU0sTUFBTSxHQUFlO2dCQUN6QixXQUFXLENBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssRUFBRSxLQUFLLENBQUMsRUFBRSxhQUFhO2dCQUM1RSxXQUFXLENBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssRUFBRSxLQUFLLENBQUMsRUFBRSxhQUFhO2dCQUM3RSxXQUFXLENBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBRyxhQUFhO2FBQzlFLENBQUM7WUFFRixNQUFNLEdBQUcsR0FBRyxZQUFZLENBQUMsT0FBTyxD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QixNQUFNLFNBQVMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFeEMsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNwRSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxpQ0FBaUM7UUFDbEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO1lBQzVDLE1BQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUM3QixNQUFNLFNBQVMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFeEMsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNwRSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQywrQkFBK0I7UUFDaEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9pdmFuL0NvZGUvdHJhZGluZy90aXRhbi9zZXJ2aWNlcy90aXRhbi1waGFzZTItaHVudGVyL3Rlc3RzL3VuaXQvQ1ZEVmFsaWRhdG9yLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IFRlc3RzIGZvciBDVkRWYWxpZGF0b3JcbiAqIFxuICogVGVzdHMgYWxsIENWRCBjYWxjdWxhdGlvbiwgYWJzb3JwdGlvbiBkZXRlY3Rpb24sIGFuZCBkaXN0cmlidXRpb24gZGV0ZWN0aW9uIGZ1bmN0aW9uc1xuICogdXNpbmcga25vd24gdHJhZGUgcGF0dGVybnMgYW5kIGVkZ2UgY2FzZXMuXG4gKi9cblxuaW1wb3J0IHsgQ1ZEVmFsaWRhdG9yLCBDVkRUcmFkZSB9IGZyb20gJy4uLy4uL3NyYy9lbmdpbmUvQ1ZEVmFsaWRhdG9yJztcbmltcG9ydCB7IEFic29ycHRpb24sIERpc3RyaWJ1dGlvbiwgUE9JLCBGVkcsIE9yZGVyQmxvY2ssIExpcXVpZGl0eVBvb2wgfSBmcm9tICcuLi8uLi9zcmMvdHlwZXMnO1xuXG5kZXNjcmliZSgnQ1ZEVmFsaWRhdG9yJywgKCkgPT4ge1xuICBsZXQgY3ZkVmFsaWRhdG9yOiBDVkRWYWxpZGF0b3I7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY3ZkVmFsaWRhdG9yID0gbmV3IENWRFZhbGlkYXRvcigpO1xuICB9KTtcblxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIHRlc3QgQ1ZEIHRyYWRlIGRhdGFcbiAgY29uc3QgY3JlYXRlVHJhZGUgPSAoXG4gICAgc3ltYm9sOiBzdHJpbmcsXG4gICAgcHJpY2U6IG51bWJlcixcbiAgICBxdHk6IG51bWJlcixcbiAgICB0aW1lOiBudW1iZXIsXG4gICAgaXNCdXllck1ha2VyOiBib29sZWFuXG4gICk6IENWRFRyYWRlID0+ICh7XG4gICAgc3ltYm9sLFxuICAgIHByaWNlLFxuICAgIHF0eSxcbiAgICB0aW1lLFxuICAgIGlzQnV5ZXJNYWtlclxuICB9KTtcblxuICBkZXNjcmliZSgnY2FsY0NWRCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBwb3NpdGl2ZSBDVkQgZm9yIG5ldCBidXlpbmcgcHJlc3N1cmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFkZXM6IENWRFRyYWRlW10gPSBbXG4gICAgICAgIGNyZWF0ZVRyYWRlKCdCVENVU0RUJywgNTAwMDAsIDAuMSwgRGF0ZS5ub3coKSAtIDYwMDAwLCBmYWxzZSksIC8vIEJ1eTogKzUwMDBcbiAgICAgICAgY3JlYXRlVHJhZGUoJ0JUQ1VTRFQnLCA1MDEwMCwgMC4wNSwgRGF0ZS5ub3coKSAtIDMwMDAwLCBmYWxzZSksIC8vIEJ1eTogKzI1MDVcbiAgICAgICAgY3JlYXRlVHJhZGUoJ0JUQ1VTRFQnLCA0OTkwMCwgMC4wMiwgRGF0ZS5ub3coKSAtIDEwMDAwLCB0cnVlKSAgIC8vIFNlbGw6IC05OThcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGN2ZCA9IGN2ZFZhbGlkYXRvci5jYWxjQ1ZEKHRyYWRlcyk7XG4gICAgICBleHBlY3QoY3ZkKS50b0JlQ2xvc2VUbyg2NTA3LCAwKTsgLy8gNTAwMCArIDI1MDUgLSA5OThcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIG5lZ2F0aXZlIENWRCBmb3IgbmV0IHNlbGxpbmcgcHJlc3N1cmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFkZXM6IENWRFRyYWRlW10gPSBbXG4gICAgICAgIGNyZWF0ZVRyYWRlKCdCVENVU0RUJywgNTAwMDAsIDAuMSwgRGF0ZS5ub3coKSAtIDYwMDAwLCB0cnVlKSwgIC8vIFNlbGw6IC01MDAwXG4gICAgICAgIGNyZWF0ZVRyYWRlKCdCVENVU0RUJywgNDk5MDAsIDAuMDUsIERhdGUubm93KCkgLSAzMDAwMCwgdHJ1ZSksIC8vIFNlbGw6IC0yNDk1XG4gICAgICAgIGNyZWF0ZVRyYWRlKCdCVENVU0RUJywgNTAxMDAsIDAuMDIsIERhdGUubm93KCkgLSAxMDAwMCwgZmFsc2UpIC8vIEJ1eTogKzEwMDJcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGN2ZCA9IGN2ZFZhbGlkYXRvci5jYWxjQ1ZEKHRyYWRlcyk7XG4gICAgICBleHBlY3QoY3ZkKS50b0JlQ2xvc2VUbygtNjQ5MywgMCk7IC8vIC01MDAwIC0gMjQ5NSArIDEwMDJcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIHRyYWRlcyBieSB0aW1lIHdpbmRvdycsICgpID0+IHtcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCB0cmFkZXM6IENWRFRyYWRlW10gPSBbXG4gICAgICAgIGNyZWF0ZVRyYWRlKCdCVENVU0RUJywgNTAwMDAsIDAuMSwgbm93IC0gNjAwMDAwLCBmYWxzZSksIC8vIDEwIG1pbiBhZ28gKGV4Y2x1ZGVkKVxuICAgICAgICBjcmVhdGVUcmFkZSgnQlRDVVNEVCcsIDUwMTAwLCAwLjA1LCBub3cgLSAyNDAwMDAsIGZhbHNlKSwgLy8gNCBtaW4gYWdvIChpbmNsdWRlZClcbiAgICAgICAgY3JlYXRlVHJhZGUoJ0JUQ1VTRFQnLCA0OTkwMCwgMC4wMiwgbm93IC0gNjAwMDAsIHRydWUpICAgIC8vIDEgbWluIGFnbyAoaW5jbHVkZWQpXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBjdmQgPSBjdmRWYWxpZGF0b3IuY2FsY0NWRCh0cmFkZXMsIDMwMDAwMCk7IC8vIDUgbWludXRlIHdpbmRvd1xuICAgICAgZXhwZWN0KGN2ZCkudG9CZUNsb3NlVG8oMTUwNywgMCk7IC8vIDI1MDUgLSA5OTggKGZpcnN0IHRyYWRlIGV4Y2x1ZGVkKVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gemVybyBDVkQgZm9yIGVtcHR5IHRyYWRlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGN2ZCA9IGN2ZFZhbGlkYXRvci5jYWxjQ1ZEKFtdKTtcbiAgICAgIGV4cGVjdChjdmQpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlcXVhbCBidXkgYW5kIHNlbGwgdm9sdW1lcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHRyYWRlczogQ1ZEVHJhZGVbXSA9IFtcbiAgICAgICAgY3JlYXRlVHJhZGUoJ0JUQ1VTRFQnLCA1MDAwMCwgMC4xLCBEYXRlLm5vdygpIC0gNjAwMDAsIGZhbHNlKSwgLy8gQnV5OiArNTAwMFxuICAgICAgICBjcmVhdGVUcmFkZSgnQlRDVVNEVCcsIDUwMDAwLCAwLjEsIERhdGUubm93KCkgLSAzMDAwMCwgdHJ1ZSkgICAvLyBTZWxsOiAtNTAwMFxuICAgICAgXTtcblxuICAgICAgY29uc3QgY3ZkID0gY3ZkVmFsaWRhdG9yLmNhbGNDVkQodHJhZGVzKTtcbiAgICAgIGV4cGVjdChjdmQpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkZXRlY3RBYnNvcnB0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGFic29ycHRpb24gcGF0dGVybiAocHJpY2UgTEwsIENWRCBITCknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmljZXMgPSBbMTAwLCA5NSwgOTBdOyAgICAgIC8vIExvd2VyIExvdyBwYXR0ZXJuXG4gICAgICBjb25zdCBjdmRWYWx1ZXMgPSBbLTEwMDAsIC0xNTAwLCAtMTIwMF07IC8vIEhpZ2hlciBMb3cgcGF0dGVyblxuXG4gICAgICBjb25zdCBhYnNvcnB0aW9uID0gY3ZkVmFsaWRhdG9yLmRldGVjdEFic29ycHRpb24ocHJpY2VzLCBjdmRWYWx1ZXMpO1xuXG4gICAgICBleHBlY3QoYWJzb3JwdGlvbikubm90LnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QoYWJzb3JwdGlvbiEucHJpY2UpLnRvQmUoOTApO1xuICAgICAgZXhwZWN0KGFic29ycHRpb24hLmN2ZFZhbHVlKS50b0JlKC0xMjAwKTtcbiAgICAgIGV4cGVjdChhYnNvcnB0aW9uIS5jb25maWRlbmNlKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoYWJzb3JwdGlvbiEudGltZXN0YW1wKS50b0JlQ2xvc2VUbyhEYXRlLm5vdygpLCAtMik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBkZXRlY3QgYWJzb3JwdGlvbiB3aGVuIHByaWNlIHBhdHRlcm4gaXMgd3JvbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmljZXMgPSBbOTAsIDk1LCAxMDBdOyAgICAgIC8vIEhpZ2hlciBIaWdoIHBhdHRlcm4gKHdyb25nKVxuICAgICAgY29uc3QgY3ZkVmFsdWVzID0gWy0xMDAwLCAtMTUwMCwgLTEyMDBdOyAvLyBIaWdoZXIgTG93IHBhdHRlcm5cblxuICAgICAgY29uc3QgYWJzb3JwdGlvbiA9IGN2ZFZhbGlkYXRvci5kZXRlY3RBYnNvcnB0aW9uKHByaWNlcywgY3ZkVmFsdWVzKTtcbiAgICAgIGV4cGVjdChhYnNvcnB0aW9uKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgZGV0ZWN0IGFic29ycHRpb24gd2hlbiBDVkQgcGF0dGVybiBpcyB3cm9uZycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByaWNlcyA9IFsxMDAsIDk1LCA5MF07ICAgICAgLy8gTG93ZXIgTG93IHBhdHRlcm5cbiAgICAgIGNvbnN0IGN2ZFZhbHVlcyA9IFstMTAwMCwgLTEyMDAsIC0xNTAwXTsgLy8gTG93ZXIgTG93IHBhdHRlcm4gKHdyb25nKVxuXG4gICAgICBjb25zdCBhYnNvcnB0aW9uID0gY3ZkVmFsaWRhdG9yLmRldGVjdEFic29ycHRpb24ocHJpY2VzLCBjdmRWYWx1ZXMpO1xuICAgICAgZXhwZWN0KGFic29ycHRpb24pLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGZvciBpbnN1ZmZpY2llbnQgZGF0YSBwb2ludHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmljZXMgPSBbMTAwLCA5NV07XG4gICAgICBjb25zdCBjdmRWYWx1ZXMgPSBbLTEwMDAsIC0xMjAwXTtcblxuICAgICAgY29uc3QgYWJzb3JwdGlvbiA9IGN2ZFZhbGlkYXRvci5kZXRlY3RBYnNvcnB0aW9uKHByaWNlcywgY3ZkVmFsdWVzKTtcbiAgICAgIGV4cGVjdChhYnNvcnB0aW9uKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgYWJzb3JwdGlvbiBzdHJlbmd0aCBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmljZXMgPSBbMTAwLCA5NSwgODVdOyAgICAgIC8vIDE1JSBwcmljZSBkcm9wXG4gICAgICBjb25zdCBjdmRWYWx1ZXMgPSBbLTEwMDAsIC0xNTAwLCAtMTAwMF07IC8vIDMzJSBDVkQgcmlzZVxuXG4gICAgICBjb25zdCBhYnNvcnB0aW9uID0gY3ZkVmFsaWRhdG9yLmRldGVjdEFic29ycHRpb24ocHJpY2VzLCBjdmRWYWx1ZXMpO1xuXG4gICAgICBleHBlY3QoYWJzb3JwdGlvbikubm90LnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QoYWJzb3JwdGlvbiEuY29uZmlkZW5jZSkudG9CZUdyZWF0ZXJUaGFuKDIwKTsgLy8gU2hvdWxkIHJlZmxlY3Qgc2lnbmlmaWNhbnQgZGl2ZXJnZW5jZVxuICAgICAgZXhwZWN0KGFic29ycHRpb24hLmNvbmZpZGVuY2UpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RldGVjdERpc3RyaWJ1dGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBkaXN0cmlidXRpb24gcGF0dGVybiAocHJpY2UgSEgsIENWRCBMSCknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmljZXMgPSBbOTAsIDk1LCAxMDBdOyAgICAgIC8vIEhpZ2hlciBIaWdoIHBhdHRlcm5cbiAgICAgIGNvbnN0IGN2ZFZhbHVlcyA9IFsxMDAwLCAxNTAwLCAxMjAwXTsgLy8gTG93ZXIgSGlnaCBwYXR0ZXJuXG5cbiAgICAgIGNvbnN0IGRpc3RyaWJ1dGlvbiA9IGN2ZFZhbGlkYXRvci5kZXRlY3REaXN0cmlidXRpb24ocHJpY2VzLCBjdmRWYWx1ZXMpO1xuXG4gICAgICBleHBlY3QoZGlzdHJpYnV0aW9uKS5ub3QudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChkaXN0cmlidXRpb24hLnByaWNlKS50b0JlKDEwMCk7XG4gICAgICBleHBlY3QoZGlzdHJpYnV0aW9uIS5jdmRWYWx1ZSkudG9CZSgxMjAwKTtcbiAgICAgIGV4cGVjdChkaXN0cmlidXRpb24hLmNvbmZpZGVuY2UpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChkaXN0cmlidXRpb24hLnRpbWVzdGFtcCkudG9CZUNsb3NlVG8oRGF0ZS5ub3coKSwgLTIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgZGV0ZWN0IGRpc3RyaWJ1dGlvbiB3aGVuIHByaWNlIHBhdHRlcm4gaXMgd3JvbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmljZXMgPSBbMTAwLCA5NSwgOTBdOyAgICAgIC8vIExvd2VyIExvdyBwYXR0ZXJuICh3cm9uZylcbiAgICAgIGNvbnN0IGN2ZFZhbHVlcyA9IFsxMDAwLCAxNTAwLCAxMjAwXTsgLy8gTG93ZXIgSGlnaCBwYXR0ZXJuXG5cbiAgICAgIGNvbnN0IGRpc3RyaWJ1dGlvbiA9IGN2ZFZhbGlkYXRvci5kZXRlY3REaXN0cmlidXRpb24ocHJpY2VzLCBjdmRWYWx1ZXMpO1xuICAgICAgZXhwZWN0KGRpc3RyaWJ1dGlvbikudG9CZU51bGwoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGRldGVjdCBkaXN0cmlidXRpb24gd2hlbiBDVkQgcGF0dGVybiBpcyB3cm9uZycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByaWNlcyA9IFs5MCwgOTUsIDEwMF07ICAgICAgLy8gSGlnaGVyIEhpZ2ggcGF0dGVyblxuICAgICAgY29uc3QgY3ZkVmFsdWVzID0gWzEwMDAsIDEyMDAsIDE1MDBdOyAvLyBIaWdoZXIgSGlnaCBwYXR0ZXJuICh3cm9uZylcblxuICAgICAgY29uc3QgZGlzdHJpYnV0aW9uID0gY3ZkVmFsaWRhdG9yLmRldGVjdERpc3RyaWJ1dGlvbihwcmljZXMsIGN2ZFZhbHVlcyk7XG4gICAgICBleHBlY3QoZGlzdHJpYnV0aW9uKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBmb3IgaW5zdWZmaWNpZW50IGRhdGEgcG9pbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJpY2VzID0gWzkwLCA5NV07XG4gICAgICBjb25zdCBjdmRWYWx1ZXMgPSBbMTAwMCwgMTIwMF07XG5cbiAgICAgIGNvbnN0IGRpc3RyaWJ1dGlvbiA9IGN2ZFZhbGlkYXRvci5kZXRlY3REaXN0cmlidXRpb24ocHJpY2VzLCBjdmRWYWx1ZXMpO1xuICAgICAgZXhwZWN0KGRpc3RyaWJ1dGlvbikudG9CZU51bGwoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGRpc3RyaWJ1dGlvbiBzdHJlbmd0aCBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmljZXMgPSBbODUsIDk1LCAxMDBdOyAgICAgIC8vIDE3LjYlIHByaWNlIHJpc2VcbiAgICAgIGNvbnN0IGN2ZFZhbHVlcyA9IFsxNTAwLCAyMDAwLCAxNTAwXTsgLy8gMjUlIENWRCBkcm9wXG5cbiAgICAgIGNvbnN0IGRpc3RyaWJ1dGlvbiA9IGN2ZFZhbGlkYXRvci5kZXRlY3REaXN0cmlidXRpb24ocHJpY2VzLCBjdmRWYWx1ZXMpO1xuXG4gICAgICBleHBlY3QoZGlzdHJpYnV0aW9uKS5ub3QudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChkaXN0cmlidXRpb24hLmNvbmZpZGVuY2UpLnRvQmVHcmVhdGVyVGhhbigyMCk7IC8vIFNob3VsZCByZWZsZWN0IHNpZ25pZmljYW50IGRpdmVyZ2VuY2VcbiAgICAgIGV4cGVjdChkaXN0cmlidXRpb24hLmNvbmZpZGVuY2UpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlV2l0aENWRCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluY3JlYXNlIGNvbmZpZGVuY2UgZm9yIGJ1bGxpc2ggUE9JIHdpdGggYWJzb3JwdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGJ1bGxpc2hGVkc6IEZWRyA9IHtcbiAgICAgICAgdHlwZTogJ0JVTExJU0gnLFxuICAgICAgICB0b3A6IDEwNSxcbiAgICAgICAgYm90dG9tOiA5NSxcbiAgICAgICAgbWlkcG9pbnQ6IDEwMCxcbiAgICAgICAgYmFySW5kZXg6IDUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgbWl0aWdhdGVkOiBmYWxzZSxcbiAgICAgICAgZmlsbFBlcmNlbnQ6IDBcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGFic29ycHRpb246IEFic29ycHRpb24gPSB7XG4gICAgICAgIHByaWNlOiA5OCxcbiAgICAgICAgY3ZkVmFsdWU6IC0xMjAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIGNvbmZpZGVuY2U6IDgwXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjb25maWRlbmNlQWRqdXN0bWVudCA9IGN2ZFZhbGlkYXRvci52YWxpZGF0ZVdpdGhDVkQoYnVsbGlzaEZWRywgYWJzb3JwdGlvbik7XG4gICAgICBleHBlY3QoY29uZmlkZW5jZUFkanVzdG1lbnQpLnRvQmUoMzApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZWNyZWFzZSBjb25maWRlbmNlIGZvciBidWxsaXNoIFBPSSB3aXRoIGRpc3RyaWJ1dGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGJ1bGxpc2hPQjogT3JkZXJCbG9jayA9IHtcbiAgICAgICAgdHlwZTogJ0JVTExJU0gnLFxuICAgICAgICBoaWdoOiAxMDUsXG4gICAgICAgIGxvdzogOTUsXG4gICAgICAgIGJhckluZGV4OiA1LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIG1pdGlnYXRlZDogZmFsc2UsXG4gICAgICAgIGNvbmZpZGVuY2U6IDkwXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBkaXN0cmlidXRpb246IERpc3RyaWJ1dGlvbiA9IHtcbiAgICAgICAgcHJpY2U6IDEwMixcbiAgICAgICAgY3ZkVmFsdWU6IDEyMDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgY29uZmlkZW5jZTogNzVcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNvbmZpZGVuY2VBZGp1c3RtZW50ID0gY3ZkVmFsaWRhdG9yLnZhbGlkYXRlV2l0aENWRChidWxsaXNoT0IsIG51bGwsIGRpc3RyaWJ1dGlvbik7XG4gICAgICBleHBlY3QoY29uZmlkZW5jZUFkanVzdG1lbnQpLnRvQmUoLTIwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jcmVhc2UgY29uZmlkZW5jZSBmb3IgYmVhcmlzaCBQT0kgd2l0aCBkaXN0cmlidXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBiZWFyaXNoRlZHOiBGVkcgPSB7XG4gICAgICAgIHR5cGU6ICdCRUFSSVNIJyxcbiAgICAgICAgdG9wOiAxMDUsXG4gICAgICAgIGJvdHRvbTogOTUsXG4gICAgICAgIG1pZHBvaW50OiAxMDAsXG4gICAgICAgIGJhckluZGV4OiA1LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIG1pdGlnYXRlZDogZmFsc2UsXG4gICAgICAgIGZpbGxQZXJjZW50OiAwXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBkaXN0cmlidXRpb246IERpc3RyaWJ1dGlvbiA9IHtcbiAgICAgICAgcHJpY2U6IDEwMixcbiAgICAgICAgY3ZkVmFsdWU6IDEyMDAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgY29uZmlkZW5jZTogODVcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNvbmZpZGVuY2VBZGp1c3RtZW50ID0gY3ZkVmFsaWRhdG9yLnZhbGlkYXRlV2l0aENWRChiZWFyaXNoRlZHLCBudWxsLCBkaXN0cmlidXRpb24pO1xuICAgICAgZXhwZWN0KGNvbmZpZGVuY2VBZGp1c3RtZW50KS50b0JlKDMwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVjcmVhc2UgY29uZmlkZW5jZSBmb3IgYmVhcmlzaCBQT0kgd2l0aCBhYnNvcnB0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgYmVhcmlzaE9COiBPcmRlckJsb2NrID0ge1xuICAgICAgICB0eXBlOiAnQkVBUklTSCcsXG4gICAgICAgIGhpZ2g6IDEwNSxcbiAgICAgICAgbG93OiA5NSxcbiAgICAgICAgYmFySW5kZXg6IDUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgbWl0aWdhdGVkOiBmYWxzZSxcbiAgICAgICAgY29uZmlkZW5jZTogODVcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGFic29ycHRpb246IEFic29ycHRpb24gPSB7XG4gICAgICAgIHByaWNlOiA5OCxcbiAgICAgICAgY3ZkVmFsdWU6IC0xMjAwLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIGNvbmZpZGVuY2U6IDgwXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjb25maWRlbmNlQWRqdXN0bWVudCA9IGN2ZFZhbGlkYXRvci52YWxpZGF0ZVdpdGhDVkQoYmVhcmlzaE9CLCBhYnNvcnB0aW9uKTtcbiAgICAgIGV4cGVjdChjb25maWRlbmNlQWRqdXN0bWVudCkudG9CZSgtMjApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhZGQgY29uZmlkZW5jZSBmb3IgbGlxdWlkaXR5IHBvb2wgd2l0aCBhbnkgQ1ZEIGRpdmVyZ2VuY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsaXF1aWRpdHlQb29sOiBMaXF1aWRpdHlQb29sID0ge1xuICAgICAgICB0eXBlOiAnSElHSCcsXG4gICAgICAgIHByaWNlOiAxMDUsXG4gICAgICAgIHN0cmVuZ3RoOiA3NSxcbiAgICAgICAgYmFySW5kZXg6IDUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgc3dlcHQ6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBhYnNvcnB0aW9uOiBBYnNvcnB0aW9uID0ge1xuICAgICAgICBwcmljZTogOTgsXG4gICAgICAgIGN2ZFZhbHVlOiAtMTIwMCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBjb25maWRlbmNlOiA4MFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY29uZmlkZW5jZUFkanVzdG1lbnQgPSBjdmRWYWxpZGF0b3IudmFsaWRhdGVXaXRoQ1ZEKGxpcXVpZGl0eVBvb2wsIGFic29ycHRpb24pO1xuICAgICAgZXhwZWN0KGNvbmZpZGVuY2VBZGp1c3RtZW50KS50b0JlKDE1KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHplcm8gYWRqdXN0bWVudCB3aGVuIG5vIENWRCBzaWduYWxzIHByb3ZpZGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgYnVsbGlzaEZWRzogRlZHID0ge1xuICAgICAgICB0eXBlOiAnQlVMTElTSCcsXG4gICAgICAgIHRvcDogMTA1LFxuICAgICAgICBib3R0b206IDk1LFxuICAgICAgICBtaWRwb2ludDogMTAwLFxuICAgICAgICBiYXJJbmRleDogNSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBtaXRpZ2F0ZWQ6IGZhbHNlLFxuICAgICAgICBmaWxsUGVyY2VudDogMFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY29uZmlkZW5jZUFkanVzdG1lbnQgPSBjdmRWYWxpZGF0b3IudmFsaWRhdGVXaXRoQ1ZEKGJ1bGxpc2hGVkcpO1xuICAgICAgZXhwZWN0KGNvbmZpZGVuY2VBZGp1c3RtZW50KS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncmVjb3JkVHJhZGUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZWNvcmQgdHJhZGUgYW5kIG1haW50YWluIGhpc3RvcnknLCAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFkZSA9IGNyZWF0ZVRyYWRlKCdCVENVU0RUJywgNTAwMDAsIDAuMSwgRGF0ZS5ub3coKSwgZmFsc2UpO1xuICAgICAgXG4gICAgICBjdmRWYWxpZGF0b3IucmVjb3JkVHJhZGUodHJhZGUpO1xuICAgICAgXG4gICAgICBjb25zdCBoaXN0b3J5ID0gY3ZkVmFsaWRhdG9yLmdldFRyYWRlSGlzdG9yeSgnQlRDVVNEVCcpO1xuICAgICAgZXhwZWN0KGhpc3RvcnkpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5WzBdKS50b0VxdWFsKHRyYWRlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gc2VwYXJhdGUgaGlzdG9yeSBmb3IgZGlmZmVyZW50IHN5bWJvbHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBidGNUcmFkZSA9IGNyZWF0ZVRyYWRlKCdCVENVU0RUJywgNTAwMDAsIDAuMSwgRGF0ZS5ub3coKSwgZmFsc2UpO1xuICAgICAgY29uc3QgZXRoVHJhZGUgPSBjcmVhdGVUcmFkZSgnRVRIVVNEVCcsIDMwMDAsIDEuMCwgRGF0ZS5ub3coKSwgdHJ1ZSk7XG4gICAgICBcbiAgICAgIGN2ZFZhbGlkYXRvci5yZWNvcmRUcmFkZShidGNUcmFkZSk7XG4gICAgICBjdmRWYWxpZGF0b3IucmVjb3JkVHJhZGUoZXRoVHJhZGUpO1xuICAgICAgXG4gICAgICBjb25zdCBidGNIaXN0b3J5ID0gY3ZkVmFsaWRhdG9yLmdldFRyYWRlSGlzdG9yeSgnQlRDVVNEVCcpO1xuICAgICAgY29uc3QgZXRoSGlzdG9yeSA9IGN2ZFZhbGlkYXRvci5nZXRUcmFkZUhpc3RvcnkoJ0VUSFVTRFQnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGJ0Y0hpc3RvcnkpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChldGhIaXN0b3J5KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoYnRjSGlzdG9yeVswXS5zeW1ib2wpLnRvQmUoJ0JUQ1VTRFQnKTtcbiAgICAgIGV4cGVjdChldGhIaXN0b3J5WzBdLnN5bWJvbCkudG9CZSgnRVRIVVNEVCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgb2xkIHRyYWRlcyBmcm9tIGhpc3RvcnknLCAoKSA9PiB7XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3Qgb2xkVHJhZGUgPSBjcmVhdGVUcmFkZSgnQlRDVVNEVCcsIDUwMDAwLCAwLjEsIG5vdyAtIDcwMDAwMCwgZmFsc2UpOyAvLyAxMSsgbWluIGFnb1xuICAgICAgY29uc3QgcmVjZW50VHJhZGUgPSBjcmVhdGVUcmFkZSgnQlRDVVNEVCcsIDUwMTAwLCAwLjA1LCBub3cgLSA2MDAwMCwgdHJ1ZSk7IC8vIDEgbWluIGFnb1xuICAgICAgXG4gICAgICBjdmRWYWxpZGF0b3IucmVjb3JkVHJhZGUob2xkVHJhZGUpO1xuICAgICAgY3ZkVmFsaWRhdG9yLnJlY29yZFRyYWRlKHJlY2VudFRyYWRlKTtcbiAgICAgIFxuICAgICAgY29uc3QgaGlzdG9yeSA9IGN2ZFZhbGlkYXRvci5nZXRUcmFkZUhpc3RvcnkoJ0JUQ1VTRFQnKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoaGlzdG9yeVswXSkudG9FcXVhbChyZWNlbnRUcmFkZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFjY3VtdWxhdGUgbXVsdGlwbGUgdHJhZGVzIGZvciBzYW1lIHN5bWJvbCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRyYWRlMSA9IGNyZWF0ZVRyYWRlKCdCVENVU0RUJywgNTAwMDAsIDAuMSwgRGF0ZS5ub3coKSAtIDYwMDAwLCBmYWxzZSk7XG4gICAgICBjb25zdCB0cmFkZTIgPSBjcmVhdGVUcmFkZSgnQlRDVVNEVCcsIDUwMTAwLCAwLjA1LCBEYXRlLm5vdygpIC0gMzAwMDAsIHRydWUpO1xuICAgICAgY29uc3QgdHJhZGUzID0gY3JlYXRlVHJhZGUoJ0JUQ1VTRFQnLCA0OTkwMCwgMC4wMiwgRGF0ZS5ub3coKSAtIDEwMDAwLCBmYWxzZSk7XG4gICAgICBcbiAgICAgIGN2ZFZhbGlkYXRvci5yZWNvcmRUcmFkZSh0cmFkZTEpO1xuICAgICAgY3ZkVmFsaWRhdG9yLnJlY29yZFRyYWRlKHRyYWRlMik7XG4gICAgICBjdmRWYWxpZGF0b3IucmVjb3JkVHJhZGUodHJhZGUzKTtcbiAgICAgIFxuICAgICAgY29uc3QgaGlzdG9yeSA9IGN2ZFZhbGlkYXRvci5nZXRUcmFkZUhpc3RvcnkoJ0JUQ1VTRFQnKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5KS50b0hhdmVMZW5ndGgoMyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRDdXJyZW50Q1ZEJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGN1cnJlbnQgQ1ZEIGZvciBzeW1ib2wnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFkZXMgPSBbXG4gICAgICAgIGNyZWF0ZVRyYWRlKCdCVENVU0RUJywgNTAwMDAsIDAuMSwgRGF0ZS5ub3coKSAtIDYwMDAwLCBmYWxzZSksIC8vIEJ1eTogKzUwMDBcbiAgICAgICAgY3JlYXRlVHJhZGUoJ0JUQ1VTRFQnLCA1MDEwMCwgMC4wNSwgRGF0ZS5ub3coKSAtIDMwMDAwLCB0cnVlKSAgLy8gU2VsbDogLTI1MDVcbiAgICAgIF07XG4gICAgICBcbiAgICAgIHRyYWRlcy5mb3JFYWNoKHRyYWRlID0+IGN2ZFZhbGlkYXRvci5yZWNvcmRUcmFkZSh0cmFkZSkpO1xuICAgICAgXG4gICAgICBjb25zdCBjdmQgPSBjdmRWYWxpZGF0b3IuZ2V0Q3VycmVudENWRCgnQlRDVVNEVCcpO1xuICAgICAgZXhwZWN0KGN2ZCkudG9CZUNsb3NlVG8oMjQ5NSwgMCk7IC8vIDUwMDAgLSAyNTA1XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB6ZXJvIGZvciBzeW1ib2wgd2l0aCBubyB0cmFkZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdmQgPSBjdmRWYWxpZGF0b3IuZ2V0Q3VycmVudENWRCgnTk9ORVhJU1RFTlQnKTtcbiAgICAgIGV4cGVjdChjdmQpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlc3BlY3QgY3VzdG9tIHRpbWUgd2luZG93JywgKCkgPT4ge1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHRyYWRlcyA9IFtcbiAgICAgICAgY3JlYXRlVHJhZGUoJ0JUQ1VTRFQnLCA1MDAwMCwgMC4xLCBub3cgLSA2MDAwMDAsIGZhbHNlKSwgLy8gMTAgbWluIGFnb1xuICAgICAgICBjcmVhdGVUcmFkZSgnQlRDVVNEVCcsIDUwMTAwLCAwLjA1LCBub3cgLSA2MDAwMCwgdHJ1ZSkgICAvLyAxIG1pbiBhZ29cbiAgICAgIF07XG4gICAgICBcbiAgICAgIHRyYWRlcy5mb3JFYWNoKHRyYWRlID0+IGN2ZFZhbGlkYXRvci5yZWNvcmRUcmFkZSh0cmFkZSkpO1xuICAgICAgXG4gICAgICBjb25zdCBjdmQ1bWluID0gY3ZkVmFsaWRhdG9yLmdldEN1cnJlbnRDVkQoJ0JUQ1VTRFQnLCAzMDAwMDApOyAvLyA1IG1pbiB3aW5kb3dcbiAgICAgIGNvbnN0IGN2ZDE1bWluID0gY3ZkVmFsaWRhdG9yLmdldEN1cnJlbnRDVkQoJ0JUQ1VTRFQnLCA5MDAwMDApOyAvLyAxNSBtaW4gd2luZG93XG4gICAgICBcbiAgICAgIGV4cGVjdChjdmQ1bWluKS50b0JlQ2xvc2VUbygtMjUwNSwgMCk7IC8vIE9ubHkgcmVjZW50IHRyYWRlXG4gICAgICBleHBlY3QoY3ZkMTVtaW4pLnRvQmVDbG9zZVRvKDI0OTUsIDApOyAvLyBCb3RoIHRyYWRlc1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndXRpbGl0eSBtZXRob2RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2xlYXIgaGlzdG9yeSBmb3Igc3BlY2lmaWMgc3ltYm9sJywgKCkgPT4ge1xuICAgICAgY29uc3QgYnRjVHJhZGUgPSBjcmVhdGVUcmFkZSgnQlRDVVNEVCcsIDUwMDAwLCAwLjEsIERhdGUubm93KCksIGZhbHNlKTtcbiAgICAgIGNvbnN0IGV0aFRyYWRlID0gY3JlYXRlVHJhZGUoJ0VUSFVTRFQnLCAzMDAwLCAxLjAsIERhdGUubm93KCksIHRydWUpO1xuICAgICAgXG4gICAgICBjdmRWYWxpZGF0b3IucmVjb3JkVHJhZGUoYnRjVHJhZGUpO1xuICAgICAgY3ZkVmFsaWRhdG9yLnJlY29yZFRyYWRlKGV0aFRyYWRlKTtcbiAgICAgIFxuICAgICAgY3ZkVmFsaWRhdG9yLmNsZWFySGlzdG9yeSgnQlRDVVNEVCcpO1xuICAgICAgXG4gICAgICBleHBlY3QoY3ZkVmFsaWRhdG9yLmdldFRyYWRlSGlzdG9yeSgnQlRDVVNEVCcpKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICBleHBlY3QoY3ZkVmFsaWRhdG9yLmdldFRyYWRlSGlzdG9yeSgnRVRIVVNEVCcpKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgaGlzdG9yeSBzdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdHJhZGVzID0gW1xuICAgICAgICBjcmVhdGVUcmFkZSgnQlRDVVNEVCcsIDUwMDAwLCAwLjEsIERhdGUubm93KCksIGZhbHNlKSxcbiAgICAgICAgY3JlYXRlVHJhZGUoJ0JUQ1VTRFQnLCA1MDEwMCwgMC4wNSwgRGF0ZS5ub3coKSwgdHJ1ZSksXG4gICAgICAgIGNyZWF0ZVRyYWRlKCdFVEhVU0RUJywgMzAwMCwgMS4wLCBEYXRlLm5vdygpLCBmYWxzZSlcbiAgICAgIF07XG4gICAgICBcbiAgICAgIHRyYWRlcy5mb3JFYWNoKHRyYWRlID0+IGN2ZFZhbGlkYXRvci5yZWNvcmRUcmFkZSh0cmFkZSkpO1xuICAgICAgXG4gICAgICBjb25zdCBzdGF0cyA9IGN2ZFZhbGlkYXRvci5nZXRIaXN0b3J5U3RhdHMoKTtcbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbFN5bWJvbHMpLnRvQmUoMik7XG4gICAgICBleHBlY3Qoc3RhdHMudG90YWxUcmFkZXMpLnRvQmUoMyk7XG4gICAgICBleHBlY3Qoc3RhdHMubWVtb3J5VXNhZ2UpLnRvQ29udGFpbignS0InKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGhpc3RvcnkgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzID0gY3ZkVmFsaWRhdG9yLmdldEhpc3RvcnlTdGF0cygpO1xuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsU3ltYm9scykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbFRyYWRlcykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5tZW1vcnlVc2FnZSkudG9CZSgnMC4wIEtCJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdlZGdlIGNhc2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIHplcm8gcXVhbnRpdHkgdHJhZGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdHJhZGUgPSBjcmVhdGVUcmFkZSgnQlRDVVNEVCcsIDUwMDAwLCAwLCBEYXRlLm5vdygpLCBmYWxzZSk7XG4gICAgICBjdmRWYWxpZGF0b3IucmVjb3JkVHJhZGUodHJhZGUpO1xuICAgICAgXG4gICAgICBjb25zdCBjdmQgPSBjdmRWYWxpZGF0b3IuZ2V0Q3VycmVudENWRCgnQlRDVVNEVCcpO1xuICAgICAgZXhwZWN0KGN2ZCkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHZlcnkgc21hbGwgQ1ZEIHZhbHVlcyBpbiBkaXZlcmdlbmNlIGRldGVjdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHByaWNlcyA9IFsxMDAsIDk1LCA5MF07XG4gICAgICBjb25zdCBjdmRWYWx1ZXMgPSBbMC4wMDEsIDAuMDAwNSwgMC4wMDA4XTsgLy8gVmVyeSBzbWFsbCB2YWx1ZXNcbiAgICAgIFxuICAgICAgY29uc3QgYWJzb3JwdGlvbiA9IGN2ZFZhbGlkYXRvci5kZXRlY3RBYnNvcnB0aW9uKHByaWNlcywgY3ZkVmFsdWVzKTtcbiAgICAgIGV4cGVjdChhYnNvcnB0aW9uKS5ub3QudG9CZU51bGwoKTsgLy8gU2hvdWxkIHN0aWxsIGRldGVjdCBwYXR0ZXJuXG4gICAgICBleHBlY3QoYWJzb3JwdGlvbiEuY29uZmlkZW5jZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaWRlbnRpY2FsIHByaWNlIHZhbHVlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByaWNlcyA9IFsxMDAsIDEwMCwgMTAwXTtcbiAgICAgIGNvbnN0IGN2ZFZhbHVlcyA9IFstMTAwMCwgLTE1MDAsIC0xMjAwXTtcbiAgICAgIFxuICAgICAgY29uc3QgYWJzb3JwdGlvbiA9IGN2ZFZhbGlkYXRvci5kZXRlY3RBYnNvcnB0aW9uKHByaWNlcywgY3ZkVmFsdWVzKTtcbiAgICAgIGV4cGVjdChhYnNvcnB0aW9uKS50b0JlTnVsbCgpOyAvLyBObyBwcmljZSBtb3ZlbWVudCA9IG5vIHBhdHRlcm5cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGlkZW50aWNhbCBDVkQgdmFsdWVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJpY2VzID0gWzEwMCwgOTUsIDkwXTtcbiAgICAgIGNvbnN0IGN2ZFZhbHVlcyA9IFstMTAwMCwgLTEwMDAsIC0xMDAwXTtcbiAgICAgIFxuICAgICAgY29uc3QgYWJzb3JwdGlvbiA9IGN2ZFZhbGlkYXRvci5kZXRlY3RBYnNvcnB0aW9uKHByaWNlcywgY3ZkVmFsdWVzKTtcbiAgICAgIGV4cGVjdChhYnNvcnB0aW9uKS50b0JlTnVsbCgpOyAvLyBObyBDVkQgbW92ZW1lbnQgPSBubyBwYXR0ZXJuXG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9