{"file":"/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/unit/SessionProfiler.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/unit/SessionProfiler.test.ts"],"sourcesContent":["/**\n * Unit Tests for SessionProfiler\n * \n * Tests session identification, Asian range storage, Judas Swing detection,\n * killzone checking, and session transition events.\n * \n * Requirements: 2.1-2.7 (Session Profiler)\n */\n\nimport { SessionProfiler } from '../../src/engine/SessionProfiler';\nimport { SessionType, SessionState, AsianRange, JudasSwing, OHLCV } from '../../src/types/index';\n\ndescribe('SessionProfiler', () => {\n  let profiler: SessionProfiler;\n  let originalDate: DateConstructor;\n\n  beforeEach(() => {\n    profiler = new SessionProfiler();\n    originalDate = global.Date;\n  });\n\n  afterEach(() => {\n    global.Date = originalDate;\n  });\n\n  // Helper function to mock UTC time\n  const mockUTCTime = (hour: number, minute: number = 0) => {\n    const mockDate = new Date();\n    mockDate.getUTCHours = jest.fn().mockReturnValue(hour);\n    mockDate.getUTCMinutes = jest.fn().mockReturnValue(minute);\n    \n    // Create a mock Date constructor that handles both no-args and timestamp args\n    const MockDate = jest.fn((timestamp?: number) => {\n      if (timestamp !== undefined) {\n        // If timestamp is provided, use the original Date constructor\n        return new originalDate(timestamp);\n      }\n      // If no timestamp, return the mocked date for current time\n      return mockDate;\n    }) as any;\n    \n    // Preserve static methods\n    MockDate.now = originalDate.now;\n    MockDate.UTC = originalDate.UTC;\n    MockDate.parse = originalDate.parse;\n    \n    global.Date = MockDate;\n  };\n\n  // Helper function to create OHLCV data\n  const createOHLCV = (timestamp: number, high: number, low: number): OHLCV => ({\n    timestamp,\n    open: (high + low) / 2,\n    high,\n    low,\n    close: (high + low) / 2,\n    volume: 1000\n  });\n\n  describe('getSessionState', () => {\n    it('should identify Asian session (00:00-06:00 UTC)', () => {\n      mockUTCTime(3, 30); // 03:30 UTC\n\n      const sessionState = profiler.getSessionState();\n\n      expect(sessionState.type).toBe('ASIAN');\n      expect(sessionState.startTime).toBe(0);\n      expect(sessionState.endTime).toBe(6);\n      expect(sessionState.timeRemaining).toBe(2.5); // 6 - 3.5\n    });\n\n    it('should identify London session (07:00-10:00 UTC)', () => {\n      mockUTCTime(8, 15); // 08:15 UTC\n\n      const sessionState = profiler.getSessionState();\n\n      expect(sessionState.type).toBe('LONDON');\n      expect(sessionState.startTime).toBe(7);\n      expect(sessionState.endTime).toBe(10);\n      expect(sessionState.timeRemaining).toBe(1.75); // 10 - 8.25\n    });\n\n    it('should identify NY session (13:00-16:00 UTC)', () => {\n      mockUTCTime(14, 45); // 14:45 UTC\n\n      const sessionState = profiler.getSessionState();\n\n      expect(sessionState.type).toBe('NY');\n      expect(sessionState.startTime).toBe(13);\n      expect(sessionState.endTime).toBe(16);\n      expect(sessionState.timeRemaining).toBe(1.25); // 16 - 14.75\n    });\n\n    it('should identify Dead Zone (21:00-01:00 UTC)', () => {\n      mockUTCTime(23, 0); // 23:00 UTC\n\n      const sessionState = profiler.getSessionState();\n\n      expect(sessionState.type).toBe('DEAD_ZONE');\n      expect(sessionState.startTime).toBe(21);\n      expect(sessionState.endTime).toBe(1);\n      expect(sessionState.timeRemaining).toBe(2); // (24 - 23) + 1\n    });\n\n    it('should identify Dead Zone early morning (00:30 UTC)', () => {\n      mockUTCTime(0, 30); // 00:30 UTC (but not Asian session)\n      \n      // Mock to return DEAD_ZONE for this specific time\n      const sessionState = profiler.getSessionState();\n      \n      // At 00:30, it should be Asian session, not Dead Zone\n      expect(sessionState.type).toBe('ASIAN');\n    });\n\n    it('should handle Dead Zone early morning correctly', () => {\n      mockUTCTime(22, 30); // 22:30 UTC (Dead Zone)\n\n      const sessionState = profiler.getSessionState();\n\n      expect(sessionState.type).toBe('DEAD_ZONE');\n      expect(sessionState.timeRemaining).toBe(2.5); // (24 - 22.5) + 1\n    });\n  });\n\n  describe('storeAsianRange', () => {\n    it('should store Asian range from OHLCV data', () => {\n      const asianData: OHLCV[] = [\n        createOHLCV(new Date('2024-01-01T02:00:00Z').getTime(), 50100, 49900), // Asian session\n        createOHLCV(new Date('2024-01-01T04:00:00Z').getTime(), 50200, 49800), // Asian session\n        createOHLCV(new Date('2024-01-01T08:00:00Z').getTime(), 50300, 49700), // London session (should be ignored)\n      ];\n\n      profiler.storeAsianRange(asianData);\n\n      const asianRange = profiler.getAsianRange();\n      expect(asianRange).not.toBeNull();\n      expect(asianRange!.high).toBe(50200); // Highest during Asian session\n      expect(asianRange!.low).toBe(49800);  // Lowest during Asian session\n    });\n\n    it('should handle empty OHLCV data', () => {\n      profiler.storeAsianRange([]);\n\n      const asianRange = profiler.getAsianRange();\n      expect(asianRange).toBeNull();\n    });\n\n    it('should ignore non-Asian session data', () => {\n      const nonAsianData: OHLCV[] = [\n        createOHLCV(new Date('2024-01-01T08:00:00Z').getTime(), 50300, 49700), // London\n        createOHLCV(new Date('2024-01-01T14:00:00Z').getTime(), 50400, 49600), // NY\n      ];\n\n      profiler.storeAsianRange(nonAsianData);\n\n      const asianRange = profiler.getAsianRange();\n      expect(asianRange).toBeNull();\n    });\n  });\n\n  describe('detectJudasSwing', () => {\n    beforeEach(() => {\n      // Set up Asian range for testing\n      const asianData: OHLCV[] = [\n        createOHLCV(new Date('2024-01-01T02:00:00Z').getTime(), 50100, 49900),\n      ];\n      profiler.storeAsianRange(asianData);\n    });\n\n    it('should detect Asian High sweep during London session', () => {\n      const currentPrice = 50150; // Above Asian High (50100)\n      \n      const judasSwing = profiler.detectJudasSwing(currentPrice, 'LONDON');\n\n      expect(judasSwing).not.toBeNull();\n      expect(judasSwing!.type).toBe('SWEEP_HIGH');\n      expect(judasSwing!.sweptPrice).toBe(50100);\n      expect(judasSwing!.reversalPrice).toBe(49900);\n      expect(judasSwing!.direction).toBe('SHORT');\n      expect(judasSwing!.confidence).toBe(75);\n    });\n\n    it('should detect Asian Low sweep during London session', () => {\n      const currentPrice = 49850; // Below Asian Low (49900)\n      \n      const judasSwing = profiler.detectJudasSwing(currentPrice, 'LONDON');\n\n      expect(judasSwing).not.toBeNull();\n      expect(judasSwing!.type).toBe('SWEEP_LOW');\n      expect(judasSwing!.sweptPrice).toBe(49900);\n      expect(judasSwing!.reversalPrice).toBe(50100);\n      expect(judasSwing!.direction).toBe('LONG');\n      expect(judasSwing!.confidence).toBe(75);\n    });\n\n    it('should not detect Judas Swing when price is within Asian range', () => {\n      const currentPrice = 50000; // Within Asian range\n      \n      const judasSwing = profiler.detectJudasSwing(currentPrice, 'LONDON');\n\n      expect(judasSwing).toBeNull();\n    });\n\n    it('should not detect Judas Swing during Asian session', () => {\n      const currentPrice = 50150; // Above Asian High\n      \n      const judasSwing = profiler.detectJudasSwing(currentPrice, 'ASIAN');\n\n      expect(judasSwing).toBeNull();\n    });\n\n    it('should detect London range sweep during NY session', () => {\n      // Set up London range\n      const londonData: OHLCV[] = [\n        createOHLCV(new Date('2024-01-01T08:00:00Z').getTime(), 50300, 49700),\n      ];\n      profiler.updateLondonRange(londonData);\n\n      const currentPrice = 50350; // Above London High\n      \n      const judasSwing = profiler.detectJudasSwing(currentPrice, 'NY');\n\n      expect(judasSwing).not.toBeNull();\n      expect(judasSwing!.type).toBe('SWEEP_HIGH');\n      expect(judasSwing!.sweptPrice).toBe(50300);\n      expect(judasSwing!.direction).toBe('SHORT');\n      expect(judasSwing!.confidence).toBe(80); // Higher confidence for NY\n    });\n  });\n\n  describe('isKillzone', () => {\n    it('should return true during London session', () => {\n      mockUTCTime(8, 30); // London session\n\n      const isKillzone = profiler.isKillzone();\n\n      expect(isKillzone).toBe(true);\n    });\n\n    it('should return true during NY session', () => {\n      mockUTCTime(14, 30); // NY session\n\n      const isKillzone = profiler.isKillzone();\n\n      expect(isKillzone).toBe(true);\n    });\n\n    it('should return false during Asian session', () => {\n      mockUTCTime(3, 30); // Asian session\n\n      const isKillzone = profiler.isKillzone();\n\n      expect(isKillzone).toBe(false);\n    });\n\n    it('should return false during Dead Zone', () => {\n      mockUTCTime(22, 30); // Dead Zone\n\n      const isKillzone = profiler.isKillzone();\n\n      expect(isKillzone).toBe(false);\n    });\n  });\n\n  describe('shouldDisableNewEntries', () => {\n    it('should return true during Dead Zone', () => {\n      mockUTCTime(22, 30); // Dead Zone\n\n      const shouldDisable = profiler.shouldDisableNewEntries();\n\n      expect(shouldDisable).toBe(true);\n    });\n\n    it('should return false during killzones', () => {\n      mockUTCTime(8, 30); // London session\n\n      const shouldDisable = profiler.shouldDisableNewEntries();\n\n      expect(shouldDisable).toBe(false);\n    });\n  });\n\n  describe('updateLondonRange', () => {\n    it('should store London range from OHLCV data', () => {\n      const londonData: OHLCV[] = [\n        createOHLCV(new Date('2024-01-01T08:00:00Z').getTime(), 50300, 49700), // London session\n        createOHLCV(new Date('2024-01-01T09:00:00Z').getTime(), 50250, 49750), // London session\n        createOHLCV(new Date('2024-01-01T14:00:00Z').getTime(), 50400, 49600), // NY session (should be ignored)\n      ];\n\n      profiler.updateLondonRange(londonData);\n\n      const londonRange = profiler.getLondonRange();\n      expect(londonRange).not.toBeNull();\n      expect(londonRange!.high).toBe(50300); // Highest during London session\n      expect(londonRange!.low).toBe(49700);  // Lowest during London session\n    });\n\n    it('should ignore non-London session data', () => {\n      const nonLondonData: OHLCV[] = [\n        createOHLCV(new Date('2024-01-01T02:00:00Z').getTime(), 50100, 49900), // Asian\n        createOHLCV(new Date('2024-01-01T14:00:00Z').getTime(), 50400, 49600), // NY\n      ];\n\n      profiler.updateLondonRange(nonLondonData);\n\n      const londonRange = profiler.getLondonRange();\n      expect(londonRange).toBeNull();\n    });\n  });\n\n  describe('session transition events', () => {\n    it('should emit SESSION_CHANGE event on session transition', (done) => {\n      mockUTCTime(8, 0); // London session\n      \n      // First call to establish current session\n      profiler.getSessionState();\n\n      // Set up event listener\n      profiler.once('SESSION_CHANGE', (event) => {\n        expect(event.previousSession).toBe('LONDON');\n        expect(event.newSession).toBe('NY');\n        expect(event.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      // Change to NY session\n      mockUTCTime(14, 0);\n      profiler.getSessionState();\n    });\n\n    it('should emit LONDON_OPEN event when transitioning to London', (done) => {\n      mockUTCTime(5, 0); // Asian session\n      profiler.getSessionState();\n\n      profiler.once('LONDON_OPEN', (event) => {\n        expect(event.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      // Transition to London\n      mockUTCTime(8, 0);\n      profiler.getSessionState();\n    });\n\n    it('should emit NY_OPEN event when transitioning to NY', (done) => {\n      mockUTCTime(8, 0); // London session\n      profiler.getSessionState();\n\n      profiler.once('NY_OPEN', (event) => {\n        expect(event.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      // Transition to NY\n      mockUTCTime(14, 0);\n      profiler.getSessionState();\n    });\n\n    it('should emit DEAD_ZONE_START event when transitioning to Dead Zone', (done) => {\n      mockUTCTime(15, 0); // NY session\n      profiler.getSessionState();\n\n      profiler.once('DEAD_ZONE_START', (event) => {\n        expect(event.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      // Transition to Dead Zone\n      mockUTCTime(22, 0);\n      profiler.getSessionState();\n    });\n  });\n\n  describe('getSessionStats', () => {\n    it('should return comprehensive session statistics', () => {\n      mockUTCTime(8, 30); // London session\n      \n      // Set up ranges - use the original Date to create proper UTC timestamps\n      const timestamp2AM = originalDate.UTC(2024, 0, 1, 2, 0, 0); // January 1, 2024, 2:00 AM UTC\n      const asianData: OHLCV[] = [\n        createOHLCV(timestamp2AM, 50100, 49900),\n      ];\n      \n      // Debug the Asian data\n      expect(new originalDate(asianData[0].timestamp).getUTCHours()).toBe(2);\n      \n      profiler.storeAsianRange(asianData);\n      \n      const asianRangeAfterStore = profiler.getAsianRange();\n      \n      // This should not be null if storeAsianRange worked\n      expect(asianRangeAfterStore).not.toBeNull();\n      \n      const timestamp8AM = originalDate.UTC(2024, 0, 1, 8, 0, 0); // January 1, 2024, 8:00 AM UTC\n      const londonData: OHLCV[] = [\n        createOHLCV(timestamp8AM, 50300, 49700),\n      ];\n      profiler.updateLondonRange(londonData);\n\n      const stats = profiler.getSessionStats();\n\n      expect(stats.currentSession).toBe('LONDON');\n      expect(stats.timeRemaining).toBe(1.5); // 10 - 8.5\n      expect(stats.asianRange).toEqual({\n        high: 50100,\n        low: 49900,\n        timestamp: expect.any(Number)\n      });\n      expect(stats.londonRange).toEqual({\n        high: 50300,\n        low: 49700,\n        timestamp: expect.any(Number)\n      });\n      expect(stats.isKillzone).toBe(true);\n    });\n  });\n\n  describe('edge cases', () => {\n    it('should handle session boundary correctly (exactly 06:00 UTC)', () => {\n      mockUTCTime(6, 0); // Exactly 06:00 UTC\n\n      const sessionState = profiler.getSessionState();\n\n      // At exactly 06:00, it should not be Asian session anymore\n      expect(sessionState.type).not.toBe('ASIAN');\n    });\n\n    it('should handle session boundary correctly (exactly 07:00 UTC)', () => {\n      mockUTCTime(7, 0); // Exactly 07:00 UTC\n\n      const sessionState = profiler.getSessionState();\n\n      expect(sessionState.type).toBe('LONDON');\n      expect(sessionState.timeRemaining).toBe(3); // 10 - 7\n    });\n\n    it('should handle midnight transition correctly', () => {\n      mockUTCTime(0, 30); // 00:30 UTC\n\n      const sessionState = profiler.getSessionState();\n\n      expect(sessionState.type).toBe('ASIAN');\n      expect(sessionState.timeRemaining).toBe(5.5); // 6 - 0.5\n    });\n\n    it('should not emit duplicate session change events', () => {\n      mockUTCTime(8, 0); // London session\n      \n      let eventCount = 0;\n      profiler.on('SESSION_CHANGE', () => {\n        eventCount++;\n      });\n\n      // Multiple calls to same session should not emit multiple events\n      profiler.getSessionState();\n      profiler.getSessionState();\n      profiler.getSessionState();\n\n      expect(eventCount).toBe(0); // No events since no transition occurred\n    });\n  });\n});"],"version":3}