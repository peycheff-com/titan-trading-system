f37073a11645d3ad8044ed3b8208c069
"use strict";
/**
 * Unit tests for ConfigManager
 * Tests configuration loading, saving, validation, and hot-reload functionality
 */
Object.defineProperty(exports, "__esModule", { value: true });
const ConfigManager_1 = require("../../src/config/ConfigManager");
const fs_1 = require("fs");
const path_1 = require("path");
describe('ConfigManager', () => {
    const testConfigDir = (0, path_1.join)(__dirname, 'test-config');
    const testConfigPath = (0, path_1.join)(testConfigDir, 'phase2.config.json');
    let configManager;
    beforeEach(() => {
        // Create test config directory
        if (!(0, fs_1.existsSync)(testConfigDir)) {
            (0, fs_1.mkdirSync)(testConfigDir, { recursive: true });
        }
        // Clean up any existing config file
        if ((0, fs_1.existsSync)(testConfigPath)) {
            (0, fs_1.unlinkSync)(testConfigPath);
        }
        configManager = new ConfigManager_1.ConfigManager(testConfigDir);
    });
    afterEach(() => {
        // Cleanup
        if (configManager) {
            configManager.destroy();
        }
        // Remove test config directory
        if ((0, fs_1.existsSync)(testConfigDir)) {
            (0, fs_1.rmSync)(testConfigDir, { recursive: true, force: true });
        }
    });
    describe('Configuration Loading', () => {
        it('should create default configuration when no file exists', () => {
            const config = configManager.getConfig();
            expect(config.alignmentWeights.daily).toBe(50);
            expect(config.alignmentWeights.h4).toBe(30);
            expect(config.alignmentWeights.m15).toBe(20);
            expect(config.rsConfig.threshold).toBe(2);
            expect(config.rsConfig.lookbackPeriod).toBe(4);
            expect(config.riskConfig.maxLeverage).toBe(5);
            expect(config.riskConfig.stopLossPercent).toBe(1.5);
            expect(config.riskConfig.targetPercent).toBe(4.5);
            expect(config.portfolioConfig.maxConcurrentPositions).toBe(5);
            expect(config.portfolioConfig.maxPortfolioHeat).toBe(15);
            expect(config.portfolioConfig.correlationThreshold).toBe(0.7);
        });
        it('should load valid configuration from file', () => {
            const testConfig = {
                alignmentWeights: { daily: 40, h4: 35, m15: 25 },
                rsConfig: { threshold: 3, lookbackPeriod: 6 },
                riskConfig: { maxLeverage: 4, stopLossPercent: 2, targetPercent: 5 },
                portfolioConfig: { maxConcurrentPositions: 6, maxPortfolioHeat: 18, correlationThreshold: 0.8 },
                version: 1,
                lastModified: Date.now()
            };
            (0, fs_1.writeFileSync)(testConfigPath, JSON.stringify(testConfig, null, 2));
            const newConfigManager = new ConfigManager_1.ConfigManager(testConfigDir);
            const loadedConfig = newConfigManager.getConfig();
            expect(loadedConfig.alignmentWeights.daily).toBe(40);
            expect(loadedConfig.alignmentWeights.h4).toBe(35);
            expect(loadedConfig.alignmentWeights.m15).toBe(25);
            expect(loadedConfig.rsConfig.threshold).toBe(3);
            expect(loadedConfig.rsConfig.lookbackPeriod).toBe(6);
            newConfigManager.destroy();
        });
        it('should load defaults when configuration file is corrupted', () => {
            // Write invalid JSON
            (0, fs_1.writeFileSync)(testConfigPath, 'invalid json content');
            const newConfigManager = new ConfigManager_1.ConfigManager(testConfigDir);
            const config = newConfigManager.getConfig();
            // Should load defaults
            expect(config.alignmentWeights.daily).toBe(50);
            expect(config.alignmentWeights.h4).toBe(30);
            expect(config.alignmentWeights.m15).toBe(20);
            newConfigManager.destroy();
        });
    });
    describe('Configuration Validation', () => {
        it('should reject invalid alignment weights', () => {
            expect(() => {
                configManager.updateAlignmentWeights({ daily: 70 }); // > 60%
            }).toThrow('Daily weight must be 30-60%');
            expect(() => {
                configManager.updateAlignmentWeights({ h4: 50 }); // > 40%
            }).toThrow('4H weight must be 20-40%');
            expect(() => {
                configManager.updateAlignmentWeights({ m15: 35 }); // > 30%
            }).toThrow('15m weight must be 10-30%');
        });
        it('should reject alignment weights that do not sum to 100%', () => {
            expect(() => {
                configManager.updateAlignmentWeights({ daily: 30, h4: 30, m15: 30 }); // Sum = 90%
            }).toThrow('Alignment weights must sum to 100%');
        });
        it('should reject invalid RS configuration', () => {
            expect(() => {
                configManager.updateRSConfig({ threshold: 6 }); // > 5%
            }).toThrow('RS threshold must be 0-5%');
            expect(() => {
                configManager.updateRSConfig({ lookbackPeriod: 10 }); // > 8 hours
            }).toThrow('RS lookback period must be 2-8 hours');
        });
        it('should reject invalid risk configuration', () => {
            expect(() => {
                configManager.updateRiskConfig({ maxLeverage: 6 }); // > 5x
            }).toThrow('Max leverage must be 3-5x');
            expect(() => {
                configManager.updateRiskConfig({ stopLossPercent: 4 }); // > 3%
            }).toThrow('Stop loss must be 1-3%');
            expect(() => {
                configManager.updateRiskConfig({ targetPercent: 7 }); // > 6%
            }).toThrow('Target must be 3-6%');
        });
        it('should reject invalid portfolio configuration', () => {
            expect(() => {
                configManager.updatePortfolioConfig({ maxConcurrentPositions: 10 }); // > 8
            }).toThrow('Max concurrent positions must be 3-8');
            expect(() => {
                configManager.updatePortfolioConfig({ maxPortfolioHeat: 25 }); // > 20%
            }).toThrow('Max portfolio heat must be 10-20%');
            expect(() => {
                configManager.updatePortfolioConfig({ correlationThreshold: 1.0 }); // > 0.9
            }).toThrow('Correlation threshold must be 0.6-0.9');
        });
    });
    describe('Configuration Updates', () => {
        it('should update alignment weights correctly', () => {
            configManager.updateAlignmentWeights({ daily: 45, h4: 35, m15: 20 });
            const config = configManager.getConfig();
            expect(config.alignmentWeights.daily).toBe(45);
            expect(config.alignmentWeights.h4).toBe(35);
            expect(config.alignmentWeights.m15).toBe(20);
        });
        it('should update RS configuration correctly', () => {
            configManager.updateRSConfig({ threshold: 3.5, lookbackPeriod: 6 });
            const config = configManager.getConfig();
            expect(config.rsConfig.threshold).toBe(3.5);
            expect(config.rsConfig.lookbackPeriod).toBe(6);
        });
        it('should update risk configuration correctly', () => {
            configManager.updateRiskConfig({ maxLeverage: 4, stopLossPercent: 2, targetPercent: 5 });
            const config = configManager.getConfig();
            expect(config.riskConfig.maxLeverage).toBe(4);
            expect(config.riskConfig.stopLossPercent).toBe(2);
            expect(config.riskConfig.targetPercent).toBe(5);
        });
        it('should update portfolio configuration correctly', () => {
            configManager.updatePortfolioConfig({
                maxConcurrentPositions: 7,
                maxPortfolioHeat: 18,
                correlationThreshold: 0.8
            });
            const config = configManager.getConfig();
            expect(config.portfolioConfig.maxConcurrentPositions).toBe(7);
            expect(config.portfolioConfig.maxPortfolioHeat).toBe(18);
            expect(config.portfolioConfig.correlationThreshold).toBe(0.8);
        });
        it('should emit configChanged event on updates', (done) => {
            configManager.on('configChanged', (event) => {
                expect(event.section).toBe('all');
                expect(event.newValue.alignmentWeights.daily).toBe(45);
                done();
            });
            configManager.updateAlignmentWeights({ daily: 45, h4: 35, m15: 20 });
        });
        it('should increment version on save', () => {
            const initialVersion = configManager.getConfig().version;
            configManager.updateAlignmentWeights({ daily: 45, h4: 35, m15: 20 });
            const newVersion = configManager.getConfig().version;
            expect(newVersion).toBe(initialVersion + 1);
        });
    });
    describe('Hot Reload', () => {
        it('should start and stop watching', () => {
            expect(() => {
                configManager.startWatching();
                configManager.stopWatching();
            }).not.toThrow();
        });
        it('should not start watching twice', () => {
            configManager.startWatching();
            configManager.startWatching(); // Should not throw
            configManager.stopWatching();
        });
    });
    describe('Utility Methods', () => {
        it('should reset to defaults', () => {
            // Change some values
            configManager.updateAlignmentWeights({ daily: 45, h4: 35, m15: 20 });
            // Reset to defaults
            configManager.resetToDefaults();
            const config = configManager.getConfig();
            expect(config.alignmentWeights.daily).toBe(50);
            expect(config.alignmentWeights.h4).toBe(30);
            expect(config.alignmentWeights.m15).toBe(20);
        });
        it('should generate configuration summary', () => {
            const summary = configManager.getConfigSummary();
            expect(summary).toContain('Alignment: Daily 50%, 4H 30%, 15m 20%');
            expect(summary).toContain('RS: Threshold 2%, Lookback 4h');
            expect(summary).toContain('Risk: Leverage 5x, Stop 1.5%, Target 4.5%');
            expect(summary).toContain('Portfolio: Max 5 positions, Heat 15%, Correlation 0.7');
        });
        it('should cleanup resources on destroy', () => {
            configManager.startWatching();
            expect(() => {
                configManager.destroy();
            }).not.toThrow();
        });
    });
    describe('Edge Cases', () => {
        it('should handle partial updates', () => {
            // Update all weights to ensure they sum to 100%
            configManager.updateAlignmentWeights({ daily: 45, h4: 35, m15: 20 });
            const config = configManager.getConfig();
            expect(config.alignmentWeights.daily).toBe(45);
            expect(config.alignmentWeights.h4).toBe(35);
            expect(config.alignmentWeights.m15).toBe(20);
        });
        it('should handle missing config directory', () => {
            const nonExistentDir = (0, path_1.join)(__dirname, 'non-existent');
            expect(() => {
                new ConfigManager_1.ConfigManager(nonExistentDir);
            }).not.toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvdGVzdHMvdW5pdC9Db25maWdNYW5hZ2VyLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCxrRUFBc0k7QUFDdEksMkJBQThFO0FBQzlFLCtCQUE0QjtBQUU1QixRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtJQUM3QixNQUFNLGFBQWEsR0FBRyxJQUFBLFdBQUksRUFBQyxTQUFTLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFDckQsTUFBTSxjQUFjLEdBQUcsSUFBQSxXQUFJLEVBQUMsYUFBYSxFQUFFLG9CQUFvQixDQUFDLENBQUM7SUFDakUsSUFBSSxhQUE0QixDQUFDO0lBRWpDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCwrQkFBK0I7UUFDL0IsSUFBSSxDQUFDLElBQUEsZUFBVSxFQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUM7WUFDL0IsSUFBQSxjQUFTLEVBQUMsYUFBYSxFQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFDaEQsQ0FBQztRQUVELG9DQUFvQztRQUNwQyxJQUFJLElBQUEsZUFBVSxFQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUM7WUFDL0IsSUFBQSxlQUFVLEVBQUMsY0FBYyxDQUFDLENBQUM7UUFDN0IsQ0FBQztRQUVELGFBQWEsR0FBRyxJQUFJLDZCQUFhLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDbkQsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsVUFBVTtRQUNWLElBQUksYUFBYSxFQUFFLENBQUM7WUFDbEIsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzFCLENBQUM7UUFFRCwrQkFBK0I7UUFDL0IsSUFBSSxJQUFBLGVBQVUsRUFBQyxhQUFhLENBQUMsRUFBRSxDQUFDO1lBQzlCLElBQUEsV0FBTSxFQUFDLGFBQWEsRUFBRSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVB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RyxhQUFhLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDL0MsTUFBTSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDNUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDL0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsd0NBQXdDLEVBQUUsR0FBRyxFQUFFO1lBQ2hELE1BQU0sY0FBYyxHQUFHLElBQUEsV0FBSSxFQUFDLFNBQVMsRUFBRSxjQUFjLENBQUMsQ0FBQztZQUV2RCxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUNWLElBQUksNkJBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNwQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDbkIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9pdmFuL0NvZGUvdHJhZGluZy90aXRhbi9zZXJ2aWNlcy90aXRhbi1waGFzZTItaHVudGVyL3Rlc3RzL3VuaXQvQ29uZmlnTWFuYWdlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCB0ZXN0cyBmb3IgQ29uZmlnTWFuYWdlclxuICogVGVzdHMgY29uZmlndXJhdGlvbiBsb2FkaW5nLCBzYXZpbmcsIHZhbGlkYXRpb24sIGFuZCBob3QtcmVsb2FkIGZ1bmN0aW9uYWxpdHlcbiAqL1xuXG5pbXBvcnQgeyBDb25maWdNYW5hZ2VyLCBQaGFzZTJDb25maWcsIEFsaWdubWVudFdlaWdodHMsIFJTQ29uZmlnLCBSaXNrQ29uZmlnLCBQb3J0Zm9saW9Db25maWcgfSBmcm9tICcuLi8uLi9zcmMvY29uZmlnL0NvbmZpZ01hbmFnZXInO1xuaW1wb3J0IHsgd3JpdGVGaWxlU3luYywgdW5saW5rU3luYywgZXhpc3RzU3luYywgbWtkaXJTeW5jLCBybVN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5cbmRlc2NyaWJlKCdDb25maWdNYW5hZ2VyJywgKCkgPT4ge1xuICBjb25zdCB0ZXN0Q29uZmlnRGlyID0gam9pbihfX2Rpcm5hbWUsICd0ZXN0LWNvbmZpZycpO1xuICBjb25zdCB0ZXN0Q29uZmlnUGF0aCA9IGpvaW4odGVzdENvbmZpZ0RpciwgJ3BoYXNlMi5jb25maWcuanNvbicpO1xuICBsZXQgY29uZmlnTWFuYWdlcjogQ29uZmlnTWFuYWdlcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBDcmVhdGUgdGVzdCBjb25maWcgZGlyZWN0b3J5XG4gICAgaWYgKCFleGlzdHNTeW5jKHRlc3RDb25maWdEaXIpKSB7XG4gICAgICBta2RpclN5bmModGVzdENvbmZpZ0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2xlYW4gdXAgYW55IGV4aXN0aW5nIGNvbmZpZyBmaWxlXG4gICAgaWYgKGV4aXN0c1N5bmModGVzdENvbmZpZ1BhdGgpKSB7XG4gICAgICB1bmxpbmtTeW5jKHRlc3RDb25maWdQYXRoKTtcbiAgICB9XG5cbiAgICBjb25maWdNYW5hZ2VyID0gbmV3IENvbmZpZ01hbmFnZXIodGVzdENvbmZpZ0Rpcik7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYW51cFxuICAgIGlmIChjb25maWdNYW5hZ2VyKSB7XG4gICAgICBjb25maWdNYW5hZ2VyLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgdGVzdCBjb25maWcgZGlyZWN0b3J5XG4gICAgaWYgKGV4aXN0c1N5bmModGVzdENvbmZpZ0RpcikpIHtcbiAgICAgIHJtU3luYyh0ZXN0Q29uZmlnRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSk7XG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgnQ29uZmlndXJhdGlvbiBMb2FkaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIGRlZmF1bHQgY29uZmlndXJhdGlvbiB3aGVuIG5vIGZpbGUgZXhpc3RzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0gY29uZmlnTWFuYWdlci5nZXRDb25maWcoKTtcblxuICAgICAgZXhwZWN0KGNvbmZpZy5hbGlnbm1lbnRXZWlnaHRzLmRhaWx5KS50b0JlKDUwKTtcbiAgICAgIGV4cGVjdChjb25maWcuYWxpZ25tZW50V2VpZ2h0cy5oNCkudG9CZSgzMCk7XG4gICAgICBleHBlY3QoY29uZmlnLmFsaWdubWVudFdlaWdodHMubTE1KS50b0JlKDIwKTtcbiAgICAgIGV4cGVjdChjb25maWcucnNDb25maWcudGhyZXNob2xkKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5yc0NvbmZpZy5sb29rYmFja1BlcmlvZCkudG9CZSg0KTtcbiAgICAgIGV4cGVjdChjb25maWcucmlza0NvbmZpZy5tYXhMZXZlcmFnZSkudG9CZSg1KTtcbiAgICAgIGV4cGVjdChjb25maWcucmlza0NvbmZpZy5zdG9wTG9zc1BlcmNlbnQpLnRvQmUoMS41KTtcbiAgICAgIGV4cGVjdChjb25maWcucmlza0NvbmZpZy50YXJnZXRQZXJjZW50KS50b0JlKDQuNSk7XG4gICAgICBleHBlY3QoY29uZmlnLnBvcnRmb2xpb0NvbmZpZy5tYXhDb25jdXJyZW50UG9zaXRpb25zKS50b0JlKDUpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5wb3J0Zm9saW9Db25maWcubWF4UG9ydGZvbGlvSGVhdCkudG9CZSgxNSk7XG4gICAgICBleHBlY3QoY29uZmlnLnBvcnRmb2xpb0NvbmZpZy5jb3JyZWxhdGlvblRocmVzaG9sZCkudG9CZSgwLjcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2FkIHZhbGlkIGNvbmZpZ3VyYXRpb24gZnJvbSBmaWxlJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdENvbmZpZzogUGhhc2UyQ29uZmlnID0ge1xuICAgICAgICBhbGlnbm1lbnRXZWlnaHRzOiB7IGRhaWx5OiA0MCwgaDQ6IDM1LCBtMTU6IDI1IH0sXG4gICAgICAgIHJzQ29uZmlnOiB7IHRocmVzaG9sZDogMywgbG9va2JhY2tQZXJpb2Q6IDYgfSxcbiAgICAgICAgcmlza0NvbmZpZzogeyBtYXhMZXZlcmFnZTogNCwgc3RvcExvc3NQZXJjZW50OiAyLCB0YXJnZXRQZXJjZW50OiA1IH0sXG4gICAgICAgIHBvcnRmb2xpb0NvbmZpZzogeyBtYXhDb25jdXJyZW50UG9zaXRpb25zOiA2LCBtYXhQb3J0Zm9saW9IZWF0OiAxOCwgY29ycmVsYXRpb25UaHJlc2hvbGQ6IDAuOCB9LFxuICAgICAgICB2ZXJzaW9uOiAxLFxuICAgICAgICBsYXN0TW9kaWZpZWQ6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIHdyaXRlRmlsZVN5bmModGVzdENvbmZpZ1BhdGgsIEpTT04uc3RyaW5naWZ5KHRlc3RDb25maWcsIG51bGwsIDIpKTtcbiAgICAgIFxuICAgICAgY29uc3QgbmV3Q29uZmlnTWFuYWdlciA9IG5ldyBDb25maWdNYW5hZ2VyKHRlc3RDb25maWdEaXIpO1xuICAgICAgY29uc3QgbG9hZGVkQ29uZmlnID0gbmV3Q29uZmlnTWFuYWdlci5nZXRDb25maWcoKTtcblxuICAgICAgZXhwZWN0KGxvYWRlZENvbmZpZy5hbGlnbm1lbnRXZWlnaHRzLmRhaWx5KS50b0JlKDQwKTtcbiAgICAgIGV4cGVjdChsb2FkZWRDb25maWcuYWxpZ25tZW50V2VpZ2h0cy5oNCkudG9CZSgzNSk7XG4gICAgICBleHBlY3QobG9hZGVkQ29uZmlnLmFsaWdubWVudFdlaWdodHMubTE1KS50b0JlKDI1KTtcbiAgICAgIGV4cGVjdChsb2FkZWRDb25maWcucnNDb25maWcudGhyZXNob2xkKS50b0JlKDMpO1xuICAgICAgZXhwZWN0KGxvYWRlZENvbmZpZy5yc0NvbmZpZy5sb29rYmFja1BlcmlvZCkudG9CZSg2KTtcblxuICAgICAgbmV3Q29uZmlnTWFuYWdlci5kZXN0cm95KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvYWQgZGVmYXVsdHMgd2hlbiBjb25maWd1cmF0aW9uIGZpbGUgaXMgY29ycnVwdGVkJywgKCkgPT4ge1xuICAgICAgLy8gV3JpdGUgaW52YWxpZCBKU09OXG4gICAgICB3cml0ZUZpbGVTeW5jKHRlc3RDb25maWdQYXRoLCAnaW52YWxpZCBqc29uIGNvbnRlbnQnKTtcbiAgICAgIFxuICAgICAgY29uc3QgbmV3Q29uZmlnTWFuYWdlciA9IG5ldyBDb25maWdNYW5hZ2VyKHRlc3RDb25maWdEaXIpO1xuICAgICAgY29uc3QgY29uZmlnID0gbmV3Q29uZmlnTWFuYWdlci5nZXRDb25maWcoKTtcblxuICAgICAgLy8gU2hvdWxkIGxvYWQgZGVmYXVsdHNcbiAgICAgIGV4cGVjdChjb25maWcuYWxpZ25tZW50V2VpZ2h0cy5kYWlseSkudG9CZSg1MCk7XG4gICAgICBleHBlY3QoY29uZmlnLmFsaWdubWVudFdlaWdodHMuaDQpLnRvQmUoMzApO1xuICAgICAgZXhwZWN0KGNvbmZpZy5hbGlnbm1lbnRXZWlnaHRzLm0xNSkudG9CZSgyMCk7XG5cbiAgICAgIG5ld0NvbmZpZ01hbmFnZXIuZGVzdHJveSgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29uZmlndXJhdGlvbiBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgYWxpZ25tZW50IHdlaWdodHMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZUFsaWdubWVudFdlaWdodHMoeyBkYWlseTogNzAgfSk7IC8vID4gNjAlXG4gICAgICB9KS50b1Rocm93KCdEYWlseSB3ZWlnaHQgbXVzdCBiZSAzMC02MCUnKTtcblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVBbGlnbm1lbnRXZWlnaHRzKHsgaDQ6IDUwIH0pOyAvLyA+IDQwJVxuICAgICAgfSkudG9UaHJvdygnNEggd2VpZ2h0IG11c3QgYmUgMjAtNDAlJyk7XG5cbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlQWxpZ25tZW50V2VpZ2h0cyh7IG0xNTogMzUgfSk7IC8vID4gMzAlXG4gICAgICB9KS50b1Rocm93KCcxNW0gd2VpZ2h0IG11c3QgYmUgMTAtMzAlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBhbGlnbm1lbnQgd2VpZ2h0cyB0aGF0IGRvIG5vdCBzdW0gdG8gMTAwJScsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlQWxpZ25tZW50V2VpZ2h0cyh7IGRhaWx5OiAzMCwgaDQ6IDMwLCBtMTU6IDMwIH0pOyAvLyBTdW0gPSA5MCVcbiAgICAgIH0pLnRvVGhyb3coJ0FsaWdubWVudCB3ZWlnaHRzIG11c3Qgc3VtIHRvIDEwMCUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgUlMgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlUlNDb25maWcoeyB0aHJlc2hvbGQ6IDYgfSk7IC8vID4gNSVcbiAgICAgIH0pLnRvVGhyb3coJ1JTIHRocmVzaG9sZCBtdXN0IGJlIDAtNSUnKTtcblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVSU0NvbmZpZyh7IGxvb2tiYWNrUGVyaW9kOiAxMCB9KTsgLy8gPiA4IGhvdXJzXG4gICAgICB9KS50b1Rocm93KCdSUyBsb29rYmFjayBwZXJpb2QgbXVzdCBiZSAyLTggaG91cnMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgcmlzayBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVSaXNrQ29uZmlnKHsgbWF4TGV2ZXJhZ2U6IDYgfSk7IC8vID4gNXhcbiAgICAgIH0pLnRvVGhyb3coJ01heCBsZXZlcmFnZSBtdXN0IGJlIDMtNXgnKTtcblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVSaXNrQ29uZmlnKHsgc3RvcExvc3NQZXJjZW50OiA0IH0pOyAvLyA+IDMlXG4gICAgICB9KS50b1Rocm93KCdTdG9wIGxvc3MgbXVzdCBiZSAxLTMlJyk7XG5cbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlUmlza0NvbmZpZyh7IHRhcmdldFBlcmNlbnQ6IDcgfSk7IC8vID4gNiVcbiAgICAgIH0pLnRvVGhyb3coJ1RhcmdldCBtdXN0IGJlIDMtNiUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgcG9ydGZvbGlvIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZVBvcnRmb2xpb0NvbmZpZyh7IG1heENvbmN1cnJlbnRQb3NpdGlvbnM6IDEwIH0pOyAvLyA+IDhcbiAgICAgIH0pLnRvVGhyb3coJ01heCBjb25jdXJyZW50IHBvc2l0aW9ucyBtdXN0IGJlIDMtOCcpO1xuXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZVBvcnRmb2xpb0NvbmZpZyh7IG1heFBvcnRmb2xpb0hlYXQ6IDI1IH0pOyAvLyA+IDIwJVxuICAgICAgfSkudG9UaHJvdygnTWF4IHBvcnRmb2xpbyBoZWF0IG11c3QgYmUgMTAtMjAlJyk7XG5cbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlUG9ydGZvbGlvQ29uZmlnKHsgY29ycmVsYXRpb25UaHJlc2hvbGQ6IDEuMCB9KTsgLy8gPiAwLjlcbiAgICAgIH0pLnRvVGhyb3coJ0NvcnJlbGF0aW9uIHRocmVzaG9sZCBtdXN0IGJlIDAuNi0wLjknKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbmZpZ3VyYXRpb24gVXBkYXRlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBhbGlnbm1lbnQgd2VpZ2h0cyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZUFsaWdubWVudFdlaWdodHMoeyBkYWlseTogNDUsIGg0OiAzNSwgbTE1OiAyMCB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgY29uZmlnID0gY29uZmlnTWFuYWdlci5nZXRDb25maWcoKTtcbiAgICAgIGV4cGVjdChjb25maWcuYWxpZ25tZW50V2VpZ2h0cy5kYWlseSkudG9CZSg0NSk7XG4gICAgICBleHBlY3QoY29uZmlnLmFsaWdubWVudFdlaWdodHMuaDQpLnRvQmUoMzUpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5hbGlnbm1lbnRXZWlnaHRzLm0xNSkudG9CZSgyMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBSUyBjb25maWd1cmF0aW9uIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlUlNDb25maWcoeyB0aHJlc2hvbGQ6IDMuNSwgbG9va2JhY2tQZXJpb2Q6IDYgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGNvbmZpZ01hbmFnZXIuZ2V0Q29uZmlnKCk7XG4gICAgICBleHBlY3QoY29uZmlnLnJzQ29uZmlnLnRocmVzaG9sZCkudG9CZSgzLjUpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5yc0NvbmZpZy5sb29rYmFja1BlcmlvZCkudG9CZSg2KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHJpc2sgY29uZmlndXJhdGlvbiBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZVJpc2tDb25maWcoeyBtYXhMZXZlcmFnZTogNCwgc3RvcExvc3NQZXJjZW50OiAyLCB0YXJnZXRQZXJjZW50OiA1IH0pO1xuICAgICAgXG4gICAgICBjb25zdCBjb25maWcgPSBjb25maWdNYW5hZ2VyLmdldENvbmZpZygpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5yaXNrQ29uZmlnLm1heExldmVyYWdlKS50b0JlKDQpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5yaXNrQ29uZmlnLnN0b3BMb3NzUGVyY2VudCkudG9CZSgyKTtcbiAgICAgIGV4cGVjdChjb25maWcucmlza0NvbmZpZy50YXJnZXRQZXJjZW50KS50b0JlKDUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgcG9ydGZvbGlvIGNvbmZpZ3VyYXRpb24gY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVQb3J0Zm9saW9Db25maWcoeyBcbiAgICAgICAgbWF4Q29uY3VycmVudFBvc2l0aW9uczogNywgXG4gICAgICAgIG1heFBvcnRmb2xpb0hlYXQ6IDE4LCBcbiAgICAgICAgY29ycmVsYXRpb25UaHJlc2hvbGQ6IDAuOCBcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBjb25maWcgPSBjb25maWdNYW5hZ2VyLmdldENvbmZpZygpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5wb3J0Zm9saW9Db25maWcubWF4Q29uY3VycmVudFBvc2l0aW9ucykudG9CZSg3KTtcbiAgICAgIGV4cGVjdChjb25maWcucG9ydGZvbGlvQ29uZmlnLm1heFBvcnRmb2xpb0hlYXQpLnRvQmUoMTgpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5wb3J0Zm9saW9Db25maWcuY29ycmVsYXRpb25UaHJlc2hvbGQpLnRvQmUoMC44KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW1pdCBjb25maWdDaGFuZ2VkIGV2ZW50IG9uIHVwZGF0ZXMnLCAoZG9uZSkgPT4ge1xuICAgICAgY29uZmlnTWFuYWdlci5vbignY29uZmlnQ2hhbmdlZCcsIChldmVudCkgPT4ge1xuICAgICAgICBleHBlY3QoZXZlbnQuc2VjdGlvbikudG9CZSgnYWxsJyk7XG4gICAgICAgIGV4cGVjdChldmVudC5uZXdWYWx1ZS5hbGlnbm1lbnRXZWlnaHRzLmRhaWx5KS50b0JlKDQ1KTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlQWxpZ25tZW50V2VpZ2h0cyh7IGRhaWx5OiA0NSwgaDQ6IDM1LCBtMTU6IDIwIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNyZW1lbnQgdmVyc2lvbiBvbiBzYXZlJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbFZlcnNpb24gPSBjb25maWdNYW5hZ2VyLmdldENvbmZpZygpLnZlcnNpb247XG4gICAgICBcbiAgICAgIGNvbmZpZ01hbmFnZXIudXBkYXRlQWxpZ25tZW50V2VpZ2h0cyh7IGRhaWx5OiA0NSwgaDQ6IDM1LCBtMTU6IDIwIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBuZXdWZXJzaW9uID0gY29uZmlnTWFuYWdlci5nZXRDb25maWcoKS52ZXJzaW9uO1xuICAgICAgZXhwZWN0KG5ld1ZlcnNpb24pLnRvQmUoaW5pdGlhbFZlcnNpb24gKyAxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0hvdCBSZWxvYWQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzdGFydCBhbmQgc3RvcCB3YXRjaGluZycsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGNvbmZpZ01hbmFnZXIuc3RhcnRXYXRjaGluZygpO1xuICAgICAgICBjb25maWdNYW5hZ2VyLnN0b3BXYXRjaGluZygpO1xuICAgICAgfSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHN0YXJ0IHdhdGNoaW5nIHR3aWNlJywgKCkgPT4ge1xuICAgICAgY29uZmlnTWFuYWdlci5zdGFydFdhdGNoaW5nKCk7XG4gICAgICBjb25maWdNYW5hZ2VyLnN0YXJ0V2F0Y2hpbmcoKTsgLy8gU2hvdWxkIG5vdCB0aHJvd1xuICAgICAgY29uZmlnTWFuYWdlci5zdG9wV2F0Y2hpbmcoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1V0aWxpdHkgTWV0aG9kcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlc2V0IHRvIGRlZmF1bHRzJywgKCkgPT4ge1xuICAgICAgLy8gQ2hhbmdlIHNvbWUgdmFsdWVzXG4gICAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZUFsaWdubWVudFdlaWdodHMoeyBkYWlseTogNDUsIGg0OiAzNSwgbTE1OiAyMCB9KTtcbiAgICAgIFxuICAgICAgLy8gUmVzZXQgdG8gZGVmYXVsdHNcbiAgICAgIGNvbmZpZ01hbmFnZXIucmVzZXRUb0RlZmF1bHRzKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGNvbmZpZ01hbmFnZXIuZ2V0Q29uZmlnKCk7XG4gICAgICBleHBlY3QoY29uZmlnLmFsaWdubWVudFdlaWdodHMuZGFpbHkpLnRvQmUoNTApO1xuICAgICAgZXhwZWN0KGNvbmZpZy5hbGlnbm1lbnRXZWlnaHRzLmg0KS50b0JlKDMwKTtcbiAgICAgIGV4cGVjdChjb25maWcuYWxpZ25tZW50V2VpZ2h0cy5tMTUpLnRvQmUoMjApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBjb25maWd1cmF0aW9uIHN1bW1hcnknLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gY29uZmlnTWFuYWdlci5nZXRDb25maWdTdW1tYXJ5KCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzdW1tYXJ5KS50b0NvbnRhaW4oJ0FsaWdubWVudDogRGFpbHkgNTAlLCA0SCAzMCUsIDE1bSAyMCUnKTtcbiAgICAgIGV4cGVjdChzdW1tYXJ5KS50b0NvbnRhaW4oJ1JTOiBUaHJlc2hvbGQgMiUsIExvb2tiYWNrIDRoJyk7XG4gICAgICBleHBlY3Qoc3VtbWFyeSkudG9Db250YWluKCdSaXNrOiBMZXZlcmFnZSA1eCwgU3RvcCAxLjUlLCBUYXJnZXQgNC41JScpO1xuICAgICAgZXhwZWN0KHN1bW1hcnkpLnRvQ29udGFpbignUG9ydGZvbGlvOiBNYXggNSBwb3NpdGlvbnMsIEhlYXQgMTUlLCBDb3JyZWxhdGlvbiAwLjcnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYW51cCByZXNvdXJjZXMgb24gZGVzdHJveScsICgpID0+IHtcbiAgICAgIGNvbmZpZ01hbmFnZXIuc3RhcnRXYXRjaGluZygpO1xuICAgICAgXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBjb25maWdNYW5hZ2VyLmRlc3Ryb3koKTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFZGdlIENhc2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBhcnRpYWwgdXBkYXRlcycsICgpID0+IHtcbiAgICAgIC8vIFVwZGF0ZSBhbGwgd2VpZ2h0cyB0byBlbnN1cmUgdGhleSBzdW0gdG8gMTAwJVxuICAgICAgY29uZmlnTWFuYWdlci51cGRhdGVBbGlnbm1lbnRXZWlnaHRzKHsgZGFpbHk6IDQ1LCBoNDogMzUsIG0xNTogMjAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGNvbmZpZ01hbmFnZXIuZ2V0Q29uZmlnKCk7XG4gICAgICBleHBlY3QoY29uZmlnLmFsaWdubWVudFdlaWdodHMuZGFpbHkpLnRvQmUoNDUpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5hbGlnbm1lbnRXZWlnaHRzLmg0KS50b0JlKDM1KTtcbiAgICAgIGV4cGVjdChjb25maWcuYWxpZ25tZW50V2VpZ2h0cy5tMTUpLnRvQmUoMjApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyBjb25maWcgZGlyZWN0b3J5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgbm9uRXhpc3RlbnREaXIgPSBqb2luKF9fZGlybmFtZSwgJ25vbi1leGlzdGVudCcpO1xuICAgICAgXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBuZXcgQ29uZmlnTWFuYWdlcihub25FeGlzdGVudERpcik7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==