2aa1378268c32ae1381da6c1840f24b8
"use strict";
/**
 * Position Manager for Titan Phase 2 - The Hunter
 *
 * Handles automated position management including:
 * - Move stop to breakeven at 1.5R profit
 * - Take partial profit at 2R profit (50% close)
 * - Update trailing stop with 1 ATR distance
 * - Tighten stop after 48h to 0.5 ATR
 * - Close position for stop/target hits
 *
 * Requirements: 12.1-12.7 (Position Management)
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.PositionManager = void 0;
const events_1 = require("events");
const Logger_1 = require("../logging/Logger");
class PositionManager extends events_1.EventEmitter {
    positions = new Map();
    config;
    bybitClient;
    updateInterval = null;
    UPDATE_FREQUENCY = 5000; // 5 seconds
    constructor(bybitClient, config) {
        super();
        this.bybitClient = bybitClient;
        this.config = {
            breakevenRLevel: 1.5,
            partialProfitRLevel: 2.0,
            partialProfitPercentage: 50,
            trailingStopDistance: 1.0,
            tightenAfterHours: 48,
            tightenedStopDistance: 0.5,
            ...config
        };
        // Start position monitoring
        this.startMonitoring();
    }
    /**
     * Add a new position to management
     * @param position - Position to manage
     */
    addPosition(position) {
        this.positions.set(position.id, { ...position });
        console.log(`üìä Position Manager: Added position ${position.id} (${position.symbol} ${position.side})`);
    }
    /**
     * Remove a position from management
     * @param positionId - Position ID to remove
     */
    removePosition(positionId) {
        const position = this.positions.get(positionId);
        if (position) {
            this.positions.delete(positionId);
            console.log(`üìä Position Manager: Removed position ${positionId}`);
        }
    }
    /**
     * Get all managed positions
     * @returns Array of managed positions
     */
    getPositions() {
        return Array.from(this.positions.values());
    }
    /**
     * Get a specific position
     * @param positionId - Position ID
     * @returns Position or undefined
     */
    getPosition(positionId) {
        return this.positions.get(positionId);
    }
    /**
     * Update position with current market data
     * @param update - Position update data
     */
    updatePosition(update) {
        const position = this.positions.get(update.id);
        if (!position)
            return;
        // Update current price and P&L
        position.currentPrice = update.currentPrice;
        position.unrealizedPnL = update.unrealizedPnL;
        // Calculate current R value
        const riskAmount = Math.abs(position.entryPrice - position.stopLoss) * position.quantity;
        if (riskAmount > 0) {
            position.rValue = update.unrealizedPnL / riskAmount;
        }
        // Update position in map
        this.positions.set(update.id, position);
        // Check for management actions
        this.checkPositionManagement(position);
    }
    /**
     * Move stop loss to breakeven at 1.5R profit
     * @param position - Position to update
     * @returns Promise with success status
     */
    async moveStopToBreakeven(position) {
        try {
            // Check if already at breakeven
            if (Math.abs(position.stopLoss - position.entryPrice) < 0.01) {
                return true; // Already at breakeven
            }
            // Check if position has reached 1.5R profit
            if (position.rValue < this.config.breakevenRLevel) {
                return false; // Not profitable enough yet
            }
            console.log(`üéØ Moving stop to breakeven for ${position.symbol} at ${position.rValue.toFixed(2)}R`);
            // Set stop loss to entry price (breakeven)
            const success = await this.bybitClient.setStopLoss(position.symbol, position.entryPrice);
            if (success) {
                position.stopLoss = position.entryPrice;
                this.positions.set(position.id, position);
                this.emit('position:breakeven', position);
                console.log(`‚úÖ Stop moved to breakeven: ${position.symbol} @ ${position.entryPrice}`);
                return true;
            }
            return false;
        }
        catch (error) {
            console.error(`‚ùå Failed to move stop to breakeven for ${position.symbol}:`, error);
            this.emit('position:error', position, error);
            return false;
        }
    }
    /**
     * Take partial profit at 2R profit (50% close)
     * @param position - Position to partially close
     * @returns Promise with success status
     */
    async takePartialProfit(position) {
        try {
            // Check if position has reached 2R profit
            if (position.rValue < this.config.partialProfitRLevel) {
                return false; // Not profitable enough yet
            }
            // Check if partial profit already taken (quantity would be reduced)
            const originalQuantity = position.quantity;
            const partialQuantity = originalQuantity * (this.config.partialProfitPercentage / 100);
            console.log(`üí∞ Taking partial profit for ${position.symbol} at ${position.rValue.toFixed(2)}R`);
            // Place market order to close partial position
            const orderParams = {
                phase: 'phase2',
                symbol: position.symbol,
                side: position.side === 'LONG' ? 'Sell' : 'Buy',
                type: 'MARKET',
                qty: partialQuantity,
                leverage: position.leverage
            };
            const result = await this.bybitClient.placeOrderWithRetry(orderParams);
            if (result.status === 'FILLED') {
                // Update position quantity
                position.quantity -= partialQuantity;
                position.realizedPnL += (partialQuantity * (position.currentPrice - position.entryPrice));
                this.positions.set(position.id, position);
                this.emit('position:partial', position, partialQuantity);
                console.log(`‚úÖ Partial profit taken: ${position.symbol} closed ${partialQuantity} at ${result.price}`);
                return true;
            }
            return false;
        }
        catch (error) {
            console.error(`‚ùå Failed to take partial profit for ${position.symbol}:`, error);
            this.emit('position:error', position, error);
            return false;
        }
    }
    /**
     * Update trailing stop with 1 ATR distance
     * @param position - Position to update trailing stop
     * @returns Promise with success status
     */
    async updateTrailingStop(position) {
        try {
            // Only trail if position is profitable
            if (position.rValue <= 0) {
                return false;
            }
            const atrDistance = position.atr * this.config.trailingStopDistance;
            let newStopLoss;
            if (position.side === 'LONG') {
                // For long positions, trail stop up
                newStopLoss = position.currentPrice - atrDistance;
                // Only update if new stop is higher than current stop
                if (newStopLoss <= position.stopLoss) {
                    return false;
                }
            }
            else {
                // For short positions, trail stop down
                newStopLoss = position.currentPrice + atrDistance;
                // Only update if new stop is lower than current stop
                if (newStopLoss >= position.stopLoss) {
                    return false;
                }
            }
            console.log(`üìà Updating trailing stop for ${position.symbol}: ${position.stopLoss.toFixed(2)} ‚Üí ${newStopLoss.toFixed(2)}`);
            // Set new stop loss
            const success = await this.bybitClient.setStopLoss(position.symbol, newStopLoss);
            if (success) {
                position.stopLoss = newStopLoss;
                this.positions.set(position.id, position);
                this.emit('position:trailing', position, newStopLoss);
                console.log(`‚úÖ Trailing stop updated: ${position.symbol} @ ${newStopLoss.toFixed(2)}`);
                return true;
            }
            return false;
        }
        catch (error) {
            console.error(`‚ùå Failed to update trailing stop for ${position.symbol}:`, error);
            this.emit('position:error', position, error);
            return false;
        }
    }
    /**
     * Tighten stop loss to 0.5 ATR after 48 hours
     * @param position - Position to tighten stop
     * @returns Promise with success status
     */
    async tightenStopAfter48h(position) {
        try {
            // Check if position is older than configured hours
            const hoursOpen = (Date.now() - position.entryTime) / (1000 * 60 * 60);
            if (hoursOpen < this.config.tightenAfterHours) {
                return false; // Not old enough yet
            }
            const tightenedDistance = position.atr * this.config.tightenedStopDistance;
            let newStopLoss;
            if (position.side === 'LONG') {
                newStopLoss = position.currentPrice - tightenedDistance;
                // Only tighten if new stop is higher than current stop
                if (newStopLoss <= position.stopLoss) {
                    return false;
                }
            }
            else {
                newStopLoss = position.currentPrice + tightenedDistance;
                // Only tighten if new stop is lower than current stop
                if (newStopLoss >= position.stopLoss) {
                    return false;
                }
            }
            console.log(`‚è∞ Tightening stop after ${hoursOpen.toFixed(1)}h for ${position.symbol}: ${position.stopLoss.toFixed(2)} ‚Üí ${newStopLoss.toFixed(2)}`);
            // Set tightened stop loss
            const success = await this.bybitClient.setStopLoss(position.symbol, newStopLoss);
            if (success) {
                position.stopLoss = newStopLoss;
                this.positions.set(position.id, position);
                this.emit('position:tightened', position, newStopLoss);
                console.log(`‚úÖ Stop tightened: ${position.symbol} @ ${newStopLoss.toFixed(2)}`);
                return true;
            }
            return false;
        }
        catch (error) {
            console.error(`‚ùå Failed to tighten stop for ${position.symbol}:`, error);
            this.emit('position:error', position, error);
            return false;
        }
    }
    /**
     * Close position for stop/target hits
     * @param position - Position to close
     * @param reason - Reason for closing
     * @returns Promise with success status
     */
    async closePosition(position, reason) {
        try {
            console.log(`üö™ Closing position ${position.symbol} - Reason: ${reason}`);
            // Place market order to close entire position
            const orderParams = {
                phase: 'phase2',
                symbol: position.symbol,
                side: position.side === 'LONG' ? 'Sell' : 'Buy',
                type: 'MARKET',
                qty: position.quantity,
                leverage: position.leverage
            };
            const result = await this.bybitClient.placeOrderWithRetry(orderParams);
            if (result.status === 'FILLED') {
                // Calculate profit percentage and hold time
                const profitPercentage = ((result.price - position.entryPrice) / position.entryPrice) * 100;
                const holdTime = Date.now() - position.entryTime;
                // Update position status
                position.status = 'CLOSED';
                position.realizedPnL += (position.quantity * (result.price - position.entryPrice));
                // Map PositionManager close reasons to Logger close reasons
                const loggerReason = reason === 'STOP_HIT' ? 'STOP_LOSS' :
                    reason === 'TARGET_HIT' ? 'TAKE_PROFIT' :
                        'MANUAL';
                // Log position close to structured logger
                (0, Logger_1.logPositionClose)(position.id, position.symbol, position.side, position.entryPrice, result.price, profitPercentage, loggerReason, holdTime, position.rValue);
                // Remove from active management
                this.positions.delete(position.id);
                this.emit('position:closed', position, reason);
                console.log(`‚úÖ Position closed: ${position.symbol} at ${result.price} (${reason})`);
                return true;
            }
            return false;
        }
        catch (error) {
            console.error(`‚ùå Failed to close position ${position.symbol}:`, error);
            (0, Logger_1.logError)('ERROR', `Failed to close position ${position.symbol}`, {
                symbol: position.symbol,
                component: 'PositionManager',
                function: 'closePosition',
                stack: error.stack,
                data: { position, reason }
            });
            this.emit('position:error', position, error);
            return false;
        }
    }
    /**
     * Check if position needs management actions
     * @param position - Position to check
     */
    async checkPositionManagement(position) {
        try {
            // Check for stop/target hits first
            if (this.checkStopHit(position)) {
                await this.closePosition(position, 'STOP_HIT');
                return;
            }
            if (this.checkTargetHit(position)) {
                await this.closePosition(position, 'TARGET_HIT');
                return;
            }
            // Check for management actions (in order of priority)
            // 1. Move to breakeven at 1.5R
            if (position.rValue >= this.config.breakevenRLevel &&
                Math.abs(position.stopLoss - position.entryPrice) > 0.01) {
                await this.moveStopToBreakeven(position);
            }
            // 2. Take partial profit at 2R
            if (position.rValue >= this.config.partialProfitRLevel) {
                await this.takePartialProfit(position);
            }
            // 3. Update trailing stop if profitable
            if (position.rValue > 0) {
                await this.updateTrailingStop(position);
            }
            // 4. Tighten stop after 48h
            const hoursOpen = (Date.now() - position.entryTime) / (1000 * 60 * 60);
            if (hoursOpen >= this.config.tightenAfterHours) {
                await this.tightenStopAfter48h(position);
            }
        }
        catch (error) {
            console.error(`‚ùå Error in position management for ${position.symbol}:`, error);
            this.emit('position:error', position, error);
        }
    }
    /**
     * Check if stop loss was hit
     * @param position - Position to check
     * @returns True if stop was hit
     */
    checkStopHit(position) {
        if (position.side === 'LONG') {
            return position.currentPrice <= position.stopLoss;
        }
        else {
            return position.currentPrice >= position.stopLoss;
        }
    }
    /**
     * Check if take profit was hit
     * @param position - Position to check
     * @returns True if target was hit
     */
    checkTargetHit(position) {
        if (position.side === 'LONG') {
            return position.currentPrice >= position.takeProfit;
        }
        else {
            return position.currentPrice <= position.takeProfit;
        }
    }
    /**
     * Start monitoring positions
     */
    startMonitoring() {
        if (this.updateInterval) {
            clearInterval(this.updateInterval);
        }
        this.updateInterval = setInterval(async () => {
            await this.updateAllPositions();
        }, this.UPDATE_FREQUENCY);
        console.log(`üìä Position Manager: Started monitoring (${this.UPDATE_FREQUENCY}ms interval)`);
    }
    /**
     * Stop monitoring positions
     */
    stopMonitoring() {
        if (this.updateInterval) {
            clearInterval(this.updateInterval);
            this.updateInterval = null;
        }
        console.log(`üìä Position Manager: Stopped monitoring`);
    }
    /**
     * Update all positions with current market data
     */
    async updateAllPositions() {
        const positions = Array.from(this.positions.values());
        for (const position of positions) {
            try {
                // Get current price from exchange
                const currentPrice = await this.bybitClient.getCurrentPrice(position.symbol);
                // Calculate unrealized P&L
                const priceDiff = position.side === 'LONG'
                    ? currentPrice - position.entryPrice
                    : position.entryPrice - currentPrice;
                const unrealizedPnL = priceDiff * position.quantity;
                // Update position
                this.updatePosition({
                    id: position.id,
                    currentPrice,
                    unrealizedPnL,
                    timestamp: Date.now()
                });
            }
            catch (error) {
                console.error(`‚ùå Failed to update position ${position.symbol}:`, error);
            }
        }
    }
    /**
     * Get position statistics
     * @returns Position statistics
     */
    getStatistics() {
        const positions = Array.from(this.positions.values());
        const openPositions = positions.filter(p => p.status === 'OPEN');
        const totalUnrealizedPnL = openPositions.reduce((sum, p) => sum + p.unrealizedPnL, 0);
        const totalRealizedPnL = positions.reduce((sum, p) => sum + p.realizedPnL, 0);
        const averageRValue = openPositions.length > 0
            ? openPositions.reduce((sum, p) => sum + p.rValue, 0) / openPositions.length
            : 0;
        return {
            totalPositions: positions.length,
            openPositions: openPositions.length,
            totalUnrealizedPnL,
            totalRealizedPnL,
            averageRValue
        };
    }
    /**
     * Update configuration
     * @param newConfig - New configuration
     */
    updateConfig(newConfig) {
        this.config = { ...this.config, ...newConfig };
        console.log(`üìä Position Manager: Configuration updated`);
    }
    /**
     * Emergency close all positions
     * @returns Promise with results
     */
    async emergencyCloseAll() {
        console.log(`üö® Emergency closing all positions`);
        const positions = Array.from(this.positions.values());
        let success = 0;
        let failed = 0;
        for (const position of positions) {
            try {
                const result = await this.closePosition(position, 'MANUAL');
                if (result) {
                    success++;
                }
                else {
                    failed++;
                }
            }
            catch (error) {
                console.error(`‚ùå Failed to emergency close ${position.symbol}:`, error);
                failed++;
            }
        }
        console.log(`üö® Emergency close complete: ${success} success, ${failed} failed`);
        return { success, failed };
    }
    /**
     * Cleanup resources
     */
    destroy() {
        this.stopMonitoring();
        this.positions.clear();
        this.removeAllListeners();
        console.log(`üìä Position Manager: Destroyed`);
    }
}
exports.PositionManager = PositionManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvc3JjL3Jpc2svUG9zaXRpb25NYW5hZ2VyLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7R0FXRzs7O0FBRUgsbUNBQXNDO0FBVXRDLDhDQUErRDtBQW9CL0QsTUFBYSxlQUFnQixTQUFRLHFCQUFZO0lBQ3ZDLFNBQVMsR0FBMEIsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUM3QyxNQUFNLENBQXdCO0lBQzlCLFdBQVcsQ0FBbUI7SUFDOUIsY0FBYyxHQUEwQixJQUFJLENBQUM7SUFDcEMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLENBQUMsWUFBWTtJQUV0RCxZQUFZLFdBQTZCLEVBQUUsTUFBdUM7UUFDaEYsS0FBSyxFQUFFLENBQUM7UUFFUixJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztRQUMvQixJQUFJLENBQUMsTUFBTSxHQUFHO1lBQ1osZUFBZSxFQUFFLEdBQUc7WUFDcEIsbUJBQW1CLEVBQUUsR0FBRztZQUN4Qix1QkFBdUIsRUFBRSxFQUFFO1lBQzNCLG9CQUFvQixFQUFFLEdBQUc7WUFDekIsaUJBQWlCLEVBQUUsRUFBRTtZQUNyQixxQkFBcUIsRUFBRSxHQUFHO1lBQzFCLEdBQUcsTUFBTTtTQUNWLENBQUM7UUFFRiw0QkFBNEI7UUFDNUIsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFFRDs7O09BR0c7SUFDSSxXQUFXLENBQUMsUUFBa0I7UUFDbkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsUUFBUSxFQUFFLENBQUMsQ0FBQztRQUNqRCxPQUFPLENBQUMsR0FBRyxDQUFDLHVDQUF1QyxRQUFRLENBQUMsRUFBRSxLQUFLLFFBQVEsQ0FBQyxNQUFNLElBQUksUUFBUSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7SUFDMUcsQ0FBQztJQUVEOzs7T0FHRztJQUNJLGNB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QUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFDdEQsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQztRQUVmLEtBQUssTUFBTSxRQUFRLElBQUksU0FBUyxFQUFFLENBQUM7WUFDakMsSUFBSSxDQUFDO2dCQUNILE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7Z0JBQzVELElBQUksTUFBTSxFQUFFLENBQUM7b0JBQ1gsT0FBTyxFQUFFLENBQUM7Z0JBQ1osQ0FBQztxQkFBTSxDQUFDO29CQUNOLE1BQU0sRUFBRSxDQUFDO2dCQUNYLENBQUM7WUFDSCxDQUFDO1lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztnQkFDZixPQUFPLENBQUMsS0FBSyxDQUFDLCtCQUErQixRQUFRLENBQUMsTUFBTSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0JBQ3hFLE1BQU0sRUFBRSxDQUFDO1lBQ1gsQ0FBQztRQUNILENBQUM7UUFFRCxPQUFPLENBQUMsR0FBRyxDQUFDLGdDQUFnQyxPQUFPLGFBQWEsTUFBTSxTQUFTLENBQUMsQ0FBQztRQUNqRixPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFRDs7T0FFRztJQUNJLE9BQU87UUFDWixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDdEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7SUFDaEQsQ0FBQztDQUNGO0FBcGpCRCwwQ0FvakJDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9pdmFuL0NvZGUvdHJhZGluZy90aXRhbi9zZXJ2aWNlcy90aXRhbi1waGFzZTItaHVudGVyL3NyYy9yaXNrL1Bvc2l0aW9uTWFuYWdlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBvc2l0aW9uIE1hbmFnZXIgZm9yIFRpdGFuIFBoYXNlIDIgLSBUaGUgSHVudGVyXG4gKiBcbiAqIEhhbmRsZXMgYXV0b21hdGVkIHBvc2l0aW9uIG1hbmFnZW1lbnQgaW5jbHVkaW5nOlxuICogLSBNb3ZlIHN0b3AgdG8gYnJlYWtldmVuIGF0IDEuNVIgcHJvZml0XG4gKiAtIFRha2UgcGFydGlhbCBwcm9maXQgYXQgMlIgcHJvZml0ICg1MCUgY2xvc2UpXG4gKiAtIFVwZGF0ZSB0cmFpbGluZyBzdG9wIHdpdGggMSBBVFIgZGlzdGFuY2VcbiAqIC0gVGlnaHRlbiBzdG9wIGFmdGVyIDQ4aCB0byAwLjUgQVRSXG4gKiAtIENsb3NlIHBvc2l0aW9uIGZvciBzdG9wL3RhcmdldCBoaXRzXG4gKiBcbiAqIFJlcXVpcmVtZW50czogMTIuMS0xMi43IChQb3NpdGlvbiBNYW5hZ2VtZW50KVxuICovXG5cbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQgeyBcbiAgUG9zaXRpb24sIFxuICBQb3NpdGlvblVwZGF0ZSwgXG4gIFRyYWlsaW5nU3RvcENvbmZpZywgXG4gIFBhcnRpYWxQcm9maXRDb25maWcsXG4gIE9yZGVyUGFyYW1zLFxuICBPcmRlclJlc3VsdFxufSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBCeWJpdFBlcnBzQ2xpZW50IH0gZnJvbSAnLi4vZXhjaGFuZ2VzL0J5Yml0UGVycHNDbGllbnQnO1xuaW1wb3J0IHsgbG9nUG9zaXRpb25DbG9zZSwgbG9nRXJyb3IgfSBmcm9tICcuLi9sb2dnaW5nL0xvZ2dlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9zaXRpb25NYW5hZ2VyQ29uZmlnIHtcbiAgYnJlYWtldmVuUkxldmVsOiBudW1iZXI7IC8vIFIgbGV2ZWwgdG8gbW92ZSBzdG9wIHRvIGJyZWFrZXZlbiAoZGVmYXVsdDogMS41KVxuICBwYXJ0aWFsUHJvZml0UkxldmVsOiBudW1iZXI7IC8vIFIgbGV2ZWwgdG8gdGFrZSBwYXJ0aWFsIHByb2ZpdCAoZGVmYXVsdDogMi4wKVxuICBwYXJ0aWFsUHJvZml0UGVyY2VudGFnZTogbnVtYmVyOyAvLyBQZXJjZW50YWdlIHRvIGNsb3NlIGF0IHBhcnRpYWwgKGRlZmF1bHQ6IDUwKVxuICB0cmFpbGluZ1N0b3BEaXN0YW5jZTogbnVtYmVyOyAvLyBBVFIgbXVsdGlwbGllciBmb3IgdHJhaWxpbmcgc3RvcCAoZGVmYXVsdDogMS4wKVxuICB0aWdodGVuQWZ0ZXJIb3VyczogbnVtYmVyOyAvLyBIb3VycyBhZnRlciB3aGljaCB0byB0aWdodGVuIHN0b3AgKGRlZmF1bHQ6IDQ4KVxuICB0aWdodGVuZWRTdG9wRGlzdGFuY2U6IG51bWJlcjsgLy8gQVRSIG11bHRpcGxpZXIgZm9yIHRpZ2h0ZW5lZCBzdG9wIChkZWZhdWx0OiAwLjUpXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9zaXRpb25NYW5hZ2VyRXZlbnRzIHtcbiAgJ3Bvc2l0aW9uOmJyZWFrZXZlbic6IChwb3NpdGlvbjogUG9zaXRpb24pID0+IHZvaWQ7XG4gICdwb3NpdGlvbjpwYXJ0aWFsJzogKHBvc2l0aW9uOiBQb3NpdGlvbiwgY2xvc2VkUXVhbnRpdHk6IG51bWJlcikgPT4gdm9pZDtcbiAgJ3Bvc2l0aW9uOnRyYWlsaW5nJzogKHBvc2l0aW9uOiBQb3NpdGlvbiwgbmV3U3RvcExvc3M6IG51bWJlcikgPT4gdm9pZDtcbiAgJ3Bvc2l0aW9uOnRpZ2h0ZW5lZCc6IChwb3NpdGlvbjogUG9zaXRpb24sIG5ld1N0b3BMb3NzOiBudW1iZXIpID0+IHZvaWQ7XG4gICdwb3NpdGlvbjpjbG9zZWQnOiAocG9zaXRpb246IFBvc2l0aW9uLCByZWFzb246ICdTVE9QX0hJVCcgfCAnVEFSR0VUX0hJVCcgfCAnTUFOVUFMJykgPT4gdm9pZDtcbiAgJ3Bvc2l0aW9uOmVycm9yJzogKHBvc2l0aW9uOiBQb3NpdGlvbiwgZXJyb3I6IEVycm9yKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgUG9zaXRpb25NYW5hZ2VyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgcHJpdmF0ZSBwb3NpdGlvbnM6IE1hcDxzdHJpbmcsIFBvc2l0aW9uPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBjb25maWc6IFBvc2l0aW9uTWFuYWdlckNvbmZpZztcbiAgcHJpdmF0ZSBieWJpdENsaWVudDogQnliaXRQZXJwc0NsaWVudDtcbiAgcHJpdmF0ZSB1cGRhdGVJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBVUERBVEVfRlJFUVVFTkNZID0gNTAwMDsgLy8gNSBzZWNvbmRzXG5cbiAgY29uc3RydWN0b3IoYnliaXRDbGllbnQ6IEJ5Yml0UGVycHNDbGllbnQsIGNvbmZpZz86IFBhcnRpYWw8UG9zaXRpb25NYW5hZ2VyQ29uZmlnPikge1xuICAgIHN1cGVyKCk7XG4gICAgXG4gICAgdGhpcy5ieWJpdENsaWVudCA9IGJ5Yml0Q2xpZW50O1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgYnJlYWtldmVuUkxldmVsOiAxLjUsXG4gICAgICBwYXJ0aWFsUHJvZml0UkxldmVsOiAyLjAsXG4gICAgICBwYXJ0aWFsUHJvZml0UGVyY2VudGFnZTogNTAsXG4gICAgICB0cmFpbGluZ1N0b3BEaXN0YW5jZTogMS4wLFxuICAgICAgdGlnaHRlbkFmdGVySG91cnM6IDQ4LFxuICAgICAgdGlnaHRlbmVkU3RvcERpc3RhbmNlOiAwLjUsXG4gICAgICAuLi5jb25maWdcbiAgICB9O1xuXG4gICAgLy8gU3RhcnQgcG9zaXRpb24gbW9uaXRvcmluZ1xuICAgIHRoaXMuc3RhcnRNb25pdG9yaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbmV3IHBvc2l0aW9uIHRvIG1hbmFnZW1lbnRcbiAgICogQHBhcmFtIHBvc2l0aW9uIC0gUG9zaXRpb24gdG8gbWFuYWdlXG4gICAqL1xuICBwdWJsaWMgYWRkUG9zaXRpb24ocG9zaXRpb246IFBvc2l0aW9uKTogdm9pZCB7XG4gICAgdGhpcy5wb3NpdGlvbnMuc2V0KHBvc2l0aW9uLmlkLCB7IC4uLnBvc2l0aW9uIH0pO1xuICAgIGNvbnNvbGUubG9nKGDwn5OKIFBvc2l0aW9uIE1hbmFnZXI6IEFkZGVkIHBvc2l0aW9uICR7cG9zaXRpb24uaWR9ICgke3Bvc2l0aW9uLnN5bWJvbH0gJHtwb3NpdGlvbi5zaWRlfSlgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBwb3NpdGlvbiBmcm9tIG1hbmFnZW1lbnRcbiAgICogQHBhcmFtIHBvc2l0aW9uSWQgLSBQb3NpdGlvbiBJRCB0byByZW1vdmVcbiAgICovXG4gIHB1YmxpYyByZW1vdmVQb3NpdGlvbihwb3NpdGlvbklkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb25zLmdldChwb3NpdGlvbklkKTtcbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHRoaXMucG9zaXRpb25zLmRlbGV0ZShwb3NpdGlvbklkKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIFBvc2l0aW9uIE1hbmFnZXI6IFJlbW92ZWQgcG9zaXRpb24gJHtwb3NpdGlvbklkfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIG1hbmFnZWQgcG9zaXRpb25zXG4gICAqIEByZXR1cm5zIEFycmF5IG9mIG1hbmFnZWQgcG9zaXRpb25zXG4gICAqL1xuICBwdWJsaWMgZ2V0UG9zaXRpb25zKCk6IFBvc2l0aW9uW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucG9zaXRpb25zLnZhbHVlcygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBzcGVjaWZpYyBwb3NpdGlvblxuICAgKiBAcGFyYW0gcG9zaXRpb25JZCAtIFBvc2l0aW9uIElEXG4gICAqIEByZXR1cm5zIFBvc2l0aW9uIG9yIHVuZGVmaW5lZFxuICAgKi9cbiAgcHVibGljIGdldFBvc2l0aW9uKHBvc2l0aW9uSWQ6IHN0cmluZyk6IFBvc2l0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5wb3NpdGlvbnMuZ2V0KHBvc2l0aW9uSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBwb3NpdGlvbiB3aXRoIGN1cnJlbnQgbWFya2V0IGRhdGFcbiAgICogQHBhcmFtIHVwZGF0ZSAtIFBvc2l0aW9uIHVwZGF0ZSBkYXRhXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlUG9zaXRpb24odXBkYXRlOiBQb3NpdGlvblVwZGF0ZSk6IHZvaWQge1xuICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbnMuZ2V0KHVwZGF0ZS5pZCk7XG4gICAgaWYgKCFwb3NpdGlvbikgcmV0dXJuO1xuXG4gICAgLy8gVXBkYXRlIGN1cnJlbnQgcHJpY2UgYW5kIFAmTFxuICAgIHBvc2l0aW9uLmN1cnJlbnRQcmljZSA9IHVwZGF0ZS5jdXJyZW50UHJpY2U7XG4gICAgcG9zaXRpb24udW5yZWFsaXplZFBuTCA9IHVwZGF0ZS51bnJlYWxpemVkUG5MO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGN1cnJlbnQgUiB2YWx1ZVxuICAgIGNvbnN0IHJpc2tBbW91bnQgPSBNYXRoLmFicyhwb3NpdGlvbi5lbnRyeVByaWNlIC0gcG9zaXRpb24uc3RvcExvc3MpICogcG9zaXRpb24ucXVhbnRpdHk7XG4gICAgaWYgKHJpc2tBbW91bnQgPiAwKSB7XG4gICAgICBwb3NpdGlvbi5yVmFsdWUgPSB1cGRhdGUudW5yZWFsaXplZFBuTCAvIHJpc2tBbW91bnQ7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHBvc2l0aW9uIGluIG1hcFxuICAgIHRoaXMucG9zaXRpb25zLnNldCh1cGRhdGUuaWQsIHBvc2l0aW9uKTtcblxuICAgIC8vIENoZWNrIGZvciBtYW5hZ2VtZW50IGFjdGlvbnNcbiAgICB0aGlzLmNoZWNrUG9zaXRpb25NYW5hZ2VtZW50KHBvc2l0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIHN0b3AgbG9zcyB0byBicmVha2V2ZW4gYXQgMS41UiBwcm9maXRcbiAgICogQHBhcmFtIHBvc2l0aW9uIC0gUG9zaXRpb24gdG8gdXBkYXRlXG4gICAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCBzdWNjZXNzIHN0YXR1c1xuICAgKi9cbiAgcHVibGljIGFzeW5jIG1vdmVTdG9wVG9CcmVha2V2ZW4ocG9zaXRpb246IFBvc2l0aW9uKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIGFscmVhZHkgYXQgYnJlYWtldmVuXG4gICAgICBpZiAoTWF0aC5hYnMocG9zaXRpb24uc3RvcExvc3MgLSBwb3NpdGlvbi5lbnRyeVByaWNlKSA8IDAuMDEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIEFscmVhZHkgYXQgYnJlYWtldmVuXG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIHBvc2l0aW9uIGhhcyByZWFjaGVkIDEuNVIgcHJvZml0XG4gICAgICBpZiAocG9zaXRpb24uclZhbHVlIDwgdGhpcy5jb25maWcuYnJlYWtldmVuUkxldmVsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gTm90IHByb2ZpdGFibGUgZW5vdWdoIHlldFxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhg8J+OryBNb3Zpbmcgc3RvcCB0byBicmVha2V2ZW4gZm9yICR7cG9zaXRpb24uc3ltYm9sfSBhdCAke3Bvc2l0aW9uLnJWYWx1ZS50b0ZpeGVkKDIpfVJgKTtcblxuICAgICAgLy8gU2V0IHN0b3AgbG9zcyB0byBlbnRyeSBwcmljZSAoYnJlYWtldmVuKVxuICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHRoaXMuYnliaXRDbGllbnQuc2V0U3RvcExvc3MocG9zaXRpb24uc3ltYm9sLCBwb3NpdGlvbi5lbnRyeVByaWNlKTtcbiAgICAgIFxuICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgcG9zaXRpb24uc3RvcExvc3MgPSBwb3NpdGlvbi5lbnRyeVByaWNlO1xuICAgICAgICB0aGlzLnBvc2l0aW9ucy5zZXQocG9zaXRpb24uaWQsIHBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5lbWl0KCdwb3NpdGlvbjpicmVha2V2ZW4nLCBwb3NpdGlvbik7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFN0b3AgbW92ZWQgdG8gYnJlYWtldmVuOiAke3Bvc2l0aW9uLnN5bWJvbH0gQCAke3Bvc2l0aW9uLmVudHJ5UHJpY2V9YCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBGYWlsZWQgdG8gbW92ZSBzdG9wIHRvIGJyZWFrZXZlbiBmb3IgJHtwb3NpdGlvbi5zeW1ib2x9OmAsIGVycm9yKTtcbiAgICAgIHRoaXMuZW1pdCgncG9zaXRpb246ZXJyb3InLCBwb3NpdGlvbiwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlIHBhcnRpYWwgcHJvZml0IGF0IDJSIHByb2ZpdCAoNTAlIGNsb3NlKVxuICAgKiBAcGFyYW0gcG9zaXRpb24gLSBQb3NpdGlvbiB0byBwYXJ0aWFsbHkgY2xvc2VcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIHN1Y2Nlc3Mgc3RhdHVzXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgdGFrZVBhcnRpYWxQcm9maXQocG9zaXRpb246IFBvc2l0aW9uKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIHBvc2l0aW9uIGhhcyByZWFjaGVkIDJSIHByb2ZpdFxuICAgICAgaWYgKHBvc2l0aW9uLnJWYWx1ZSA8IHRoaXMuY29uZmlnLnBhcnRpYWxQcm9maXRSTGV2ZWwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBOb3QgcHJvZml0YWJsZSBlbm91Z2ggeWV0XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIHBhcnRpYWwgcHJvZml0IGFscmVhZHkgdGFrZW4gKHF1YW50aXR5IHdvdWxkIGJlIHJlZHVjZWQpXG4gICAgICBjb25zdCBvcmlnaW5hbFF1YW50aXR5ID0gcG9zaXRpb24ucXVhbnRpdHk7XG4gICAgICBjb25zdCBwYXJ0aWFsUXVhbnRpdHkgPSBvcmlnaW5hbFF1YW50aXR5ICogKHRoaXMuY29uZmlnLnBhcnRpYWxQcm9maXRQZXJjZW50YWdlIC8gMTAwKTtcblxuICAgICAgY29uc29sZS5sb2coYPCfkrAgVGFraW5nIHBhcnRpYWwgcHJvZml0IGZvciAke3Bvc2l0aW9uLnN5bWJvbH0gYXQgJHtwb3NpdGlvbi5yVmFsdWUudG9GaXhlZCgyKX1SYCk7XG5cbiAgICAgIC8vIFBsYWNlIG1hcmtldCBvcmRlciB0byBjbG9zZSBwYXJ0aWFsIHBvc2l0aW9uXG4gICAgICBjb25zdCBvcmRlclBhcmFtczogT3JkZXJQYXJhbXMgPSB7XG4gICAgICAgIHBoYXNlOiAncGhhc2UyJyxcbiAgICAgICAgc3ltYm9sOiBwb3NpdGlvbi5zeW1ib2wsXG4gICAgICAgIHNpZGU6IHBvc2l0aW9uLnNpZGUgPT09ICdMT05HJyA/ICdTZWxsJyA6ICdCdXknLFxuICAgICAgICB0eXBlOiAnTUFSS0VUJyxcbiAgICAgICAgcXR5OiBwYXJ0aWFsUXVhbnRpdHksXG4gICAgICAgIGxldmVyYWdlOiBwb3NpdGlvbi5sZXZlcmFnZVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5ieWJpdENsaWVudC5wbGFjZU9yZGVyV2l0aFJldHJ5KG9yZGVyUGFyYW1zKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdGSUxMRUQnKSB7XG4gICAgICAgIC8vIFVwZGF0ZSBwb3NpdGlvbiBxdWFudGl0eVxuICAgICAgICBwb3NpdGlvbi5xdWFudGl0eSAtPSBwYXJ0aWFsUXVhbnRpdHk7XG4gICAgICAgIHBvc2l0aW9uLnJlYWxpemVkUG5MICs9IChwYXJ0aWFsUXVhbnRpdHkgKiAocG9zaXRpb24uY3VycmVudFByaWNlIC0gcG9zaXRpb24uZW50cnlQcmljZSkpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5wb3NpdGlvbnMuc2V0KHBvc2l0aW9uLmlkLCBwb3NpdGlvbik7XG4gICAgICAgIHRoaXMuZW1pdCgncG9zaXRpb246cGFydGlhbCcsIHBvc2l0aW9uLCBwYXJ0aWFsUXVhbnRpdHkpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBQYXJ0aWFsIHByb2ZpdCB0YWtlbjogJHtwb3NpdGlvbi5zeW1ib2x9IGNsb3NlZCAke3BhcnRpYWxRdWFudGl0eX0gYXQgJHtyZXN1bHQucHJpY2V9YCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBGYWlsZWQgdG8gdGFrZSBwYXJ0aWFsIHByb2ZpdCBmb3IgJHtwb3NpdGlvbi5zeW1ib2x9OmAsIGVycm9yKTtcbiAgICAgIHRoaXMuZW1pdCgncG9zaXRpb246ZXJyb3InLCBwb3NpdGlvbiwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdHJhaWxpbmcgc3RvcCB3aXRoIDEgQVRSIGRpc3RhbmNlXG4gICAqIEBwYXJhbSBwb3NpdGlvbiAtIFBvc2l0aW9uIHRvIHVwZGF0ZSB0cmFpbGluZyBzdG9wXG4gICAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCBzdWNjZXNzIHN0YXR1c1xuICAgKi9cbiAgcHVibGljIGFzeW5jIHVwZGF0ZVRyYWlsaW5nU3RvcChwb3NpdGlvbjogUG9zaXRpb24pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgLy8gT25seSB0cmFpbCBpZiBwb3NpdGlvbiBpcyBwcm9maXRhYmxlXG4gICAgICBpZiAocG9zaXRpb24uclZhbHVlIDw9IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhdHJEaXN0YW5jZSA9IHBvc2l0aW9uLmF0ciAqIHRoaXMuY29uZmlnLnRyYWlsaW5nU3RvcERpc3RhbmNlO1xuICAgICAgbGV0IG5ld1N0b3BMb3NzOiBudW1iZXI7XG5cbiAgICAgIGlmIChwb3NpdGlvbi5zaWRlID09PSAnTE9ORycpIHtcbiAgICAgICAgLy8gRm9yIGxvbmcgcG9zaXRpb25zLCB0cmFpbCBzdG9wIHVwXG4gICAgICAgIG5ld1N0b3BMb3NzID0gcG9zaXRpb24uY3VycmVudFByaWNlIC0gYXRyRGlzdGFuY2U7XG4gICAgICAgIFxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiBuZXcgc3RvcCBpcyBoaWdoZXIgdGhhbiBjdXJyZW50IHN0b3BcbiAgICAgICAgaWYgKG5ld1N0b3BMb3NzIDw9IHBvc2l0aW9uLnN0b3BMb3NzKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igc2hvcnQgcG9zaXRpb25zLCB0cmFpbCBzdG9wIGRvd25cbiAgICAgICAgbmV3U3RvcExvc3MgPSBwb3NpdGlvbi5jdXJyZW50UHJpY2UgKyBhdHJEaXN0YW5jZTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIG5ldyBzdG9wIGlzIGxvd2VyIHRoYW4gY3VycmVudCBzdG9wXG4gICAgICAgIGlmIChuZXdTdG9wTG9zcyA+PSBwb3NpdGlvbi5zdG9wTG9zcykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhg8J+TiCBVcGRhdGluZyB0cmFpbGluZyBzdG9wIGZvciAke3Bvc2l0aW9uLnN5bWJvbH06ICR7cG9zaXRpb24uc3RvcExvc3MudG9GaXhlZCgyKX0g4oaSICR7bmV3U3RvcExvc3MudG9GaXhlZCgyKX1gKTtcblxuICAgICAgLy8gU2V0IG5ldyBzdG9wIGxvc3NcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLmJ5Yml0Q2xpZW50LnNldFN0b3BMb3NzKHBvc2l0aW9uLnN5bWJvbCwgbmV3U3RvcExvc3MpO1xuICAgICAgXG4gICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICBwb3NpdGlvbi5zdG9wTG9zcyA9IG5ld1N0b3BMb3NzO1xuICAgICAgICB0aGlzLnBvc2l0aW9ucy5zZXQocG9zaXRpb24uaWQsIHBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5lbWl0KCdwb3NpdGlvbjp0cmFpbGluZycsIHBvc2l0aW9uLCBuZXdTdG9wTG9zcyk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFRyYWlsaW5nIHN0b3AgdXBkYXRlZDogJHtwb3NpdGlvbi5zeW1ib2x9IEAgJHtuZXdTdG9wTG9zcy50b0ZpeGVkKDIpfWApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHVwZGF0ZSB0cmFpbGluZyBzdG9wIGZvciAke3Bvc2l0aW9uLnN5bWJvbH06YCwgZXJyb3IpO1xuICAgICAgdGhpcy5lbWl0KCdwb3NpdGlvbjplcnJvcicsIHBvc2l0aW9uLCBlcnJvciBhcyBFcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRpZ2h0ZW4gc3RvcCBsb3NzIHRvIDAuNSBBVFIgYWZ0ZXIgNDggaG91cnNcbiAgICogQHBhcmFtIHBvc2l0aW9uIC0gUG9zaXRpb24gdG8gdGlnaHRlbiBzdG9wXG4gICAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCBzdWNjZXNzIHN0YXR1c1xuICAgKi9cbiAgcHVibGljIGFzeW5jIHRpZ2h0ZW5TdG9wQWZ0ZXI0OGgocG9zaXRpb246IFBvc2l0aW9uKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIHBvc2l0aW9uIGlzIG9sZGVyIHRoYW4gY29uZmlndXJlZCBob3Vyc1xuICAgICAgY29uc3QgaG91cnNPcGVuID0gKERhdGUubm93KCkgLSBwb3NpdGlvbi5lbnRyeVRpbWUpIC8gKDEwMDAgKiA2MCAqIDYwKTtcbiAgICAgIGlmIChob3Vyc09wZW4gPCB0aGlzLmNvbmZpZy50aWdodGVuQWZ0ZXJIb3Vycykge1xuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIE5vdCBvbGQgZW5vdWdoIHlldFxuICAgICAgfVxuXG4gICAgICBjb25zdCB0aWdodGVuZWREaXN0YW5jZSA9IHBvc2l0aW9uLmF0ciAqIHRoaXMuY29uZmlnLnRpZ2h0ZW5lZFN0b3BEaXN0YW5jZTtcbiAgICAgIGxldCBuZXdTdG9wTG9zczogbnVtYmVyO1xuXG4gICAgICBpZiAocG9zaXRpb24uc2lkZSA9PT0gJ0xPTkcnKSB7XG4gICAgICAgIG5ld1N0b3BMb3NzID0gcG9zaXRpb24uY3VycmVudFByaWNlIC0gdGlnaHRlbmVkRGlzdGFuY2U7XG4gICAgICAgIFxuICAgICAgICAvLyBPbmx5IHRpZ2h0ZW4gaWYgbmV3IHN0b3AgaXMgaGlnaGVyIHRoYW4gY3VycmVudCBzdG9wXG4gICAgICAgIGlmIChuZXdTdG9wTG9zcyA8PSBwb3NpdGlvbi5zdG9wTG9zcykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3U3RvcExvc3MgPSBwb3NpdGlvbi5jdXJyZW50UHJpY2UgKyB0aWdodGVuZWREaXN0YW5jZTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9ubHkgdGlnaHRlbiBpZiBuZXcgc3RvcCBpcyBsb3dlciB0aGFuIGN1cnJlbnQgc3RvcFxuICAgICAgICBpZiAobmV3U3RvcExvc3MgPj0gcG9zaXRpb24uc3RvcExvc3MpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYOKPsCBUaWdodGVuaW5nIHN0b3AgYWZ0ZXIgJHtob3Vyc09wZW4udG9GaXhlZCgxKX1oIGZvciAke3Bvc2l0aW9uLnN5bWJvbH06ICR7cG9zaXRpb24uc3RvcExvc3MudG9GaXhlZCgyKX0g4oaSICR7bmV3U3RvcExvc3MudG9GaXhlZCgyKX1gKTtcblxuICAgICAgLy8gU2V0IHRpZ2h0ZW5lZCBzdG9wIGxvc3NcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLmJ5Yml0Q2xpZW50LnNldFN0b3BMb3NzKHBvc2l0aW9uLnN5bWJvbCwgbmV3U3RvcExvc3MpO1xuICAgICAgXG4gICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICBwb3NpdGlvbi5zdG9wTG9zcyA9IG5ld1N0b3BMb3NzO1xuICAgICAgICB0aGlzLnBvc2l0aW9ucy5zZXQocG9zaXRpb24uaWQsIHBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5lbWl0KCdwb3NpdGlvbjp0aWdodGVuZWQnLCBwb3NpdGlvbiwgbmV3U3RvcExvc3MpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBTdG9wIHRpZ2h0ZW5lZDogJHtwb3NpdGlvbi5zeW1ib2x9IEAgJHtuZXdTdG9wTG9zcy50b0ZpeGVkKDIpfWApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIHRpZ2h0ZW4gc3RvcCBmb3IgJHtwb3NpdGlvbi5zeW1ib2x9OmAsIGVycm9yKTtcbiAgICAgIHRoaXMuZW1pdCgncG9zaXRpb246ZXJyb3InLCBwb3NpdGlvbiwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZSBwb3NpdGlvbiBmb3Igc3RvcC90YXJnZXQgaGl0c1xuICAgKiBAcGFyYW0gcG9zaXRpb24gLSBQb3NpdGlvbiB0byBjbG9zZVxuICAgKiBAcGFyYW0gcmVhc29uIC0gUmVhc29uIGZvciBjbG9zaW5nXG4gICAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCBzdWNjZXNzIHN0YXR1c1xuICAgKi9cbiAgcHVibGljIGFzeW5jIGNsb3NlUG9zaXRpb24ocG9zaXRpb246IFBvc2l0aW9uLCByZWFzb246ICdTVE9QX0hJVCcgfCAnVEFSR0VUX0hJVCcgfCAnTUFOVUFMJyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+aqiBDbG9zaW5nIHBvc2l0aW9uICR7cG9zaXRpb24uc3ltYm9sfSAtIFJlYXNvbjogJHtyZWFzb259YCk7XG5cbiAgICAgIC8vIFBsYWNlIG1hcmtldCBvcmRlciB0byBjbG9zZSBlbnRpcmUgcG9zaXRpb25cbiAgICAgIGNvbnN0IG9yZGVyUGFyYW1zOiBPcmRlclBhcmFtcyA9IHtcbiAgICAgICAgcGhhc2U6ICdwaGFzZTInLFxuICAgICAgICBzeW1ib2w6IHBvc2l0aW9uLnN5bWJvbCxcbiAgICAgICAgc2lkZTogcG9zaXRpb24uc2lkZSA9PT0gJ0xPTkcnID8gJ1NlbGwnIDogJ0J1eScsXG4gICAgICAgIHR5cGU6ICdNQVJLRVQnLFxuICAgICAgICBxdHk6IHBvc2l0aW9uLnF1YW50aXR5LFxuICAgICAgICBsZXZlcmFnZTogcG9zaXRpb24ubGV2ZXJhZ2VcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYnliaXRDbGllbnQucGxhY2VPcmRlcldpdGhSZXRyeShvcmRlclBhcmFtcyk7XG4gICAgICBcbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAnRklMTEVEJykge1xuICAgICAgICAvLyBDYWxjdWxhdGUgcHJvZml0IHBlcmNlbnRhZ2UgYW5kIGhvbGQgdGltZVxuICAgICAgICBjb25zdCBwcm9maXRQZXJjZW50YWdlID0gKChyZXN1bHQucHJpY2UgLSBwb3NpdGlvbi5lbnRyeVByaWNlKSAvIHBvc2l0aW9uLmVudHJ5UHJpY2UpICogMTAwO1xuICAgICAgICBjb25zdCBob2xkVGltZSA9IERhdGUubm93KCkgLSBwb3NpdGlvbi5lbnRyeVRpbWU7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgcG9zaXRpb24gc3RhdHVzXG4gICAgICAgIHBvc2l0aW9uLnN0YXR1cyA9ICdDTE9TRUQnO1xuICAgICAgICBwb3NpdGlvbi5yZWFsaXplZFBuTCArPSAocG9zaXRpb24ucXVhbnRpdHkgKiAocmVzdWx0LnByaWNlIC0gcG9zaXRpb24uZW50cnlQcmljZSkpO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFwIFBvc2l0aW9uTWFuYWdlciBjbG9zZSByZWFzb25zIHRvIExvZ2dlciBjbG9zZSByZWFzb25zXG4gICAgICAgIGNvbnN0IGxvZ2dlclJlYXNvbiA9IHJlYXNvbiA9PT0gJ1NUT1BfSElUJyA/ICdTVE9QX0xPU1MnIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uID09PSAnVEFSR0VUX0hJVCcgPyAnVEFLRV9QUk9GSVQnIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ01BTlVBTCc7XG4gICAgICAgIFxuICAgICAgICAvLyBMb2cgcG9zaXRpb24gY2xvc2UgdG8gc3RydWN0dXJlZCBsb2dnZXJcbiAgICAgICAgbG9nUG9zaXRpb25DbG9zZShcbiAgICAgICAgICBwb3NpdGlvbi5pZCxcbiAgICAgICAgICBwb3NpdGlvbi5zeW1ib2wsXG4gICAgICAgICAgcG9zaXRpb24uc2lkZSxcbiAgICAgICAgICBwb3NpdGlvbi5lbnRyeVByaWNlLFxuICAgICAgICAgIHJlc3VsdC5wcmljZSxcbiAgICAgICAgICBwcm9maXRQZXJjZW50YWdlLFxuICAgICAgICAgIGxvZ2dlclJlYXNvbixcbiAgICAgICAgICBob2xkVGltZSxcbiAgICAgICAgICBwb3NpdGlvbi5yVmFsdWVcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbW92ZSBmcm9tIGFjdGl2ZSBtYW5hZ2VtZW50XG4gICAgICAgIHRoaXMucG9zaXRpb25zLmRlbGV0ZShwb3NpdGlvbi5pZCk7XG4gICAgICAgIHRoaXMuZW1pdCgncG9zaXRpb246Y2xvc2VkJywgcG9zaXRpb24sIHJlYXNvbik7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFBvc2l0aW9uIGNsb3NlZDogJHtwb3NpdGlvbi5zeW1ib2x9IGF0ICR7cmVzdWx0LnByaWNlfSAoJHtyZWFzb259KWApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGNsb3NlIHBvc2l0aW9uICR7cG9zaXRpb24uc3ltYm9sfTpgLCBlcnJvcik7XG4gICAgICBsb2dFcnJvcignRVJST1InLCBgRmFpbGVkIHRvIGNsb3NlIHBvc2l0aW9uICR7cG9zaXRpb24uc3ltYm9sfWAsIHtcbiAgICAgICAgc3ltYm9sOiBwb3NpdGlvbi5zeW1ib2wsXG4gICAgICAgIGNvbXBvbmVudDogJ1Bvc2l0aW9uTWFuYWdlcicsXG4gICAgICAgIGZ1bmN0aW9uOiAnY2xvc2VQb3NpdGlvbicsXG4gICAgICAgIHN0YWNrOiAoZXJyb3IgYXMgRXJyb3IpLnN0YWNrLFxuICAgICAgICBkYXRhOiB7IHBvc2l0aW9uLCByZWFzb24gfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmVtaXQoJ3Bvc2l0aW9uOmVycm9yJywgcG9zaXRpb24sIGVycm9yIGFzIEVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgcG9zaXRpb24gbmVlZHMgbWFuYWdlbWVudCBhY3Rpb25zXG4gICAqIEBwYXJhbSBwb3NpdGlvbiAtIFBvc2l0aW9uIHRvIGNoZWNrXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNoZWNrUG9zaXRpb25NYW5hZ2VtZW50KHBvc2l0aW9uOiBQb3NpdGlvbik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBmb3Igc3RvcC90YXJnZXQgaGl0cyBmaXJzdFxuICAgICAgaWYgKHRoaXMuY2hlY2tTdG9wSGl0KHBvc2l0aW9uKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNsb3NlUG9zaXRpb24ocG9zaXRpb24sICdTVE9QX0hJVCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNoZWNrVGFyZ2V0SGl0KHBvc2l0aW9uKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNsb3NlUG9zaXRpb24ocG9zaXRpb24sICdUQVJHRVRfSElUJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgZm9yIG1hbmFnZW1lbnQgYWN0aW9ucyAoaW4gb3JkZXIgb2YgcHJpb3JpdHkpXG4gICAgICBcbiAgICAgIC8vIDEuIE1vdmUgdG8gYnJlYWtldmVuIGF0IDEuNVJcbiAgICAgIGlmIChwb3NpdGlvbi5yVmFsdWUgPj0gdGhpcy5jb25maWcuYnJlYWtldmVuUkxldmVsICYmIFxuICAgICAgICAgIE1hdGguYWJzKHBvc2l0aW9uLnN0b3BMb3NzIC0gcG9zaXRpb24uZW50cnlQcmljZSkgPiAwLjAxKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubW92ZVN0b3BUb0JyZWFrZXZlbihwb3NpdGlvbik7XG4gICAgICB9XG5cbiAgICAgIC8vIDIuIFRha2UgcGFydGlhbCBwcm9maXQgYXQgMlJcbiAgICAgIGlmIChwb3NpdGlvbi5yVmFsdWUgPj0gdGhpcy5jb25maWcucGFydGlhbFByb2ZpdFJMZXZlbCkge1xuICAgICAgICBhd2FpdCB0aGlzLnRha2VQYXJ0aWFsUHJvZml0KHBvc2l0aW9uKTtcbiAgICAgIH1cblxuICAgICAgLy8gMy4gVXBkYXRlIHRyYWlsaW5nIHN0b3AgaWYgcHJvZml0YWJsZVxuICAgICAgaWYgKHBvc2l0aW9uLnJWYWx1ZSA+IDApIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVUcmFpbGluZ1N0b3AocG9zaXRpb24pO1xuICAgICAgfVxuXG4gICAgICAvLyA0LiBUaWdodGVuIHN0b3AgYWZ0ZXIgNDhoXG4gICAgICBjb25zdCBob3Vyc09wZW4gPSAoRGF0ZS5ub3coKSAtIHBvc2l0aW9uLmVudHJ5VGltZSkgLyAoMTAwMCAqIDYwICogNjApO1xuICAgICAgaWYgKGhvdXJzT3BlbiA+PSB0aGlzLmNvbmZpZy50aWdodGVuQWZ0ZXJIb3Vycykge1xuICAgICAgICBhd2FpdCB0aGlzLnRpZ2h0ZW5TdG9wQWZ0ZXI0OGgocG9zaXRpb24pO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBFcnJvciBpbiBwb3NpdGlvbiBtYW5hZ2VtZW50IGZvciAke3Bvc2l0aW9uLnN5bWJvbH06YCwgZXJyb3IpO1xuICAgICAgdGhpcy5lbWl0KCdwb3NpdGlvbjplcnJvcicsIHBvc2l0aW9uLCBlcnJvciBhcyBFcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHN0b3AgbG9zcyB3YXMgaGl0XG4gICAqIEBwYXJhbSBwb3NpdGlvbiAtIFBvc2l0aW9uIHRvIGNoZWNrXG4gICAqIEByZXR1cm5zIFRydWUgaWYgc3RvcCB3YXMgaGl0XG4gICAqL1xuICBwcml2YXRlIGNoZWNrU3RvcEhpdChwb3NpdGlvbjogUG9zaXRpb24pOiBib29sZWFuIHtcbiAgICBpZiAocG9zaXRpb24uc2lkZSA9PT0gJ0xPTkcnKSB7XG4gICAgICByZXR1cm4gcG9zaXRpb24uY3VycmVudFByaWNlIDw9IHBvc2l0aW9uLnN0b3BMb3NzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcG9zaXRpb24uY3VycmVudFByaWNlID49IHBvc2l0aW9uLnN0b3BMb3NzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0YWtlIHByb2ZpdCB3YXMgaGl0XG4gICAqIEBwYXJhbSBwb3NpdGlvbiAtIFBvc2l0aW9uIHRvIGNoZWNrXG4gICAqIEByZXR1cm5zIFRydWUgaWYgdGFyZ2V0IHdhcyBoaXRcbiAgICovXG4gIHByaXZhdGUgY2hlY2tUYXJnZXRIaXQocG9zaXRpb246IFBvc2l0aW9uKTogYm9vbGVhbiB7XG4gICAgaWYgKHBvc2l0aW9uLnNpZGUgPT09ICdMT05HJykge1xuICAgICAgcmV0dXJuIHBvc2l0aW9uLmN1cnJlbnRQcmljZSA+PSBwb3NpdGlvbi50YWtlUHJvZml0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcG9zaXRpb24uY3VycmVudFByaWNlIDw9IHBvc2l0aW9uLnRha2VQcm9maXQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IG1vbml0b3JpbmcgcG9zaXRpb25zXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0TW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy51cGRhdGVJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnVwZGF0ZUludGVydmFsKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGVBbGxQb3NpdGlvbnMoKTtcbiAgICB9LCB0aGlzLlVQREFURV9GUkVRVUVOQ1kpO1xuXG4gICAgY29uc29sZS5sb2coYPCfk4ogUG9zaXRpb24gTWFuYWdlcjogU3RhcnRlZCBtb25pdG9yaW5nICgke3RoaXMuVVBEQVRFX0ZSRVFVRU5DWX1tcyBpbnRlcnZhbClgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIG1vbml0b3JpbmcgcG9zaXRpb25zXG4gICAqL1xuICBwdWJsaWMgc3RvcE1vbml0b3JpbmcoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudXBkYXRlSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy51cGRhdGVJbnRlcnZhbCk7XG4gICAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgY29uc29sZS5sb2coYPCfk4ogUG9zaXRpb24gTWFuYWdlcjogU3RvcHBlZCBtb25pdG9yaW5nYCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGFsbCBwb3NpdGlvbnMgd2l0aCBjdXJyZW50IG1hcmtldCBkYXRhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHVwZGF0ZUFsbFBvc2l0aW9ucygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBwb3NpdGlvbnMgPSBBcnJheS5mcm9tKHRoaXMucG9zaXRpb25zLnZhbHVlcygpKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIHBvc2l0aW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gR2V0IGN1cnJlbnQgcHJpY2UgZnJvbSBleGNoYW5nZVxuICAgICAgICBjb25zdCBjdXJyZW50UHJpY2UgPSBhd2FpdCB0aGlzLmJ5Yml0Q2xpZW50LmdldEN1cnJlbnRQcmljZShwb3NpdGlvbi5zeW1ib2wpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHVucmVhbGl6ZWQgUCZMXG4gICAgICAgIGNvbnN0IHByaWNlRGlmZiA9IHBvc2l0aW9uLnNpZGUgPT09ICdMT05HJyBcbiAgICAgICAgICA/IGN1cnJlbnRQcmljZSAtIHBvc2l0aW9uLmVudHJ5UHJpY2VcbiAgICAgICAgICA6IHBvc2l0aW9uLmVudHJ5UHJpY2UgLSBjdXJyZW50UHJpY2U7XG4gICAgICAgIGNvbnN0IHVucmVhbGl6ZWRQbkwgPSBwcmljZURpZmYgKiBwb3NpdGlvbi5xdWFudGl0eTtcblxuICAgICAgICAvLyBVcGRhdGUgcG9zaXRpb25cbiAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbih7XG4gICAgICAgICAgaWQ6IHBvc2l0aW9uLmlkLFxuICAgICAgICAgIGN1cnJlbnRQcmljZSxcbiAgICAgICAgICB1bnJlYWxpemVkUG5MLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KTtcblxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIEZhaWxlZCB0byB1cGRhdGUgcG9zaXRpb24gJHtwb3NpdGlvbi5zeW1ib2x9OmAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBvc2l0aW9uIHN0YXRpc3RpY3NcbiAgICogQHJldHVybnMgUG9zaXRpb24gc3RhdGlzdGljc1xuICAgKi9cbiAgcHVibGljIGdldFN0YXRpc3RpY3MoKToge1xuICAgIHRvdGFsUG9zaXRpb25zOiBudW1iZXI7XG4gICAgb3BlblBvc2l0aW9uczogbnVtYmVyO1xuICAgIHRvdGFsVW5yZWFsaXplZFBuTDogbnVtYmVyO1xuICAgIHRvdGFsUmVhbGl6ZWRQbkw6IG51bWJlcjtcbiAgICBhdmVyYWdlUlZhbHVlOiBudW1iZXI7XG4gIH0ge1xuICAgIGNvbnN0IHBvc2l0aW9ucyA9IEFycmF5LmZyb20odGhpcy5wb3NpdGlvbnMudmFsdWVzKCkpO1xuICAgIGNvbnN0IG9wZW5Qb3NpdGlvbnMgPSBwb3NpdGlvbnMuZmlsdGVyKHAgPT4gcC5zdGF0dXMgPT09ICdPUEVOJyk7XG4gICAgXG4gICAgY29uc3QgdG90YWxVbnJlYWxpemVkUG5MID0gb3BlblBvc2l0aW9ucy5yZWR1Y2UoKHN1bSwgcCkgPT4gc3VtICsgcC51bnJlYWxpemVkUG5MLCAwKTtcbiAgICBjb25zdCB0b3RhbFJlYWxpemVkUG5MID0gcG9zaXRpb25zLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwLnJlYWxpemVkUG5MLCAwKTtcbiAgICBjb25zdCBhdmVyYWdlUlZhbHVlID0gb3BlblBvc2l0aW9ucy5sZW5ndGggPiAwIFxuICAgICAgPyBvcGVuUG9zaXRpb25zLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyBwLnJWYWx1ZSwgMCkgLyBvcGVuUG9zaXRpb25zLmxlbmd0aCBcbiAgICAgIDogMDtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFBvc2l0aW9uczogcG9zaXRpb25zLmxlbmd0aCxcbiAgICAgIG9wZW5Qb3NpdGlvbnM6IG9wZW5Qb3NpdGlvbnMubGVuZ3RoLFxuICAgICAgdG90YWxVbnJlYWxpemVkUG5MLFxuICAgICAgdG90YWxSZWFsaXplZFBuTCxcbiAgICAgIGF2ZXJhZ2VSVmFsdWVcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjb25maWd1cmF0aW9uXG4gICAqIEBwYXJhbSBuZXdDb25maWcgLSBOZXcgY29uZmlndXJhdGlvblxuICAgKi9cbiAgcHVibGljIHVwZGF0ZUNvbmZpZyhuZXdDb25maWc6IFBhcnRpYWw8UG9zaXRpb25NYW5hZ2VyQ29uZmlnPik6IHZvaWQge1xuICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZywgLi4ubmV3Q29uZmlnIH07XG4gICAgY29uc29sZS5sb2coYPCfk4ogUG9zaXRpb24gTWFuYWdlcjogQ29uZmlndXJhdGlvbiB1cGRhdGVkYCk7XG4gIH1cblxuICAvKipcbiAgICogRW1lcmdlbmN5IGNsb3NlIGFsbCBwb3NpdGlvbnNcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIHJlc3VsdHNcbiAgICovXG4gIHB1YmxpYyBhc3luYyBlbWVyZ2VuY3lDbG9zZUFsbCgpOiBQcm9taXNlPHsgc3VjY2VzczogbnVtYmVyOyBmYWlsZWQ6IG51bWJlciB9PiB7XG4gICAgY29uc29sZS5sb2coYPCfmqggRW1lcmdlbmN5IGNsb3NpbmcgYWxsIHBvc2l0aW9uc2ApO1xuICAgIFxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IEFycmF5LmZyb20odGhpcy5wb3NpdGlvbnMudmFsdWVzKCkpO1xuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgcG9zaXRpb25zKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNsb3NlUG9zaXRpb24ocG9zaXRpb24sICdNQU5VQUwnKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHN1Y2Nlc3MrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmYWlsZWQrKztcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIEZhaWxlZCB0byBlbWVyZ2VuY3kgY2xvc2UgJHtwb3NpdGlvbi5zeW1ib2x9OmAsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYPCfmqggRW1lcmdlbmN5IGNsb3NlIGNvbXBsZXRlOiAke3N1Y2Nlc3N9IHN1Y2Nlc3MsICR7ZmFpbGVkfSBmYWlsZWRgKTtcbiAgICByZXR1cm4geyBzdWNjZXNzLCBmYWlsZWQgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnVwIHJlc291cmNlc1xuICAgKi9cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5zdG9wTW9uaXRvcmluZygpO1xuICAgIHRoaXMucG9zaXRpb25zLmNsZWFyKCk7XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBQb3NpdGlvbiBNYW5hZ2VyOiBEZXN0cm95ZWRgKTtcbiAgfVxufVxuXG4vLyBFeHBvcnQgZXZlbnQgaW50ZXJmYWNlIGZvciBUeXBlU2NyaXB0XG5leHBvcnQgZGVjbGFyZSBpbnRlcmZhY2UgUG9zaXRpb25NYW5hZ2VyIHtcbiAgb248VSBleHRlbmRzIGtleW9mIFBvc2l0aW9uTWFuYWdlckV2ZW50cz4oZXZlbnQ6IFUsIGxpc3RlbmVyOiBQb3NpdGlvbk1hbmFnZXJFdmVudHNbVV0pOiB0aGlzO1xuICBlbWl0PFUgZXh0ZW5kcyBrZXlvZiBQb3NpdGlvbk1hbmFnZXJFdmVudHM+KGV2ZW50OiBVLCAuLi5hcmdzOiBQYXJhbWV0ZXJzPFBvc2l0aW9uTWFuYWdlckV2ZW50c1tVXT4pOiBib29sZWFuO1xufSJdLCJ2ZXJzaW9uIjozfQ==