894d02605232468b8e14a7cb3bdc0230
"use strict";
/**
 * Unit tests for DrawdownProtector
 * Tests drawdown protection functionality including daily/weekly thresholds, consecutive losses, win rate monitoring
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock BybitPerpsClient
jest.mock('../../src/exchanges/BybitPerpsClient');
const DrawdownProtector_1 = require("../../src/risk/DrawdownProtector");
const BybitPerpsClient_1 = require("../../src/exchanges/BybitPerpsClient");
describe('DrawdownProtector', () => {
    let drawdownProtector;
    let mockBybitClient;
    let mockConfig;
    beforeEach(() => {
        // Create mock client
        mockBybitClient = new BybitPerpsClient_1.BybitPerpsClient('test-key', 'test-secret');
        // Mock client methods
        mockBybitClient.getEquity = jest.fn().mockResolvedValue(10000); // $10,000 starting equity
        mockBybitClient.placeOrderWithRetry = jest.fn().mockResolvedValue({
            orderId: 'test-order-id',
            symbol: 'BTCUSDT',
            side: 'Sell',
            qty: 0.1,
            price: 50000,
            status: 'FILLED',
            timestamp: Date.now()
        });
        // Create test config
        mockConfig = {
            dailyDrawdownThresholds: {
                level1: 0.03, // 3%
                level2: 0.05, // 5%
                level3: 0.07 // 7%
            },
            weeklyDrawdownThreshold: 0.10, // 10%
            consecutiveLossThreshold: 3,
            consecutiveLossReduction: 0.30,
            winRateThreshold: 0.40,
            winRateTradeCount: 20,
            emergencyPauseDuration: 24 * 60 * 60 * 1000, // 24 hours
            leverageReduction: {
                from: 5,
                to: 3
            }
        };
        drawdownProtector = new DrawdownProtector_1.DrawdownProtector(mockBybitClient, mockConfig);
        // Stop monitoring to avoid interference with tests
        drawdownProtector.stopMonitoring();
    });
    afterEach(() => {
        drawdownProtector.destroy();
    });
    describe('Daily Drawdown Protection', () => {
        test('should trigger level 1 protection at 3% drawdown', async () => {
            const startEquity = 10000;
            const currentEquity = 9700; // 3% drawdown
            // Set initial state
            drawdownProtector.setStartOfDayEquity(startEquity);
            const action = await drawdownProtector.checkDailyDrawdown(currentEquity);
            expect(action).toBe('REDUCE_POSITION_SIZES');
            expect(drawdownProtector.getPositionSizeMultiplier()).toBe(0.5);
            const newState = drawdownProtector.getState();
            expect(newState.dailyDrawdown).toBeCloseTo(0.03, 3);
        });
        test('should trigger level 2 protection at 5% drawdown', async () => {
            const startEquity = 10000;
            const currentEquity = 9500; // 5% drawdown
            drawdownProtector.setStartOfDayEquity(startEquity);
            const action = await drawdownProtector.checkDailyDrawdown(currentEquity);
            expect(action).toBe('HALT_NEW_ENTRIES');
            expect(drawdownProtector.canOpenNewPositions()).toBe(false);
        });
        test('should trigger level 3 protection at 7% drawdown', async () => {
            const startEquity = 10000;
            const currentEquity = 9300; // 7% drawdown
            drawdownProtector.setStartOfDayEquity(startEquity);
            const action = await drawdownProtector.checkDailyDrawdown(currentEquity);
            expect(action).toBe('EMERGENCY_FLATTEN');
            expect(drawdownProtector.isEmergencyPaused()).toBe(true);
        });
        test('should reset daily drawdown on new day', async () => {
            const startEquity = 10000;
            const currentEquity = 9700; // 3% drawdown
            // Set initial state for "yesterday"
            drawdownProtector.setStartOfDayEquity(startEquity);
            // Manually set lastUpdate to yesterday to simulate day change
            const state = drawdownProtector.getState();
            const yesterday = Date.now() - (25 * 60 * 60 * 1000); // 25 hours ago
            // We need to access the private state directly for testing
            // Since getState() returns a copy, we need to modify the actual state
            drawdownProtector.state.lastUpdate = yesterday;
            // Check drawdown (should reset for new day)
            await drawdownProtector.checkDailyDrawdown(currentEquity);
            const newState = drawdownProtector.getState();
            // After reset, startOfDayEquity should be set to currentEquity
            expect(newState.startOfDayEquity).toBe(currentEquity);
            expect(newState.dailyDrawdown).toBe(0);
        });
    });
    describe('Weekly Drawdown Protection', () => {
        test('should trigger leverage reduction at 10% weekly drawdown', async () => {
            const startEquity = 10000;
            const currentEquity = 9000; // 10% drawdown
            drawdownProtector.setStartOfWeekEquity(startEquity);
            const action = await drawdownProtector.checkWeeklyDrawdown(currentEquity);
            expect(action).toBe('REDUCE_MAX_LEVERAGE');
            expect(drawdownProtector.getMaxLeverage()).toBe(3); // Reduced from 5x to 3x
        });
        test('should reset weekly drawdown on new week', async () => {
            const startEquity = 10000;
            const currentEquity = 9000; // 10% drawdown
            // Set initial state for "last week"
            drawdownProtector.setStartOfWeekEquity(startEquity);
            // Manually set lastUpdate to last week to simulate week change
            const lastWeek = Date.now() - (8 * 24 * 60 * 60 * 1000); // 8 days ago
            // We need to access the private state directly for testing
            drawdownProtector.state.lastUpdate = lastWeek;
            // Check drawdown (should reset for new week)
            await drawdownProtector.checkWeeklyDrawdown(currentEquity);
            const newState = drawdownProtector.getState();
            // After reset, startOfWeekEquity should be set to currentEquity
            expect(newState.startOfWeekEquity).toBe(currentEquity);
            expect(newState.weeklyDrawdown).toBe(0);
        });
    });
    describe('Consecutive Loss Protection', () => {
        test('should trigger protection after 3 consecutive losses', () => {
            const trades = [
                { id: '1', symbol: 'BTCUSDT', side: 'LONG', entryPrice: 50000, exitPrice: 49000, quantity: 0.1, pnl: -100, isWin: false, timestamp: Date.now() - 3000 },
                { id: '2', symbol: 'ETHUSDT', side: 'SHORT', entryPrice: 3000, exitPrice: 3100, quantity: 1, pnl: -100, isWin: false, timestamp: Date.now() - 2000 },
                { id: '3', symbol: 'BTCUSDT', side: 'LONG', entryPrice: 51000, exitPrice: 50000, quantity: 0.1, pnl: -100, isWin: false, timestamp: Date.now() - 1000 }
            ];
            const action = drawdownProtector.checkConsecutiveLosses(trades);
            expect(action).toBe('CONSECUTIVE_LOSSES');
            expect(drawdownProtector.getPositionSizeMultiplier()).toBeLessThanOrEqual(0.7); // 30% reduction
            const state = drawdownProtector.getState();
            expect(state.consecutiveLosses).toBe(3);
        });
        test('should reset consecutive losses on win', () => {
            const trades = [
                { id: '1', symbol: 'BTCUSDT', side: 'LONG', entryPrice: 50000, exitPrice: 49000, quantity: 0.1, pnl: -100, isWin: false, timestamp: Date.now() - 3000 },
                { id: '2', symbol: 'ETHUSDT', side: 'SHORT', entryPrice: 3000, exitPrice: 3100, quantity: 1, pnl: -100, isWin: false, timestamp: Date.now() - 2000 },
                { id: '3', symbol: 'BTCUSDT', side: 'LONG', entryPrice: 50000, exitPrice: 52000, quantity: 0.1, pnl: 200, isWin: true, timestamp: Date.now() - 1000 }
            ];
            const action = drawdownProtector.checkConsecutiveLosses(trades);
            expect(action).toBeNull();
            const state = drawdownProtector.getState();
            expect(state.consecutiveLosses).toBe(0);
        });
    });
    describe('Win Rate Monitoring', () => {
        test('should trigger strategy degradation warning when win rate < 40%', () => {
            // Create 20 trades with 30% win rate (6 wins, 14 losses)
            const trades = [];
            for (let i = 0; i < 20; i++) {
                const isWin = i < 6; // First 6 are wins, rest are losses
                trades.push({
                    id: `trade-${i}`,
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    entryPrice: 50000,
                    exitPrice: isWin ? 52000 : 49000,
                    quantity: 0.1,
                    pnl: isWin ? 200 : -100,
                    isWin,
                    timestamp: Date.now() - (i * 1000)
                });
            }
            const action = drawdownProtector.checkWinRate(trades);
            expect(action).toBe('STRATEGY_DEGRADATION');
            const state = drawdownProtector.getState();
            expect(state.winRate).toBeCloseTo(0.3, 2); // 30% win rate
        });
        test('should not trigger warning with insufficient trades', () => {
            const trades = [
                { id: '1', symbol: 'BTCUSDT', side: 'LONG', entryPrice: 50000, exitPrice: 49000, quantity: 0.1, pnl: -100, isWin: false, timestamp: Date.now() }
            ];
            const action = drawdownProtector.checkWinRate(trades);
            expect(action).toBeNull();
        });
        test('should not trigger warning with good win rate', () => {
            // Create 20 trades with 60% win rate (12 wins, 8 losses)
            const trades = [];
            for (let i = 0; i < 20; i++) {
                const isWin = i < 12; // First 12 are wins, rest are losses
                trades.push({
                    id: `trade-${i}`,
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    entryPrice: 50000,
                    exitPrice: isWin ? 52000 : 49000,
                    quantity: 0.1,
                    pnl: isWin ? 200 : -100,
                    isWin,
                    timestamp: Date.now() - (i * 1000)
                });
            }
            const action = drawdownProtector.checkWinRate(trades);
            expect(action).toBeNull();
            const state = drawdownProtector.getState();
            expect(state.winRate).toBeCloseTo(0.6, 2); // 60% win rate
        });
    });
    describe('Emergency Flatten', () => {
        test('should close all positions during emergency flatten', async () => {
            const positions = [
                {
                    id: 'pos-1',
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    entryPrice: 50000,
                    currentPrice: 49000,
                    quantity: 0.1,
                    leverage: 5,
                    stopLoss: 48000,
                    takeProfit: 55000,
                    unrealizedPnL: -100,
                    realizedPnL: 0,
                    entryTime: Date.now() - 60000,
                    status: 'OPEN',
                    rValue: -0.5,
                    atr: 1000
                },
                {
                    id: 'pos-2',
                    symbol: 'ETHUSDT',
                    side: 'SHORT',
                    entryPrice: 3000,
                    currentPrice: 3100,
                    quantity: 1,
                    leverage: 3,
                    stopLoss: 3200,
                    takeProfit: 2800,
                    unrealizedPnL: -100,
                    realizedPnL: 0,
                    entryTime: Date.now() - 120000,
                    status: 'OPEN',
                    rValue: -0.5,
                    atr: 50
                }
            ];
            const success = await drawdownProtector.emergencyFlatten(positions);
            expect(success).toBe(true);
            expect(mockBybitClient.placeOrderWithRetry).toHaveBeenCalledTimes(2);
            expect(drawdownProtector.isEmergencyPaused()).toBe(true);
        });
        test('should handle order failures during emergency flatten', async () => {
            // Mock one successful and one failed order
            mockBybitClient.placeOrderWithRetry
                .mockResolvedValueOnce({
                orderId: 'order-1',
                symbol: 'BTCUSDT',
                side: 'Sell',
                qty: 0.1,
                price: 49000,
                status: 'FILLED',
                timestamp: Date.now()
            })
                .mockRejectedValueOnce(new Error('Order failed'));
            const positions = [
                {
                    id: 'pos-1',
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    entryPrice: 50000,
                    currentPrice: 49000,
                    quantity: 0.1,
                    leverage: 5,
                    stopLoss: 48000,
                    takeProfit: 55000,
                    unrealizedPnL: -100,
                    realizedPnL: 0,
                    entryTime: Date.now() - 60000,
                    status: 'OPEN',
                    rValue: -0.5,
                    atr: 1000
                },
                {
                    id: 'pos-2',
                    symbol: 'ETHUSDT',
                    side: 'SHORT',
                    entryPrice: 3000,
                    currentPrice: 3100,
                    quantity: 1,
                    leverage: 3,
                    stopLoss: 3200,
                    takeProfit: 2800,
                    unrealizedPnL: -100,
                    realizedPnL: 0,
                    entryTime: Date.now() - 120000,
                    status: 'OPEN',
                    rValue: -0.5,
                    atr: 50
                }
            ];
            const success = await drawdownProtector.emergencyFlatten(positions);
            expect(success).toBe(false); // Should return false due to one failure
            expect(drawdownProtector.isEmergencyPaused()).toBe(true);
        });
    });
    describe('Trade Tracking', () => {
        test('should add trades and maintain history', () => {
            const trade = {
                id: 'trade-1',
                symbol: 'BTCUSDT',
                side: 'LONG',
                entryPrice: 50000,
                exitPrice: 52000,
                quantity: 0.1,
                pnl: 200,
                isWin: true,
                timestamp: Date.now()
            };
            drawdownProtector.addTrade(trade);
            const state = drawdownProtector.getState();
            expect(state.recentTrades).toHaveLength(1);
            expect(state.recentTrades[0]).toEqual(trade);
        });
        test('should limit trade history to 100 trades', () => {
            // Add 150 trades
            for (let i = 0; i < 150; i++) {
                const trade = {
                    id: `trade-${i}`,
                    symbol: 'BTCUSDT',
                    side: 'LONG',
                    entryPrice: 50000,
                    exitPrice: 52000,
                    quantity: 0.1,
                    pnl: 200,
                    isWin: true,
                    timestamp: Date.now() + i
                };
                drawdownProtector.addTrade(trade);
            }
            const state = drawdownProtector.getState();
            expect(state.recentTrades).toHaveLength(100);
            // The behavior is complex due to slicing and sorting after each addition:
            // 1. Array gets sliced to keep last 100 trades
            // 2. Array gets sorted by timestamp (most recent first) in checkConsecutiveLosses
            // 3. This happens after each trade addition
            // The final result is that we have 100 trades, sorted by timestamp descending
            const firstTradeId = state.recentTrades[0].id;
            const lastTradeId = state.recentTrades[99].id;
            // Should contain 100 trades
            expect(state.recentTrades).toHaveLength(100);
            // First trade should be the most recent one added
            expect(firstTradeId).toBe('trade-149');
            // Due to the complex slicing and sorting behavior, the last trade will be
            // the oldest trade that survived all the operations
            expect(lastTradeId).toBe('trade-0');
        });
    });
    describe('State Management', () => {
        test('should return current state', () => {
            const state = drawdownProtector.getState();
            expect(state).toHaveProperty('currentEquity');
            expect(state).toHaveProperty('dailyDrawdown');
            expect(state).toHaveProperty('weeklyDrawdown');
            expect(state).toHaveProperty('consecutiveLosses');
            expect(state).toHaveProperty('winRate');
            expect(state).toHaveProperty('isEmergencyPaused');
        });
        test('should reset state correctly', () => {
            // Modify state
            const state = drawdownProtector.getState();
            state.dailyDrawdown = 0.05;
            state.consecutiveLosses = 3;
            state.isEmergencyPaused = true;
            // Reset state
            drawdownProtector.resetState();
            const newState = drawdownProtector.getState();
            expect(newState.dailyDrawdown).toBe(0);
            expect(newState.consecutiveLosses).toBe(0);
            expect(newState.isEmergencyPaused).toBe(false);
            expect(newState.positionSizeReduction).toBe(1.0);
        });
        test('should provide statistics', () => {
            const stats = drawdownProtector.getStatistics();
            expect(stats).toHaveProperty('dailyDrawdown');
            expect(stats).toHaveProperty('weeklyDrawdown');
            expect(stats).toHaveProperty('consecutiveLosses');
            expect(stats).toHaveProperty('winRate');
            expect(stats).toHaveProperty('totalTrades');
            expect(stats).toHaveProperty('isEmergencyPaused');
            expect(stats).toHaveProperty('positionSizeReduction');
            expect(stats).toHaveProperty('maxLeverageReduction');
        });
    });
    describe('Configuration', () => {
        test('should update configuration', async () => {
            const newConfig = {
                dailyDrawdownThresholds: {
                    level1: 0.02, // 2%
                    level2: 0.04, // 4%
                    level3: 0.06 // 6%
                }
            };
            drawdownProtector.updateConfig(newConfig);
            // Test that new thresholds are applied
            drawdownProtector.setStartOfDayEquity(10000);
            // Should trigger at 2% now instead of 3%
            await drawdownProtector.checkDailyDrawdown(9800); // 2% drawdown
            expect(drawdownProtector.getPositionSizeMultiplier()).toBe(0.5);
        });
    });
    describe('Emergency Pause Management', () => {
        test('should lift emergency pause after duration expires', () => {
            // Set emergency pause with short duration for testing
            const state = drawdownProtector.getState();
            state.isEmergencyPaused = true;
            state.emergencyPauseUntil = Date.now() + 100; // 100ms
            // Initially should be paused
            expect(state.isEmergencyPaused).toBe(true);
            // Wait for pause to expire
            return new Promise((resolve) => {
                setTimeout(() => {
                    // Calling isEmergencyPaused() should detect expiration and reset
                    expect(drawdownProtector.isEmergencyPaused()).toBe(false);
                    resolve();
                }, 150);
            });
        });
        test('should block new positions during emergency pause', async () => {
            // Trigger emergency pause by setting 7% drawdown
            drawdownProtector.setStartOfDayEquity(10000);
            await drawdownProtector.checkDailyDrawdown(9300); // 7% drawdown triggers emergency flatten
            // Should block new positions
            expect(drawdownProtector.canOpenNewPositions()).toBe(false);
        });
        test('should block new positions when daily drawdown >= 5%', async () => {
            drawdownProtector.setStartOfDayEquity(10000);
            await drawdownProtector.checkDailyDrawdown(9500); // 5% drawdown
            expect(drawdownProtector.canOpenNewPositions()).toBe(false);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2l2YW4vQ29kZS90cmFkaW5nL3RpdGFuL3NlcnZpY2VzL3RpdGFuLXBoYXNlMi1odW50ZXIvdGVzdHMvdW5pdC9EcmF3ZG93blByb3RlY3Rvci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBTUgsd0JBQXdCO0FBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsc0NBQXNDLENBQUMsQ0FBQztBQUxsRCx3RUFBMkc7QUFDM0csMkVBQXdFO0FBTXhFLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7SUFDakMsSUFBSSxpQkFBb0MsQ0FBQztJQUN6QyxJQUFJLGVBQThDLENBQUM7SUFDbkQsSUFBSSxVQUE0QyxDQUFDO0lBRWpELFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxxQkFBcUI7UUFDckIsZUFBZSxHQUFHLElBQUksbUNBQWdCLENBQUMsVUFBVSxFQUFFLGFBQWEsQ0FBa0MsQ0FBQztRQUVuRyxzQkFBc0I7UUFDdEIsZUFBZSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQywwQkFBMEI7UUFDMUYsZUFBZSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQztZQUNoRSxPQUFPLEVBQUUsZUFBZTtZQUN4QixNQUFNLEVBQUUsU0FBUztZQUNqQixJQUFJLEVBQUUsTUFBTTtZQUNaLEdBQUcsRUFBRSxHQUFHO1lBQ1IsS0FBSyxFQUFFLEtBQUs7WUFDWixNQUFNLEVBQUUsUUFBUTtZQUNoQixTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtTQUN0QixDQUFDLENBQUM7UUFFSCxxQkFBcUI7UUFDckIsVUFBVSxHQUFHO1lBQ1gsdUJBQXVCLEVBQUU7Z0JBQ3ZCLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSztnQkFDbkIsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLO2dCQUNuQixNQUFNLEVBQUUsSUFBSSxDQUFFLEtBQUs7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aXZhbi9Db2RlL3RyYWRpbmcvdGl0YW4vc2VydmljZXMvdGl0YW4tcGhhc2UyLWh1bnRlci90ZXN0cy91bml0L0RyYXdkb3duUHJvdGVjdG9yLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IHRlc3RzIGZvciBEcmF3ZG93blByb3RlY3RvclxuICogVGVzdHMgZHJhd2Rvd24gcHJvdGVjdGlvbiBmdW5jdGlvbmFsaXR5IGluY2x1ZGluZyBkYWlseS93ZWVrbHkgdGhyZXNob2xkcywgY29uc2VjdXRpdmUgbG9zc2VzLCB3aW4gcmF0ZSBtb25pdG9yaW5nXG4gKi9cblxuaW1wb3J0IHsgRHJhd2Rvd25Qcm90ZWN0b3IsIERyYXdkb3duUHJvdGVjdG9yQ29uZmlnLCBUcmFkZVJlY29yZCB9IGZyb20gJy4uLy4uL3NyYy9yaXNrL0RyYXdkb3duUHJvdGVjdG9yJztcbmltcG9ydCB7IEJ5Yml0UGVycHNDbGllbnQgfSBmcm9tICcuLi8uLi9zcmMvZXhjaGFuZ2VzL0J5Yml0UGVycHNDbGllbnQnO1xuaW1wb3J0IHsgUG9zaXRpb24gfSBmcm9tICcuLi8uLi9zcmMvdHlwZXMnO1xuXG4vLyBNb2NrIEJ5Yml0UGVycHNDbGllbnRcbmplc3QubW9jaygnLi4vLi4vc3JjL2V4Y2hhbmdlcy9CeWJpdFBlcnBzQ2xpZW50Jyk7XG5cbmRlc2NyaWJlKCdEcmF3ZG93blByb3RlY3RvcicsICgpID0+IHtcbiAgbGV0IGRyYXdkb3duUHJvdGVjdG9yOiBEcmF3ZG93blByb3RlY3RvcjtcbiAgbGV0IG1vY2tCeWJpdENsaWVudDogamVzdC5Nb2NrZWQ8QnliaXRQZXJwc0NsaWVudD47XG4gIGxldCBtb2NrQ29uZmlnOiBQYXJ0aWFsPERyYXdkb3duUHJvdGVjdG9yQ29uZmlnPjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBDcmVhdGUgbW9jayBjbGllbnRcbiAgICBtb2NrQnliaXRDbGllbnQgPSBuZXcgQnliaXRQZXJwc0NsaWVudCgndGVzdC1rZXknLCAndGVzdC1zZWNyZXQnKSBhcyBqZXN0Lk1vY2tlZDxCeWJpdFBlcnBzQ2xpZW50PjtcbiAgICBcbiAgICAvLyBNb2NrIGNsaWVudCBtZXRob2RzXG4gICAgbW9ja0J5Yml0Q2xpZW50LmdldEVxdWl0eSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgxMDAwMCk7IC8vICQxMCwwMDAgc3RhcnRpbmcgZXF1aXR5XG4gICAgbW9ja0J5Yml0Q2xpZW50LnBsYWNlT3JkZXJXaXRoUmV0cnkgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgb3JkZXJJZDogJ3Rlc3Qtb3JkZXItaWQnLFxuICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICBzaWRlOiAnU2VsbCcsXG4gICAgICBxdHk6IDAuMSxcbiAgICAgIHByaWNlOiA1MDAwMCxcbiAgICAgIHN0YXR1czogJ0ZJTExFRCcsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSB0ZXN0IGNvbmZpZ1xuICAgIG1vY2tDb25maWcgPSB7XG4gICAgICBkYWlseURyYXdkb3duVGhyZXNob2xkczoge1xuICAgICAgICBsZXZlbDE6IDAuMDMsIC8vIDMlXG4gICAgICAgIGxldmVsMjogMC4wNSwgLy8gNSVcbiAgICAgICAgbGV2ZWwzOiAwLjA3ICAvLyA3JVxuICAgICAgfSxcbiAgICAgIHdlZWtseURyYXdkb3duVGhyZXNob2xkOiAwLjEwLCAvLyAxMCVcbiAgICAgIGNvbnNlY3V0aXZlTG9zc1RocmVzaG9sZDogMyxcbiAgICAgIGNvbnNlY3V0aXZlTG9zc1JlZHVjdGlvbjogMC4zMCxcbiAgICAgIHdpblJhdGVUaHJlc2hvbGQ6IDAuNDAsXG4gICAgICB3aW5SYXRlVHJhZGVDb3VudDogMjAsXG4gICAgICBlbWVyZ2VuY3lQYXVzZUR1cmF0aW9uOiAyNCAqIDYwICogNjAgKiAxMDAwLCAvLyAyNCBob3Vyc1xuICAgICAgbGV2ZXJhZ2VSZWR1Y3Rpb246IHtcbiAgICAgICAgZnJvbTogNSxcbiAgICAgICAgdG86IDNcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZHJhd2Rvd25Qcm90ZWN0b3IgPSBuZXcgRHJhd2Rvd25Qcm90ZWN0b3IobW9ja0J5Yml0Q2xpZW50LCBtb2NrQ29uZmlnKTtcbiAgICBcbiAgICAvLyBTdG9wIG1vbml0b3JpbmcgdG8gYXZvaWQgaW50ZXJmZXJlbmNlIHdpdGggdGVzdHNcbiAgICBkcmF3ZG93blByb3RlY3Rvci5zdG9wTW9uaXRvcmluZygpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGRyYXdkb3duUHJvdGVjdG9yLmRlc3Ryb3koKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RhaWx5IERyYXdkb3duIFByb3RlY3Rpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHRyaWdnZXIgbGV2ZWwgMSBwcm90ZWN0aW9uIGF0IDMlIGRyYXdkb3duJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRFcXVpdHkgPSAxMDAwMDtcbiAgICAgIGNvbnN0IGN1cnJlbnRFcXVpdHkgPSA5NzAwOyAvLyAzJSBkcmF3ZG93blxuICAgICAgXG4gICAgICAvLyBTZXQgaW5pdGlhbCBzdGF0ZVxuICAgICAgZHJhd2Rvd25Qcm90ZWN0b3Iuc2V0U3RhcnRPZkRheUVxdWl0eShzdGFydEVxdWl0eSk7XG5cbiAgICAgIGNvbnN0IGFjdGlvbiA9IGF3YWl0IGRyYXdkb3duUHJvdGVjdG9yLmNoZWNrRGFpbHlEcmF3ZG93bihjdXJyZW50RXF1aXR5KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFjdGlvbikudG9CZSgnUkVEVUNFX1BPU0lUSU9OX1NJWkVTJyk7XG4gICAgICBleHBlY3QoZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0UG9zaXRpb25TaXplTXVsdGlwbGllcigpKS50b0JlKDAuNSk7XG4gICAgICBcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0U3RhdGUoKTtcbiAgICAgIGV4cGVjdChuZXdTdGF0ZS5kYWlseURyYXdkb3duKS50b0JlQ2xvc2VUbygwLjAzLCAzKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB0cmlnZ2VyIGxldmVsIDIgcHJvdGVjdGlvbiBhdCA1JSBkcmF3ZG93bicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0RXF1aXR5ID0gMTAwMDA7XG4gICAgICBjb25zdCBjdXJyZW50RXF1aXR5ID0gOTUwMDsgLy8gNSUgZHJhd2Rvd25cbiAgICAgIFxuICAgICAgZHJhd2Rvd25Qcm90ZWN0b3Iuc2V0U3RhcnRPZkRheUVxdWl0eShzdGFydEVxdWl0eSk7XG5cbiAgICAgIGNvbnN0IGFjdGlvbiA9IGF3YWl0IGRyYXdkb3duUHJvdGVjdG9yLmNoZWNrRGFpbHlEcmF3ZG93bihjdXJyZW50RXF1aXR5KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFjdGlvbikudG9CZSgnSEFMVF9ORVdfRU5UUklFUycpO1xuICAgICAgZXhwZWN0KGRyYXdkb3duUHJvdGVjdG9yLmNhbk9wZW5OZXdQb3NpdGlvbnMoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdHJpZ2dlciBsZXZlbCAzIHByb3RlY3Rpb24gYXQgNyUgZHJhd2Rvd24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydEVxdWl0eSA9IDEwMDAwO1xuICAgICAgY29uc3QgY3VycmVudEVxdWl0eSA9IDkzMDA7IC8vIDclIGRyYXdkb3duXG4gICAgICBcbiAgICAgIGRyYXdkb3duUHJvdGVjdG9yLnNldFN0YXJ0T2ZEYXlFcXVpdHkoc3RhcnRFcXVpdHkpO1xuXG4gICAgICBjb25zdCBhY3Rpb24gPSBhd2FpdCBkcmF3ZG93blByb3RlY3Rvci5jaGVja0RhaWx5RHJhd2Rvd24oY3VycmVudEVxdWl0eSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChhY3Rpb24pLnRvQmUoJ0VNRVJHRU5DWV9GTEFUVEVOJyk7XG4gICAgICBleHBlY3QoZHJhd2Rvd25Qcm90ZWN0b3IuaXNFbWVyZ2VuY3lQYXVzZWQoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXNldCBkYWlseSBkcmF3ZG93biBvbiBuZXcgZGF5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRFcXVpdHkgPSAxMDAwMDtcbiAgICAgIGNvbnN0IGN1cnJlbnRFcXVpdHkgPSA5NzAwOyAvLyAzJSBkcmF3ZG93blxuICAgICAgXG4gICAgICAvLyBTZXQgaW5pdGlhbCBzdGF0ZSBmb3IgXCJ5ZXN0ZXJkYXlcIlxuICAgICAgZHJhd2Rvd25Qcm90ZWN0b3Iuc2V0U3RhcnRPZkRheUVxdWl0eShzdGFydEVxdWl0eSk7XG4gICAgICBcbiAgICAgIC8vIE1hbnVhbGx5IHNldCBsYXN0VXBkYXRlIHRvIHllc3RlcmRheSB0byBzaW11bGF0ZSBkYXkgY2hhbmdlXG4gICAgICBjb25zdCBzdGF0ZSA9IGRyYXdkb3duUHJvdGVjdG9yLmdldFN0YXRlKCk7XG4gICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBEYXRlLm5vdygpIC0gKDI1ICogNjAgKiA2MCAqIDEwMDApOyAvLyAyNSBob3VycyBhZ29cbiAgICAgIFxuICAgICAgLy8gV2UgbmVlZCB0byBhY2Nlc3MgdGhlIHByaXZhdGUgc3RhdGUgZGlyZWN0bHkgZm9yIHRlc3RpbmdcbiAgICAgIC8vIFNpbmNlIGdldFN0YXRlKCkgcmV0dXJucyBhIGNvcHksIHdlIG5lZWQgdG8gbW9kaWZ5IHRoZSBhY3R1YWwgc3RhdGVcbiAgICAgIChkcmF3ZG93blByb3RlY3RvciBhcyBhbnkpLnN0YXRlLmxhc3RVcGRhdGUgPSB5ZXN0ZXJkYXk7XG5cbiAgICAgIC8vIENoZWNrIGRyYXdkb3duIChzaG91bGQgcmVzZXQgZm9yIG5ldyBkYXkpXG4gICAgICBhd2FpdCBkcmF3ZG93blByb3RlY3Rvci5jaGVja0RhaWx5RHJhd2Rvd24oY3VycmVudEVxdWl0eSk7XG4gICAgICBcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0U3RhdGUoKTtcbiAgICAgIC8vIEFmdGVyIHJlc2V0LCBzdGFydE9mRGF5RXF1aXR5IHNob3VsZCBiZSBzZXQgdG8gY3VycmVudEVxdWl0eVxuICAgICAgZXhwZWN0KG5ld1N0YXRlLnN0YXJ0T2ZEYXlFcXVpdHkpLnRvQmUoY3VycmVudEVxdWl0eSk7XG4gICAgICBleHBlY3QobmV3U3RhdGUuZGFpbHlEcmF3ZG93bikudG9CZSgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1dlZWtseSBEcmF3ZG93biBQcm90ZWN0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB0cmlnZ2VyIGxldmVyYWdlIHJlZHVjdGlvbiBhdCAxMCUgd2Vla2x5IGRyYXdkb3duJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRFcXVpdHkgPSAxMDAwMDtcbiAgICAgIGNvbnN0IGN1cnJlbnRFcXVpdHkgPSA5MDAwOyAvLyAxMCUgZHJhd2Rvd25cbiAgICAgIFxuICAgICAgZHJhd2Rvd25Qcm90ZWN0b3Iuc2V0U3RhcnRPZldlZWtFcXVpdHkoc3RhcnRFcXVpdHkpO1xuXG4gICAgICBjb25zdCBhY3Rpb24gPSBhd2FpdCBkcmF3ZG93blByb3RlY3Rvci5jaGVja1dlZWtseURyYXdkb3duKGN1cnJlbnRFcXVpdHkpO1xuICAgICAgXG4gICAgICBleHBlY3QoYWN0aW9uKS50b0JlKCdSRURVQ0VfTUFYX0xFVkVSQUdFJyk7XG4gICAgICBleHBlY3QoZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0TWF4TGV2ZXJhZ2UoKSkudG9CZSgzKTsgLy8gUmVkdWNlZCBmcm9tIDV4IHRvIDN4XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVzZXQgd2Vla2x5IGRyYXdkb3duIG9uIG5ldyB3ZWVrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRFcXVpdHkgPSAxMDAwMDtcbiAgICAgIGNvbnN0IGN1cnJlbnRFcXVpdHkgPSA5MDAwOyAvLyAxMCUgZHJhd2Rvd25cbiAgICAgIFxuICAgICAgLy8gU2V0IGluaXRpYWwgc3RhdGUgZm9yIFwibGFzdCB3ZWVrXCJcbiAgICAgIGRyYXdkb3duUHJvdGVjdG9yLnNldFN0YXJ0T2ZXZWVrRXF1aXR5KHN0YXJ0RXF1aXR5KTtcbiAgICAgIFxuICAgICAgLy8gTWFudWFsbHkgc2V0IGxhc3RVcGRhdGUgdG8gbGFzdCB3ZWVrIHRvIHNpbXVsYXRlIHdlZWsgY2hhbmdlXG4gICAgICBjb25zdCBsYXN0V2VlayA9IERhdGUubm93KCkgLSAoOCAqIDI0ICogNjAgKiA2MCAqIDEwMDApOyAvLyA4IGRheXMgYWdvXG4gICAgICBcbiAgICAgIC8vIFdlIG5lZWQgdG8gYWNjZXNzIHRoZSBwcml2YXRlIHN0YXRlIGRpcmVjdGx5IGZvciB0ZXN0aW5nXG4gICAgICAoZHJhd2Rvd25Qcm90ZWN0b3IgYXMgYW55KS5zdGF0ZS5sYXN0VXBkYXRlID0gbGFzdFdlZWs7XG5cbiAgICAgIC8vIENoZWNrIGRyYXdkb3duIChzaG91bGQgcmVzZXQgZm9yIG5ldyB3ZWVrKVxuICAgICAgYXdhaXQgZHJhd2Rvd25Qcm90ZWN0b3IuY2hlY2tXZWVrbHlEcmF3ZG93bihjdXJyZW50RXF1aXR5KTtcbiAgICAgIFxuICAgICAgY29uc3QgbmV3U3RhdGUgPSBkcmF3ZG93blByb3RlY3Rvci5nZXRTdGF0ZSgpO1xuICAgICAgLy8gQWZ0ZXIgcmVzZXQsIHN0YXJ0T2ZXZWVrRXF1aXR5IHNob3VsZCBiZSBzZXQgdG8gY3VycmVudEVxdWl0eVxuICAgICAgZXhwZWN0KG5ld1N0YXRlLnN0YXJ0T2ZXZWVrRXF1aXR5KS50b0JlKGN1cnJlbnRFcXVpdHkpO1xuICAgICAgZXhwZWN0KG5ld1N0YXRlLndlZWtseURyYXdkb3duKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29uc2VjdXRpdmUgTG9zcyBQcm90ZWN0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB0cmlnZ2VyIHByb3RlY3Rpb24gYWZ0ZXIgMyBjb25zZWN1dGl2ZSBsb3NzZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFkZXM6IFRyYWRlUmVjb3JkW10gPSBbXG4gICAgICAgIHsgaWQ6ICcxJywgc3ltYm9sOiAnQlRDVVNEVCcsIHNpZGU6ICdMT05HJywgZW50cnlQcmljZTogNTAwMDAsIGV4aXRQcmljZTogNDkwMDAsIHF1YW50aXR5OiAwLjEsIHBubDogLTEwMCwgaXNXaW46IGZhbHNlLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAzMDAwIH0sXG4gICAgICAgIHsgaWQ6ICcyJywgc3ltYm9sOiAnRVRIVVNEVCcsIHNpZGU6ICdTSE9SVCcsIGVudHJ5UHJpY2U6IDMwMDAsIGV4aXRQcmljZTogMzEwMCwgcXVhbnRpdHk6IDEsIHBubDogLTEwMCwgaXNXaW46IGZhbHNlLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAyMDAwIH0sXG4gICAgICAgIHsgaWQ6ICczJywgc3ltYm9sOiAnQlRDVVNEVCcsIHNpZGU6ICdMT05HJywgZW50cnlQcmljZTogNTEwMDAsIGV4aXRQcmljZTogNTAwMDAsIHF1YW50aXR5OiAwLjEsIHBubDogLTEwMCwgaXNXaW46IGZhbHNlLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAxMDAwIH1cbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGFjdGlvbiA9IGRyYXdkb3duUHJvdGVjdG9yLmNoZWNrQ29uc2VjdXRpdmVMb3NzZXModHJhZGVzKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFjdGlvbikudG9CZSgnQ09OU0VDVVRJVkVfTE9TU0VTJyk7XG4gICAgICBleHBlY3QoZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0UG9zaXRpb25TaXplTXVsdGlwbGllcigpKS50b0JlTGVzc1RoYW5PckVxdWFsKDAuNyk7IC8vIDMwJSByZWR1Y3Rpb25cbiAgICAgIFxuICAgICAgY29uc3Qgc3RhdGUgPSBkcmF3ZG93blByb3RlY3Rvci5nZXRTdGF0ZSgpO1xuICAgICAgZXhwZWN0KHN0YXRlLmNvbnNlY3V0aXZlTG9zc2VzKS50b0JlKDMpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlc2V0IGNvbnNlY3V0aXZlIGxvc3NlcyBvbiB3aW4nLCAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFkZXM6IFRyYWRlUmVjb3JkW10gPSBbXG4gICAgICAgIHsgaWQ6ICcxJywgc3ltYm9sOiAnQlRDVVNEVCcsIHNpZGU6ICdMT05HJywgZW50cnlQcmljZTogNTAwMDAsIGV4aXRQcmljZTogNDkwMDAsIHF1YW50aXR5OiAwLjEsIHBubDogLTEwMCwgaXNXaW46IGZhbHNlLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAzMDAwIH0sXG4gICAgICAgIHsgaWQ6ICcyJywgc3ltYm9sOiAnRVRIVVNEVCcsIHNpZGU6ICdTSE9SVCcsIGVudHJ5UHJpY2U6IDMwMDAsIGV4aXRQcmljZTogMzEwMCwgcXVhbnRpdHk6IDEsIHBubDogLTEwMCwgaXNXaW46IGZhbHNlLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAyMDAwIH0sXG4gICAgICAgIHsgaWQ6ICczJywgc3ltYm9sOiAnQlRDVVNEVCcsIHNpZGU6ICdMT05HJywgZW50cnlQcmljZTogNTAwMDAsIGV4aXRQcmljZTogNTIwMDAsIHF1YW50aXR5OiAwLjEsIHBubDogMjAwLCBpc1dpbjogdHJ1ZSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gMTAwMCB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBhY3Rpb24gPSBkcmF3ZG93blByb3RlY3Rvci5jaGVja0NvbnNlY3V0aXZlTG9zc2VzKHRyYWRlcyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChhY3Rpb24pLnRvQmVOdWxsKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXRlID0gZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0U3RhdGUoKTtcbiAgICAgIGV4cGVjdChzdGF0ZS5jb25zZWN1dGl2ZUxvc3NlcykudG9CZSgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1dpbiBSYXRlIE1vbml0b3JpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHRyaWdnZXIgc3RyYXRlZ3kgZGVncmFkYXRpb24gd2FybmluZyB3aGVuIHdpbiByYXRlIDwgNDAlJywgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIDIwIHRyYWRlcyB3aXRoIDMwJSB3aW4gcmF0ZSAoNiB3aW5zLCAxNCBsb3NzZXMpXG4gICAgICBjb25zdCB0cmFkZXM6IFRyYWRlUmVjb3JkW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykge1xuICAgICAgICBjb25zdCBpc1dpbiA9IGkgPCA2OyAvLyBGaXJzdCA2IGFyZSB3aW5zLCByZXN0IGFyZSBsb3NzZXNcbiAgICAgICAgdHJhZGVzLnB1c2goe1xuICAgICAgICAgIGlkOiBgdHJhZGUtJHtpfWAsXG4gICAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgICAgc2lkZTogJ0xPTkcnLFxuICAgICAgICAgIGVudHJ5UHJpY2U6IDUwMDAwLFxuICAgICAgICAgIGV4aXRQcmljZTogaXNXaW4gPyA1MjAwMCA6IDQ5MDAwLFxuICAgICAgICAgIHF1YW50aXR5OiAwLjEsXG4gICAgICAgICAgcG5sOiBpc1dpbiA/IDIwMCA6IC0xMDAsXG4gICAgICAgICAgaXNXaW4sXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gKGkgKiAxMDAwKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWN0aW9uID0gZHJhd2Rvd25Qcm90ZWN0b3IuY2hlY2tXaW5SYXRlKHRyYWRlcyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChhY3Rpb24pLnRvQmUoJ1NUUkFURUdZX0RFR1JBREFUSU9OJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXRlID0gZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0U3RhdGUoKTtcbiAgICAgIGV4cGVjdChzdGF0ZS53aW5SYXRlKS50b0JlQ2xvc2VUbygwLjMsIDIpOyAvLyAzMCUgd2luIHJhdGVcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBub3QgdHJpZ2dlciB3YXJuaW5nIHdpdGggaW5zdWZmaWNpZW50IHRyYWRlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHRyYWRlczogVHJhZGVSZWNvcmRbXSA9IFtcbiAgICAgICAgeyBpZDogJzEnLCBzeW1ib2w6ICdCVENVU0RUJywgc2lkZTogJ0xPTkcnLCBlbnRyeVByaWNlOiA1MDAwMCwgZXhpdFByaWNlOiA0OTAwMCwgcXVhbnRpdHk6IDAuMSwgcG5sOiAtMTAwLCBpc1dpbjogZmFsc2UsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBhY3Rpb24gPSBkcmF3ZG93blByb3RlY3Rvci5jaGVja1dpblJhdGUodHJhZGVzKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFjdGlvbikudG9CZU51bGwoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBub3QgdHJpZ2dlciB3YXJuaW5nIHdpdGggZ29vZCB3aW4gcmF0ZScsICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSAyMCB0cmFkZXMgd2l0aCA2MCUgd2luIHJhdGUgKDEyIHdpbnMsIDggbG9zc2VzKVxuICAgICAgY29uc3QgdHJhZGVzOiBUcmFkZVJlY29yZFtdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDIwOyBpKyspIHtcbiAgICAgICAgY29uc3QgaXNXaW4gPSBpIDwgMTI7IC8vIEZpcnN0IDEyIGFyZSB3aW5zLCByZXN0IGFyZSBsb3NzZXNcbiAgICAgICAgdHJhZGVzLnB1c2goe1xuICAgICAgICAgIGlkOiBgdHJhZGUtJHtpfWAsXG4gICAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgICAgc2lkZTogJ0xPTkcnLFxuICAgICAgICAgIGVudHJ5UHJpY2U6IDUwMDAwLFxuICAgICAgICAgIGV4aXRQcmljZTogaXNXaW4gPyA1MjAwMCA6IDQ5MDAwLFxuICAgICAgICAgIHF1YW50aXR5OiAwLjEsXG4gICAgICAgICAgcG5sOiBpc1dpbiA/IDIwMCA6IC0xMDAsXG4gICAgICAgICAgaXNXaW4sXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIC0gKGkgKiAxMDAwKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWN0aW9uID0gZHJhd2Rvd25Qcm90ZWN0b3IuY2hlY2tXaW5SYXRlKHRyYWRlcyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChhY3Rpb24pLnRvQmVOdWxsKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXRlID0gZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0U3RhdGUoKTtcbiAgICAgIGV4cGVjdChzdGF0ZS53aW5SYXRlKS50b0JlQ2xvc2VUbygwLjYsIDIpOyAvLyA2MCUgd2luIHJhdGVcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VtZXJnZW5jeSBGbGF0dGVuJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjbG9zZSBhbGwgcG9zaXRpb25zIGR1cmluZyBlbWVyZ2VuY3kgZmxhdHRlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uczogUG9zaXRpb25bXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncG9zLTEnLFxuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHNpZGU6ICdMT05HJyxcbiAgICAgICAgICBlbnRyeVByaWNlOiA1MDAwMCxcbiAgICAgICAgICBjdXJyZW50UHJpY2U6IDQ5MDAwLFxuICAgICAgICAgIHF1YW50aXR5OiAwLjEsXG4gICAgICAgICAgbGV2ZXJhZ2U6IDUsXG4gICAgICAgICAgc3RvcExvc3M6IDQ4MDAwLFxuICAgICAgICAgIHRha2VQcm9maXQ6IDU1MDAwLFxuICAgICAgICAgIHVucmVhbGl6ZWRQbkw6IC0xMDAsXG4gICAgICAgICAgcmVhbGl6ZWRQbkw6IDAsXG4gICAgICAgICAgZW50cnlUaW1lOiBEYXRlLm5vdygpIC0gNjAwMDAsXG4gICAgICAgICAgc3RhdHVzOiAnT1BFTicsXG4gICAgICAgICAgclZhbHVlOiAtMC41LFxuICAgICAgICAgIGF0cjogMTAwMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwb3MtMicsXG4gICAgICAgICAgc3ltYm9sOiAnRVRIVVNEVCcsXG4gICAgICAgICAgc2lkZTogJ1NIT1JUJyxcbiAgICAgICAgICBlbnRyeVByaWNlOiAzMDAwLFxuICAgICAgICAgIGN1cnJlbnRQcmljZTogMzEwMCxcbiAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICBsZXZlcmFnZTogMyxcbiAgICAgICAgICBzdG9wTG9zczogMzIwMCxcbiAgICAgICAgICB0YWtlUHJvZml0OiAyODAwLFxuICAgICAgICAgIHVucmVhbGl6ZWRQbkw6IC0xMDAsXG4gICAgICAgICAgcmVhbGl6ZWRQbkw6IDAsXG4gICAgICAgICAgZW50cnlUaW1lOiBEYXRlLm5vdygpIC0gMTIwMDAwLFxuICAgICAgICAgIHN0YXR1czogJ09QRU4nLFxuICAgICAgICAgIHJWYWx1ZTogLTAuNSxcbiAgICAgICAgICBhdHI6IDUwXG4gICAgICAgIH1cbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCBkcmF3ZG93blByb3RlY3Rvci5lbWVyZ2VuY3lGbGF0dGVuKHBvc2l0aW9ucyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tCeWJpdENsaWVudC5wbGFjZU9yZGVyV2l0aFJldHJ5KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XG4gICAgICBleHBlY3QoZHJhd2Rvd25Qcm90ZWN0b3IuaXNFbWVyZ2VuY3lQYXVzZWQoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgb3JkZXIgZmFpbHVyZXMgZHVyaW5nIGVtZXJnZW5jeSBmbGF0dGVuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBvbmUgc3VjY2Vzc2Z1bCBhbmQgb25lIGZhaWxlZCBvcmRlclxuICAgICAgbW9ja0J5Yml0Q2xpZW50LnBsYWNlT3JkZXJXaXRoUmV0cnlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb3JkZXJJZDogJ29yZGVyLTEnLFxuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHNpZGU6ICdTZWxsJyxcbiAgICAgICAgICBxdHk6IDAuMSxcbiAgICAgICAgICBwcmljZTogNDkwMDAsXG4gICAgICAgICAgc3RhdHVzOiAnRklMTEVEJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ09yZGVyIGZhaWxlZCcpKTtcblxuICAgICAgY29uc3QgcG9zaXRpb25zOiBQb3NpdGlvbltdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwb3MtMScsXG4gICAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgICAgc2lkZTogJ0xPTkcnLFxuICAgICAgICAgIGVudHJ5UHJpY2U6IDUwMDAwLFxuICAgICAgICAgIGN1cnJlbnRQcmljZTogNDkwMDAsXG4gICAgICAgICAgcXVhbnRpdHk6IDAuMSxcbiAgICAgICAgICBsZXZlcmFnZTogNSxcbiAgICAgICAgICBzdG9wTG9zczogNDgwMDAsXG4gICAgICAgICAgdGFrZVByb2ZpdDogNTUwMDAsXG4gICAgICAgICAgdW5yZWFsaXplZFBuTDogLTEwMCxcbiAgICAgICAgICByZWFsaXplZFBuTDogMCxcbiAgICAgICAgICBlbnRyeVRpbWU6IERhdGUubm93KCkgLSA2MDAwMCxcbiAgICAgICAgICBzdGF0dXM6ICdPUEVOJyxcbiAgICAgICAgICByVmFsdWU6IC0wLjUsXG4gICAgICAgICAgYXRyOiAxMDAwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3Bvcy0yJyxcbiAgICAgICAgICBzeW1ib2w6ICdFVEhVU0RUJyxcbiAgICAgICAgICBzaWRlOiAnU0hPUlQnLFxuICAgICAgICAgIGVudHJ5UHJpY2U6IDMwMDAsXG4gICAgICAgICAgY3VycmVudFByaWNlOiAzMTAwLFxuICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgIGxldmVyYWdlOiAzLFxuICAgICAgICAgIHN0b3BMb3NzOiAzMjAwLFxuICAgICAgICAgIHRha2VQcm9maXQ6IDI4MDAsXG4gICAgICAgICAgdW5yZWFsaXplZFBuTDogLTEwMCxcbiAgICAgICAgICByZWFsaXplZFBuTDogMCxcbiAgICAgICAgICBlbnRyeVRpbWU6IERhdGUubm93KCkgLSAxMjAwMDAsXG4gICAgICAgICAgc3RhdHVzOiAnT1BFTicsXG4gICAgICAgICAgclZhbHVlOiAtMC41LFxuICAgICAgICAgIGF0cjogNTBcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IGRyYXdkb3duUHJvdGVjdG9yLmVtZXJnZW5jeUZsYXR0ZW4ocG9zaXRpb25zKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN1Y2Nlc3MpLnRvQmUoZmFsc2UpOyAvLyBTaG91bGQgcmV0dXJuIGZhbHNlIGR1ZSB0byBvbmUgZmFpbHVyZVxuICAgICAgZXhwZWN0KGRyYXdkb3duUHJvdGVjdG9yLmlzRW1lcmdlbmN5UGF1c2VkKCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUcmFkZSBUcmFja2luZycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgYWRkIHRyYWRlcyBhbmQgbWFpbnRhaW4gaGlzdG9yeScsICgpID0+IHtcbiAgICAgIGNvbnN0IHRyYWRlOiBUcmFkZVJlY29yZCA9IHtcbiAgICAgICAgaWQ6ICd0cmFkZS0xJyxcbiAgICAgICAgc3ltYm9sOiAnQlRDVVNEVCcsXG4gICAgICAgIHNpZGU6ICdMT05HJyxcbiAgICAgICAgZW50cnlQcmljZTogNTAwMDAsXG4gICAgICAgIGV4aXRQcmljZTogNTIwMDAsXG4gICAgICAgIHF1YW50aXR5OiAwLjEsXG4gICAgICAgIHBubDogMjAwLFxuICAgICAgICBpc1dpbjogdHJ1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9O1xuXG4gICAgICBkcmF3ZG93blByb3RlY3Rvci5hZGRUcmFkZSh0cmFkZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXRlID0gZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0U3RhdGUoKTtcbiAgICAgIGV4cGVjdChzdGF0ZS5yZWNlbnRUcmFkZXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChzdGF0ZS5yZWNlbnRUcmFkZXNbMF0pLnRvRXF1YWwodHJhZGUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGxpbWl0IHRyYWRlIGhpc3RvcnkgdG8gMTAwIHRyYWRlcycsICgpID0+IHtcbiAgICAgIC8vIEFkZCAxNTAgdHJhZGVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE1MDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHRyYWRlOiBUcmFkZVJlY29yZCA9IHtcbiAgICAgICAgICBpZDogYHRyYWRlLSR7aX1gLFxuICAgICAgICAgIHN5bWJvbDogJ0JUQ1VTRFQnLFxuICAgICAgICAgIHNpZGU6ICdMT05HJyxcbiAgICAgICAgICBlbnRyeVByaWNlOiA1MDAwMCxcbiAgICAgICAgICBleGl0UHJpY2U6IDUyMDAwLFxuICAgICAgICAgIHF1YW50aXR5OiAwLjEsXG4gICAgICAgICAgcG5sOiAyMDAsXG4gICAgICAgICAgaXNXaW46IHRydWUsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpICsgaVxuICAgICAgICB9O1xuICAgICAgICBkcmF3ZG93blByb3RlY3Rvci5hZGRUcmFkZSh0cmFkZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXRlID0gZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0U3RhdGUoKTtcbiAgICAgIGV4cGVjdChzdGF0ZS5yZWNlbnRUcmFkZXMpLnRvSGF2ZUxlbmd0aCgxMDApO1xuICAgICAgXG4gICAgICAvLyBUaGUgYmVoYXZpb3IgaXMgY29tcGxleCBkdWUgdG8gc2xpY2luZyBhbmQgc29ydGluZyBhZnRlciBlYWNoIGFkZGl0aW9uOlxuICAgICAgLy8gMS4gQXJyYXkgZ2V0cyBzbGljZWQgdG8ga2VlcCBsYXN0IDEwMCB0cmFkZXNcbiAgICAgIC8vIDIuIEFycmF5IGdldHMgc29ydGVkIGJ5IHRpbWVzdGFtcCAobW9zdCByZWNlbnQgZmlyc3QpIGluIGNoZWNrQ29uc2VjdXRpdmVMb3NzZXNcbiAgICAgIC8vIDMuIFRoaXMgaGFwcGVucyBhZnRlciBlYWNoIHRyYWRlIGFkZGl0aW9uXG4gICAgICAvLyBUaGUgZmluYWwgcmVzdWx0IGlzIHRoYXQgd2UgaGF2ZSAxMDAgdHJhZGVzLCBzb3J0ZWQgYnkgdGltZXN0YW1wIGRlc2NlbmRpbmdcbiAgICAgIGNvbnN0IGZpcnN0VHJhZGVJZCA9IHN0YXRlLnJlY2VudFRyYWRlc1swXS5pZDtcbiAgICAgIGNvbnN0IGxhc3RUcmFkZUlkID0gc3RhdGUucmVjZW50VHJhZGVzWzk5XS5pZDtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGNvbnRhaW4gMTAwIHRyYWRlc1xuICAgICAgZXhwZWN0KHN0YXRlLnJlY2VudFRyYWRlcykudG9IYXZlTGVuZ3RoKDEwMCk7XG4gICAgICAvLyBGaXJzdCB0cmFkZSBzaG91bGQgYmUgdGhlIG1vc3QgcmVjZW50IG9uZSBhZGRlZFxuICAgICAgZXhwZWN0KGZpcnN0VHJhZGVJZCkudG9CZSgndHJhZGUtMTQ5Jyk7XG4gICAgICAvLyBEdWUgdG8gdGhlIGNvbXBsZXggc2xpY2luZyBhbmQgc29ydGluZyBiZWhhdmlvciwgdGhlIGxhc3QgdHJhZGUgd2lsbCBiZVxuICAgICAgLy8gdGhlIG9sZGVzdCB0cmFkZSB0aGF0IHN1cnZpdmVkIGFsbCB0aGUgb3BlcmF0aW9uc1xuICAgICAgZXhwZWN0KGxhc3RUcmFkZUlkKS50b0JlKCd0cmFkZS0wJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTdGF0ZSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gY3VycmVudCBzdGF0ZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRlID0gZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0U3RhdGUoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN0YXRlKS50b0hhdmVQcm9wZXJ0eSgnY3VycmVudEVxdWl0eScpO1xuICAgICAgZXhwZWN0KHN0YXRlKS50b0hhdmVQcm9wZXJ0eSgnZGFpbHlEcmF3ZG93bicpO1xuICAgICAgZXhwZWN0KHN0YXRlKS50b0hhdmVQcm9wZXJ0eSgnd2Vla2x5RHJhd2Rvd24nKTtcbiAgICAgIGV4cGVjdChzdGF0ZSkudG9IYXZlUHJvcGVydHkoJ2NvbnNlY3V0aXZlTG9zc2VzJyk7XG4gICAgICBleHBlY3Qoc3RhdGUpLnRvSGF2ZVByb3BlcnR5KCd3aW5SYXRlJyk7XG4gICAgICBleHBlY3Qoc3RhdGUpLnRvSGF2ZVByb3BlcnR5KCdpc0VtZXJnZW5jeVBhdXNlZCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlc2V0IHN0YXRlIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIC8vIE1vZGlmeSBzdGF0ZVxuICAgICAgY29uc3Qgc3RhdGUgPSBkcmF3ZG93blByb3RlY3Rvci5nZXRTdGF0ZSgpO1xuICAgICAgc3RhdGUuZGFpbHlEcmF3ZG93biA9IDAuMDU7XG4gICAgICBzdGF0ZS5jb25zZWN1dGl2ZUxvc3NlcyA9IDM7XG4gICAgICBzdGF0ZS5pc0VtZXJnZW5jeVBhdXNlZCA9IHRydWU7XG5cbiAgICAgIC8vIFJlc2V0IHN0YXRlXG4gICAgICBkcmF3ZG93blByb3RlY3Rvci5yZXNldFN0YXRlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0U3RhdGUoKTtcbiAgICAgIGV4cGVjdChuZXdTdGF0ZS5kYWlseURyYXdkb3duKS50b0JlKDApO1xuICAgICAgZXhwZWN0KG5ld1N0YXRlLmNvbnNlY3V0aXZlTG9zc2VzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KG5ld1N0YXRlLmlzRW1lcmdlbmN5UGF1c2VkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChuZXdTdGF0ZS5wb3NpdGlvblNpemVSZWR1Y3Rpb24pLnRvQmUoMS4wKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcm92aWRlIHN0YXRpc3RpY3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0cyA9IGRyYXdkb3duUHJvdGVjdG9yLmdldFN0YXRpc3RpY3MoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnZGFpbHlEcmF3ZG93bicpO1xuICAgICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnd2Vla2x5RHJhd2Rvd24nKTtcbiAgICAgIGV4cGVjdChzdGF0cykudG9IYXZlUHJvcGVydHkoJ2NvbnNlY3V0aXZlTG9zc2VzJyk7XG4gICAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCd3aW5SYXRlJyk7XG4gICAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbFRyYWRlcycpO1xuICAgICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnaXNFbWVyZ2VuY3lQYXVzZWQnKTtcbiAgICAgIGV4cGVjdChzdGF0cykudG9IYXZlUHJvcGVydHkoJ3Bvc2l0aW9uU2l6ZVJlZHVjdGlvbicpO1xuICAgICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnbWF4TGV2ZXJhZ2VSZWR1Y3Rpb24nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHVwZGF0ZSBjb25maWd1cmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbmV3Q29uZmlnOiBQYXJ0aWFsPERyYXdkb3duUHJvdGVjdG9yQ29uZmlnPiA9IHtcbiAgICAgICAgZGFpbHlEcmF3ZG93blRocmVzaG9sZHM6IHtcbiAgICAgICAgICBsZXZlbDE6IDAuMDIsIC8vIDIlXG4gICAgICAgICAgbGV2ZWwyOiAwLjA0LCAvLyA0JVxuICAgICAgICAgIGxldmVsMzogMC4wNiAgLy8gNiVcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZHJhd2Rvd25Qcm90ZWN0b3IudXBkYXRlQ29uZmlnKG5ld0NvbmZpZyk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgdGhhdCBuZXcgdGhyZXNob2xkcyBhcmUgYXBwbGllZFxuICAgICAgZHJhd2Rvd25Qcm90ZWN0b3Iuc2V0U3RhcnRPZkRheUVxdWl0eSgxMDAwMCk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCB0cmlnZ2VyIGF0IDIlIG5vdyBpbnN0ZWFkIG9mIDMlXG4gICAgICBhd2FpdCBkcmF3ZG93blByb3RlY3Rvci5jaGVja0RhaWx5RHJhd2Rvd24oOTgwMCk7IC8vIDIlIGRyYXdkb3duXG4gICAgICBleHBlY3QoZHJhd2Rvd25Qcm90ZWN0b3IuZ2V0UG9zaXRpb25TaXplTXVsdGlwbGllcigpKS50b0JlKDAuNSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFbWVyZ2VuY3kgUGF1c2UgTWFuYWdlbWVudCcsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgbGlmdCBlbWVyZ2VuY3kgcGF1c2UgYWZ0ZXIgZHVyYXRpb24gZXhwaXJlcycsICgpID0+IHtcbiAgICAgIC8vIFNldCBlbWVyZ2VuY3kgcGF1c2Ugd2l0aCBzaG9ydCBkdXJhdGlvbiBmb3IgdGVzdGluZ1xuICAgICAgY29uc3Qgc3RhdGUgPSBkcmF3ZG93blByb3RlY3Rvci5nZXRTdGF0ZSgpO1xuICAgICAgc3RhdGUuaXNFbWVyZ2VuY3lQYXVzZWQgPSB0cnVlO1xuICAgICAgc3RhdGUuZW1lcmdlbmN5UGF1c2VVbnRpbCA9IERhdGUubm93KCkgKyAxMDA7IC8vIDEwMG1zXG5cbiAgICAgIC8vIEluaXRpYWxseSBzaG91bGQgYmUgcGF1c2VkXG4gICAgICBleHBlY3Qoc3RhdGUuaXNFbWVyZ2VuY3lQYXVzZWQpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFdhaXQgZm9yIHBhdXNlIHRvIGV4cGlyZVxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIENhbGxpbmcgaXNFbWVyZ2VuY3lQYXVzZWQoKSBzaG91bGQgZGV0ZWN0IGV4cGlyYXRpb24gYW5kIHJlc2V0XG4gICAgICAgICAgZXhwZWN0KGRyYXdkb3duUHJvdGVjdG9yLmlzRW1lcmdlbmN5UGF1c2VkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSwgMTUwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGJsb2NrIG5ldyBwb3NpdGlvbnMgZHVyaW5nIGVtZXJnZW5jeSBwYXVzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRyaWdnZXIgZW1lcmdlbmN5IHBhdXNlIGJ5IHNldHRpbmcgNyUgZHJhd2Rvd25cbiAgICAgIGRyYXdkb3duUHJvdGVjdG9yLnNldFN0YXJ0T2ZEYXlFcXVpdHkoMTAwMDApO1xuICAgICAgYXdhaXQgZHJhd2Rvd25Qcm90ZWN0b3IuY2hlY2tEYWlseURyYXdkb3duKDkzMDApOyAvLyA3JSBkcmF3ZG93biB0cmlnZ2VycyBlbWVyZ2VuY3kgZmxhdHRlblxuICAgICAgXG4gICAgICAvLyBTaG91bGQgYmxvY2sgbmV3IHBvc2l0aW9uc1xuICAgICAgZXhwZWN0KGRyYXdkb3duUHJvdGVjdG9yLmNhbk9wZW5OZXdQb3NpdGlvbnMoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYmxvY2sgbmV3IHBvc2l0aW9ucyB3aGVuIGRhaWx5IGRyYXdkb3duID49IDUlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZHJhd2Rvd25Qcm90ZWN0b3Iuc2V0U3RhcnRPZkRheUVxdWl0eSgxMDAwMCk7XG4gICAgICBcbiAgICAgIGF3YWl0IGRyYXdkb3duUHJvdGVjdG9yLmNoZWNrRGFpbHlEcmF3ZG93big5NTAwKTsgLy8gNSUgZHJhd2Rvd25cbiAgICAgIFxuICAgICAgZXhwZWN0KGRyYXdkb3duUHJvdGVjdG9yLmNhbk9wZW5OZXdQb3NpdGlvbnMoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9