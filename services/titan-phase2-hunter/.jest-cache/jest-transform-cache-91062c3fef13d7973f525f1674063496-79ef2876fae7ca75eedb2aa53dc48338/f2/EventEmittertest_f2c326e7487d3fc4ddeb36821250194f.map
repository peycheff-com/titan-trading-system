{"file":"/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/unit/EventEmitter.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/unit/EventEmitter.test.ts"],"sourcesContent":["/**\n * Unit Tests for HunterEventEmitter\n * \n * Tests the event system functionality including event emission,\n * subscription, unsubscription, and type safety.\n */\n\nimport { HunterEventEmitter, hunterEvents } from '../../src/events/EventEmitter';\nimport { \n  HologramState, \n  SessionState, \n  Absorption, \n  SignalData, \n  ExecutionData,\n  AsianRange,\n  JudasSwing\n} from '../../src/types';\n\ndescribe('HunterEventEmitter', () => {\n  let eventEmitter: HunterEventEmitter;\n\n  beforeEach(() => {\n    // Create a fresh instance for each test\n    eventEmitter = new HunterEventEmitter();\n  });\n\n  afterEach(() => {\n    // Clean up listeners after each test\n    eventEmitter.clearAllListeners();\n  });\n\n  describe('Singleton Pattern', () => {\n    it('should return the same instance', () => {\n      const instance1 = HunterEventEmitter.getInstance();\n      const instance2 = HunterEventEmitter.getInstance();\n      \n      expect(instance1).toBe(instance2);\n      expect(instance1).toBe(hunterEvents);\n    });\n  });\n\n  describe('Basic Event Operations', () => {\n    it('should emit and receive events', (done) => {\n      const testPayload = {\n        symbol: 'BTCUSDT',\n        hologramState: createMockHologramState(),\n        timestamp: Date.now()\n      };\n\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', (payload) => {\n        expect(payload.symbol).toBe('BTCUSDT');\n        expect(payload.hologramState).toBeDefined();\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitEvent('HOLOGRAM_UPDATED', testPayload);\n    });\n\n    it('should handle multiple listeners for the same event', () => {\n      let listener1Called = false;\n      let listener2Called = false;\n\n      const testPayload = {\n        symbol: 'ETHUSDT',\n        hologramState: createMockHologramState(),\n        timestamp: Date.now()\n      };\n\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', () => {\n        listener1Called = true;\n      });\n\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', () => {\n        listener2Called = true;\n      });\n\n      eventEmitter.emitEvent('HOLOGRAM_UPDATED', testPayload);\n\n      expect(listener1Called).toBe(true);\n      expect(listener2Called).toBe(true);\n    });\n\n    it('should handle once listeners correctly', () => {\n      let callCount = 0;\n\n      const testPayload = {\n        symbol: 'ADAUSDT',\n        hologramState: createMockHologramState(),\n        timestamp: Date.now()\n      };\n\n      eventEmitter.onceEvent('HOLOGRAM_UPDATED', () => {\n        callCount++;\n      });\n\n      // Emit twice\n      eventEmitter.emitEvent('HOLOGRAM_UPDATED', testPayload);\n      eventEmitter.emitEvent('HOLOGRAM_UPDATED', testPayload);\n\n      expect(callCount).toBe(1);\n    });\n\n    it('should remove listeners correctly', () => {\n      let callCount = 0;\n\n      const testPayload = {\n        symbol: 'SOLUSDT',\n        hologramState: createMockHologramState(),\n        timestamp: Date.now()\n      };\n\n      const listener = () => {\n        callCount++;\n      };\n\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', listener);\n      eventEmitter.emitEvent('HOLOGRAM_UPDATED', testPayload);\n      \n      expect(callCount).toBe(1);\n\n      eventEmitter.offEvent('HOLOGRAM_UPDATED', listener);\n      eventEmitter.emitEvent('HOLOGRAM_UPDATED', testPayload);\n      \n      expect(callCount).toBe(1); // Should not increase\n    });\n  });\n\n  describe('Convenience Methods', () => {\n    it('should emit hologram updated event', (done) => {\n      const hologramState = createMockHologramState();\n\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', (payload) => {\n        expect(payload.symbol).toBe('BTCUSDT');\n        expect(payload.hologramState).toBe(hologramState);\n        expect(payload.previousStatus).toBe('NO_PLAY');\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitHologramUpdated('BTCUSDT', hologramState, 'NO_PLAY');\n    });\n\n    it('should emit session change event', (done) => {\n      const previousSession = createMockSessionState('ASIAN');\n      const currentSession = createMockSessionState('LONDON');\n      const asianRange: AsianRange = {\n        high: 50000,\n        low: 49000,\n        timestamp: Date.now()\n      };\n\n      eventEmitter.onEvent('SESSION_CHANGE', (payload) => {\n        expect(payload.previousSession).toBe(previousSession);\n        expect(payload.currentSession).toBe(currentSession);\n        expect(payload.asianRange).toBe(asianRange);\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitSessionChange(previousSession, currentSession, asianRange);\n    });\n\n    it('should emit CVD absorption event', (done) => {\n      const absorption: Absorption = {\n        price: 50000,\n        cvdValue: 1000,\n        timestamp: Date.now(),\n        confidence: 85\n      };\n\n      eventEmitter.onEvent('CVD_ABSORPTION', (payload) => {\n        expect(payload.symbol).toBe('BTCUSDT');\n        expect(payload.absorption).toBe(absorption);\n        expect(payload.poiPrice).toBe(49950);\n        expect(payload.confidence).toBe(85);\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitCVDAbsorption('BTCUSDT', absorption, 49950, 85);\n    });\n\n    it('should emit signal generated event', (done) => {\n      const signal = createMockSignalData();\n      const hologramState = createMockHologramState();\n      const sessionState = createMockSessionState('LONDON');\n\n      eventEmitter.onEvent('SIGNAL_GENERATED', (payload) => {\n        expect(payload.signal).toBe(signal);\n        expect(payload.hologramState).toBe(hologramState);\n        expect(payload.sessionState).toBe(sessionState);\n        expect(payload.cvdConfirmation).toBe(true);\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitSignalGenerated(signal, hologramState, sessionState, true);\n    });\n\n    it('should emit execution complete event', (done) => {\n      const execution = createMockExecutionData();\n      const signal = createMockSignalData();\n\n      eventEmitter.onEvent('EXECUTION_COMPLETE', (payload) => {\n        expect(payload.execution).toBe(execution);\n        expect(payload.signal).toBe(signal);\n        expect(payload.success).toBe(true);\n        expect(payload.slippage).toBe(0.05);\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitExecutionComplete(execution, signal, true, 0.05);\n    });\n\n    it('should emit error event', (done) => {\n      const error = new Error('Test error');\n      const context = { symbol: 'BTCUSDT', operation: 'fetchData' };\n\n      eventEmitter.onEvent('ERROR', (payload) => {\n        expect(payload.component).toBe('HologramEngine');\n        expect(payload.error).toBe(error);\n        expect(payload.severity).toBe('HIGH');\n        expect(payload.context).toBe(context);\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitError('HologramEngine', error, 'HIGH', context);\n    });\n\n    it('should emit scan complete event', (done) => {\n      eventEmitter.onEvent('SCAN_COMPLETE', (payload) => {\n        expect(payload.symbolsScanned).toBe(100);\n        expect(payload.aPlus).toBe(5);\n        expect(payload.bAlignment).toBe(15);\n        expect(payload.conflicts).toBe(20);\n        expect(payload.duration).toBe(25000);\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitScanComplete(100, 5, 15, 20, 25000);\n    });\n\n    it('should emit Judas swing event', (done) => {\n      const judasSwing: JudasSwing = {\n        type: 'SWEEP_HIGH',\n        sweptPrice: 50100,\n        reversalPrice: 49950,\n        direction: 'SHORT',\n        confidence: 90\n      };\n\n      const asianRange: AsianRange = {\n        high: 50000,\n        low: 49000,\n        timestamp: Date.now()\n      };\n\n      eventEmitter.onEvent('JUDAS_SWING_DETECTED', (payload) => {\n        expect(payload.judasSwing).toBe(judasSwing);\n        expect(payload.sessionType).toBe('LONDON');\n        expect(payload.asianRange).toBe(asianRange);\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitJudasSwing(judasSwing, 'LONDON', asianRange);\n    });\n\n    it('should emit POI detected event', (done) => {\n      eventEmitter.onEvent('POI_DETECTED', (payload) => {\n        expect(payload.symbol).toBe('ETHUSDT');\n        expect(payload.poiType).toBe('ORDER_BLOCK');\n        expect(payload.price).toBe(3500);\n        expect(payload.confidence).toBe(95);\n        expect(payload.distance).toBe(0.5);\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitPOIDetected('ETHUSDT', 'ORDER_BLOCK', 3500, 95, 0.5);\n    });\n\n    it('should emit risk warning event', (done) => {\n      eventEmitter.onEvent('RISK_WARNING', (payload) => {\n        expect(payload.type).toBe('DRAWDOWN');\n        expect(payload.severity).toBe('WARNING');\n        expect(payload.value).toBe(0.04);\n        expect(payload.threshold).toBe(0.03);\n        expect(payload.message).toBe('Daily drawdown approaching limit');\n        expect(payload.timestamp).toBeGreaterThan(0);\n        done();\n      });\n\n      eventEmitter.emitRiskWarning('DRAWDOWN', 'WARNING', 0.04, 0.03, 'Daily drawdown approaching limit');\n    });\n  });\n\n  describe('Event Statistics', () => {\n    it('should return correct event statistics', () => {\n      const listener1 = () => {};\n      const listener2 = () => {};\n\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', listener1);\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', listener2);\n      eventEmitter.onEvent('SESSION_CHANGE', listener1);\n\n      const stats = eventEmitter.getEventStats();\n\n      expect(stats['HOLOGRAM_UPDATED']).toBe(2);\n      expect(stats['SESSION_CHANGE']).toBe(1);\n    });\n\n    it('should clear all listeners', () => {\n      const listener = () => {};\n\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', listener);\n      eventEmitter.onEvent('SESSION_CHANGE', listener);\n\n      let stats = eventEmitter.getEventStats();\n      expect(Object.keys(stats)).toHaveLength(2);\n\n      eventEmitter.clearAllListeners();\n\n      stats = eventEmitter.getEventStats();\n      expect(Object.keys(stats)).toHaveLength(0);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should propagate listener errors as expected', () => {\n      const errorListener = () => {\n        throw new Error('Listener error');\n      };\n\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', errorListener);\n\n      const testPayload = {\n        symbol: 'BTCUSDT',\n        hologramState: createMockHologramState(),\n        timestamp: Date.now()\n      };\n\n      // EventEmitter propagates errors from listeners\n      expect(() => {\n        eventEmitter.emitEvent('HOLOGRAM_UPDATED', testPayload);\n      }).toThrow('Listener error');\n    });\n\n    it('should handle multiple listeners where some throw errors', () => {\n      const errorListener = () => {\n        throw new Error('Listener error');\n      };\n\n      const goodListener = jest.fn();\n\n      // Add good listener first\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', goodListener);\n      // Add error listener second\n      eventEmitter.onEvent('HOLOGRAM_UPDATED', errorListener);\n\n      const testPayload = {\n        symbol: 'BTCUSDT',\n        hologramState: createMockHologramState(),\n        timestamp: Date.now()\n      };\n\n      // The good listener should be called before the error is thrown\n      expect(() => {\n        eventEmitter.emitEvent('HOLOGRAM_UPDATED', testPayload);\n      }).toThrow('Listener error');\n\n      expect(goodListener).toHaveBeenCalled();\n    });\n  });\n\n  // Helper functions to create mock data\n  function createMockHologramState(): HologramState {\n    return {\n      symbol: 'BTCUSDT',\n      timestamp: Date.now(),\n      daily: {\n        timeframe: '1D',\n        trend: 'BULL',\n        dealingRange: {\n          high: 51000,\n          low: 49000,\n          midpoint: 50000,\n          premiumThreshold: 50000,\n          discountThreshold: 50000,\n          range: 2000\n        },\n        currentPrice: 50500,\n        location: 'PREMIUM',\n        fractals: [],\n        bos: [],\n        mss: null\n      },\n      h4: {\n        timeframe: '4H',\n        trend: 'BULL',\n        dealingRange: {\n          high: 50800,\n          low: 49800,\n          midpoint: 50300,\n          premiumThreshold: 50300,\n          discountThreshold: 50300,\n          range: 1000\n        },\n        currentPrice: 50500,\n        location: 'PREMIUM',\n        fractals: [],\n        bos: [],\n        mss: null\n      },\n      m15: {\n        timeframe: '15m',\n        trend: 'BULL',\n        dealingRange: {\n          high: 50600,\n          low: 50400,\n          midpoint: 50500,\n          premiumThreshold: 50500,\n          discountThreshold: 50500,\n          range: 200\n        },\n        currentPrice: 50500,\n        location: 'EQUILIBRIUM',\n        fractals: [],\n        bos: [],\n        mss: null\n      },\n      alignmentScore: 85,\n      status: 'A+',\n      veto: {\n        vetoed: false,\n        reason: null,\n        direction: null\n      },\n      rsScore: 0.05\n    };\n  }\n\n  function createMockSessionState(type: 'ASIAN' | 'LONDON' | 'NY' | 'DEAD_ZONE'): SessionState {\n    const now = Date.now();\n    return {\n      type,\n      startTime: now - 3600000, // 1 hour ago\n      endTime: now + 3600000,   // 1 hour from now\n      timeRemaining: 3600000    // 1 hour remaining\n    };\n  }\n\n  function createMockSignalData(): SignalData {\n    return {\n      symbol: 'BTCUSDT',\n      direction: 'LONG',\n      hologramStatus: 'A+',\n      alignmentScore: 85,\n      rsScore: 0.05,\n      sessionType: 'LONDON',\n      poiType: 'ORDER_BLOCK',\n      cvdConfirmation: true,\n      confidence: 90,\n      entryPrice: 50000,\n      stopLoss: 49250,\n      takeProfit: 52250,\n      positionSize: 0.1,\n      leverage: 3,\n      timestamp: Date.now()\n    };\n  }\n\n  function createMockExecutionData(): ExecutionData {\n    return {\n      signalId: 'signal-123',\n      orderId: 'order-456',\n      symbol: 'BTCUSDT',\n      side: 'Buy',\n      qty: 0.1,\n      fillPrice: 50025,\n      slippage: 0.05,\n      fees: 2.5,\n      timestamp: Date.now()\n    };\n  }\n});"],"version":3}