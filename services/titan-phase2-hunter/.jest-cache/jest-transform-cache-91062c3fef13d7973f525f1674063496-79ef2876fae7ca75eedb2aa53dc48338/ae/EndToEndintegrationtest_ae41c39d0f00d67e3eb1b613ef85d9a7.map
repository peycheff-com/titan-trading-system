{"file":"/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/integration/EndToEnd.integration.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/integration/EndToEnd.integration.test.ts"],"sourcesContent":["/**\n * End-to-End Integration Tests for Titan Phase 2 - The Hunter\n * \n * Tests the complete flow:\n * Hologram Scan â†’ Session Check â†’ POI Detection â†’ CVD Validation â†’ Signal Generation â†’ Execution\n * \n * Uses mock Binance ticks and Bybit responses to simulate real trading conditions\n * without requiring live exchange connections.\n * \n * Requirements: All requirements (End-to-End Integration)\n */\n\nimport { HologramEngine } from '../../src/engine/HologramEngine';\nimport { HologramScanner } from '../../src/engine/HologramScanner';\nimport { SessionProfiler } from '../../src/engine/SessionProfiler';\nimport { InefficiencyMapper } from '../../src/engine/InefficiencyMapper';\nimport { CVDValidator } from '../../src/engine/CVDValidator';\nimport { SignalGenerator } from '../../src/execution/SignalGenerator';\nimport { LimitOrderExecutor } from '../../src/execution/LimitOrderExecutor';\nimport { BybitPerpsClient } from '../../src/exchanges/BybitPerpsClient';\nimport { BinanceSpotClient } from '../../src/exchanges/BinanceSpotClient';\nimport { \n  OHLCV, \n  HologramState, \n  SessionState, \n  POI, \n  FVG, \n  OrderBlock, \n  SignalData,\n  Trade,\n  Absorption,\n  OrderResult\n} from '../../src/types';\n\n// Mock data for testing - Need more candles for fractal detection\nconst mockOHLCVData: OHLCV[] = [\n  { timestamp: 1640995200000, open: 47000, high: 47500, low: 46500, close: 47200, volume: 1000 },\n  { timestamp: 1640998800000, open: 47200, high: 47800, low: 47000, close: 47600, volume: 1200 },\n  { timestamp: 1641002400000, open: 47600, high: 48200, low: 47400, close: 47900, volume: 1100 },\n  { timestamp: 1641006000000, open: 47900, high: 48500, low: 47700, close: 48300, volume: 1300 },\n  { timestamp: 1641009600000, open: 48300, high: 48800, low: 48100, close: 48600, volume: 1150 },\n  { timestamp: 1641013200000, open: 48600, high: 49200, low: 48400, close: 48900, volume: 1250 },\n  { timestamp: 1641016800000, open: 48900, high: 49500, low: 48700, close: 49200, volume: 1400 },\n  { timestamp: 1641020400000, open: 49200, high: 49800, low: 49000, close: 49500, volume: 1350 },\n  { timestamp: 1641024000000, open: 49500, high: 50200, low: 49300, close: 49800, volume: 1500 },\n  { timestamp: 1641027600000, open: 49800, high: 50500, low: 49600, close: 50200, volume: 1600 },\n  // Add more candles for fractal detection (need at least 20-30 for proper analysis)\n  { timestamp: 1641031200000, open: 50200, high: 50800, low: 50000, close: 50600, volume: 1700 },\n  { timestamp: 1641034800000, open: 50600, high: 51200, low: 50400, close: 50900, volume: 1800 },\n  { timestamp: 1641038400000, open: 50900, high: 51500, low: 50700, close: 51200, volume: 1900 },\n  { timestamp: 1641042000000, open: 51200, high: 51800, low: 51000, close: 51500, volume: 2000 },\n  { timestamp: 1641045600000, open: 51500, high: 52100, low: 51300, close: 51800, volume: 2100 },\n  { timestamp: 1641049200000, open: 51800, high: 52400, low: 51600, close: 52100, volume: 2200 },\n  { timestamp: 1641052800000, open: 52100, high: 52700, low: 51900, close: 52400, volume: 2300 },\n  { timestamp: 1641056400000, open: 52400, high: 53000, low: 52200, close: 52700, volume: 2400 },\n  { timestamp: 1641060000000, open: 52700, high: 53300, low: 52500, close: 53000, volume: 2500 },\n  { timestamp: 1641063600000, open: 53000, high: 53600, low: 52800, close: 53300, volume: 2600 },\n  // Add fractal patterns - create clear swing highs and lows\n  { timestamp: 1641067200000, open: 53300, high: 53900, low: 53100, close: 53600, volume: 2700 },\n  { timestamp: 1641070800000, open: 53600, high: 54200, low: 53400, close: 53900, volume: 2800 },\n  { timestamp: 1641074400000, open: 53900, high: 54500, low: 53700, close: 54200, volume: 2900 }, // Potential swing high\n  { timestamp: 1641078000000, open: 54200, high: 54300, low: 53800, close: 54000, volume: 3000 },\n  { timestamp: 1641081600000, open: 54000, high: 54100, low: 53600, close: 53800, volume: 3100 },\n  { timestamp: 1641085200000, open: 53800, high: 54000, low: 53400, close: 53600, volume: 3200 }, // Potential swing low\n  { timestamp: 1641088800000, open: 53600, high: 54200, low: 53500, close: 54000, volume: 3300 },\n  { timestamp: 1641092400000, open: 54000, high: 54600, low: 53900, close: 54400, volume: 3400 },\n  { timestamp: 1641096000000, open: 54400, high: 55000, low: 54300, close: 54800, volume: 3500 },\n  { timestamp: 1641099600000, open: 54800, high: 55400, low: 54700, close: 55200, volume: 3600 }\n];\n\nconst mockTopSymbols = ['BTCUSDT', 'ETHUSDT', 'ADAUSDT', 'SOLUSDT', 'DOTUSDT'];\n\nconst mockBinanceTrades: Trade[] = [\n  { symbol: 'BTCUSDT', price: 50200, qty: 0.5, time: Date.now(), isBuyerMaker: false },\n  { symbol: 'BTCUSDT', price: 50180, qty: 0.3, time: Date.now() + 1000, isBuyerMaker: true },\n  { symbol: 'BTCUSDT', price: 50220, qty: 0.8, time: Date.now() + 2000, isBuyerMaker: false },\n  { symbol: 'BTCUSDT', price: 50190, qty: 0.4, time: Date.now() + 3000, isBuyerMaker: true },\n  { symbol: 'BTCUSDT', price: 50250, qty: 1.2, time: Date.now() + 4000, isBuyerMaker: false }\n];\n\n// Mock implementations\nclass MockBybitPerpsClient extends BybitPerpsClient {\n  private mockData = new Map<string, OHLCV[]>();\n  private mockPrices = new Map<string, number>();\n  private mockOrders = new Map<string, any>();\n  private orderIdCounter = 1;\n\n  constructor() {\n    super();\n    // Don't call parent constructor to avoid API setup\n    this.initializeMockData();\n  }\n\n  private initializeMockData(): void {\n    // Initialize mock data\n    this.mockData.set('BTCUSDT-1D', mockOHLCVData);\n    this.mockData.set('BTCUSDT-4h', mockOHLCVData);\n    this.mockData.set('BTCUSDT-15m', mockOHLCVData);\n    this.mockData.set('ETHUSDT-1D', mockOHLCVData.map(c => ({ ...c, open: c.open * 0.07, high: c.high * 0.07, low: c.low * 0.07, close: c.close * 0.07 })));\n    this.mockData.set('ETHUSDT-4h', mockOHLCVData.map(c => ({ ...c, open: c.open * 0.07, high: c.high * 0.07, low: c.low * 0.07, close: c.close * 0.07 })));\n    this.mockData.set('ETHUSDT-15m', mockOHLCVData.map(c => ({ ...c, open: c.open * 0.07, high: c.high * 0.07, low: c.low * 0.07, close: c.close * 0.07 })));\n    \n    // Add data for all mock symbols\n    for (const symbol of mockTopSymbols) {\n      if (!this.mockData.has(`${symbol}-1D`)) {\n        const multiplier = symbol === 'BTCUSDT' ? 1 : symbol === 'ETHUSDT' ? 0.07 : 0.001;\n        this.mockData.set(`${symbol}-1D`, mockOHLCVData.map(c => ({ ...c, open: c.open * multiplier, high: c.high * multiplier, low: c.low * multiplier, close: c.close * multiplier })));\n        this.mockData.set(`${symbol}-4h`, mockOHLCVData.map(c => ({ ...c, open: c.open * multiplier, high: c.high * multiplier, low: c.low * multiplier, close: c.close * multiplier })));\n        this.mockData.set(`${symbol}-15m`, mockOHLCVData.map(c => ({ ...c, open: c.open * multiplier, high: c.high * multiplier, low: c.low * multiplier, close: c.close * multiplier })));\n      }\n    }\n    \n    this.mockPrices.set('BTCUSDT', 55200);\n    this.mockPrices.set('ETHUSDT', 3864);\n    this.mockPrices.set('ADAUSDT', 55.2);\n    this.mockPrices.set('SOLUSDT', 552);\n    this.mockPrices.set('DOTUSDT', 276);\n  }\n\n  async initialize(): Promise<void> {\n    // Mock initialization without API calls\n  }\n\n  async fetchTopSymbols(): Promise<string[]> {\n    return mockTopSymbols;\n  }\n\n  async fetchOHLCV(symbol: string, interval: string, limit: number): Promise<OHLCV[]> {\n    const key = `${symbol}-${interval}`;\n    const data = this.mockData.get(key) || mockOHLCVData;\n    return data.slice(-limit);\n  }\n\n  async getCurrentPrice(symbol: string): Promise<number> {\n    return this.mockPrices.get(symbol) || 50000;\n  }\n\n  async placeOrderWithRetry(params: any, maxRetries: number): Promise<OrderResult> {\n    const orderId = `mock_order_${this.orderIdCounter++}`;\n    const mockOrder = {\n      orderId,\n      symbol: params.symbol,\n      side: params.side,\n      qty: params.qty,\n      price: params.price,\n      status: 'NEW',\n      timestamp: Date.now()\n    };\n    \n    this.mockOrders.set(orderId, mockOrder);\n    \n    return {\n      orderId,\n      symbol: params.symbol,\n      side: params.side,\n      qty: params.qty,\n      price: params.price,\n      status: 'NEW',\n      timestamp: Date.now()\n    };\n  }\n\n  async getOrderStatus(orderId: string, symbol: string): Promise<string> {\n    const order = this.mockOrders.get(orderId);\n    return order ? order.status : 'NOT_FOUND';\n  }\n\n  async cancelOrder(orderId: string, symbol: string): Promise<boolean> {\n    const order = this.mockOrders.get(orderId);\n    if (order) {\n      order.status = 'CANCELLED';\n      this.mockOrders.set(orderId, order);\n      return true;\n    }\n    return false;\n  }\n\n  // Simulate order fill for testing\n  simulateOrderFill(orderId: string): void {\n    const order = this.mockOrders.get(orderId);\n    if (order) {\n      order.status = 'FILLED';\n      this.mockOrders.set(orderId, order);\n    }\n  }\n\n  async disconnect(): Promise<void> {\n    // Mock disconnect without cleanup\n  }\n}\n\nclass MockBinanceSpotClient extends BinanceSpotClient {\n  private tradeCallbacks = new Map<string, (trade: any) => void>();\n  private mockInitialized = false;\n\n  constructor() {\n    super();\n    // Don't call parent constructor to avoid WebSocket setup\n  }\n\n  async initialize(): Promise<void> {\n    this.mockInitialized = true;\n    // Mock initialization without WebSocket\n  }\n\n  subscribeAggTrades(symbol: string, callback: (trade: any) => void): void {\n    this.tradeCallbacks.set(symbol, callback);\n  }\n\n  // Simulate trade events for testing\n  simulateTrade(symbol: string, trade: Trade): void {\n    const callback = this.tradeCallbacks.get(symbol);\n    if (callback) {\n      callback({\n        price: trade.price,\n        quantity: trade.qty,\n        timestamp: trade.time,\n        isBuyerMaker: trade.isBuyerMaker\n      });\n    }\n  }\n\n  async disconnect(): Promise<void> {\n    this.mockInitialized = false;\n    // Mock disconnect without WebSocket cleanup\n  }\n}\n\ndescribe('End-to-End Integration Tests', () => {\n  let mockBybitClient: MockBybitPerpsClient;\n  let mockBinanceClient: MockBinanceSpotClient;\n  let hologramEngine: HologramEngine;\n  let hologramScanner: HologramScanner;\n  let sessionProfiler: SessionProfiler;\n  let inefficiencyMapper: InefficiencyMapper;\n  let cvdValidator: CVDValidator;\n  let signalGenerator: SignalGenerator;\n  let limitOrderExecutor: LimitOrderExecutor;\n\n  beforeEach(async () => {\n    // Initialize mock clients\n    mockBybitClient = new MockBybitPerpsClient();\n    mockBinanceClient = new MockBinanceSpotClient();\n    \n    await mockBybitClient.initialize();\n    await mockBinanceClient.initialize();\n\n    // Initialize core engines\n    hologramEngine = new HologramEngine(mockBybitClient);\n    hologramScanner = new HologramScanner(mockBybitClient);\n    sessionProfiler = new SessionProfiler();\n    inefficiencyMapper = new InefficiencyMapper();\n    cvdValidator = new CVDValidator();\n    \n    // Initialize execution components\n    signalGenerator = new SignalGenerator(\n      hologramEngine,\n      sessionProfiler,\n      inefficiencyMapper,\n      cvdValidator\n    );\n    limitOrderExecutor = new LimitOrderExecutor(mockBybitClient);\n  });\n\n  afterEach(async () => {\n    // Cleanup\n    await mockBybitClient.disconnect();\n    await mockBinanceClient.disconnect();\n    limitOrderExecutor.destroy();\n    hologramScanner.cleanup();\n  });\n\n  describe('Complete End-to-End Flow', () => {\n    it('should execute full cycle: Hologram Scan â†’ Session Check â†’ POI Detection â†’ CVD Validation â†’ Signal Generation â†’ Execution', async () => {\n      // Step 1: Hologram Scan\n      console.log('ðŸ” Step 1: Running Hologram Scan...');\n      const scanResult = await hologramScanner.scan();\n      \n      expect(scanResult).toBeDefined();\n      expect(scanResult.symbols.length).toBeGreaterThan(0);\n      expect(scanResult.top20.length).toBeGreaterThan(0);\n      expect(scanResult.successCount).toBeGreaterThan(0);\n      expect(scanResult.scanDuration).toBeGreaterThan(0);\n      \n      console.log(`âœ… Hologram scan complete: ${scanResult.successCount} symbols analyzed`);\n      \n      // Get the best hologram for testing\n      const bestHologram = scanResult.top20[0];\n      expect(bestHologram).toBeDefined();\n      expect(['A+', 'B', 'CONFLICT', 'NO_PLAY']).toContain(bestHologram.status);\n      \n      // Step 2: Session Check\n      console.log('â° Step 2: Checking Session State...');\n      const sessionState = sessionProfiler.getSessionState();\n      \n      expect(sessionState).toBeDefined();\n      expect(['ASIAN', 'LONDON', 'NY', 'DEAD_ZONE']).toContain(sessionState.type);\n      expect(sessionState.timeRemaining).toBeGreaterThanOrEqual(0);\n      \n      console.log(`âœ… Session check complete: ${sessionState.type} session`);\n      \n      // Step 3: POI Detection\n      console.log('ðŸŽ¯ Step 3: Running POI Detection...');\n      const candles = await mockBybitClient.fetchOHLCV(bestHologram.symbol, '15m', 100);\n      \n      // Detect FVGs\n      const fvgs = inefficiencyMapper.detectFVG(candles);\n      expect(Array.isArray(fvgs)).toBe(true);\n      \n      // Detect Order Blocks\n      const orderBlocks = inefficiencyMapper.detectOrderBlock(candles, bestHologram.m15.bos);\n      expect(Array.isArray(orderBlocks)).toBe(true);\n      \n      // Detect Liquidity Pools\n      const liquidityPools = inefficiencyMapper.detectLiquidityPools(candles, bestHologram.m15.fractals);\n      expect(Array.isArray(liquidityPools)).toBe(true);\n      \n      const allPOIs = [...fvgs, ...orderBlocks, ...liquidityPools];\n      console.log(`âœ… POI detection complete: ${allPOIs.length} POIs found`);\n      \n      // Step 4: CVD Validation\n      console.log('ðŸ“Š Step 4: Running CVD Validation...');\n      \n      // Simulate Binance trades for CVD calculation\n      for (const trade of mockBinanceTrades) {\n        cvdValidator.recordTrade(trade);\n        mockBinanceClient.simulateTrade(trade.symbol, trade);\n      }\n      \n      // Calculate CVD for the symbol\n      const cvd = cvdValidator.calcCVD(mockBinanceTrades, 10 * 60 * 1000); // 10 minutes\n      expect(typeof cvd).toBe('number');\n      \n      // Check for absorption (simplified for testing)\n      const prices = candles.map(c => c.close);\n      const cvdValues = Array(prices.length).fill(0).map((_, i) => cvd + (Math.random() - 0.5) * 100);\n      const absorption = cvdValidator.detectAbsorption(prices, cvdValues);\n      \n      console.log(`âœ… CVD validation complete: CVD=${cvd.toFixed(2)}, Absorption=${absorption ? 'detected' : 'none'}`);\n      \n      // Step 5: Signal Generation\n      console.log('ðŸŽ¯ Step 5: Generating Trading Signal...');\n      \n      // Only generate signal if conditions are favorable\n      if (bestHologram.status === 'A+' || bestHologram.status === 'B') {\n        const direction = bestHologram.daily.trend === 'BULL' ? 'LONG' : 'SHORT';\n        const equity = 10000; // $10,000 test equity\n        \n        // Mock signal generation (simplified for testing)\n        const mockSignal: SignalData = {\n          symbol: bestHologram.symbol,\n          direction,\n          hologramStatus: bestHologram.status,\n          alignmentScore: bestHologram.alignmentScore,\n          rsScore: bestHologram.rsScore,\n          sessionType: sessionState.type,\n          poiType: orderBlocks.length > 0 ? 'ORDER_BLOCK' : 'FVG',\n          cvdConfirmation: absorption !== null,\n          confidence: Math.min(100, bestHologram.alignmentScore + (absorption ? 10 : 0)),\n          entryPrice: bestHologram.m15.currentPrice,\n          stopLoss: direction === 'LONG' \n            ? bestHologram.m15.currentPrice * 0.985 \n            : bestHologram.m15.currentPrice * 1.015,\n          takeProfit: direction === 'LONG' \n            ? bestHologram.m15.currentPrice * 1.045 \n            : bestHologram.m15.currentPrice * 0.955,\n          positionSize: 0.1,\n          leverage: 3,\n          timestamp: Date.now()\n        };\n        \n        expect(mockSignal).toBeDefined();\n        expect(mockSignal.symbol).toBe(bestHologram.symbol);\n        expect(['LONG', 'SHORT']).toContain(mockSignal.direction);\n        expect(mockSignal.confidence).toBeGreaterThan(0);\n        \n        console.log(`âœ… Signal generated: ${mockSignal.direction} ${mockSignal.symbol} @ ${mockSignal.entryPrice}`);\n        \n        // Step 6: Order Execution\n        console.log('âš¡ Step 6: Executing Order...');\n        \n        if (orderBlocks.length > 0) {\n          const orderBlock = orderBlocks[0] as OrderBlock;\n          const executionResult = await limitOrderExecutor.placePostOnlyOrder(\n            mockSignal,\n            orderBlock,\n            equity\n          );\n          \n          expect(executionResult).toBeDefined();\n          expect(executionResult.success).toBe(true);\n          expect(executionResult.orderId).toBeDefined();\n          \n          console.log(`âœ… Order executed: ${executionResult.orderId}`);\n          \n          // Verify order is being monitored\n          const activeOrders = limitOrderExecutor.getActiveOrders();\n          expect(activeOrders.length).toBe(1);\n          expect(activeOrders[0].orderId).toBe(executionResult.orderId);\n          \n          // Simulate order fill\n          mockBybitClient.simulateOrderFill(executionResult.orderId!);\n          \n          // Wait for monitoring to detect fill\n          await new Promise(resolve => setTimeout(resolve, 1100)); // Wait for monitoring cycle\n          \n          console.log('âœ… End-to-end flow completed successfully');\n        } else {\n          console.log('âš ï¸ No Order Blocks found for execution, skipping order placement');\n        }\n      } else {\n        console.log(`âš ï¸ Hologram status ${bestHologram.status} not suitable for signal generation`);\n      }\n    }, 30000); // 30 second timeout for full flow\n\n    it('should handle hologram scan with multiple symbols', async () => {\n      console.log('ðŸ” Testing multi-symbol hologram scan...');\n      \n      const scanResult = await hologramScanner.scan();\n      \n      // Verify scan results\n      expect(scanResult.symbols.length).toBeGreaterThanOrEqual(mockTopSymbols.length);\n      expect(scanResult.successCount).toBeGreaterThan(0);\n      expect(scanResult.errorCount).toBeGreaterThanOrEqual(0);\n      \n      // Verify ranking\n      const rankedSymbols = hologramScanner.rankByAlignment(scanResult.symbols);\n      expect(rankedSymbols.length).toBe(scanResult.symbols.length);\n      \n      // Verify top 20 selection\n      const top20 = hologramScanner.selectTop20(rankedSymbols);\n      expect(top20.length).toBeLessThanOrEqual(20);\n      expect(top20.length).toBeLessThanOrEqual(rankedSymbols.length);\n      \n      console.log(`âœ… Multi-symbol scan complete: ${scanResult.symbols.length} symbols processed`);\n    });\n\n    it('should validate session transitions and killzone detection', async () => {\n      console.log('â° Testing session transitions...');\n      \n      // Test current session\n      const currentSession = sessionProfiler.getSessionState();\n      expect(['ASIAN', 'LONDON', 'NY', 'DEAD_ZONE']).toContain(currentSession.type);\n      \n      // Test killzone detection\n      const isKillzone = sessionProfiler.isKillzone();\n      expect(typeof isKillzone).toBe('boolean');\n      \n      if (currentSession.type === 'LONDON' || currentSession.type === 'NY') {\n        expect(isKillzone).toBe(true);\n      } else {\n        expect(isKillzone).toBe(false);\n      }\n      \n      // Test Asian range storage\n      sessionProfiler.storeAsianRange(mockOHLCVData);\n      const asianRange = sessionProfiler.getAsianRange();\n      \n      if (asianRange) {\n        expect(asianRange.high).toBeGreaterThan(asianRange.low);\n        expect(asianRange.timestamp).toBeGreaterThan(0);\n      }\n      \n      console.log(`âœ… Session validation complete: ${currentSession.type} session, killzone=${isKillzone}`);\n    });\n\n    it('should detect and validate POIs correctly', async () => {\n      console.log('ðŸŽ¯ Testing POI detection and validation...');\n      \n      const candles = mockOHLCVData;\n      \n      // Test FVG detection\n      const fvgs = inefficiencyMapper.detectFVG(candles);\n      expect(Array.isArray(fvgs)).toBe(true);\n      \n      for (const fvg of fvgs) {\n        expect(['BULLISH', 'BEARISH']).toContain(fvg.type);\n        expect(fvg.top).toBeGreaterThan(fvg.bottom);\n        expect(fvg.midpoint).toBeGreaterThan(fvg.bottom);\n        expect(fvg.midpoint).toBeLessThan(fvg.top);\n        expect(fvg.mitigated).toBe(false);\n      }\n      \n      // Test Order Block detection (need BOS events)\n      const mockBOS = [\n        {\n          direction: 'BULLISH' as const,\n          price: 49000,\n          barIndex: 5,\n          timestamp: Date.now(),\n          fractalsBreached: []\n        }\n      ];\n      \n      const orderBlocks = inefficiencyMapper.detectOrderBlock(candles, mockBOS);\n      expect(Array.isArray(orderBlocks)).toBe(true);\n      \n      for (const ob of orderBlocks) {\n        expect(['BULLISH', 'BEARISH']).toContain(ob.type);\n        expect(ob.high).toBeGreaterThan(ob.low);\n        expect(ob.confidence).toBeGreaterThan(0);\n        expect(ob.mitigated).toBe(false);\n      }\n      \n      // Test POI validation\n      const currentPrice = 50000;\n      for (const fvg of fvgs) {\n        const isValid = inefficiencyMapper.validatePOI(fvg, currentPrice);\n        expect(typeof isValid).toBe('boolean');\n      }\n      \n      console.log(`âœ… POI detection complete: ${fvgs.length} FVGs, ${orderBlocks.length} Order Blocks`);\n    });\n\n    it('should calculate CVD and detect absorption patterns', async () => {\n      console.log('ðŸ“Š Testing CVD calculation and absorption detection...');\n      \n      // Record mock trades\n      for (const trade of mockBinanceTrades) {\n        cvdValidator.recordTrade(trade);\n      }\n      \n      // Calculate CVD\n      const windowMs = 10 * 60 * 1000; // 10 minutes\n      const cvd = cvdValidator.calcCVD(mockBinanceTrades, windowMs);\n      expect(typeof cvd).toBe('number');\n      \n      // Test absorption detection\n      const prices = [50000, 49800, 49600, 49900, 50200]; // Lower Low pattern\n      const cvdValues = [100, 120, 140, 160, 180]; // Higher Low pattern\n      \n      const absorption = cvdValidator.detectAbsorption(prices, cvdValues);\n      expect(absorption).toBeDefined();\n      \n      if (absorption) {\n        expect(absorption.price).toBeGreaterThan(0);\n        expect(absorption.cvdDelta).toBeGreaterThan(0);\n        expect(absorption.confidence).toBeGreaterThan(0);\n        expect(absorption.confidence).toBeLessThanOrEqual(100);\n      }\n      \n      // Test distribution detection\n      const distributionPrices = [50000, 50200, 50400, 50100, 49800]; // Higher High pattern\n      const distributionCVD = [100, 80, 60, 40, 20]; // Lower High pattern\n      \n      const distribution = cvdValidator.detectDistribution(distributionPrices, distributionCVD);\n      expect(distribution).toBeDefined();\n      \n      console.log(`âœ… CVD validation complete: CVD=${cvd.toFixed(2)}`);\n    });\n\n    it('should handle order execution and monitoring', async () => {\n      console.log('âš¡ Testing order execution and monitoring...');\n      \n      // Create mock signal\n      const mockSignal: SignalData = {\n        symbol: 'BTCUSDT',\n        direction: 'LONG',\n        hologramStatus: 'A+',\n        alignmentScore: 85,\n        rsScore: 0.03,\n        sessionType: 'LONDON',\n        poiType: 'ORDER_BLOCK',\n        cvdConfirmation: true,\n        confidence: 90,\n        entryPrice: 50000,\n        stopLoss: 49250,\n        takeProfit: 52250,\n        positionSize: 0.1,\n        leverage: 3,\n        timestamp: Date.now()\n      };\n      \n      // Create mock Order Block\n      const mockOrderBlock: OrderBlock = {\n        type: 'BULLISH',\n        high: 50100,\n        low: 49900,\n        barIndex: 5,\n        timestamp: Date.now(),\n        mitigated: false,\n        confidence: 90\n      };\n      \n      const equity = 10000;\n      \n      // Test order placement\n      const executionResult = await limitOrderExecutor.placePostOnlyOrder(\n        mockSignal,\n        mockOrderBlock,\n        equity\n      );\n      \n      expect(executionResult.success).toBe(true);\n      expect(executionResult.orderId).toBeDefined();\n      expect(executionResult.positionSize).toBeGreaterThan(0);\n      \n      // Verify order is being monitored\n      const activeOrders = limitOrderExecutor.getActiveOrders();\n      expect(activeOrders.length).toBe(1);\n      \n      const monitoredOrder = activeOrders[0];\n      expect(monitoredOrder.orderId).toBe(executionResult.orderId);\n      expect(monitoredOrder.symbol).toBe(mockSignal.symbol);\n      expect(monitoredOrder.cancelled).toBe(false);\n      expect(monitoredOrder.filled).toBe(false);\n      \n      // Test order cancellation\n      const cancelResult = await limitOrderExecutor.cancelIfPriceMoves(\n        executionResult.orderId!,\n        51000 // Price moved 2% away\n      );\n      expect(cancelResult).toBe(true);\n      \n      console.log(`âœ… Order execution test complete: Order ${executionResult.orderId} placed and cancelled`);\n    });\n\n    it('should handle error conditions gracefully', async () => {\n      console.log('âŒ Testing error handling...');\n      \n      // Test with invalid symbol\n      try {\n        await hologramEngine.analyze('INVALID_SYMBOL');\n        // Should not reach here\n        expect(true).toBe(false);\n      } catch (error) {\n        expect(error).toBeDefined();\n        expect(error instanceof Error).toBe(true);\n      }\n      \n      // Test empty candle data\n      const emptyFVGs = inefficiencyMapper.detectFVG([]);\n      expect(emptyFVGs).toEqual([]);\n      \n      // Test CVD with no trades\n      const emptyCVD = cvdValidator.calcCVD([], 60000);\n      expect(emptyCVD).toBe(0);\n      \n      // Test order execution with invalid parameters\n      const invalidSignal: SignalData = {\n        symbol: '',\n        direction: 'LONG',\n        hologramStatus: 'A+',\n        alignmentScore: 85,\n        rsScore: 0.03,\n        sessionType: 'LONDON',\n        poiType: 'ORDER_BLOCK',\n        cvdConfirmation: true,\n        confidence: 90,\n        entryPrice: 0, // Invalid price\n        stopLoss: 0,\n        takeProfit: 0,\n        positionSize: 0,\n        leverage: 3,\n        timestamp: Date.now()\n      };\n      \n      const invalidOrderBlock: OrderBlock = {\n        type: 'BULLISH',\n        high: 0,\n        low: 0,\n        barIndex: 0,\n        timestamp: 0,\n        mitigated: false,\n        confidence: 0\n      };\n      \n      const invalidExecution = await limitOrderExecutor.placePostOnlyOrder(\n        invalidSignal,\n        invalidOrderBlock,\n        10000\n      );\n      \n      expect(invalidExecution.success).toBe(false);\n      expect(invalidExecution.error).toBeDefined();\n      \n      console.log('âœ… Error handling test complete');\n    });\n  });\n\n  describe('Performance and Reliability', () => {\n    it('should complete hologram scan within reasonable time', async () => {\n      const startTime = Date.now();\n      const scanResult = await hologramScanner.scan();\n      const duration = Date.now() - startTime;\n      \n      expect(duration).toBeLessThan(30000); // Should complete within 30 seconds\n      expect(scanResult.scanDuration).toBeLessThan(30000);\n      \n      console.log(`â±ï¸ Scan performance: ${duration}ms (${scanResult.symbols.length} symbols)`);\n    });\n\n    it('should handle concurrent operations', async () => {\n      console.log('ðŸ”„ Testing concurrent operations...');\n      \n      // Run multiple hologram analyses concurrently\n      const symbols = ['BTCUSDT', 'ETHUSDT'];\n      const promises = symbols.map(symbol => hologramEngine.analyze(symbol));\n      \n      const results = await Promise.all(promises);\n      \n      expect(results.length).toBe(symbols.length);\n      for (let i = 0; i < results.length; i++) {\n        expect(results[i].symbol).toBe(symbols[i]);\n        expect(results[i].alignmentScore).toBeGreaterThanOrEqual(0);\n        expect(results[i].alignmentScore).toBeLessThanOrEqual(100);\n      }\n      \n      console.log('âœ… Concurrent operations test complete');\n    });\n\n    it('should maintain data consistency across components', async () => {\n      console.log('ðŸ”„ Testing data consistency...');\n      \n      const symbol = 'BTCUSDT';\n      \n      // Get hologram state\n      const hologram = await hologramEngine.analyze(symbol);\n      \n      // Verify data consistency\n      expect(hologram.symbol).toBe(symbol);\n      expect(hologram.daily.timeframe).toBe('1D');\n      expect(hologram.h4.timeframe).toBe('4H');\n      expect(hologram.m15.timeframe).toBe('15m');\n      \n      // Verify price consistency across timeframes\n      expect(hologram.daily.currentPrice).toBeGreaterThan(0);\n      expect(hologram.h4.currentPrice).toBeGreaterThan(0);\n      expect(hologram.m15.currentPrice).toBeGreaterThan(0);\n      \n      // Verify dealing ranges are valid\n      expect(hologram.daily.dealingRange.high).toBeGreaterThan(hologram.daily.dealingRange.low);\n      expect(hologram.h4.dealingRange.high).toBeGreaterThan(hologram.h4.dealingRange.low);\n      expect(hologram.m15.dealingRange.high).toBeGreaterThan(hologram.m15.dealingRange.low);\n      \n      console.log('âœ… Data consistency test complete');\n    });\n  });\n});"],"version":3}