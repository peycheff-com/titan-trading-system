{"file":"/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/unit/SignalGenerator.test.ts","mappings":"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","names":[],"sources":["/Users/ivan/Code/trading/titan/services/titan-phase2-hunter/tests/unit/SignalGenerator.test.ts"],"sourcesContent":["/**\n * Unit tests for SignalGenerator\n */\n\nimport { SignalGenerator, SignalGeneratorConfig, SignalContext } from '../../src/execution/SignalGenerator';\nimport { HologramEngine } from '../../src/engine/HologramEngine';\nimport { SessionProfiler } from '../../src/engine/SessionProfiler';\nimport { InefficiencyMapper } from '../../src/engine/InefficiencyMapper';\nimport { CVDValidator } from '../../src/engine/CVDValidator';\nimport { \n  HologramState, \n  SessionState, \n  POI, \n  FVG, \n  OrderBlock, \n  LiquidityPool,\n  Absorption,\n  SignalData\n} from '../../src/types';\n\n// Mock implementations\nclass MockHologramEngine {\n  async analyze(symbol: string): Promise<HologramState> {\n    return {\n      symbol,\n      timestamp: Date.now(),\n      daily: {\n        timeframe: '1D',\n        trend: 'BULL',\n        dealingRange: { high: 52000, low: 48000, midpoint: 50000, premiumThreshold: 50000, discountThreshold: 50000, range: 4000 },\n        currentPrice: 49000,\n        location: 'DISCOUNT',\n        fractals: [],\n        bos: [],\n        mss: null\n      },\n      h4: {\n        timeframe: '4H',\n        trend: 'BULL',\n        dealingRange: { high: 50500, low: 49000, midpoint: 49750, premiumThreshold: 49750, discountThreshold: 49750, range: 1500 },\n        currentPrice: 49000,\n        location: 'DISCOUNT',\n        fractals: [],\n        bos: [],\n        mss: null\n      },\n      m15: {\n        timeframe: '15m',\n        trend: 'BULL',\n        dealingRange: { high: 49200, low: 48800, midpoint: 49000, premiumThreshold: 49000, discountThreshold: 49000, range: 400 },\n        currentPrice: 49000,\n        location: 'EQUILIBRIUM',\n        fractals: [],\n        bos: [],\n        mss: { direction: 'BULLISH', price: 49000, barIndex: 10, timestamp: Date.now(), significance: 80 }\n      },\n      alignmentScore: 85,\n      status: 'A+',\n      veto: { vetoed: false, reason: null, direction: null },\n      rsScore: 0.03\n    };\n  }\n}\n\nclass MockSessionProfiler {\n  getSessionState(): SessionState {\n    return {\n      type: 'LONDON',\n      startTime: 7,\n      endTime: 10,\n      timeRemaining: 2.5\n    };\n  }\n\n  isKillzone(): boolean {\n    return true;\n  }\n}\n\nclass MockInefficiencyMapper {\n  // Mock implementation - not used directly in SignalGenerator\n}\n\nclass MockCVDValidator {\n  // Mock implementation - not used directly in SignalGenerator\n}\n\ndescribe('SignalGenerator', () => {\n  let signalGenerator: SignalGenerator;\n  let mockHologramEngine: MockHologramEngine;\n  let mockSessionProfiler: MockSessionProfiler;\n  let mockInefficiencyMapper: MockInefficiencyMapper;\n  let mockCVDValidator: MockCVDValidator;\n\n  beforeEach(() => {\n    mockHologramEngine = new MockHologramEngine();\n    mockSessionProfiler = new MockSessionProfiler();\n    mockInefficiencyMapper = new MockInefficiencyMapper();\n    mockCVDValidator = new MockCVDValidator();\n\n    signalGenerator = new SignalGenerator(\n      mockHologramEngine as any,\n      mockSessionProfiler as any,\n      mockInefficiencyMapper as any,\n      mockCVDValidator as any\n    );\n  });\n\n  describe('checkHologramStatus', () => {\n    it('should return true for A+ status with no veto', () => {\n      const hologram: HologramState = {\n        symbol: 'BTCUSDT',\n        timestamp: Date.now(),\n        daily: {} as any,\n        h4: {} as any,\n        m15: {} as any,\n        alignmentScore: 85,\n        status: 'A+',\n        veto: { vetoed: false, reason: null, direction: null },\n        rsScore: 0.03\n      };\n\n      const result = signalGenerator.checkHologramStatus(hologram);\n      expect(result).toBe(true);\n    });\n\n    it('should return true for B status with sufficient alignment score', () => {\n      const hologram: HologramState = {\n        symbol: 'BTCUSDT',\n        timestamp: Date.now(),\n        daily: {} as any,\n        h4: {} as any,\n        m15: {} as any,\n        alignmentScore: 70,\n        status: 'B',\n        veto: { vetoed: false, reason: null, direction: null },\n        rsScore: 0.03\n      };\n\n      const result = signalGenerator.checkHologramStatus(hologram);\n      expect(result).toBe(true);\n    });\n\n    it('should return false for B status with insufficient alignment score', () => {\n      const hologram: HologramState = {\n        symbol: 'BTCUSDT',\n        timestamp: Date.now(),\n        daily: {} as any,\n        h4: {} as any,\n        m15: {} as any,\n        alignmentScore: 50,\n        status: 'B',\n        veto: { vetoed: false, reason: null, direction: null },\n        rsScore: 0.03\n      };\n\n      const result = signalGenerator.checkHologramStatus(hologram);\n      expect(result).toBe(false);\n    });\n\n    it('should return false for CONFLICT status', () => {\n      const hologram: HologramState = {\n        symbol: 'BTCUSDT',\n        timestamp: Date.now(),\n        daily: {} as any,\n        h4: {} as any,\n        m15: {} as any,\n        alignmentScore: 85,\n        status: 'CONFLICT',\n        veto: { vetoed: false, reason: null, direction: null },\n        rsScore: 0.03\n      };\n\n      const result = signalGenerator.checkHologramStatus(hologram);\n      expect(result).toBe(false);\n    });\n\n    it('should return false when veto is active', () => {\n      const hologram: HologramState = {\n        symbol: 'BTCUSDT',\n        timestamp: Date.now(),\n        daily: {} as any,\n        h4: {} as any,\n        m15: {} as any,\n        alignmentScore: 85,\n        status: 'A+',\n        veto: { vetoed: true, reason: 'Premium veto', direction: 'LONG' },\n        rsScore: 0.03\n      };\n\n      const result = signalGenerator.checkHologramStatus(hologram);\n      expect(result).toBe(false);\n    });\n  });\n\n  describe('checkSession', () => {\n    it('should return true when in killzone', () => {\n      const session: SessionState = {\n        type: 'LONDON',\n        startTime: 7,\n        endTime: 10,\n        timeRemaining: 2.5\n      };\n\n      const result = signalGenerator.checkSession(session);\n      expect(result).toBe(true);\n    });\n\n    it('should return false when not in killzone', () => {\n      // Mock the session profiler to return false for killzone\n      jest.spyOn(mockSessionProfiler, 'isKillzone').mockReturnValue(false);\n\n      const session: SessionState = {\n        type: 'DEAD_ZONE',\n        startTime: 21,\n        endTime: 1,\n        timeRemaining: 4\n      };\n\n      const result = signalGenerator.checkSession(session);\n      expect(result).toBe(false);\n    });\n  });\n\n  describe('checkRSScore', () => {\n    it('should return true for LONG direction with positive RS above threshold', () => {\n      const result = signalGenerator.checkRSScore(0.03, 'LONG');\n      expect(result).toBe(true);\n    });\n\n    it('should return false for LONG direction with RS below threshold', () => {\n      const result = signalGenerator.checkRSScore(0.005, 'LONG');\n      expect(result).toBe(false);\n    });\n\n    it('should return true for SHORT direction with negative RS below threshold', () => {\n      const result = signalGenerator.checkRSScore(-0.03, 'SHORT');\n      expect(result).toBe(true);\n    });\n\n    it('should return false for SHORT direction with RS above threshold', () => {\n      const result = signalGenerator.checkRSScore(-0.005, 'SHORT');\n      expect(result).toBe(false);\n    });\n  });\n\n  describe('checkPOIProximity', () => {\n    it('should return true when price is within proximity of bullish FVG for LONG', () => {\n      const currentPrice = 49000;\n      const fvg: FVG = {\n        type: 'BULLISH',\n        top: 49100,\n        bottom: 48900,\n        midpoint: 49000,\n        barIndex: 10,\n        timestamp: Date.now(),\n        mitigated: false,\n        fillPercent: 0\n      };\n\n      const result = signalGenerator.checkPOIProximity(currentPrice, [fvg], 'LONG');\n      expect(result.valid).toBe(true);\n      expect(result.poi).toBe(fvg);\n    });\n\n    it('should return true when price is within proximity of bullish Order Block for LONG', () => {\n      const currentPrice = 49000;\n      const ob: OrderBlock = {\n        type: 'BULLISH',\n        high: 49100,\n        low: 48950,\n        barIndex: 10,\n        timestamp: Date.now(),\n        mitigated: false,\n        confidence: 90\n      };\n\n      const result = signalGenerator.checkPOIProximity(currentPrice, [ob], 'LONG');\n      expect(result.valid).toBe(true);\n      expect(result.poi).toBe(ob);\n    });\n\n    it('should return false when price is too far from POI', () => {\n      const currentPrice = 49000;\n      const fvg: FVG = {\n        type: 'BULLISH',\n        top: 50000,\n        bottom: 49800,\n        midpoint: 49900,\n        barIndex: 10,\n        timestamp: Date.now(),\n        mitigated: false,\n        fillPercent: 0\n      };\n\n      const result = signalGenerator.checkPOIProximity(currentPrice, [fvg], 'LONG');\n      expect(result.valid).toBe(false);\n      expect(result.poi).toBe(null);\n    });\n\n    it('should return false when POI is mitigated', () => {\n      const currentPrice = 49000;\n      const fvg: FVG = {\n        type: 'BULLISH',\n        top: 49100,\n        bottom: 48900,\n        midpoint: 49000,\n        barIndex: 10,\n        timestamp: Date.now(),\n        mitigated: true,\n        fillPercent: 100\n      };\n\n      const result = signalGenerator.checkPOIProximity(currentPrice, [fvg], 'LONG');\n      expect(result.valid).toBe(false);\n      expect(result.poi).toBe(null);\n    });\n  });\n\n  describe('checkCVDAbsorption', () => {\n    it('should return true when CVD confirmation is not required', () => {\n      const config: Partial<SignalGeneratorConfig> = {\n        requireCVDConfirmation: false\n      };\n      \n      const generator = new SignalGenerator(\n        mockHologramEngine as any,\n        mockSessionProfiler as any,\n        mockInefficiencyMapper as any,\n        mockCVDValidator as any,\n        config\n      );\n\n      const result = generator.checkCVDAbsorption(null, 'LONG');\n      expect(result).toBe(true);\n    });\n\n    it('should return true when absorption has sufficient confidence', () => {\n      const absorption: Absorption = {\n        price: 49000,\n        cvdValue: 1000000,\n        timestamp: Date.now(),\n        confidence: 85\n      };\n\n      const result = signalGenerator.checkCVDAbsorption(absorption, 'LONG');\n      expect(result).toBe(true);\n    });\n\n    it('should return false when absorption confidence is too low', () => {\n      const absorption: Absorption = {\n        price: 49000,\n        cvdValue: 1000000,\n        timestamp: Date.now(),\n        confidence: 50\n      };\n\n      const result = signalGenerator.checkCVDAbsorption(absorption, 'LONG');\n      expect(result).toBe(false);\n    });\n\n    it('should return false when no absorption is provided and CVD is required', () => {\n      const result = signalGenerator.checkCVDAbsorption(null, 'LONG');\n      expect(result).toBe(false);\n    });\n  });\n\n  describe('validateSignal', () => {\n    it('should return valid signal when all conditions are met', () => {\n      const context: SignalContext = {\n        hologram: {\n          symbol: 'BTCUSDT',\n          timestamp: Date.now(),\n          daily: {} as any,\n          h4: {} as any,\n          m15: {} as any,\n          alignmentScore: 85,\n          status: 'A+',\n          veto: { vetoed: false, reason: null, direction: null },\n          rsScore: 0.03\n        },\n        session: {\n          type: 'LONDON',\n          startTime: 7,\n          endTime: 10,\n          timeRemaining: 2.5\n        },\n        currentPrice: 49000,\n        nearbyPOIs: [{\n          type: 'BULLISH',\n          top: 49100,\n          bottom: 48900,\n          midpoint: 49000,\n          barIndex: 10,\n          timestamp: Date.now(),\n          mitigated: false,\n          fillPercent: 0\n        } as FVG],\n        absorption: {\n          price: 49000,\n          cvdValue: 1000000,\n          timestamp: Date.now(),\n          confidence: 85\n        },\n        atr: 0.02\n      };\n\n      const result = signalGenerator.validateSignal(context, 'LONG');\n      expect(result.valid).toBe(true);\n      expect(result.reason).toBe('All conditions met');\n      expect(result.hologramValid).toBe(true);\n      expect(result.sessionValid).toBe(true);\n      expect(result.rsValid).toBe(true);\n      expect(result.poiValid).toBe(true);\n      expect(result.cvdValid).toBe(true);\n    });\n\n    it('should return invalid signal when hologram status is insufficient', () => {\n      const context: SignalContext = {\n        hologram: {\n          symbol: 'BTCUSDT',\n          timestamp: Date.now(),\n          daily: {} as any,\n          h4: {} as any,\n          m15: {} as any,\n          alignmentScore: 85,\n          status: 'CONFLICT',\n          veto: { vetoed: false, reason: null, direction: null },\n          rsScore: 0.03\n        },\n        session: {\n          type: 'LONDON',\n          startTime: 7,\n          endTime: 10,\n          timeRemaining: 2.5\n        },\n        currentPrice: 49000,\n        nearbyPOIs: [],\n        absorption: null,\n        atr: 0.02\n      };\n\n      const result = signalGenerator.validateSignal(context, 'LONG');\n      expect(result.valid).toBe(false);\n      expect(result.hologramValid).toBe(false);\n      expect(result.reason).toContain('Hologram status invalid');\n    });\n  });\n\n  describe('configuration management', () => {\n    it('should update configuration correctly', () => {\n      const newConfig: Partial<SignalGeneratorConfig> = {\n        minAlignmentScore: 70,\n        rsThreshold: 0.02\n      };\n\n      signalGenerator.updateConfig(newConfig);\n      const config = signalGenerator.getConfig();\n\n      expect(config.minAlignmentScore).toBe(70);\n      expect(config.rsThreshold).toBe(0.02);\n      expect(config.poiProximityPercent).toBe(0.5); // Should retain default\n    });\n\n    it('should return current configuration', () => {\n      const config = signalGenerator.getConfig();\n      \n      expect(config.minAlignmentScore).toBe(60);\n      expect(config.rsThreshold).toBe(0.01);\n      expect(config.poiProximityPercent).toBe(0.5);\n      expect(config.minCVDConfidence).toBe(70);\n      expect(config.requireCVDConfirmation).toBe(true);\n    });\n  });\n});"],"version":3}