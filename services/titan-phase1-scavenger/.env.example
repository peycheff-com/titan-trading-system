# Titan Phase 1 - Scavenger (Predestination Engine)
# Environment Configuration Template

# ============================================================================
# CREDENTIAL ENCRYPTION
# ============================================================================

# Master password for encrypting/decrypting exchange API credentials
# REQUIRED: Must be at least 12 characters long
# This password is used to encrypt credentials stored in ~/.titan-scanner/secrets.enc
# NEVER commit this password to version control!
TITAN_MASTER_PASSWORD=your-secure-master-password-here

# ============================================================================
# EXCHANGE API CREDENTIALS
# ============================================================================
# 
# NOTE: These credentials will be encrypted and stored securely using AES-256-GCM.
# After initial setup, credentials are loaded from ~/.titan-scanner/secrets.enc
# You can remove these from .env after first run for additional security.
# ============================================================================

# Binance Spot (Signal Validator - Leader)
# Get API keys from: https://www.binance.com/en/my/settings/api-management
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_API_SECRET=your_binance_api_secret_here

# Bybit Perpetuals (Execution Target - Follower)
# Get API keys from: https://www.bybit.com/app/user/api-management
BYBIT_API_KEY=your_bybit_api_key_here
BYBIT_API_SECRET=your_bybit_api_secret_here

# MEXC Perpetuals (Optional Execution Target)
# Get API keys from: https://www.mexc.com/user/openapi
MEXC_API_KEY=your_mexc_api_key_here
MEXC_API_SECRET=your_mexc_api_secret_here

# ============================================================================
# TRAP CONFIGURATION
# ============================================================================

# Pre-Computation Layer Settings
TRAP_UPDATE_INTERVAL=60000          # Trap map update interval (ms) - default: 60000 (1 minute)
TOP_SYMBOLS_COUNT=20                # Number of symbols to monitor - default: 20

# Tripwire Confidence Levels (0-100)
LIQUIDATION_CONFIDENCE=95           # Liquidation cluster trap confidence
DAILY_LEVEL_CONFIDENCE=85           # Daily level trap confidence
BOLLINGER_CONFIDENCE=90             # Bollinger breakout trap confidence

# Volume Validation Settings
MIN_TRADES_IN_100MS=50              # Minimum trades required for volume confirmation
VOLUME_WINDOW_MS=100                # Volume accumulation window (ms)

# ============================================================================
# EXECUTION SETTINGS
# ============================================================================

# Velocity Thresholds (for order type selection)
EXTREME_VELOCITY_THRESHOLD=0.005    # > 0.5%/s → Market Order
MODERATE_VELOCITY_THRESHOLD=0.001   # 0.1-0.5%/s → Aggressive Limit
AGGRESSIVE_LIMIT_MARKUP=0.002       # 0.2% markup for aggressive limits

# Risk Management
MAX_LEVERAGE=20                     # Maximum leverage allowed
STOP_LOSS_PERCENT=0.01              # Stop loss distance (1%)
TARGET_PERCENT=0.03                 # Take profit target (3%)

# ============================================================================
# EXCHANGE EXECUTION TOGGLES
# ============================================================================

# Binance (always enabled for signal validation)
BINANCE_ENABLED=true

# Bybit Execution
BYBIT_ENABLED=true
BYBIT_EXECUTE_ON=true               # Set to false to disable Bybit execution

# MEXC Execution
MEXC_ENABLED=false
MEXC_EXECUTE_ON=false               # Set to true to enable MEXC execution

# ============================================================================
# SYSTEM SETTINGS
# ============================================================================

# Logging
LOG_LEVEL=info                      # Log level: debug, info, warn, error
LOG_FILE=trades.jsonl               # Trade log file path

# Performance
EQUITY_CACHE_INTERVAL=5000          # Equity cache update interval (ms)
TRAP_COOLDOWN_MS=300000             # Trap cooldown period (5 minutes)
ORDER_TIMEOUT_MS=2000               # Order placement timeout (2 seconds)

# ============================================================================
# STRUCTURAL FLAW DETECTORS (Bulgaria-Optimized)
# ============================================================================

# OI Wipeout Detector
OI_WIPEOUT_PRICE_DROP_THRESHOLD=0.03    # 3% price drop required
OI_WIPEOUT_OI_DROP_THRESHOLD=0.20       # 20% OI drop required

# Funding Squeeze Detector
FUNDING_SQUEEZE_THRESHOLD=-0.0002       # Negative funding rate threshold

# Basis Arb Detector
BASIS_ARB_THRESHOLD=0.005               # 0.5% basis required
BASIS_ARB_MIN_VOLUME=1000000            # $1M minimum 24h volume

# Ultimate Bulgaria Protocol
IDIOSYNCRATIC_CRASH_THRESHOLD=0.03      # 3% drop required
BTC_FLAT_THRESHOLD=0.005                # BTC must be < 0.5% to qualify

# ============================================================================
# TITAN EXECUTION SERVICE INTEGRATION
# ============================================================================

# Fast Path IPC socket path for communication with titan-execution service
# Default: /tmp/titan-ipc.sock
TITAN_IPC_SOCKET=/tmp/titan-ipc.sock

# HMAC secret for signing IPC messages (must match titan-execution)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
TITAN_HMAC_SECRET=your_hmac_secret_here_must_be_at_least_32_characters

# Execution service URL for HTTP fallback (if IPC fails)
# Default: http://localhost:8080
TITAN_EXECUTION_URL=http://localhost:8080

# ============================================================================
# CONSOLE INTEGRATION (Requirements 12.1-12.4)
# ============================================================================

# Titan Console URL for pushing real-time updates
# Set this to enable real-time updates in the Console
# Leave empty to disable Console integration
# Example: http://localhost:3000
CONSOLE_URL=http://localhost:3000

# ============================================================================
# NOTES
# ============================================================================
# 
# 1. Copy this file to .env and fill in your actual API keys
# 2. NEVER commit .env to version control
# 3. Use testnet credentials for testing before going live
# 4. Start with small position sizes and low leverage
# 5. Monitor the system closely during first 24 hours
# 
# Testnet URLs:
# - Bybit Testnet: https://testnet.bybit.com
# - Binance Testnet: https://testnet.binance.vision
# 
# ============================================================================
