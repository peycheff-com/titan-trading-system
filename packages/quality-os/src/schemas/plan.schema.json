{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "QualityPlan",
  "type": "object",
  "properties": {
    "id": { "type": "string" },
    "trigger": { "enum": ["pull_request", "push", "schedule", "manual"] },
    "input_vectors": {
        "type": "object",
        "properties": {
            "base_sha": { "type": "string" },
            "head_sha": { "type": "string" },
            "changed_files": { "type": "array", "items": { "type": "string" } }
        }
    },
    "risk_analysis": {
        "type": "object",
        "properties": {
            "tier": { "enum": ["High", "Medium", "Low"] },
            "reasons": { "type": "array", "items": { "type": "string" } }
        }
    },
    "execution_plan": {
        "type": "object",
        "properties": {
            "required_gates": { "type": "array", "items": { "type": "string" } },
            "matrix": { "type": "object" }
        }
    }
  }
}
